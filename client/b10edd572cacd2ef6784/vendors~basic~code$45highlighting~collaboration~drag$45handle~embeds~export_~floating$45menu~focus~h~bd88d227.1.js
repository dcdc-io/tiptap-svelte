(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"AllSelection",(function(){return d})),n.d(t,"EditorState",(function(){return k})),n.d(t,"NodeSelection",(function(){return p})),n.d(t,"Plugin",(function(){return $})),n.d(t,"PluginKey",(function(){return T})),n.d(t,"Selection",(function(){return s})),n.d(t,"SelectionRange",(function(){return c})),n.d(t,"TextSelection",(function(){return l})),n.d(t,"Transaction",(function(){return v}));var r=n(12),i=n(26),o=Object.create(null),s=function(e,t,n){this.ranges=n||[new c(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(e,t){void 0===t&&(t=r.Slice.empty);for(var n=t.content.lastChild,i=null,o=0;o<t.openEnd;o++)i=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],h=l.$from,p=l.$to,u=e.mapping.slice(s);e.replaceRange(u.map(h.pos),u.map(p.pos),c?r.Slice.empty:t),0==c&&g(e,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}},s.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=e.mapping.slice(n),l=c.map(s.pos),h=c.map(a.pos);i?e.deleteRange(l,h):(e.replaceRangeWith(l,h,t),g(e,n,t.isInline?-1:1))}},s.findFrom=function(e,t,n){var r=e.parent.inlineContent?new l(e):m(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var i=e.depth-1;i>=0;i--){var o=t<0?m(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):m(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}},s.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new d(e.node(0))},s.atStart=function(e){return m(e,e,0,0,1)||new d(e)},s.atEnd=function(e){return m(e,e,e.content.size,e.childCount,-1)||new d(e)},s.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=o[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function(e,t){if(e in o)throw new RangeError("Duplicate use of selection JSON ID "+e);return o[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(e,t){this.$from=e,this.$to=t},l=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return e.near(i);var o=n.resolve(r.map(this.anchor));return new t(o.parent.inlineContent?o:i,i)},t.prototype.replace=function(t,n){if(void 0===n&&(n=r.Slice.empty),e.prototype.replace.call(this,t,n),n==r.Slice.empty){var i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new h(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,i,!0)||e.findFrom(r,-i,!0);if(!s)return e.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o?n=r:(n=(e.findFrom(n,-i,!0)||e.findFrom(n,i,!0)).$anchor).pos<r.pos!=o<0&&(n=r)),new t(n,r)},Object.defineProperties(t.prototype,n),t}(s);s.jsonID("text",l);var h=function(e,t){this.anchor=e,this.head=t};h.prototype.map=function(e){return new h(e.map(this.anchor),e.map(this.head))},h.prototype.resolve=function(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))};var p=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?e.near(a):new t(a)},t.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new u(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(s);p.prototype.visible=!1,s.jsonID("node",p);var u=function(e){this.anchor=e};u.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new h(r,r):new u(r)},u.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&p.isSelectable(n)?new p(t):s.near(t)};var d=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return f},t}(s);s.jsonID("all",d);var f={map:function(){return this},resolve:function(e){return new d(e)}};function m(e,t,n,r,i,o){if(t.inlineContent)return l.create(e,n);for(var s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){var a=t.child(s);if(a.isAtom){if(!o&&p.isSelectable(a))return p.create(e,n-(i<0?a.nodeSize:0))}else{var c=m(e,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function g(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,a=e.steps[r];if(a instanceof i.b||a instanceof i.a)e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(s.near(e.doc.resolve(o),n))}}var v=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(t);i=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(i.c);function y(e,t){return t&&e?e.bind(t):e}var b=function(e,t,n){this.name=e,this.init=y(t.init,n),this.apply=y(t.apply,n)},w=[new b("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new b("selection",{init:function(e,t){return e.selection||s.atStart(t.doc)},apply:function(e){return e.selection}}),new b("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],x=function(e,t){var n=this;this.schema=e,this.fields=w.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new b(e.key,e.spec.state,e))}))},k=function(e){this.config=e},_={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};_.schema.get=function(){return this.config.schema},_.plugins.get=function(){return this.config.plugins},k.prototype.apply=function(e){return this.applyTransaction(e).state},k.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},k.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,l=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(l&&n.filterTransaction(l,o)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var h=0;h<this.config.plugins.length;h++)r.push(h<o?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}},k.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new k(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}for(var o=0;o<S.length;o++)S[o](this,e,t);return t},_.tr.get=function(){return new v(this)},k.create=function(e){for(var t=new x(e.schema||e.doc.type.schema,e.plugins),n=new k(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},k.prototype.reconfigure=function(e){for(var t=new x(e.schema||this.schema,e.plugins),n=t.fields,r=new k(t),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(e,r)}return r},k.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t},k.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new x(e.schema,e.plugins),o=new k(i);return i.fields.forEach((function(i){if("doc"==i.name)o.doc=r.Node.fromJSON(e.schema,t.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==i.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(o[i.name]=l.fromJSON.call(c,e,t[a],o))}o[i.name]=i.init(e,o)}})),o},k.addApplyListener=function(e){S.push(e)},k.removeApplyListener=function(e){var t=S.indexOf(e);t>-1&&S.splice(t,1)},Object.defineProperties(k.prototype,_);var S=[];var $=function(e){this.props={},e.props&&function e(t,n,r){for(var i in t){var o=t[i];o instanceof Function?o=o.bind(n):"handleDOMEvents"==i&&(o=e(o,n,{})),r[i]=o}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:E("plugin")};$.prototype.getState=function(e){return e[this.key]};var C=Object.create(null);function E(e){return e in C?e+"$"+ ++C[e]:(C[e]=0,e+"$")}var T=function(e){void 0===e&&(e="key"),this.key=E(e)};T.prototype.get=function(e){return e.config.pluginsByKey[this.key]},T.prototype.getState=function(e){return e[this.key]}},,,function(e,t,n){"use strict";function r(e){this.content=e}n.r(t),r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,o=i.find(e),s=i.content.slice();return-1==o?s.push(n||e,t):(s[o+1]=t,n&&(s[o]=n)),new r(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var i=this.remove(t),o=i.content.slice(),s=i.find(e);return o.splice(-1==s?o.length:s,0,t,n),new r(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=r.from(e)).size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=r.from(e)).size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};var i=r;n.d(t,"ContentMatch",(function(){return D})),n.d(t,"DOMParser",(function(){return ee})),n.d(t,"DOMSerializer",(function(){return he})),n.d(t,"Fragment",(function(){return o})),n.d(t,"Mark",(function(){return h})),n.d(t,"MarkType",(function(){return X})),n.d(t,"Node",(function(){return A})),n.d(t,"NodeRange",(function(){return C})),n.d(t,"NodeType",(function(){return K})),n.d(t,"ReplaceError",(function(){return p})),n.d(t,"ResolvedPos",(function(){return x})),n.d(t,"Schema",(function(){return Q})),n.d(t,"Slice",(function(){return u}));var o=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},s={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};o.prototype.nodesBetween=function(e,t,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<t;o++){var a=this.content[o],c=s+a.nodeSize;if(c>e&&!1!==n(a,r+s,i,o)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,e-l),Math.min(a.content.size,t-l),n,r+l)}s=c}},o.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},o.prototype.textBetween=function(e,t,n,r){var i="",o=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(i+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},o.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new o(r,this.size+e.size)},o.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var i=0,s=0;s<t;i++){var a=this.content[i],c=s+a.nodeSize;c>e&&((s<e||c>t)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),n.push(a),r+=a.nodeSize),s=c}return new o(n,r)},o.prototype.cutByIndex=function(e,t){return e==t?o.empty:0==e&&t==this.content.length?this:new o(this.content.slice(e,t))},o.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new o(r,i)},o.prototype.addToStart=function(e){return new o([e].concat(this.content),this.size+e.nodeSize)},o.prototype.addToEnd=function(e){return new o(this.content.concat(e),this.size+e.nodeSize)},o.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},s.firstChild.get=function(){return this.content.length?this.content[0]:null},s.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},s.childCount.get=function(){return this.content.length},o.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},o.prototype.maybeChild=function(e){return this.content[e]},o.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},o.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,n,r){for(var i=0;;i++){if(i==t.childCount||i==n.childCount)return t.childCount==n.childCount?null:r;var o=t.child(i),s=n.child(i);if(o!=s){if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(var a=0;o.text[a]==s.text[a];a++)r++;return r}if(o.content.size||s.content.size){var c=e(o.content,s.content,r+1);if(null!=c)return c}r+=o.nodeSize}else r+=o.nodeSize}}(this,e,t)},o.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),function e(t,n,r,i){for(var o=t.childCount,s=n.childCount;;){if(0==o||0==s)return o==s?null:{a:r,b:i};var a=t.child(--o),c=n.child(--s),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:r,b:i};if(a.isText&&a.text!=c.text){for(var h=0,p=Math.min(a.text.length,c.text.length);h<p&&a.text[a.text.length-h-1]==c.text[c.text.length-h-1];)h++,r--,i--;return{a:r,b:i}}if(a.content.size||c.content.size){var u=e(a.content,c.content,r-1,i-1);if(u)return u}r-=l,i-=l}else r-=l,i-=l}}(this,e,t,n)},o.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=r+this.child(n).nodeSize;if(i>=e)return i==e||t>0?c(n+1,i):c(n,r);r=i}},o.prototype.toString=function(){return"<"+this.toStringInner()+">"},o.prototype.toStringInner=function(){return this.content.join(", ")},o.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},o.fromJSON=function(e,t){if(!t)return o.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new o(t.map(e.nodeFromJSON))},o.fromArray=function(e){if(!e.length)return o.empty;for(var t,n=0,r=0;r<e.length;r++){var i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new o(t||e,n)},o.from=function(e){if(!e)return o.empty;if(e instanceof o)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new o([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(o.prototype,s);var a={index:0,offset:0};function c(e,t){return a.index=e,a.offset=t,a}function l(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!l(e[r],t[r]))return!1}else{for(var i in e)if(!(i in t&&l(e[i],t[i])))return!1;for(var o in t)if(!(o in e))return!1}return!0}o.empty=new o([],0);var h=function(e,t){this.type=e,this.attrs=t};function p(e){var t=Error.call(this,e);return t.__proto__=p.prototype,t}h.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t},h.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},h.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},h.prototype.eq=function(e){return this==e||this.type==e.type&&l(this.attrs,e.attrs)},h.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},h.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},h.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},h.setFrom=function(e){if(!e||0==e.length)return h.none;if(e instanceof h)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},h.none=[],p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="ReplaceError";var u=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},d={size:{configurable:!0}};function f(e,t,n){if(n.openStart>e.depth)throw new p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new p("Inconsistent open depths");return function e(t,n,r,i){var s=t.index(i),a=t.node(i);if(s==n.index(i)&&i<t.depth-r.openStart){var c=e(t,n,r,i+1);return a.copy(a.content.replaceChild(s,c))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=i||n.depth!=i){var l=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),i=n-1;i>=0;i--)r=t.node(i).copy(o.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t),h=l.start,p=l.end;return b(a,function e(t,n,r,i,s){var a=t.depth>s&&g(t,n,s+1),c=i.depth>s&&g(r,i,s+1),l=[];y(null,t,s,l),a&&c&&n.index(s)==r.index(s)?(m(a,c),v(b(a,e(t,n,r,i,s+1)),l)):(a&&v(b(a,w(t,n,s+1)),l),y(n,r,s,l),c&&v(b(c,w(r,i,s+1)),l));return y(i,null,s,l),new o(l)}(t,h,p,n,i))}var u=t.parent,d=u.content;return b(u,d.cut(0,t.parentOffset).append(r.content).append(d.cut(n.parentOffset)))}return b(a,w(t,n,i))}(e,t,n,0)}function m(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function g(e,t,n){var r=e.node(n);return m(r,t.node(n)),r}function v(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function y(e,t,n,r){var i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(v(e.nodeAfter,r),o++));for(var a=o;a<s;a++)v(i.child(a),r);t&&t.depth==n&&t.textOffset&&v(t.nodeBefore,r)}function b(e,t){if(!e.type.validContent(t))throw new p("Invalid content for node "+e.type.name);return e.copy(t)}function w(e,t,n){var r=[];(y(null,e,n,r),e.depth>n)&&v(b(g(e,t,n+1),w(e,t,n+1)),r);return y(t,null,n,r),new o(r)}d.size.get=function(){return this.content.size-this.openStart-this.openEnd},u.prototype.insertAt=function(e,t){var n=function e(t,n,r,i){var o=t.findIndex(n),s=o.index,a=o.offset,c=t.maybeChild(s);if(a==n||c.isText)return i&&!i.canReplace(s,s,r)?null:t.cut(0,n).append(r).append(t.cut(n));var l=e(c.content,n-a-1,r);return l&&t.replaceChild(s,c.copy(l))}(this.content,e+this.openStart,t,null);return n&&new u(n,this.openStart,this.openEnd)},u.prototype.removeBetween=function(e,t){return new u(function e(t,n,r){var i=t.findIndex(n),o=i.index,s=i.offset,a=t.maybeChild(o),c=t.findIndex(r),l=c.index,h=c.offset;if(s==n||a.isText){if(h!=r&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(o!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(o,a.copy(e(a.content,n-s-1,r-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},u.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},u.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},u.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},u.fromJSON=function(e,t){if(!t)return u.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new u(o.fromJSON(e,t.content),t.openStart||0,t.openEnd||0)},u.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new u(e,n,r)},Object.defineProperties(u.prototype,d),u.empty=new u(o.empty,0,0);var x=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},k={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};x.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},k.parent.get=function(){return this.node(this.depth)},k.doc.get=function(){return this.node(0)},x.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},x.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},x.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},x.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},x.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},x.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},x.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},k.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},k.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},k.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},x.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return h.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},x.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},x.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},x.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new C(this,e,n)},x.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},x.prototype.max=function(e){return e.pos>this.pos?e:this},x.prototype.min=function(e){return e.pos<this.pos?e:this},x.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},x.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,i=t,o=e;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,l=i-c;if(n.push(o,a,r+c),!l)break;if((o=o.child(a)).isText)break;i=l-1,r+=c+1}return new x(t,n,i)},x.resolveCached=function(e,t){for(var n=0;n<_.length;n++){var r=_[n];if(r.pos==t&&r.doc==e)return r}var i=_[S]=x.resolve(e,t);return S=(S+1)%$,i},Object.defineProperties(x.prototype,k);var _=[],S=0,$=12,C=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},E={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};E.start.get=function(){return this.$from.before(this.depth+1)},E.end.get=function(){return this.$to.after(this.depth+1)},E.parent.get=function(){return this.$from.node(this.depth)},E.startIndex.get=function(){return this.$from.index(this.depth)},E.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(C.prototype,E);var T=Object.create(null),A=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||o.empty,this.marks=r||h.none},N={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};N.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},N.childCount.get=function(){return this.content.childCount},A.prototype.child=function(e){return this.content.child(e)},A.prototype.maybeChild=function(e){return this.content.maybeChild(e)},A.prototype.forEach=function(e){this.content.forEach(e)},A.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},A.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},N.textContent.get=function(){return this.textBetween(0,this.content.size,"")},A.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},N.firstChild.get=function(){return this.content.firstChild},N.lastChild.get=function(){return this.content.lastChild},A.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},A.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},A.prototype.hasMarkup=function(e,t,n){return this.type==e&&l(this.attrs,t||e.defaultAttrs||T)&&h.sameSet(this.marks,n||h.none)},A.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},A.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},A.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},A.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return u.empty;var r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new u(a,r.depth-o,i.depth-o)},A.prototype.replace=function(e,t,n){return f(this.resolve(e),this.resolve(t),n)},A.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,i=n.offset;if(!(t=t.maybeChild(r)))return null;if(i==e||t.isText)return t;e-=i+1}},A.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},A.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},A.prototype.resolve=function(e){return x.resolveCached(this,e)},A.prototype.resolveNoCache=function(e){return x.resolve(this,e)},A.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},N.isBlock.get=function(){return this.type.isBlock},N.isTextblock.get=function(){return this.type.isTextblock},N.inlineContent.get=function(){return this.type.inlineContent},N.isInline.get=function(){return this.type.isInline},N.isText.get=function(){return this.type.isText},N.isLeaf.get=function(){return this.type.isLeaf},N.isAtom.get=function(){return this.type.isAtom},A.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),O(this.marks,e)},A.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},A.prototype.canReplace=function(e,t,n,r,i){void 0===n&&(n=o.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var s=this.contentMatchAt(e).matchFragment(n,r,i),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var c=r;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},A.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd},A.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},A.prototype.defaultContentType=function(e){return this.contentMatchAt(e).defaultType},A.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(e){return e.check()}))},A.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},A.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=o.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(A.prototype,N);var M=function(e){function t(t,n,r,i){if(e.call(this,t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):O(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(A);function O(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var D=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},R={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};D.parse=function(e,t){var n=new P(e,t);if(null==n.next)return D.empty;var r=L(n);n.next&&n.err("Unexpected trailing text");var i=function(e){var t=Object.create(null);return function n(r){var i=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];j(e,r).forEach((function(e){s||i.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var o=t[r.join(",")]=new D(r.indexOf(e.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(q);o.next.push(i[s],t[a.join(",")]||n(a))}return o}(j(e,0))}(function(e){var t=[[]];return i(function e(t,o){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,o))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=e(t.exprs[s],o);if(s==t.exprs.length-1)return a;i(a,o=n())}else{if("star"==t.type){var c=n();return r(o,c),i(e(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return i(e(t.expr,o),l),i(e(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(o)].concat(e(t.expr,o));if("range"==t.type){for(var h=o,p=0;p<t.min;p++){var u=n();i(e(t.expr,h),u),h=u}if(-1==t.max)i(e(t.expr,h),h);else for(var d=t.min;d<t.max;d++){var f=n();r(h,f),i(e(t.expr,h),f),h=f}return[r(h)]}if("name"==t.type)return[r(o,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((function(e){return e.to=t}))}}(r));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],l=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}(i,n),i},D.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},D.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r},R.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},R.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},D.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},D.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];return function i(s,a){var c=s.matchFragment(e,n);if(c&&(!t||c.validEnd))return o.from(a.map((function(e){return e.createAndFill()})));for(var l=0;l<s.next.length;l+=2){var h=s.next[l],p=s.next[l+1];if(!h.isText&&!h.hasRequiredAttrs()&&-1==r.indexOf(p)){r.push(p);var u=i(p,a.concat(h));if(u)return u}}}(this,[])},D.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},D.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(e)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}},R.edgeCount.get=function(){return this.next.length>>1},D.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},D.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",i=0;i<t.next.length;i+=2)r+=(i?", ":"")+t.next[i].name+"->"+e.indexOf(t.next[i+1]);return r})).join("\n")},Object.defineProperties(D.prototype,R),D.empty=new D(!0);var P=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},I={next:{configurable:!0}};function L(e){var t=[];do{t.push(B(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function B(e){var t=[];do{t.push(V(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function V(e){for(var t=function(e){if(e.eat("(")){var t=L(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(t)>-1&&i.push(s)}0==i.length&&e.err("No node type or group '"+t+"' found");return i}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=z(e,t)}return t}function F(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function z(e,t){var n=F(e),r=n;return e.eat(",")&&(r="}"!=e.next?F(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function q(e,t){return t-e}function j(e,t){var n=[];return function t(r){var i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||t(c)}}(t),n.sort(q)}function U(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function W(e,t){var n=Object.create(null);for(var r in e){var i=t&&t[r];if(void 0===i){var o=e[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function H(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new Y(e[n]);return t}I.next.get=function(){return this.tokens[this.pos]},P.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},P.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(P.prototype,I);var K=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=H(n.attrs),this.defaultAttrs=U(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},J={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};J.isInline.get=function(){return!this.isBlock},J.isTextblock.get=function(){return this.isBlock&&this.inlineContent},J.isLeaf.get=function(){return this.contentMatch==D.empty},J.isAtom.get=function(){return this.isLeaf||this.spec.atom},K.prototype.hasRequiredAttrs=function(e){for(var t in this.attrs)if(this.attrs[t].isRequired&&(!e||!(t in e)))return!0;return!1},K.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},K.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:W(this.attrs,e)},K.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new A(this,this.computeAttrs(e),o.from(t),h.setFrom(n))},K.prototype.createChecked=function(e,t,n){if(t=o.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new A(this,this.computeAttrs(e),t,h.setFrom(n))},K.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=o.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(o.empty,!0);return i?new A(this,e,t.append(i),h.setFrom(n)):null},K.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},K.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},K.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},K.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:h.empty:e},K.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new K(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(K.prototype,J);var Y=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},G={isRequired:{configurable:!0}};G.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Y.prototype,G);var X=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=H(r.attrs),this.rank=t,this.excluded=null;var i=U(this.attrs);this.instance=i&&new h(this,i)};X.prototype.create=function(e){return!e&&this.instance?this.instance:new h(this,W(this.attrs,e))},X.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,i){return n[e]=new X(e,r++,t,i)})),n},X.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e},X.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},X.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var Q=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=i.from(e.nodes),this.spec.marks=i.from(e.marks),this.nodes=K.compile(this.spec.nodes,this),this.marks=X.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[s]||(n[s]=D.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?Z(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],h=l.spec.excludes;l.excluded=null==h?[l]:""==h?[]:Z(this,h.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Z(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(var a in e.marks){var c=e.marks[a];("_"==i||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Q.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof K))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Q.prototype.text=function(e,t){var n=this.nodes.text;return new M(n,n.defaultAttrs,e,h.setFrom(t))},Q.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Q.prototype.nodeFromJSON=function(e){return A.fromJSON(this,e)},Q.prototype.markFromJSON=function(e){return h.fromJSON(this,e)},Q.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var ee=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)}))};ee.prototype.parse=function(e,t){void 0===t&&(t={});var n=new se(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},ee.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new se(this,t,!0);return n.addAll(e,null,t.from,t.to),u.maxOpen(n.finish())},ee.prototype.matchTag=function(e,t){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(ce(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var i=r.getAttrs(e);if(!1===i)continue;r.attrs=i}return r}}},ee.prototype.matchStyle=function(e,t,n){for(var r=0;r<this.styles.length;r++){var i=this.styles[r];if(!(0!=i.style.indexOf(e)||i.context&&!n.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var o=i.getAttrs(t);if(!1===o)continue;i.attrs=o}return i}}},ee.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var i=t[r];if((null==i.priority?50:i.priority)<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=le(e)),e.mark=t}))};for(var i in e.marks)r(i);var o;for(var s in e.nodes)o=void 0,(o=e.nodes[s].spec.parseDOM)&&o.forEach((function(e){n(e=le(e)),e.node=s}));return t},ee.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new ee(e,ee.schemaRules(e)))};var te={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ne={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},re={ol:!0,ul:!0};function ie(e){return(e?1:0)|("full"===e?2:0)}var oe=function(e,t,n,r,i,o){this.type=e,this.attrs=t,this.solid=r,this.match=i||(4&o?null:e.contentMatch),this.options=o,this.content=[],this.marks=n,this.activeMarks=h.none};oe.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(o.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},oe.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=o.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(o.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var se=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.pendingMarks=[];var r,i=t.topNode,o=ie(t.preserveWhitespace)|(n?4:0);r=i?new oe(i.type,i.attrs,h.none,!0,t.topMatch||i.type.contentMatch,o):new oe(n?null:e.schema.topNodeType,null,h.none,!0,null,o),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},ae={top:{configurable:!0},currentPos:{configurable:!0}};function ce(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function le(e){var t={};for(var n in e)t[n]=e[n];return t}ae.top.get=function(){return this.nodes[this.open]},se.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i])}},se.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},se.prototype.addElement=function(e){var t=e.nodeName.toLowerCase();re.hasOwnProperty(t)&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&re.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:ne.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip){n&&n.skip.nodeType&&(e=n.skip);var r,i=this.top,o=this.needsBlock;if(te.hasOwnProperty(t))r=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),r&&this.sync(i),this.needsBlock=o}else this.addElementByRule(e,n)},se.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},se.prototype.readStyles=function(e){for(var t=h.none,n=0;n<e.length;n+=2){var r=this.parser.matchStyle(e[n],e[n+1],this);if(r){if(r.ignore)return null;t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t)}}return t},se.prototype.addElementByRule=function(e,t){var n,r,i,o=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):n=this.enter(r,t.attrs,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var s=this.top;if(r&&r.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return o.insertNode(e)}));else{var a=t.contentElement;"string"==typeof a?a=e.querySelector(a):"function"==typeof a&&(a=a(e)),a||(a=e),this.findAround(e,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),i&&this.removePendingMark(i)},se.prototype.addAll=function(e,t,n,r){for(var i=n||0,o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o),t&&te.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,i)},se.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},se.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,i=0;i<e.marks.length;i++)n.type&&!n.type.allowsMarkType(e.marks[i].type)||(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},se.prototype.applyPendingMarks=function(e){for(var t=0;t<this.pendingMarks.length;t++){var n=this.pendingMarks[t];e.type&&!e.type.allowsMarkType(n.type)||n.isInSet(e.activeMarks)||(e.activeMarks=n.addToSet(e.activeMarks),this.pendingMarks.splice(t--,1))}},se.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&(this.applyPendingMarks(this.top),this.enterInner(e,t,!0,n)),r},se.prototype.enterInner=function(e,t,n,r){this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(e,t);var o=null==r?-5&i.options:ie(r);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new oe(e,t,i.activeMarks,n,null,o)),this.open++},se.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},se.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},se.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},se.prototype.addPendingMark=function(e){this.pendingMarks.push(e)},se.prototype.removePendingMark=function(e){var t=this.pendingMarks.lastIndexOf(e);if(t>-1)this.pendingMarks.splice(t,1);else{var n=this.top;n.activeMarks=e.removeFromSet(n.activeMarks)}},ae.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},se.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},se.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},se.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node))t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},se.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},se.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(e,a){for(;e>=0;e--){var c=n[e];if(""==c){if(e==n.length-1||0==e)continue;for(;a>=o;a--)if(s(e-1,a))return!0;return!1}var l=a>0||0==a&&i?t.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},se.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},Object.defineProperties(se.prototype,ae);var he=function(e,t){this.nodes=e||{},this.marks=t||{}};function pe(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ue(e){return e.document||window.document}he.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=ue(t).createDocumentFragment());var i=n,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<e.marks.length;){var a=e.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<o.length;)i=o.pop(),o.pop();for(;s<e.marks.length;){var c=e.marks[s++],l=r.serializeMark(c,e.isInline,t);l&&(o.push(c,i),i.appendChild(l.dom),i=l.contentDOM||l.dom)}}i.appendChild(r.serializeNode(e,t))})),n},he.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=he.renderSpec(ue(t),this.nodes[e.type.name](e)),r=n.dom,i=n.contentDOM;if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,i,t):this.serializeFragment(e.content,t,i)}return r},he.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},he.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&he.renderSpec(ue(n),r(e,t))},he.renderSpec=function(e,t){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};var n=e.createElement(t[0]),r=null,i=t[1],o=1;if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i))for(var s in o=2,i)null!=i[s]&&n.setAttribute(s,i[s]);for(var a=o;a<t.length;a++){var c=t[a];if(0===c){if(a<t.length-1||a>o)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var l=he.renderSpec(e,c),h=l.dom,p=l.contentDOM;if(n.appendChild(h),p){if(r)throw new RangeError("Multiple content holes");r=p}}return{dom:n,contentDOM:r}},he.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new he(this.nodesFromSchema(e),this.marksFromSchema(e)))},he.nodesFromSchema=function(e){var t=pe(e.nodes);return t.text||(t.text=function(e){return e.text}),t},he.marksFromSchema=function(e){return pe(e.marks)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return w}));var r=n(12),i=Math.pow(2,16);function o(e){return 65535&e}var s=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},a=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};a.prototype.recover=function(e){var t=0,n=o(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/i}(e)},a.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},a.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},a.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>e)break;var h=this.ranges[c+o],p=this.ranges[c+a],u=l+h;if(e<=u){var d=l+r+((h?e==l?-1:e==u?1:t:t)<0?0:p);if(n)return d;var f=c/3+(e-l)*i;return new s(d,t<0?e!=l:e!=u,f)}r+=p-h}return n?e+r:new s(e+r)},a.prototype.touches=function(e,t){for(var n=0,r=o(t),i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[a+i];if(e<=c+l&&a==3*r)return!0;n+=this.ranges[a+s]-l}return!1},a.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+t],l=this.ranges[r+n];e(s,s+c,a,a+l),i+=l-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(e){return 0==e?a.empty:new a(e<0?[0,-e,0]:[0,0,e])},a.empty=new a([]);var c=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function l(e){var t=Error.call(this,e);return t.__proto__=l.prototype,t}c.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new c(this.maps,this.mirror,e,t)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},c.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},c.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},c.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},c.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},c.prototype.invert=function(){var e=new c;return e.appendMappingInverted(this),e},c.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},c.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},c.prototype._map=function(e,t,n){for(var r=!1,i=null,o=this.from;o<this.to;o++){var a=this.maps[o],c=i&&i[o];if(null!=c&&a.touches(e,c))e=a.recover(c);else{var l=a.mapResult(e,t);if(null!=l.recover){var h=this.getMirror(o);if(null!=h&&h>o&&h<this.to){if(l.deleted){o=h,e=this.maps[h].recover(l.recover);continue}(i||(i=Object.create(null)))[h]=l.recover}}l.deleted&&(r=!0),e=l.pos}}return n?e:new s(e,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var h=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new c},p={before:{configurable:!0},docChanged:{configurable:!0}};function u(){throw new Error("Override me")}p.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new l(t.failed);return this},h.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},p.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(h.prototype,p);var d=Object.create(null),f=function(){};f.prototype.apply=function(e){return u()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(e){return u()},f.prototype.map=function(e){return u()},f.prototype.merge=function(e){return null},f.prototype.toJSON=function(){return u()},f.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=d[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},f.jsonID=function(e,t){if(e in d)throw new RangeError("Duplicate use of step JSON ID "+e);return d[e]=t,t.prototype.jsonID=e,t};var m=function(e,t){this.doc=e,this.failed=t};m.ok=function(e){return new m(e,null)},m.fail=function(e){return new m(null,e)},m.fromReplace=function(e,t,n,i){try{return m.ok(e.replace(t,n,i))}catch(e){if(e instanceof r.ReplaceError)return m.fail(e.message);throw e}};var g=function(e){function t(t,n,r,i){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&y(e,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var i=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),i,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r.Slice.fromJSON(e,n.slice),!!n.structure)},t}(f);f.jsonID("replace",g);var v=function(e){function t(t,n,r,i,o,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?m.fromReplace(e,this.from,this.to,n):m.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(f);function y(e,t,n){for(var r=e.resolve(t),i=n-t,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var s=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function b(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function w(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!b(r,i,o))break}}function x(e,t,n,r){void 0===r&&(r=e);var i=function(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;var s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(r,t);return o?i.map(k).concat({type:t,attrs:n}).concat(o.map(k)):null}function k(e){return{type:e,attrs:null}}function _(e,t,n,r){void 0===n&&(n=1);var i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,c=n-2;a>o;a--,c--){var l=i.node(a),h=i.index(a);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(h,l.childCount),u=r&&r[c]||l;if(u!=l&&(p=p.replaceChild(0,u.type.create(u.attrs))),!l.canReplace(h+1,l.childCount)||!u.type.validContent(p))return!1}var d=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(d,d,f?f.type:i.node(o+1).type)}function S(e,t){var n=e.resolve(t),r=n.index();return $(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function $(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function C(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),i=r.depth;;i--){var o=void 0,s=void 0;if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),s=r.node(i).maybeChild(r.index(i)+1)):(o=r.node(i).maybeChild(r.index(i)-1),s=r.node(i+1)),o&&!o.isTextblock&&$(o,s))return t;if(0==i)break;t=n<0?r.before(i):r.after(i)}}function E(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,i):r.node(a).contentMatchAt(l).findWrapping(i.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function T(e,t,n){for(var i=[],o=0;o<e.childCount;o++){var s=e.child(o);s.content.size&&(s=s.copy(T(s.content,t,s))),s.isInline&&(s=t(s,n,o)),i.push(s)}return r.Fragment.fromArray(i)}f.jsonID("replaceAround",v),h.prototype.lift=function(e,t){for(var n=e.$from,i=e.$to,o=e.depth,s=n.before(o+1),a=i.after(o+1),c=s,l=a,h=r.Fragment.empty,p=0,u=o,d=!1;u>t;u--)d||n.index(u)>0?(d=!0,h=r.Fragment.from(n.node(u).copy(h)),p++):c--;for(var f=r.Fragment.empty,m=0,g=o,y=!1;g>t;g--)y||i.after(g+1)<i.end(g)?(y=!0,f=r.Fragment.from(i.node(g).copy(f)),m++):l++;return this.step(new v(c,l,s,a,new r.Slice(h.append(f),p,m),h.size-p,!0))},h.prototype.wrap=function(e,t){for(var n=r.Fragment.empty,i=t.length-1;i>=0;i--)n=r.Fragment.from(t[i].type.create(t[i].attrs,n));var o=e.start,s=e.end;return this.step(new v(o,s,o,s,new r.Slice(n,0,0),t.length,!0))},h.prototype.setBlockType=function(e,t,n,i){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,i)&&function(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(o.doc,o.mapping.slice(s).map(t),n)){o.clearIncompatible(o.mapping.slice(s).map(t,1),n);var a=o.mapping.slice(s),c=a.map(t,1),l=a.map(t+e.nodeSize,1);return o.step(new v(c,l,c+1,l-1,new r.Slice(r.Fragment.from(n.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},h.prototype.setNodeMarkup=function(e,t,n,i){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var s=t.create(n,null,i||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new v(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},h.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),o=r.Fragment.empty,s=r.Fragment.empty,a=i.depth,c=i.depth-t,l=t-1;a>c;a--,l--){o=r.Fragment.from(i.node(a).copy(o));var h=n&&n[l];s=r.Fragment.from(h?h.type.create(h.attrs,s):i.node(a).copy(s))}return this.step(new g(e,e,new r.Slice(o.append(s),t,t),!0))},h.prototype.join=function(e,t){void 0===t&&(t=1);var n=new g(e-t,e+t,r.Slice.empty,!0);return this.step(n)};var A=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new r.Slice(T(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new N(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);f.jsonID("addMark",A);var N=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=new r.Slice(T(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new A(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);function M(e,t,n,i){if(void 0===n&&(n=t),void 0===i&&(i=r.Slice.empty),t==n&&!i.size)return null;var o=e.resolve(t),s=e.resolve(n);if(R(o,s,i))return new g(t,n,i);var a=function(e,t){var n=function e(t,n,i,o){var s=r.Fragment.empty,a=0,c=i[n];if(t.depth>n){var l=e(t,n+1,i,o||c);a=l.openEnd+1,s=r.Fragment.from(t.node(n+1).copy(l.content))}c&&(s=s.append(c.content),a=c.openEnd);o&&(s=s.append(t.node(n).contentMatchAt(t.indexAfter(n)).fillBefore(r.Fragment.empty,!0)),a=0);return{content:s,openEnd:a}}(e,0,t,!1),i=n.content,o=n.openEnd;return new r.Slice(i,e.depth,o||0)}(o,function(e,t){for(var n=new P(e),r=1;t.size&&r<=3;r++){var i=n.placeSlice(t.content,t.openStart,t.openEnd,r);3==r&&i!=t&&i.size&&(r=0),t=i}for(;n.open.length;)n.closeNode();return n.placed}(o,i)),c=D(o,s,a);if(!c)return null;if(a.size!=c.size&&function(e,t,n){if(!t.parent.isTextblock)return!1;var r,i=n.openEnd?function(e,t){for(var n=1;n<t;n++)e=e.lastChild.content;return e.lastChild}(n.content,n.openEnd):e.node(e.depth-(n.openStart-n.openEnd));if(!i.isTextblock)return!1;for(var o=t.index();o<t.parent.childCount;o++)if(!i.type.allowsMarks(t.parent.child(o).marks))return!1;n.openEnd?r=i.contentMatchAt(i.childCount):(r=i.contentMatchAt(i.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(t.parent.content,t.index()))&&r.validEnd}(o,s,a)){for(var l=s.depth,h=s.after(l);l>1&&h==s.end(--l);)++h;var p=D(o,e.resolve(h),a);if(p)return new v(t,h,n,s.end(),p,a.size)}return c.size||t!=n?new g(t,n,c):null}function O(e,t,n,i,o,s,a){var c,l=e.childCount,h=l-(a>0?1:0),p=s<0?t:n.node(o);c=s<0?p.contentMatchAt(h):1==l&&a>0?p.contentMatchAt(s?n.index(o):n.indexAfter(o)):p.contentMatchAt(n.indexAfter(o)).matchFragment(e,l>0&&s?1:0,h);var u=i.node(o);if(a>0&&o<i.depth){var d=u.content.cutByIndex(i.indexAfter(o)).addToStart(e.lastChild),f=c.fillBefore(d,!0);if(f&&f.size&&s>0&&1==l&&(f=null),f){var m=O(e.lastChild.content,e.lastChild,n,i,o+1,1==l?s-1:-1,a-1);if(m){var g=e.lastChild.copy(m);return f.size?e.cutByIndex(0,l-1).append(f).addToEnd(g):e.replaceChild(l-1,g)}}}a>0&&(c=c.matchType((1==l&&s>0?n.node(o+1):e.lastChild).type));var v=i.index(o);if(v==u.childCount&&!u.type.compatibleContent(t.type))return null;for(var y=c.fillBefore(u.content,!0,v),b=v;y&&b<u.content.childCount;b++)p.type.allowsMarks(u.content.child(b).marks)||(y=null);if(!y)return null;if(a>0){var w=function e(t,n,i,o,s){var a,c=t.content,l=c.childCount;a=s>=0?i.node(o).contentMatchAt(i.indexAfter(o)).matchFragment(c,s>0?1:0,l):t.contentMatchAt(l);if(n>0){var h=e(c.lastChild,n-1,i,o+1,1==l?s-1:-1);c=c.replaceChild(l-1,h)}return t.copy(c.append(a.fillBefore(r.Fragment.empty,!0)))}(e.lastChild,a-1,n,o+1,1==l?s-1:-1);e=e.replaceChild(l-1,w)}return e=e.append(y),i.depth>o&&(e=e.addToEnd(function e(t,n){var r=t.node(n),i=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(n));t.depth>n&&(i=i.addToEnd(e(t,n+1)));return r.copy(i)}(i,o+1))),e}function D(e,t,n){var i=O(n.content,e.node(0),e,t,0,n.openStart,n.openEnd);return i?function(e,t,n){for(;t>0&&n>0&&1==e.childCount;)e=e.firstChild.content,t--,n--;return new r.Slice(e,t,n)}(i,n.openStart,t.depth):null}function R(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}f.jsonID("removeMark",N),h.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var h=r.marks;if(!n.isInSet(h)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,e),u=Math.min(c+r.nodeSize,t),d=n.addToSet(h),f=0;f<h.length;f++)h[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(h[f])?s.to=u:i.push(s=new N(p,u,h[f])));a&&a.to==p?a.to=u:o.push(a=new A(p,u,n))}}})),i.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},h.prototype.removeMark=function(e,t,n){var i=this;void 0===n&&(n=null);var o=[],s=0;return this.doc.nodesBetween(e,t,(function(i,a){if(i.isInline){s++;var c=null;if(n instanceof r.MarkType){var l=n.isInSet(i.marks);l&&(c=[l])}else n?n.isInSet(i.marks)&&(c=[n]):c=i.marks;if(c&&c.length)for(var h=Math.min(a+i.nodeSize,t),p=0;p<c.length;p++){for(var u=c[p],d=void 0,f=0;f<o.length;f++){var m=o[f];m.step==s-1&&u.eq(o[f].style)&&(d=m)}d?(d.to=h,d.step=s):o.push({style:u,from:Math.max(a,e),to:h,step:s})}}})),o.forEach((function(e){return i.step(new N(e.from,e.to,e.style))})),this},h.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var i=this.doc.nodeAt(e),o=[],s=e+1,a=0;a<i.childCount;a++){var c=i.child(a),l=s+c.nodeSize,h=n.matchType(c.type,c.attrs);if(h){n=h;for(var p=0;p<c.marks.length;p++)t.allowsMarkType(c.marks[p].type)||this.step(new N(s,l,c.marks[p]))}else o.push(new g(s,l,r.Slice.empty));s=l}if(!n.validEnd){var u=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(u,0,0))}for(var d=o.length-1;d>=0;d--)this.step(o[d]);return this},h.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r.Slice.empty);var i=M(this.doc,e,t,n);return i&&this.step(i),this},h.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.delete=function(e,t){return this.replace(e,t,r.Slice.empty)},h.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var P=function(e){this.open=[];for(var t=0;t<=e.depth;t++){var n=e.node(t),i=n.contentMatchAt(e.indexAfter(t));this.open.push({parent:n,match:i,content:r.Fragment.empty,wrapper:!1,openEnd:0,depth:t})}this.placed=[]};function I(e,t,n){var r=e.content;if(t>1){var i=I(e.firstChild,t-1,1==e.childCount?n-1:0);r=e.content.replaceChild(0,i)}var o=e.type.contentMatch.fillBefore(r,0==n);return e.copy(o.append(r))}function L(e,t,n,i,o){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(L(s.content,t+1,n,i,s)))}if(t>i){var a=o.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return e}function B(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;i==t.start(r)&&n.push(r)}return n}P.prototype.placeSlice=function(e,t,n,i,o){if(t>0){var s=e.firstChild,a=this.placeSlice(s.content,Math.max(0,t-1),n&&1==e.childCount?n-1:0,i,s);a.content!=s.content&&(a.content.size?(e=e.replaceChild(0,s.copy(a.content)),t=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),t=0))}var c=this.placeContent(e,t,n,i,o);if(i>2&&c.size&&0==t){var l=c.content.firstChild,h=1==c.content.childCount;this.placeContent(l.content,0,n&&h?n-1:0,i,l),c=h?r.Fragment.empty:new r.Slice(c.content.cutByIndex(1),0,n)}return c},P.prototype.placeContent=function(e,t,n,i,o){for(var s=0;s<e.childCount;s++){for(var a=e.child(s),c=!1,l=s==e.childCount-1,h=this.open.length-1;h>=0;h--){var p=this.open[h],u=void 0;if(i>1&&(u=p.match.findWrapping(a.type))&&(!o||!u.length||u[u.length-1]!=o.type)){for(;this.open.length-1>h;)this.closeNode();for(var d=0;d<u.length;d++)p.match=p.match.matchType(u[d]),h++,p={parent:u[d].create(),match:u[d].contentMatch,content:r.Fragment.empty,wrapper:!0,openEnd:0,depth:h+d},this.open.push(p)}var f=p.match.matchType(a.type);if(!f){var m=p.match.fillBefore(r.Fragment.from(a));if(!m){if(o&&p.match.matchType(o.type))break;continue}for(var g=0;g<m.childCount;g++){var v=m.child(g);this.addNode(p,v,0),f=p.match.matchFragment(v)}}for(;this.open.length-1>h;)this.closeNode();a=a.mark(p.parent.type.allowedMarks(a.marks)),t&&(a=I(a,t,l?n:0),t=0),this.addNode(p,a,l?n:0),p.match=f,l&&(n=0),c=!0;break}if(!c)break}return this.open.length>1&&(s>0&&s==e.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new r.Slice(e.cutByIndex(s),t,n)},P.prototype.addNode=function(e,t,n){var i,o;e.content=(i=e.content,o=e.openEnd,o?i.replaceChild(i.childCount-1,function e(t,n){var i=t.content;if(n>1){var o=e(t.lastChild,n-1);i=t.content.replaceChild(t.childCount-1,o)}var s=t.contentMatchAt(t.childCount).fillBefore(r.Fragment.empty,!0);return t.copy(i.append(s))}(i.lastChild,o)):i).addToEnd(t),e.openEnd=n},P.prototype.closeNode=function(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},h.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),o=this.doc.resolve(t);if(R(i,o,n))return this.step(new g(e,t,n));var s=B(i,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var c=i.depth,l=i.pos-1;c>0;c--,l--){var h=i.node(c).type.spec;if(h.defining||h.isolating)break;s.indexOf(c)>-1?a=c:i.before(c)==l&&s.splice(1,0,-c)}for(var p=s.indexOf(a),u=[],d=n.openStart,f=n.content,m=0;;m++){var v=f.firstChild;if(u.push(v),m==n.openStart)break;f=v.content}d>0&&u[d-1].type.spec.defining&&i.node(p).type!=u[d-1].type?d-=1:d>=2&&u[d-1].isTextblock&&u[d-2].type.spec.defining&&i.node(p).type!=u[d-2].type&&(d-=2);for(var y=n.openStart;y>=0;y--){var b=(y+d+1)%(n.openStart+1),w=u[b];if(w)for(var x=0;x<s.length;x++){var k=s[(x+p)%s.length],_=!0;k<0&&(_=!1,k=-k);var S=i.node(k-1),$=i.index(k-1);if(S.canReplaceWith($,$,w.type,w.marks))return this.replace(i.before(k),_?o.after(k):t,new r.Slice(L(n.content,0,n.openStart,b),b,n.openEnd))}}for(var C=this.steps.length,E=s.length-1;E>=0&&(this.replace(e,t,n),!(this.steps.length>C));E--){var T=s[E];E<0||(e=i.before(T),t=o.after(T))}return this},h.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,e,n.type);null!=i&&(e=t=i)}return this.replaceRange(e,t,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=B(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n(9),i=(n(13),function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,i){var o=n;if(t[1]){var s=t[0].lastIndexOf(t[1]);o+=t[0].slice(s+t[1].length);var a=(r+=s)-i;a>0&&(o=t[0].slice(s-a,s)+o,r=i)}return e.tr.insertText(o,r,i)}):t});function o(e){var t=e.rules,n=new r.Plugin({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,r,i,o){return s(e,r,i,o,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var r=e.state.selection.$cursor;r&&s(e,r.pos,r.pos,"",t,n)}))}}},isInputRules:!0});return n}function s(e,t,n,r,i,o){if(e.composing)return!1;var s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"")+r,l=0;l<i.length;l++){var h=i[l].match.exec(c),p=h&&i[l].handler(s,h,t-(h[0].length-r.length),n);if(p)return e.dispatch(p.setMeta(o,{transform:p,from:t,to:n,text:r})),!0}return!1}function a(e,t){for(var n=e.plugins,r=0;r<n.length;r++){var i=n[r],o=void 0;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){for(var s=e.tr,a=o.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));var l=s.doc.resolve(o.from).marks();t(s.replaceWith(o.from,o.to,e.schema.text(o.text,l)))}return!0}}return!1}new i(/--$/,""),new i(/\.\.\.$/,""),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new i(/"$/,""),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new i(/'$/,"")},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return S})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return x})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return w}));var r=n(12),i=Math.pow(2,16);function o(e){return 65535&e}var s=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},a=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};a.prototype.recover=function(e){var t=0,n=o(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/i}(e)},a.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},a.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},a.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>e)break;var h=this.ranges[c+o],p=this.ranges[c+a],u=l+h;if(e<=u){var d=l+r+((h?e==l?-1:e==u?1:t:t)<0?0:p);if(n)return d;var f=c/3+(e-l)*i;return new s(d,t<0?e!=l:e!=u,f)}r+=p-h}return n?e+r:new s(e+r)},a.prototype.touches=function(e,t){for(var n=0,r=o(t),i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[a+i];if(e<=c+l&&a==3*r)return!0;n+=this.ranges[a+s]-l}return!1},a.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+t],l=this.ranges[r+n];e(s,s+c,a,a+l),i+=l-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(e){return 0==e?a.empty:new a(e<0?[0,-e,0]:[0,0,e])},a.empty=new a([]);var c=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function l(e){var t=Error.call(this,e);return t.__proto__=l.prototype,t}c.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new c(this.maps,this.mirror,e,t)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},c.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},c.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},c.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},c.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},c.prototype.invert=function(){var e=new c;return e.appendMappingInverted(this),e},c.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},c.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},c.prototype._map=function(e,t,n){for(var r=!1,i=null,o=this.from;o<this.to;o++){var a=this.maps[o],c=i&&i[o];if(null!=c&&a.touches(e,c))e=a.recover(c);else{var l=a.mapResult(e,t);if(null!=l.recover){var h=this.getMirror(o);if(null!=h&&h>o&&h<this.to){if(l.deleted){o=h,e=this.maps[h].recover(l.recover);continue}(i||(i=Object.create(null)))[h]=l.recover}}l.deleted&&(r=!0),e=l.pos}}return n?e:new s(e,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var h=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new c},p={before:{configurable:!0},docChanged:{configurable:!0}};function u(){throw new Error("Override me")}p.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new l(t.failed);return this},h.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},p.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(h.prototype,p);var d=Object.create(null),f=function(){};f.prototype.apply=function(e){return u()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(e){return u()},f.prototype.map=function(e){return u()},f.prototype.merge=function(e){return null},f.prototype.toJSON=function(){return u()},f.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=d[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},f.jsonID=function(e,t){if(e in d)throw new RangeError("Duplicate use of step JSON ID "+e);return d[e]=t,t.prototype.jsonID=e,t};var m=function(e,t){this.doc=e,this.failed=t};m.ok=function(e){return new m(e,null)},m.fail=function(e){return new m(null,e)},m.fromReplace=function(e,t,n,i){try{return m.ok(e.replace(t,n,i))}catch(e){if(e instanceof r.ReplaceError)return m.fail(e.message);throw e}};var g=function(e){function t(t,n,r,i){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&y(e,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var i=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),i,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r.Slice.fromJSON(e,n.slice),!!n.structure)},t}(f);f.jsonID("replace",g);var v=function(e){function t(t,n,r,i,o,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?m.fromReplace(e,this.from,this.to,n):m.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(f);function y(e,t,n){for(var r=e.resolve(t),i=n-t,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var s=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function b(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function w(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!b(r,i,o))break}}function x(e,t,n,r){void 0===r&&(r=e);var i=function(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;var s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){var n=e.parent,r=e.startIndex,i=e.endIndex,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(r,t);return o?i.map(k).concat({type:t,attrs:n}).concat(o.map(k)):null}function k(e){return{type:e,attrs:null}}function _(e,t,n,r){void 0===n&&(n=1);var i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,c=n-2;a>o;a--,c--){var l=i.node(a),h=i.index(a);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(h,l.childCount),u=r&&r[c]||l;if(u!=l&&(p=p.replaceChild(0,u.type.create(u.attrs))),!l.canReplace(h+1,l.childCount)||!u.type.validContent(p))return!1}var d=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(d,d,f?f.type:i.node(o+1).type)}function S(e,t){var n=e.resolve(t),r=n.index();return $(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function $(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function C(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),i=r.depth;;i--){var o=void 0,s=void 0;if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),s=r.node(i).maybeChild(r.index(i)+1)):(o=r.node(i).maybeChild(r.index(i)-1),s=r.node(i+1)),o&&!o.isTextblock&&$(o,s))return t;if(0==i)break;t=n<0?r.before(i):r.after(i)}}function E(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,i):r.node(a).contentMatchAt(l).findWrapping(i.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function T(e,t,n){for(var i=[],o=0;o<e.childCount;o++){var s=e.child(o);s.content.size&&(s=s.copy(T(s.content,t,s))),s.isInline&&(s=t(s,n,o)),i.push(s)}return r.Fragment.fromArray(i)}f.jsonID("replaceAround",v),h.prototype.lift=function(e,t){for(var n=e.$from,i=e.$to,o=e.depth,s=n.before(o+1),a=i.after(o+1),c=s,l=a,h=r.Fragment.empty,p=0,u=o,d=!1;u>t;u--)d||n.index(u)>0?(d=!0,h=r.Fragment.from(n.node(u).copy(h)),p++):c--;for(var f=r.Fragment.empty,m=0,g=o,y=!1;g>t;g--)y||i.after(g+1)<i.end(g)?(y=!0,f=r.Fragment.from(i.node(g).copy(f)),m++):l++;return this.step(new v(c,l,s,a,new r.Slice(h.append(f),p,m),h.size-p,!0))},h.prototype.wrap=function(e,t){for(var n=r.Fragment.empty,i=t.length-1;i>=0;i--)n=r.Fragment.from(t[i].type.create(t[i].attrs,n));var o=e.start,s=e.end;return this.step(new v(o,s,o,s,new r.Slice(n,0,0),t.length,!0))},h.prototype.setBlockType=function(e,t,n,i){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,i)&&function(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(o.doc,o.mapping.slice(s).map(t),n)){o.clearIncompatible(o.mapping.slice(s).map(t,1),n);var a=o.mapping.slice(s),c=a.map(t,1),l=a.map(t+e.nodeSize,1);return o.step(new v(c,l,c+1,l-1,new r.Slice(r.Fragment.from(n.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},h.prototype.setNodeMarkup=function(e,t,n,i){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var s=t.create(n,null,i||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new v(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},h.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),o=r.Fragment.empty,s=r.Fragment.empty,a=i.depth,c=i.depth-t,l=t-1;a>c;a--,l--){o=r.Fragment.from(i.node(a).copy(o));var h=n&&n[l];s=r.Fragment.from(h?h.type.create(h.attrs,s):i.node(a).copy(s))}return this.step(new g(e,e,new r.Slice(o.append(s),t,t),!0))},h.prototype.join=function(e,t){void 0===t&&(t=1);var n=new g(e-t,e+t,r.Slice.empty,!0);return this.step(n)};var A=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new r.Slice(T(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new N(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);f.jsonID("addMark",A);var N=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=new r.Slice(T(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new A(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);function M(e,t,n,i){if(void 0===n&&(n=t),void 0===i&&(i=r.Slice.empty),t==n&&!i.size)return null;var o=e.resolve(t),s=e.resolve(n);if(R(o,s,i))return new g(t,n,i);var a=function(e,t){var n=function e(t,n,i,o){var s=r.Fragment.empty,a=0,c=i[n];if(t.depth>n){var l=e(t,n+1,i,o||c);a=l.openEnd+1,s=r.Fragment.from(t.node(n+1).copy(l.content))}c&&(s=s.append(c.content),a=c.openEnd);o&&(s=s.append(t.node(n).contentMatchAt(t.indexAfter(n)).fillBefore(r.Fragment.empty,!0)),a=0);return{content:s,openEnd:a}}(e,0,t,!1),i=n.content,o=n.openEnd;return new r.Slice(i,e.depth,o||0)}(o,function(e,t){for(var n=new P(e),r=1;t.size&&r<=3;r++){var i=n.placeSlice(t.content,t.openStart,t.openEnd,r);3==r&&i!=t&&i.size&&(r=0),t=i}for(;n.open.length;)n.closeNode();return n.placed}(o,i)),c=D(o,s,a);if(!c)return null;if(a.size!=c.size&&function(e,t,n){if(!t.parent.isTextblock)return!1;var r,i=n.openEnd?function(e,t){for(var n=1;n<t;n++)e=e.lastChild.content;return e.lastChild}(n.content,n.openEnd):e.node(e.depth-(n.openStart-n.openEnd));if(!i.isTextblock)return!1;for(var o=t.index();o<t.parent.childCount;o++)if(!i.type.allowsMarks(t.parent.child(o).marks))return!1;n.openEnd?r=i.contentMatchAt(i.childCount):(r=i.contentMatchAt(i.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(t.parent.content,t.index()))&&r.validEnd}(o,s,a)){for(var l=s.depth,h=s.after(l);l>1&&h==s.end(--l);)++h;var p=D(o,e.resolve(h),a);if(p)return new v(t,h,n,s.end(),p,a.size)}return c.size||t!=n?new g(t,n,c):null}function O(e,t,n,i,o,s,a){var c,l=e.childCount,h=l-(a>0?1:0),p=s<0?t:n.node(o);c=s<0?p.contentMatchAt(h):1==l&&a>0?p.contentMatchAt(s?n.index(o):n.indexAfter(o)):p.contentMatchAt(n.indexAfter(o)).matchFragment(e,l>0&&s?1:0,h);var u=i.node(o);if(a>0&&o<i.depth){var d=u.content.cutByIndex(i.indexAfter(o)).addToStart(e.lastChild),f=c.fillBefore(d,!0);if(f&&f.size&&s>0&&1==l&&(f=null),f){var m=O(e.lastChild.content,e.lastChild,n,i,o+1,1==l?s-1:-1,a-1);if(m){var g=e.lastChild.copy(m);return f.size?e.cutByIndex(0,l-1).append(f).addToEnd(g):e.replaceChild(l-1,g)}}}a>0&&(c=c.matchType((1==l&&s>0?n.node(o+1):e.lastChild).type));var v=i.index(o);if(v==u.childCount&&!u.type.compatibleContent(t.type))return null;for(var y=c.fillBefore(u.content,!0,v),b=v;y&&b<u.content.childCount;b++)p.type.allowsMarks(u.content.child(b).marks)||(y=null);if(!y)return null;if(a>0){var w=function e(t,n,i,o,s){var a,c=t.content,l=c.childCount;a=s>=0?i.node(o).contentMatchAt(i.indexAfter(o)).matchFragment(c,s>0?1:0,l):t.contentMatchAt(l);if(n>0){var h=e(c.lastChild,n-1,i,o+1,1==l?s-1:-1);c=c.replaceChild(l-1,h)}return t.copy(c.append(a.fillBefore(r.Fragment.empty,!0)))}(e.lastChild,a-1,n,o+1,1==l?s-1:-1);e=e.replaceChild(l-1,w)}return e=e.append(y),i.depth>o&&(e=e.addToEnd(function e(t,n){var r=t.node(n),i=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(n));t.depth>n&&(i=i.addToEnd(e(t,n+1)));return r.copy(i)}(i,o+1))),e}function D(e,t,n){var i=O(n.content,e.node(0),e,t,0,n.openStart,n.openEnd);return i?function(e,t,n){for(;t>0&&n>0&&1==e.childCount;)e=e.firstChild.content,t--,n--;return new r.Slice(e,t,n)}(i,n.openStart,t.depth):null}function R(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}f.jsonID("removeMark",N),h.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var h=r.marks;if(!n.isInSet(h)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,e),u=Math.min(c+r.nodeSize,t),d=n.addToSet(h),f=0;f<h.length;f++)h[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(h[f])?s.to=u:i.push(s=new N(p,u,h[f])));a&&a.to==p?a.to=u:o.push(a=new A(p,u,n))}}})),i.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},h.prototype.removeMark=function(e,t,n){var i=this;void 0===n&&(n=null);var o=[],s=0;return this.doc.nodesBetween(e,t,(function(i,a){if(i.isInline){s++;var c=null;if(n instanceof r.MarkType){var l=n.isInSet(i.marks);l&&(c=[l])}else n?n.isInSet(i.marks)&&(c=[n]):c=i.marks;if(c&&c.length)for(var h=Math.min(a+i.nodeSize,t),p=0;p<c.length;p++){for(var u=c[p],d=void 0,f=0;f<o.length;f++){var m=o[f];m.step==s-1&&u.eq(o[f].style)&&(d=m)}d?(d.to=h,d.step=s):o.push({style:u,from:Math.max(a,e),to:h,step:s})}}})),o.forEach((function(e){return i.step(new N(e.from,e.to,e.style))})),this},h.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var i=this.doc.nodeAt(e),o=[],s=e+1,a=0;a<i.childCount;a++){var c=i.child(a),l=s+c.nodeSize,h=n.matchType(c.type,c.attrs);if(h){n=h;for(var p=0;p<c.marks.length;p++)t.allowsMarkType(c.marks[p].type)||this.step(new N(s,l,c.marks[p]))}else o.push(new g(s,l,r.Slice.empty));s=l}if(!n.validEnd){var u=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(u,0,0))}for(var d=o.length-1;d>=0;d--)this.step(o[d]);return this},h.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r.Slice.empty);var i=M(this.doc,e,t,n);return i&&this.step(i),this},h.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.delete=function(e,t){return this.replace(e,t,r.Slice.empty)},h.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var P=function(e){this.open=[];for(var t=0;t<=e.depth;t++){var n=e.node(t),i=n.contentMatchAt(e.indexAfter(t));this.open.push({parent:n,match:i,content:r.Fragment.empty,wrapper:!1,openEnd:0,depth:t})}this.placed=[]};function I(e,t,n){var r=e.content;if(t>1){var i=I(e.firstChild,t-1,1==e.childCount?n-1:0);r=e.content.replaceChild(0,i)}var o=e.type.contentMatch.fillBefore(r,0==n);return e.copy(o.append(r))}function L(e,t,n,i,o){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(L(s.content,t+1,n,i,s)))}if(t>i){var a=o.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return e}function B(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;i==t.start(r)&&n.push(r)}return n}P.prototype.placeSlice=function(e,t,n,i,o){if(t>0){var s=e.firstChild,a=this.placeSlice(s.content,Math.max(0,t-1),n&&1==e.childCount?n-1:0,i,s);a.content!=s.content&&(a.content.size?(e=e.replaceChild(0,s.copy(a.content)),t=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),t=0))}var c=this.placeContent(e,t,n,i,o);if(i>2&&c.size&&0==t){var l=c.content.firstChild,h=1==c.content.childCount;this.placeContent(l.content,0,n&&h?n-1:0,i,l),c=h?r.Fragment.empty:new r.Slice(c.content.cutByIndex(1),0,n)}return c},P.prototype.placeContent=function(e,t,n,i,o){for(var s=0;s<e.childCount;s++){for(var a=e.child(s),c=!1,l=s==e.childCount-1,h=this.open.length-1;h>=0;h--){var p=this.open[h],u=void 0;if(i>1&&(u=p.match.findWrapping(a.type))&&(!o||!u.length||u[u.length-1]!=o.type)){for(;this.open.length-1>h;)this.closeNode();for(var d=0;d<u.length;d++)p.match=p.match.matchType(u[d]),h++,p={parent:u[d].create(),match:u[d].contentMatch,content:r.Fragment.empty,wrapper:!0,openEnd:0,depth:h+d},this.open.push(p)}var f=p.match.matchType(a.type);if(!f){var m=p.match.fillBefore(r.Fragment.from(a));if(!m){if(o&&p.match.matchType(o.type))break;continue}for(var g=0;g<m.childCount;g++){var v=m.child(g);this.addNode(p,v,0),f=p.match.matchFragment(v)}}for(;this.open.length-1>h;)this.closeNode();a=a.mark(p.parent.type.allowedMarks(a.marks)),t&&(a=I(a,t,l?n:0),t=0),this.addNode(p,a,l?n:0),p.match=f,l&&(n=0),c=!0;break}if(!c)break}return this.open.length>1&&(s>0&&s==e.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new r.Slice(e.cutByIndex(s),t,n)},P.prototype.addNode=function(e,t,n){var i,o;e.content=(i=e.content,o=e.openEnd,o?i.replaceChild(i.childCount-1,function e(t,n){var i=t.content;if(n>1){var o=e(t.lastChild,n-1);i=t.content.replaceChild(t.childCount-1,o)}var s=t.contentMatchAt(t.childCount).fillBefore(r.Fragment.empty,!0);return t.copy(i.append(s))}(i.lastChild,o)):i).addToEnd(t),e.openEnd=n},P.prototype.closeNode=function(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},h.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),o=this.doc.resolve(t);if(R(i,o,n))return this.step(new g(e,t,n));var s=B(i,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var c=i.depth,l=i.pos-1;c>0;c--,l--){var h=i.node(c).type.spec;if(h.defining||h.isolating)break;s.indexOf(c)>-1?a=c:i.before(c)==l&&s.splice(1,0,-c)}for(var p=s.indexOf(a),u=[],d=n.openStart,f=n.content,m=0;;m++){var v=f.firstChild;if(u.push(v),m==n.openStart)break;f=v.content}d>0&&u[d-1].type.spec.defining&&i.node(p).type!=u[d-1].type?d-=1:d>=2&&u[d-1].isTextblock&&u[d-2].type.spec.defining&&i.node(p).type!=u[d-2].type&&(d-=2);for(var y=n.openStart;y>=0;y--){var b=(y+d+1)%(n.openStart+1),w=u[b];if(w)for(var x=0;x<s.length;x++){var k=s[(x+p)%s.length],_=!0;k<0&&(_=!1,k=-k);var S=i.node(k-1),$=i.index(k-1);if(S.canReplaceWith($,$,w.type,w.marks))return this.replace(i.before(k),_?o.after(k):t,new r.Slice(L(n.content,0,n.openStart,b),b,n.openEnd))}}for(var C=this.steps.length,E=s.length-1;E>=0&&(this.replace(e,t,n),!(this.steps.length>C));E--){var T=s[E];E<0||(e=i.before(T),t=o.after(T))}return this},h.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,e,n.type);null!=i&&(e=t=i)}return this.replaceRange(e,t,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=B(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c}));var r=n(37);
/*!
    * tiptap-utils v1.8.2
    * (c) 2019 Scrumpy UG (limited liability)
    * @license MIT
    */
function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var n=e.selection,r=n.from,o=n.to,s=[];e.doc.nodesBetween(r,o,(function(e){s=[].concat(i(s),i(e.marks))}));var a=s.find((function(e){return e.type.name===t.name}));return a?a.attrs:{}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!t)return!1;var n=e.parent.childAfter(e.parentOffset);if(!n.node)return!1;var r=n.node.marks.find((function(e){return e.type===t}));if(!r)return!1;for(var i=e.index(),o=e.start()+n.offset,s=i+1,a=o+n.node.nodeSize;i>0&&r.isInSet(e.parent.child(i-1).marks);)i-=1,o-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&r.isInSet(e.parent.child(s).marks);)a+=e.parent.child(s).nodeSize,s+=1;return{from:o,to:a}}function a(e,t){var n=e.selection,r=n.from,i=n.$from,o=n.to;return n.empty?!!t.isInSet(e.storedMarks||i.marks()):!!e.doc.rangeHasMark(r,o,t)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e){return e.type===t},o=Object(r.findSelectedNodeOfType)(t)(e.selection)||Object(r.findParentNode)(i)(e.selection);return Object.keys(n).length&&o?o.node.hasMarkup(t,n):!!o}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,l=[],h=!1,p=-1;function u(){h&&c&&(h=!1,c.length?l=c.concat(l):p=-1,l.length&&d())}function d(){if(!h){var e=a(u);h=!0;for(var t=l.length;t;){for(c=l,l=[];++p<t;)c&&c[p].run();p=-1,t=l.length}c=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||h||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(56),i=n(57),o=n(58);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=u(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|d(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):u(e,t);if("Buffer"===t.type&&o(t.data))return u(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(h(t),e=a(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t){var n=t.length<0?0:0|d(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return $(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var h=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var p=!0,u=0;u<c;u++)if(l(e,o+u)!==l(t,u)){p=!1;break}if(p)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return q(F(t,e.length-n),e,n,r)}function x(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return x(e,t,n,r)}function _(e,t,n,r){return q(z(t),e,n,r)}function S(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function $(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,l=e[i],h=null,p=l>239?4:l>223?3:l>191?2:1;if(i+p<=n)switch(p){case 1:l<128&&(h=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(h=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,p=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return h(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(r,i),h=e.slice(t,n),p=0;p<a;++p)if(l[p]!==h[p]){o=l[p],s=h[p];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=V(e[o]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,o){return o||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:F(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(28))},,,,,function(e,t,n){"use strict";for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},i=r,o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},s="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),a="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),c="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),l="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),h="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),p=s&&(l||+s[1]<57)||c&&l,u=0;u<10;u++)r[48+u]=r[96+u]=String(u);for(u=1;u<=24;u++)r[u+111]="F"+u;for(u=65;u<=90;u++)r[u]=String.fromCharCode(u+32),o[u]=String.fromCharCode(u);for(var d in r)o.hasOwnProperty(d)||(o[d]=r[d]);var f=function(e){var t=!(p&&(e.ctrlKey||e.altKey||e.metaKey)||(a||h)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?o:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t},m=n(9);n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return b}));var g="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function v(e){var t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var c=o[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);g?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function y(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function b(e){return new m.Plugin({props:{handleKeyDown:w(e)}})}function w(e){var t=function(e){var t=Object.create(null);for(var n in e)t[v(n)]=e[n];return t}(e);return function(e,n){var r,o=f(n),s=1==o.length&&" "!=o,a=t[y(o,n,!s)];if(a&&a(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey)&&(r=i[n.keyCode])&&r!=o){var c=t[y(r,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}else if(s&&n.shiftKey){var l=t[y(o,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b}));var r=n(12),i=Math.pow(2,16);function o(e){return 65535&e}var s=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},a=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};a.prototype.recover=function(e){var t=0,n=o(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/i}(e)},a.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},a.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},a.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>e)break;var h=this.ranges[c+o],p=this.ranges[c+a],u=l+h;if(e<=u){var d=l+r+((h?e==l?-1:e==u?1:t:t)<0?0:p);if(n)return d;var f=c/3+(e-l)*i;return new s(d,t<0?e!=l:e!=u,f)}r+=p-h}return n?e+r:new s(e+r)},a.prototype.touches=function(e,t){for(var n=0,r=o(t),i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>e)break;var l=this.ranges[a+i];if(e<=c+l&&a==3*r)return!0;n+=this.ranges[a+s]-l}return!1},a.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+t],l=this.ranges[r+n];e(s,s+c,a,a+l),i+=l-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(e){return 0==e?a.empty:new a(e<0?[0,-e,0]:[0,0,e])},a.empty=new a([]);var c=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function l(e){var t=Error.call(this,e);return t.__proto__=l.prototype,t}c.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new c(this.maps,this.mirror,e,t)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},c.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},c.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},c.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},c.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},c.prototype.invert=function(){var e=new c;return e.appendMappingInverted(this),e},c.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},c.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},c.prototype._map=function(e,t,n){for(var r=!1,i=null,o=this.from;o<this.to;o++){var a=this.maps[o],c=i&&i[o];if(null!=c&&a.touches(e,c))e=a.recover(c);else{var l=a.mapResult(e,t);if(null!=l.recover){var h=this.getMirror(o);if(null!=h&&h>o&&h<this.to){if(l.deleted){o=h,e=this.maps[h].recover(l.recover);continue}(i||(i=Object.create(null)))[h]=l.recover}}l.deleted&&(r=!0),e=l.pos}}return n?e:new s(e,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var h=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new c},p={before:{configurable:!0},docChanged:{configurable:!0}};function u(){throw new Error("Override me")}p.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new l(t.failed);return this},h.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},p.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(h.prototype,p);var d=Object.create(null),f=function(){};f.prototype.apply=function(e){return u()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(e){return u()},f.prototype.map=function(e){return u()},f.prototype.merge=function(e){return null},f.prototype.toJSON=function(){return u()},f.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=d[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},f.jsonID=function(e,t){if(e in d)throw new RangeError("Duplicate use of step JSON ID "+e);return d[e]=t,t.prototype.jsonID=e,t};var m=function(e,t){this.doc=e,this.failed=t};m.ok=function(e){return new m(e,null)},m.fail=function(e){return new m(null,e)},m.fromReplace=function(e,t,n,i){try{return m.ok(e.replace(t,n,i))}catch(e){if(e instanceof r.ReplaceError)return m.fail(e.message);throw e}};var g=function(e){function t(t,n,r,i){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&y(e,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var i=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),i,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,r.Slice.fromJSON(e,n.slice),!!n.structure)},t}(f);f.jsonID("replace",g);var v=function(e){function t(t,n,r,i,o,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?m.fromReplace(e,this.from,this.to,n):m.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(f);function y(e,t,n){for(var r=e.resolve(t),i=n-t,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var s=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function b(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,i):r.node(a).contentMatchAt(l).findWrapping(i.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function w(e,t,n){for(var i=[],o=0;o<e.childCount;o++){var s=e.child(o);s.content.size&&(s=s.copy(w(s.content,t,s))),s.isInline&&(s=t(s,n,o)),i.push(s)}return r.Fragment.fromArray(i)}f.jsonID("replaceAround",v),h.prototype.lift=function(e,t){for(var n=e.$from,i=e.$to,o=e.depth,s=n.before(o+1),a=i.after(o+1),c=s,l=a,h=r.Fragment.empty,p=0,u=o,d=!1;u>t;u--)d||n.index(u)>0?(d=!0,h=r.Fragment.from(n.node(u).copy(h)),p++):c--;for(var f=r.Fragment.empty,m=0,g=o,y=!1;g>t;g--)y||i.after(g+1)<i.end(g)?(y=!0,f=r.Fragment.from(i.node(g).copy(f)),m++):l++;return this.step(new v(c,l,s,a,new r.Slice(h.append(f),p,m),h.size-p,!0))},h.prototype.wrap=function(e,t){for(var n=r.Fragment.empty,i=t.length-1;i>=0;i--)n=r.Fragment.from(t[i].type.create(t[i].attrs,n));var o=e.start,s=e.end;return this.step(new v(o,s,o,s,new r.Slice(n,0,0),t.length,!0))},h.prototype.setBlockType=function(e,t,n,i){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,i)&&function(e,t,n){var r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(o.doc,o.mapping.slice(s).map(t),n)){o.clearIncompatible(o.mapping.slice(s).map(t,1),n);var a=o.mapping.slice(s),c=a.map(t,1),l=a.map(t+e.nodeSize,1);return o.step(new v(c,l,c+1,l-1,new r.Slice(r.Fragment.from(n.create(i,null,e.marks)),0,0),1,!0)),!1}})),this},h.prototype.setNodeMarkup=function(e,t,n,i){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var s=t.create(n,null,i||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new v(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},h.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var i=this.doc.resolve(e),o=r.Fragment.empty,s=r.Fragment.empty,a=i.depth,c=i.depth-t,l=t-1;a>c;a--,l--){o=r.Fragment.from(i.node(a).copy(o));var h=n&&n[l];s=r.Fragment.from(h?h.type.create(h.attrs,s):i.node(a).copy(s))}return this.step(new g(e,e,new r.Slice(o.append(s),t,t),!0))},h.prototype.join=function(e,t){void 0===t&&(t=1);var n=new g(e-t,e+t,r.Slice.empty,!0);return this.step(n)};var x=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new r.Slice(w(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new k(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);f.jsonID("addMark",x);var k=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),i=new r.Slice(w(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new x(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);function _(e,t,n,i){if(void 0===n&&(n=t),void 0===i&&(i=r.Slice.empty),t==n&&!i.size)return null;var o=e.resolve(t),s=e.resolve(n);if(C(o,s,i))return new g(t,n,i);var a=function(e,t){var n=function e(t,n,i,o){var s=r.Fragment.empty,a=0,c=i[n];if(t.depth>n){var l=e(t,n+1,i,o||c);a=l.openEnd+1,s=r.Fragment.from(t.node(n+1).copy(l.content))}c&&(s=s.append(c.content),a=c.openEnd);o&&(s=s.append(t.node(n).contentMatchAt(t.indexAfter(n)).fillBefore(r.Fragment.empty,!0)),a=0);return{content:s,openEnd:a}}(e,0,t,!1),i=n.content,o=n.openEnd;return new r.Slice(i,e.depth,o||0)}(o,function(e,t){for(var n=new E(e),r=1;t.size&&r<=3;r++){var i=n.placeSlice(t.content,t.openStart,t.openEnd,r);3==r&&i!=t&&i.size&&(r=0),t=i}for(;n.open.length;)n.closeNode();return n.placed}(o,i)),c=$(o,s,a);if(!c)return null;if(a.size!=c.size&&function(e,t,n){if(!t.parent.isTextblock)return!1;var r,i=n.openEnd?function(e,t){for(var n=1;n<t;n++)e=e.lastChild.content;return e.lastChild}(n.content,n.openEnd):e.node(e.depth-(n.openStart-n.openEnd));if(!i.isTextblock)return!1;for(var o=t.index();o<t.parent.childCount;o++)if(!i.type.allowsMarks(t.parent.child(o).marks))return!1;n.openEnd?r=i.contentMatchAt(i.childCount):(r=i.contentMatchAt(i.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(t.parent.content,t.index()))&&r.validEnd}(o,s,a)){for(var l=s.depth,h=s.after(l);l>1&&h==s.end(--l);)++h;var p=$(o,e.resolve(h),a);if(p)return new v(t,h,n,s.end(),p,a.size)}return c.size||t!=n?new g(t,n,c):null}function S(e,t,n,i,o,s,a){var c,l=e.childCount,h=l-(a>0?1:0),p=s<0?t:n.node(o);c=s<0?p.contentMatchAt(h):1==l&&a>0?p.contentMatchAt(s?n.index(o):n.indexAfter(o)):p.contentMatchAt(n.indexAfter(o)).matchFragment(e,l>0&&s?1:0,h);var u=i.node(o);if(a>0&&o<i.depth){var d=u.content.cutByIndex(i.indexAfter(o)).addToStart(e.lastChild),f=c.fillBefore(d,!0);if(f&&f.size&&s>0&&1==l&&(f=null),f){var m=S(e.lastChild.content,e.lastChild,n,i,o+1,1==l?s-1:-1,a-1);if(m){var g=e.lastChild.copy(m);return f.size?e.cutByIndex(0,l-1).append(f).addToEnd(g):e.replaceChild(l-1,g)}}}a>0&&(c=c.matchType((1==l&&s>0?n.node(o+1):e.lastChild).type));var v=i.index(o);if(v==u.childCount&&!u.type.compatibleContent(t.type))return null;for(var y=c.fillBefore(u.content,!0,v),b=v;y&&b<u.content.childCount;b++)p.type.allowsMarks(u.content.child(b).marks)||(y=null);if(!y)return null;if(a>0){var w=function e(t,n,i,o,s){var a,c=t.content,l=c.childCount;a=s>=0?i.node(o).contentMatchAt(i.indexAfter(o)).matchFragment(c,s>0?1:0,l):t.contentMatchAt(l);if(n>0){var h=e(c.lastChild,n-1,i,o+1,1==l?s-1:-1);c=c.replaceChild(l-1,h)}return t.copy(c.append(a.fillBefore(r.Fragment.empty,!0)))}(e.lastChild,a-1,n,o+1,1==l?s-1:-1);e=e.replaceChild(l-1,w)}return e=e.append(y),i.depth>o&&(e=e.addToEnd(function e(t,n){var r=t.node(n),i=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(n));t.depth>n&&(i=i.addToEnd(e(t,n+1)));return r.copy(i)}(i,o+1))),e}function $(e,t,n){var i=S(n.content,e.node(0),e,t,0,n.openStart,n.openEnd);return i?function(e,t,n){for(;t>0&&n>0&&1==e.childCount;)e=e.firstChild.content,t--,n--;return new r.Slice(e,t,n)}(i,n.openStart,t.depth):null}function C(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}f.jsonID("removeMark",k),h.prototype.addMark=function(e,t,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var h=r.marks;if(!n.isInSet(h)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,e),u=Math.min(c+r.nodeSize,t),d=n.addToSet(h),f=0;f<h.length;f++)h[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(h[f])?s.to=u:i.push(s=new k(p,u,h[f])));a&&a.to==p?a.to=u:o.push(a=new x(p,u,n))}}})),i.forEach((function(e){return r.step(e)})),o.forEach((function(e){return r.step(e)})),this},h.prototype.removeMark=function(e,t,n){var i=this;void 0===n&&(n=null);var o=[],s=0;return this.doc.nodesBetween(e,t,(function(i,a){if(i.isInline){s++;var c=null;if(n instanceof r.MarkType){var l=n.isInSet(i.marks);l&&(c=[l])}else n?n.isInSet(i.marks)&&(c=[n]):c=i.marks;if(c&&c.length)for(var h=Math.min(a+i.nodeSize,t),p=0;p<c.length;p++){for(var u=c[p],d=void 0,f=0;f<o.length;f++){var m=o[f];m.step==s-1&&u.eq(o[f].style)&&(d=m)}d?(d.to=h,d.step=s):o.push({style:u,from:Math.max(a,e),to:h,step:s})}}})),o.forEach((function(e){return i.step(new k(e.from,e.to,e.style))})),this},h.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var i=this.doc.nodeAt(e),o=[],s=e+1,a=0;a<i.childCount;a++){var c=i.child(a),l=s+c.nodeSize,h=n.matchType(c.type,c.attrs);if(h){n=h;for(var p=0;p<c.marks.length;p++)t.allowsMarkType(c.marks[p].type)||this.step(new k(s,l,c.marks[p]))}else o.push(new g(s,l,r.Slice.empty));s=l}if(!n.validEnd){var u=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(u,0,0))}for(var d=o.length-1;d>=0;d--)this.step(o[d]);return this},h.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=r.Slice.empty);var i=_(this.doc,e,t,n);return i&&this.step(i),this},h.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.delete=function(e,t){return this.replace(e,t,r.Slice.empty)},h.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var E=function(e){this.open=[];for(var t=0;t<=e.depth;t++){var n=e.node(t),i=n.contentMatchAt(e.indexAfter(t));this.open.push({parent:n,match:i,content:r.Fragment.empty,wrapper:!1,openEnd:0,depth:t})}this.placed=[]};function T(e,t,n){var r=e.content;if(t>1){var i=T(e.firstChild,t-1,1==e.childCount?n-1:0);r=e.content.replaceChild(0,i)}var o=e.type.contentMatch.fillBefore(r,0==n);return e.copy(o.append(r))}function A(e,t,n,i,o){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(A(s.content,t+1,n,i,s)))}if(t>i){var a=o.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return e}function N(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;i==t.start(r)&&n.push(r)}return n}E.prototype.placeSlice=function(e,t,n,i,o){if(t>0){var s=e.firstChild,a=this.placeSlice(s.content,Math.max(0,t-1),n&&1==e.childCount?n-1:0,i,s);a.content!=s.content&&(a.content.size?(e=e.replaceChild(0,s.copy(a.content)),t=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),t=0))}var c=this.placeContent(e,t,n,i,o);if(i>2&&c.size&&0==t){var l=c.content.firstChild,h=1==c.content.childCount;this.placeContent(l.content,0,n&&h?n-1:0,i,l),c=h?r.Fragment.empty:new r.Slice(c.content.cutByIndex(1),0,n)}return c},E.prototype.placeContent=function(e,t,n,i,o){for(var s=0;s<e.childCount;s++){for(var a=e.child(s),c=!1,l=s==e.childCount-1,h=this.open.length-1;h>=0;h--){var p=this.open[h],u=void 0;if(i>1&&(u=p.match.findWrapping(a.type))&&(!o||!u.length||u[u.length-1]!=o.type)){for(;this.open.length-1>h;)this.closeNode();for(var d=0;d<u.length;d++)p.match=p.match.matchType(u[d]),h++,p={parent:u[d].create(),match:u[d].contentMatch,content:r.Fragment.empty,wrapper:!0,openEnd:0,depth:h+d},this.open.push(p)}var f=p.match.matchType(a.type);if(!f){var m=p.match.fillBefore(r.Fragment.from(a));if(!m){if(o&&p.match.matchType(o.type))break;continue}for(var g=0;g<m.childCount;g++){var v=m.child(g);this.addNode(p,v,0),f=p.match.matchFragment(v)}}for(;this.open.length-1>h;)this.closeNode();a=a.mark(p.parent.type.allowedMarks(a.marks)),t&&(a=T(a,t,l?n:0),t=0),this.addNode(p,a,l?n:0),p.match=f,l&&(n=0),c=!0;break}if(!c)break}return this.open.length>1&&(s>0&&s==e.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new r.Slice(e.cutByIndex(s),t,n)},E.prototype.addNode=function(e,t,n){var i,o;e.content=(i=e.content,o=e.openEnd,o?i.replaceChild(i.childCount-1,function e(t,n){var i=t.content;if(n>1){var o=e(t.lastChild,n-1);i=t.content.replaceChild(t.childCount-1,o)}var s=t.contentMatchAt(t.childCount).fillBefore(r.Fragment.empty,!0);return t.copy(i.append(s))}(i.lastChild,o)):i).addToEnd(t),e.openEnd=n},E.prototype.closeNode=function(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},h.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),o=this.doc.resolve(t);if(C(i,o,n))return this.step(new g(e,t,n));var s=N(i,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var c=i.depth,l=i.pos-1;c>0;c--,l--){var h=i.node(c).type.spec;if(h.defining||h.isolating)break;s.indexOf(c)>-1?a=c:i.before(c)==l&&s.splice(1,0,-c)}for(var p=s.indexOf(a),u=[],d=n.openStart,f=n.content,m=0;;m++){var v=f.firstChild;if(u.push(v),m==n.openStart)break;f=v.content}d>0&&u[d-1].type.spec.defining&&i.node(p).type!=u[d-1].type?d-=1:d>=2&&u[d-1].isTextblock&&u[d-2].type.spec.defining&&i.node(p).type!=u[d-2].type&&(d-=2);for(var y=n.openStart;y>=0;y--){var b=(y+d+1)%(n.openStart+1),w=u[b];if(w)for(var x=0;x<s.length;x++){var k=s[(x+p)%s.length],_=!0;k<0&&(_=!1,k=-k);var S=i.node(k-1),$=i.index(k-1);if(S.canReplaceWith($,$,w.type,w.marks))return this.replace(i.before(k),_?o.after(k):t,new r.Slice(A(n.content,0,n.openStart,b),b,n.openEnd))}}for(var E=this.steps.length,T=s.length-1;T>=0&&(this.replace(e,t,n),!(this.steps.length>E));T--){var M=s[T];T<0||(e=i.before(M),t=o.after(M))}return this},h.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,e,n.type);null!=i&&(e=t=i)}return this.replaceRange(e,t,new r.Slice(r.Fragment.from(n),0,0))},h.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),i=N(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return vt})),n.d(t,"b",(function(){return xt})),n.d(t,"c",(function(){return Ot}));var r=n(9),i=n(12),o=n(13),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var h=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!h&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var p=!h&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!p,s.chrome_version=p&&+p[1],s.ios=!h&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit=!h&&"WebkitAppearance"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var u=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},d=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},m=function(e,t,n,r){return n&&(v(e,t,n,r,-1)||v(e,t,n,r,1))},g=/^(img|br|input|textarea|hr)$/i;function v(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:y(e))){var o=e.parentNode;if(1!=o.nodeType||b(e)||g.test(e.nodeName)||"false"==e.contentEditable)return!1;t=u(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(i<0?-1:0)],t=i<0?y(e):0}}}function y(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function b(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var w=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function x(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function k(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function _(e,t){return"number"==typeof e?e:e[t]}function S(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,s=o.defaultView,a=n||e.dom;a;a=d(a))if(1==a.nodeType){var c=a==o.body||1!=a.nodeType,l=c?k(s):a.getBoundingClientRect(),h=0,p=0;if(t.top<l.top+_(r,"top")?p=-(l.top-t.top+_(i,"top")):t.bottom>l.bottom-_(r,"bottom")&&(p=t.bottom-l.bottom+_(i,"bottom")),t.left<l.left+_(r,"left")?h=-(l.left-t.left+_(i,"left")):t.right>l.right-_(r,"right")&&(h=t.right-l.right+_(i,"right")),(h||p)&&(c?s.scrollBy(h,p):(p&&(a.scrollTop+=p),h&&(a.scrollLeft+=h))),c)break}}function $(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=d(e));return t}function C(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var E=null;function T(e,t){for(var n,r,i=2e8,o=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var h=void 0;if(1==c.nodeType)h=c.getClientRects();else{if(3!=c.nodeType)continue;h=f(c).getClientRects()}for(var p=0;p<h.length;p++){var u=h[p];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);var d=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(d<i){n=c,i=d,r=d&&3==n.nodeType?{left:u.right<t.left?u.right:u.left,top:t.top}:t,1==c.nodeType&&d&&(o=l+(t.left>=(u.left+u.right)/2?1:0));continue}}!n&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)&&(o=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=M(r,1);if(o.top!=o.bottom&&A(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:e,offset:o}:T(n,r)}function A(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function N(e,t){var n,r,i,o,a=e.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(i=(n=c).offsetNode,o=n.offset)}catch(e){}if(!i&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(t.left,t.top);l&&(i=(r=l).startContainer,o=r.startOffset)}var h,p=a.elementFromPoint(t.left,t.top+1);if(!p||!e.dom.contains(1!=p.nodeType?p.parentNode:p)){var u=e.dom.getBoundingClientRect();if(!A(t,u))return null;if(!(p=function e(t,n,r){var i=t.childNodes.length;if(i&&r.top<r.bottom)for(var o=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),s=o;;){var a=t.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),l=0;l<c.length;l++){var h=c[l];if(A(n,h))return e(a,n,h)}if((s=(s+1)%i)==o)break}return t}(e.dom,t,u)))return null}if(p=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(p,t),i){if(s.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length))<i.childNodes.length){var d,f=i.childNodes[o];"IMG"==f.nodeName&&(d=f.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&o++}i==e.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?h=e.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(h=function(e,t,n,r){for(var i=-1,o=t;o!=e.dom;){var s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}(e,i,o,t))}null==h&&(h=function(e,t,n){var r=T(t,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}(e,p,t));var m=e.docView.nearestDesc(p,!0);return{pos:h,inside:m?m.posAtStart-m.border:-1}}function M(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function O(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset;if(3==r.nodeType&&(s.chrome||s.gecko)){var o=M(f(r,i,i),0);if(s.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var a=M(f(r,i-1,i-1),-1);if(Math.abs(a.left-o.left)<1&&a.top==o.top){var c=M(f(r,i,i+1),-1);return D(c,c.left<a.left)}}return o}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,h=!0;if(i<r.childNodes.length){var p=r.childNodes[i];1==p.nodeType&&(l=p.getBoundingClientRect())}if(!l&&i){var u=r.childNodes[i-1];1==u.nodeType&&(l=u.getBoundingClientRect(),h=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(l||r.getBoundingClientRect(),h)}for(var d=-1;d<2;d+=2)if(d<0&&i){var m=void 0,g=3==r.nodeType?f(r,i-1,i):3==(m=r.childNodes[i-1]).nodeType?f(m):1==m.nodeType&&"BR"!=m.nodeName?m:null;if(g){var v=M(g,1);if(v.top<v.bottom)return D(v,!1)}}else if(d>0&&i<y(r)){var b=void 0,w=3==r.nodeType?f(r,i,i+1):3==(b=r.childNodes[i]).nodeType?f(b):1==b.nodeType?b:null;if(w){var x=M(w,-1);if(x.top<x.bottom)return D(x,!0)}}return D(M(3==r.nodeType?f(r):r,0),!1)}function D(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function R(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i.focus()}}var P=/[\u0590-\u08ac]/;var I=null,L=null,B=!1;function V(e,t,n){return I==t&&L==n?B:(I=t,L=n,B="up"==n||"down"==n?function(e,t,n){var r=t.selection,i="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return R(e,t,(function(){for(var t=e.docView.domFromPos(i.pos).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var o=O(e,i.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<o.top+1:l.top>o.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=getSelection();return P.test(r.parent.textContent)&&a.modify?R(e,t,(function(){var t=a.getRangeAt(0),i=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||i==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?o:s}(e,t,n))}var F=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},z={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};F.prototype.matchesWidget=function(){return!1},F.prototype.matchesMark=function(){return!1},F.prototype.matchesNode=function(){return!1},F.prototype.matchesHack=function(){return!1},z.beforePosition.get=function(){return!1},F.prototype.parseRule=function(){return null},F.prototype.stopEvent=function(){return!1},z.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},z.border.get=function(){return 0},F.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},F.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},z.posBefore.get=function(){return this.parent.posBeforeChild(this)},z.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},z.posAfter.get=function(){return this.posBefore+this.size},z.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},F.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},F.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(e):i.nodeDOM==e))return i;n=!1}}},F.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},F.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}},F.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}},F.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:u(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],i=t+r.size;if(e<i)return r.domFromPos(e-t-r.border);t=i}},F.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==r&&e<=c){var l=o+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=o;for(var h=s;h>0;h--){var p=this.children[h-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=u(p.dom)+1;break}e-=p.size}-1==r&&(r=0)}if(r>-1&&t<=c){t=c;for(var d=s+1;d<this.children.length;d++){var f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=u(f.dom);break}t+=f.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}},F.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},F.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},F.prototype.setSelection=function(e,t,n,r){for(var i=Math.min(e,t),o=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(i>a&&o<l)return c.setSelection(e-a-c.border,t-a-c.border,n,r);a=l}var h=this.domFromPos(e),p=this.domFromPos(t),u=n.getSelection(),d=document.createRange();if(r||!m(h.node,h.offset,u.anchorNode,u.anchorOffset)||!m(p.node,p.offset,u.focusNode,u.focusOffset)){if(u.extend)d.setEnd(h.node,h.offset),d.collapse(!1);else{if(e>t){var f=h;h=p,p=f}d.setEnd(p.node,p.offset),d.setStart(h.node,h.offset)}u.removeAllRanges(),u.addRange(d),u.extend&&u.extend(p.node,p.offset)}},F.prototype.ignoreMutation=function(e){return!this.contentDOM},z.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},F.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var s=n+i.border,a=o-i.border;if(e>=s&&t<=a)return this.dirty=e==n||t==o?2:1,void(e!=s||t!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-s,t-s):i.dirty=3);i.dirty=3}n=o}this.dirty=2},F.prototype.markParentsDirty=function(){for(var e=this.parent;e;e=e.parent){e.dirty<2&&(e.dirty=2)}},Object.defineProperties(F.prototype,z);var q=[],j=function(e){function t(t,n,r,i){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,q,s,null),this.widget=n,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,n),t}(F),U=function(e){function t(t,n,r,i){e.call(this,t,q,n,null),this.textDOM=r,this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(F),W=function(e){function t(t,n,r,i){e.call(this,t,[],r,i),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var i=t.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=ae(o,n,s,r)),e>0&&(o=ae(o,0,e,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},t}(F),H=function(e){function t(t,n,r,i,o,s,a,c,l){e.call(this,t,n.isLeaf?q:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=i,s&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0}};return t.create=function(e,n,r,o,s,a){var c,l,h=s.nodeViews[n.type.name],p=h&&h(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r),u=p&&p.dom,d=p&&p.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else u||(u=(c=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,d=c.contentDOM);d||n.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),n.type.spec.draggable&&(u.draggable=!0));var f=u;return u=ne(u,r,n),p?l=new G(e,n,r,o,u,d,f,p,s,a+1):n.isText?new J(e,n,r,o,u,f,s):new t(e,n,r,o,u,d,f,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?i.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&re(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,s=r&&e.composing&&this.localCompositionNode(e,t),a=new oe(this,s&&s.node);!function(e,t,n,r){var i=t.locals(e),o=0;if(0==i.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,i,t.forChild(o,a),s),o+=a.nodeSize}return}for(var c=0,l=[],h=null,p=0;;){if(c<i.length&&i[c].to==o){for(var u=i[c++],d=void 0;c<i.length&&i[c].to==o;)(d||(d=[u])).push(i[c++]);if(d){d.sort(se);for(var f=0;f<d.length;f++)n(d[f],p,!!h)}else n(u,p,!!h)}var m=void 0,g=void 0;if(h)g=-1,m=h,h=null;else{if(!(p<e.childCount))break;g=p,m=e.child(p++)}for(var v=0;v<l.length;v++)l[v].to<=o&&l.splice(v--,1);for(;c<i.length&&i[c].from==o;)l.push(i[c++]);var y=o+m.nodeSize;if(m.isText){var b=y;c<i.length&&i[c].from<b&&(b=i[c].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(h=m.cut(b-o),m=m.cut(0,b-o),y=b,g=-1)}r(m,l.length?l.slice():q,t.forChild(o,m),g),o=y}}(this.node,this.innerDeco,(function(t,s,c){t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!c&&a.syncToMarks(s==n.node.childCount?i.Mark.none:n.node.child(s).marks,r,e),a.placeWidget(t,e,o)}),(function(t,n,i,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,n,i,s)||a.updateNextNode(t,n,i,e,s)||a.addNode(t,n,i,e,o),o+=t.nodeSize})),a.syncToMarks(q,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),this.renderChildren())},t.prototype.renderChildren=function(){!function e(t,n){for(var r=t.firstChild,i=0;i<n.length;i++){var o=n[i],s=o.dom;if(s.parentNode==t){for(;s!=r;)r=ie(r);r=r.nextSibling}else t.insertBefore(s,r);if(o instanceof W){var a=r?r.previousSibling:t.lastChild;e(o.contentDOM,o.children),r=a?a.nextSibling:t.firstChild}}for(;r;)r=ie(r)}(this.contentDOM,this.children),s.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,i=n.from,o=n.to;if(!(!(e.state.selection instanceof r.TextSelection)||i<t||o>t+this.node.content.size)){var s=e.root.getSelection(),a=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=y(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=function(e,t,n,r){for(var i="",o=0,s=0;o<e.childCount;o++){var a=e.child(o),c=s+a.nodeSize;if(a.isText){if(i+=a.text,c>=r){for(var l=c-i.length,h=i.lastIndexOf(t);h>-1&&l+h>n;)h=i.lastIndexOf(t,h-1);if(h>-1&&l+h+t.length>=r)return l+h;if(c>r)break}}else i="";s=c}return-1}(this.node.content,c,i-t,o-t);return l<0?null:{node:a,pos:l,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,i=t.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new U(this,o,n,i);e.compositionNodes.push(s),this.children=ae(this.children,r,r+i.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!re(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ee(this.dom,this.nodeDOM,Z(this.outerDeco,this.node,t),Z(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(t.prototype,n),t}(F);function K(e,t,n,r,i){return ne(r,t,e),new H(null,e,t,n,r,r,r,i,0)}var J=function(e){function t(t,n,r,i,o,s,a){e.call(this,t,n,r,i,o,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},t.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var i=this.node.cut(e,n),o=document.createTextNode(i.text);return new t(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)},t}(H),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(F),G=function(e){function t(t,n,r,i,o,s,a,c,l,h){e.call(this,t,n,r,i,o,s,a,l,h),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,i){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(t,n);return o&&this.updateInner(t,n,r,i),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,i)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,i)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(H);function X(e){e&&(this.nodeName=e)}X.prototype=Object.create(null);var Q=[new X];function Z(e,t,n){if(0==e.length)return Q;for(var r=n?Q[0]:new X,i=[r],o=0;o<e.length;o++){var s=e[o].type.attrs,a=r;if(s)for(var c in s.nodeName&&i.push(a=new X(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==i.length&&i.push(a=r=new X(t.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return i}function ee(e,t,n,r){if(n==Q&&r==Q)return t;for(var i=t,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&i!=e&&(c=i.parentNode)&&c.tagName.toLowerCase()==s.nodeName?i=c:((c=document.createElement(s.nodeName)).appendChild(i),a=Q[0],i=c)}te(i,a||Q[0],s)}return i}function te(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" "):q,s=n.class?n.class.split(" "):q,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&e.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=n.style){if(t.style)for(var l,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=h.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function ne(e,t,n){return ee(e,e,Q,Z(t,n,1!=e.nodeType))}function re(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ie(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var oe=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],r=e.childCount,i=t.length-1;r>0&&i>=0;i--){var o=t[i],s=o.node;if(s){if(s!=e.child(r-1))break;n.push(o),--r}}return{nodes:n.reverse(),offset:r}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function se(e,t){return e.type.side-t.type.side}function ae(e,t,n,r,i){for(var o=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,h=a+=c.size;l>=n||h<=t?o.push(c):(l<t&&o.push(c.slice(0,t-l,r)),i&&(o.push(i),i=null),h>n&&o.push(c.slice(n-l,c.size,r)))}return o}function ce(e,t){var n=e.selection,i=n.$anchor,o=n.$head,s=t>0?i.max(o):i.min(o),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,t)}function le(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function he(e,t,n){var i=e.state.selection;if(i instanceof r.TextSelection){if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=ce(e.state,t);return!!(o&&o instanceof r.NodeSelection)&&le(e,o)}var a,c=i.$head,l=c.textOffset?null:t<0?c.nodeBefore:c.nodeAfter;if(!l||l.isText)return!1;var h=t<0?c.pos-l.nodeSize:c.pos;return!!(l.isAtom||(a=e.docView.descAt(h))&&!a.contentDOM)&&(r.NodeSelection.isSelectable(l)?le(e,new r.NodeSelection(t<0?e.state.doc.resolve(c.pos-l.nodeSize):c)):!!s.webkit&&le(e,new r.TextSelection(e.state.doc.resolve(t<0?h:h+l.nodeSize))))}if(i instanceof r.NodeSelection&&i.node.isInline)return le(e,new r.TextSelection(t>0?i.$to:i.$from));var p=ce(e.state,t);return!!p&&le(e,p)}function pe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ue(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function de(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var i,o,a=!1;for(s.gecko&&1==n.nodeType&&r<pe(n)&&ue(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(ue(c))i=n,o=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(me(n))break;for(var l=n.previousSibling;l&&ue(l);)i=n.parentNode,o=u(l),l=l.previousSibling;if(l)r=pe(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}a?ge(e,t,n,r):i&&ge(e,t,i,o)}}function fe(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var i,o,s=pe(n);;)if(r<s){if(1!=n.nodeType)break;if(!ue(n.childNodes[r]))break;i=n,o=++r}else{if(me(n))break;for(var a=n.nextSibling;a&&ue(a);)i=a.parentNode,o=u(a)+1,a=a.nextSibling;if(a)r=0,s=pe(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}i&&ge(e,t,i,o)}}function me(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ge(e,t,n,r){if(w(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection()}function ve(e,t,n){var i=e.state.selection;if(i instanceof r.TextSelection&&!i.empty||n.indexOf("s")>-1)return!1;var o=i.$from,s=i.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=ce(e.state,t);if(a&&a instanceof r.NodeSelection)return le(e,a)}if(!o.parent.inlineContent){var c=r.Selection.findFrom(t<0?o:s,t);return!c||le(e,c)}return!1}function ye(e,t){if(!(e.state.selection instanceof r.TextSelection))return!0;var n=e.state.selection,i=n.$head,o=n.$anchor,s=n.empty;if(!i.sameParent(o))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!i.textOffset&&(t<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(i.pos-a.nodeSize,i.pos):c.delete(i.pos,i.pos+a.nodeSize),e.dispatch(c),!0}return!1}function be(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function we(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||s.mac&&72==n&&"c"==r?ye(e,-1)||de(e):46==n||s.mac&&68==n&&"c"==r?ye(e,1)||fe(e):13==n||27==n||(37==n?he(e,-1,r)||de(e):39==n?he(e,1,r)||fe(e):38==n?ve(e,-1,r)||de(e):40==n?function(e){if(s.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;be(e,i,!0),setTimeout((function(){return be(e,i,!1)}),20)}}}(e)||ve(e,1,r)||fe(e):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function xe(e,t){var n=e.state.selection;if(Se(e,n),e.editable?e.hasFocus():Ee(e)&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,u(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var i,o,a=n.anchor,c=n.head;!ke||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(i=_e(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=_e(e,n.to))),e.docView.setSelection(a,c,e.root,t),ke&&(i&&(i.contentEditable="false"),o&&(o.contentEditable="false")),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):a!=c&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}oe.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},oe.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},oe.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},oe.prototype.syncToMarks=function(e,t,n){for(var r=0,i=this.stack.length>>1,o=Math.min(i,e.length);r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=W.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}},oe.prototype.findNodeMatch=function(e,t,n,r){var i=-1,o=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(o&&o.matchesNode(e,t,n))i=s.indexOf(o);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},oe.prototype.updateNextNode=function(e,t,n,r,i){if(this.index==this.top.children.length)return!1;var o=this.top.children[this.index];if(o instanceof H){var s=this.preMatched.indexOf(o);if(s>-1&&s+this.preMatchOffset!=i)return!1;var a=o.dom;if(!(this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))&&!(e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&re(t,o.outerDeco)))&&o.update(e,t,n,r))return o.dom!=a&&(this.changed=!0),this.index++,!0}return!1},oe.prototype.addNode=function(e,t,n,r,i){this.top.children.splice(this.index++,0,H.create(this.top,e,t,n,r,i)),this.changed=!0},oe.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new j(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},oe.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof W;)e=e.children[e.children.length-1];if(!e||!(e instanceof J)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Y(this.top,q,t,null)),this.changed=!0}};var ke=s.safari||s.chrome&&s.chrome_version<63;function _e(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,s=i?r.childNodes[i-1]:null;if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return o.contentEditable="true",o;if(s)return s.contentEditable="true",s}}function Se(e,t){if(t instanceof r.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&($e(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else $e(e)}function $e(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ce(e,t,n,i){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r.TextSelection.between(t,n,i)}function Ee(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Te(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(s.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||s.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Ae(e,t,n,o){if(t<0){var a=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,c=function(e,t){var n,i,o=e.root.getSelection(),s=e.state.doc,a=e.docView.nearestDesc(o.focusNode),c=a&&0==a.size,l=e.docView.posFromDOM(o.focusNode,o.focusOffset),h=s.resolve(l);if(w(o)){for(n=h;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&r.NodeSelection.isSelectable(a.node)&&a.parent){var p=a.posBefore;i=new r.NodeSelection(l==p?h:s.resolve(p))}}else n=s.resolve(e.docView.posFromDOM(o.anchorNode,o.anchorOffset));return i||(i=Ce(e,n,h,"pointer"==t||e.state.selection.head<h.pos&&!c?1:-1)),i}(e,a);if(!e.state.selection.eq(c)){var l=e.state.tr.setSelection(c);"pointer"==a?l.setMeta("pointer",!0):"key"==a&&l.scrollIntoView(),e.dispatch(l)}}else{var h=e.state.doc.resolve(t),p=h.sharedDepth(n);t=h.before(p+1),n=e.state.doc.resolve(n).after(p+1);var u,d,f=e.state.selection,m=function(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,h=r.to,p=e.root.getSelection(),u=null,d=p.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(u=[{node:d,offset:p.anchorOffset}],w(p)||u.push({node:p.focusNode,offset:p.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var f=c;f>a;f--){var m=o.childNodes[f-1],g=m.pmViewDesc;if("BR"==m.nodeType&&!g){c=f;break}if(!g||g.size)break}var v=e.state.doc,y=e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema),b=v.resolve(l),x=null,k=y.parse(o,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Te,context:b});if(u&&null!=u[0].pos){var _=u[0].pos,S=u[1]&&u[1].pos;null==S&&(S=_),x={anchor:_+l,head:S+l}}return{doc:k,sel:x,from:l,to:h}}(e,t,n),g=e.state.doc,v=g.slice(m.from,m.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(u=e.state.selection.to,d="end"):(u=e.state.selection.from,d="start"),e.lastKeyCode=null;var y=function(e,t,n,r,i){var o=e.findDiffStart(t,n);if(null==o)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==i){var l=Math.max(0,o-Math.min(a,c));r-=a+l-o}if(a<o&&e.size<t.size){c=(o-=r<=o&&r>=a?o-r:0)+(c-a),a=o}else if(c<o){a=(o-=r<=o&&r>=c?o-r:0)+(a-c),c=o}return{start:o,endA:a,endB:c}}(v.content,m.doc.content,m.from,u,d);if(!y){if(!(o&&f instanceof r.TextSelection&&!f.empty&&f.$head.sameParent(f.$anchor))||e.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var b=Ne(e,e.state.doc,m.sel);b&&!b.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(b))}return}y={start:f.from,endA:f.to,endB:f.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof r.TextSelection&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>m.from&&" "==m.doc.textBetween(y.start-m.from-1,y.start-m.from+1)&&(y.start--,y.endA--,y.endB--);var k,_=m.doc.resolveNoCache(y.start-m.from),S=m.doc.resolveNoCache(y.endB-m.from);if(!(!_.sameParent(S)&&_.pos<m.doc.content.size&&(k=r.Selection.findFrom(m.doc.resolve(_.pos+1),1,!0))&&k.head==S.pos&&e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))}))))if(e.state.selection.anchor>y.start&&function(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||Me(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=e.resolve(Me(o,!0,!0));if(!s.parent.isTextblock||s.pos>n||Me(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(g,y.start,y.endA,_,S)&&e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{var $,C,E,T,A=y.start,N=y.endA;if(_.sameParent(S)&&_.parent.inlineContent)if(_.pos==S.pos)s.ie&&s.ie_version<=11&&0==_.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return xe(e)}),20)),$=e.state.tr.delete(A,N),C=g.resolve(y.start).marksAcross(g.resolve(y.endA));else if(y.endA==y.endB&&(T=g.resolve(y.start))&&(E=function(e,t){for(var n,r,o,s=e.firstChild.marks,a=t.firstChild.marks,c=s,l=a,h=0;h<a.length;h++)c=a[h].removeFromSet(c);for(var p=0;p<s.length;p++)l=s[p].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var u=[],d=0;d<t.childCount;d++)u.push(o(t.child(d)));if(i.Fragment.from(u).eq(e))return{mark:r,type:n}}(_.parent.content.cut(_.parentOffset,S.parentOffset),T.parent.content.cut(T.parentOffset,y.endA-T.start()))))$=e.state.tr,"add"==E.type?$.addMark(A,N,E.mark):$.removeMark(A,N,E.mark);else if(_.parent.child(_.index()).isText&&_.index()==S.index()-(S.textOffset?0:1)){var M=_.parent.textBetween(_.parentOffset,S.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,A,N,M)})))return;$=e.state.tr.insertText(M,A,N)}if($||($=e.state.tr.replace(A,N,m.doc.slice(y.start-m.from,y.endB-m.from))),m.sel){var O=Ne(e,$.doc,m.sel);O&&!(s.chrome&&s.android&&e.composing&&O.empty&&O.head==A||s.ie&&O.empty&&O.head==A)&&$.setSelection(O)}C&&$.ensureMarks(C),e.dispatch($.scrollIntoView())}}}function Ne(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ce(e,t.resolve(n.anchor),t.resolve(n.head))}function Me(e,t,n){for(var r=e.depth,i=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n)for(var o=e.node(r).maybeChild(e.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function Oe(e,t){for(var n=[],r=t.content,o=t.openStart,s=t.openEnd;o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||i.DOMSerializer.fromSchema(e.state.schema),l=Be(),h=l.createElement("div");h.appendChild(c.serializeFragment(r,{document:l}));for(var p,u=h.firstChild;u&&1==u.nodeType&&(p=Ie[u.nodeName.toLowerCase()]);){for(var d=p.length-1;d>=0;d--){for(var f=l.createElement(p[d]);h.firstChild;)f.appendChild(h.firstChild);h.appendChild(f)}u=h.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(n)),{dom:h,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function De(e,t,n,r,o){var s,a,c=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||c||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t)})),c)return new i.Slice(i.Fragment.from(e.state.schema.text(t)),0,0);var h=e.someProp("clipboardTextParser",(function(e){return e(t,o)}));h?a=h:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Be().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&Ie[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length);r.innerHTML=e;for(var s=0;s<o;s++)r=r.firstChild;return r}(n);var p=s&&s.querySelector("[data-pm-slice]"),u=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(s,{preserveWhitespace:!(!l&&!u),context:o})}return a=u?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;o=i.Fragment.from(l.create(n[c+1],o)),s++,a++}return new i.Slice(o,s,a)}(function(e,t,n){t<e.openStart&&(e=new i.Slice(Pe(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new i.Slice(Pe(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(a,+u[1],+u[2]),u[3]):i.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=r.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&o.length&&function e(t,n,r,o,s){if(s<t.length&&s<n.length&&t[s]==n[s]){var a=e(t,n,r,o.lastChild,s+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(s==t.length-1?r.type:t[s+1]))return o.copy(o.content.append(i.Fragment.from(Re(r,t,s+1))))}}(n,o,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(i.Fragment.empty,!0);return t.copy(r.append(o))}(s[s.length-1],o.length));var a=Re(e,n);s.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),s)return{v:i.Fragment.from(s)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Re(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,i.Fragment.from(e));return e}function Pe(e,t,n,r,o,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return o<r-1&&(c=Pe(c,t,n,r,o+1,s)),o>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}var Ie={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Le=null;function Be(){return Le||(Le=document.implementation.createHTMLDocument("title"))}var Ve={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Fe=s.ie&&s.ie_version<=11,ze=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};ze.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},ze.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var qe=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new ze,Fe&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};qe.prototype.flushSoon=function(){var e=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout((function(){e.flushingSoon=!1,e.flush()}),20))},qe.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Ve),Fe&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},qe.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Fe&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},qe.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},qe.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},qe.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},qe.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Ee(e)){var e;if(this.suppressingSelectionUpdates)return xe(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&m(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},qe.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},qe.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})},qe.prototype.flush=function(){if(this.view.docView&&!this.flushingSoon){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Ee(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&!this.view.composing&&(o=!0))}if(s.gecko&&a.length>1){var h=a.filter((function(e){return"BR"==e.nodeName}));if(2==h.length){var p=h[0],u=h[1];p.parentNode&&p.parentNode.parentNode==u.parentNode?u.remove():p.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),function(e){if(je)return;je=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,i,o),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||xe(this.view))}},qe.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var a=e.addedNodes[o],c=a.previousSibling,l=a.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(r=c),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l)}for(var h=r&&r.parentNode==e.target?u(r)+1:0,p=n.localPosFromDOM(e.target,h,-1),d=i&&i.parentNode==e.target?u(i):e.target.childNodes.length,f=0;f<e.addedNodes.length;f++)t.push(e.addedNodes[f]);return{from:p,to:n.localPosFromDOM(e.target,d,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var je=!1;var Ue={},We={};function He(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Ke(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Je(e,t)})}))}function Je(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Ye(e){return{left:e.clientX,top:e.clientY}}function Ge(e,t,n,r,i){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Xe(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Qe(e,t,n,i,o){return Ge(e,"handleClickOn",t,n,i)||e.someProp("handleClick",(function(n){return n(e,t,i)}))||(o?function(e,t){if(-1==t)return!1;var n,i,o=e.state.selection;o instanceof r.NodeSelection&&(n=o.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(c)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(Xe(e,r.NodeSelection.create(e.state.doc,i),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&r.NodeSelection.isSelectable(i))&&(Xe(e,new r.NodeSelection(n),"pointer"),!0)}(e,n))}function Ze(e,t,n,r){return Ge(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function et(e,t,n,i){return Ge(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",(function(n){return n(e,t,i)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Xe(e,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var i=n.resolve(t),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Xe(e,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;Xe(e,r.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function tt(e){return at(e)}We.keydown=function(e,t){e.shiftKey=16==t.keyCode||t.shiftKey,it(e,t)||(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",(function(n){return n(e,t)}))||we(e,t)?t.preventDefault():He(e,"key"))},We.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},We.keypress=function(e,t){if(!(it(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var i=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,i)}))||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}}};var nt=s.mac?"metaKey":"ctrlKey";Ue.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=tt(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[nt]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(Ye(t));o&&("singleClick"==i?e.mouseDown=new rt(e,o,t,n):("doubleClick"==i?Ze:et)(e,o.pos,o.inside,t)?t.preventDefault():He(e,"pointer"))};var rt=function(e,t,n,i){var o,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=i,this.selectNode=n[nt],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);o=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var h=i?null:n.target,p=h?e.docView.nearestDesc(h,!0):null;this.target=p?p.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof r.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),He(e,"pointer")};function it(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}rt.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},rt.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ye(e))),this.allowDefault||!t?He(this.view,"pointer"):Qe(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():!this.flushed&&(!s.chrome||this.view.state.selection instanceof r.TextSelection||t.pos!=this.view.state.selection.from&&t.pos!=this.view.state.selection.to)?He(this.view,"pointer"):(Xe(this.view,r.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault())}},rt.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),He(this.view,"pointer")},Ue.touchdown=function(e){tt(e),He(e,"pointer")},Ue.contextmenu=function(e){return tt(e)};var ot=s.android?5e3:-1;function st(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return at(e)}),t))}function at(e,t){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();return!(!t&&!e.docView.dirty)&&(e.updateState(e.state),!0)}We.compositionstart=We.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),at(e,!0),e.markCursor=null;else if(at(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}e.composing=!0}st(e,ot)},We.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,st(e,20))};var ct=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function lt(e,t,n,r){var o=De(e,t,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",(function(t){return t(e,r,o||i.Slice.empty)}))&&o){var s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(o);e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Ue.copy=We.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var i=ct?null:t.clipboardData,o=Oe(e,n.content()),s=o.dom,a=o.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(e,t){var n=e.dom.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var i=getSelection(),o=n.createRange();o.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout((function(){n.body.removeChild(r),e.focus()}),50)}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},We.paste=function(e,t){var n=ct?null:t.clipboardData,r=n&&n.getData("text/html"),i=n&&n.getData("text/plain");n&&(r||i||n.files.length)?(lt(e,i,r,t),t.preventDefault()):function(e,t){var n=e.dom.ownerDocument,r=e.shiftKey||e.state.selection.$from.parent.type.spec.code,i=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((function(){e.focus(),n.body.removeChild(i),r?lt(e,i.value,null,t):lt(e,i.textContent,i.innerHTML,t)}),50)}(e,t)};var ht=function(e,t){this.slice=e,this.move=t},pt=s.mac?"altKey":"ctrlKey";for(var ut in Ue.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var i=e.state.selection,o=i.empty?null:e.posAtCoords(Ye(t));if(o&&o.pos>=i.from&&o.pos<=(i instanceof r.NodeSelection?i.to-1:i.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=Oe(e,a),l=c.dom,h=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(ct?"Text":"text/html",l.innerHTML),ct||t.dataTransfer.setData("text/plain",h),e.dragging=new ht(a,!t[pt])}},Ue.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},We.dragover=We.dragenter=function(e,t){return t.preventDefault()},We.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var i=e.posAtCoords(Ye(t));if(i){var s=e.state.doc.resolve(i.pos);if(s){var a=n&&n.slice||De(e,t.dataTransfer.getData(ct?"Text":"text/plain"),ct?null:t.dataTransfer.getData("text/html"),!1,s);if(a&&(t.preventDefault(),!e.someProp("handleDrop",(function(r){return r(e,t,a,n&&n.move)})))){var c=a?Object(o.d)(e.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);var l=e.state.tr;n&&n.move&&l.deleteSelection();var h=l.mapping.map(c),p=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,u=l.doc;if(p?l.replaceRangeWith(h,h,a.content.firstChild):l.replaceRange(h,h,a),!l.doc.eq(u)){var d=l.doc.resolve(h);p&&r.NodeSelection.isSelectable(a.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(a.content.firstChild)?l.setSelection(new r.NodeSelection(d)):l.setSelection(Ce(e,d,l.doc.resolve(l.mapping.map(c)))),e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},Ue.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0)},Ue.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Ue.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},We)Ue[ut]=We[ut];function dt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var ft=function(e,t){this.spec=t||wt,this.side=this.spec.side||0,this.toDOM=e};ft.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,this.side<0?-1:1),o=i.pos;return i.deleted?null:new vt(o-n,o-n,this)},ft.prototype.valid=function(){return!0},ft.prototype.eq=function(e){return this==e||e instanceof ft&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&dt(this.spec,e.spec))};var mt=function(e,t){this.spec=t||wt,this.attrs=e};mt.prototype.map=function(e,t,n,r){var i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new vt(i,o,this)},mt.prototype.valid=function(e,t){return t.from<t.to},mt.prototype.eq=function(e){return this==e||e instanceof mt&&dt(this.attrs,e.attrs)&&dt(this.spec,e.spec)},mt.is=function(e){return e.type instanceof mt};var gt=function(e,t){this.spec=t||wt,this.attrs=e};gt.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,1);if(i.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new vt(i.pos-n,o.pos-n,this)},gt.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,i=n.offset;return i==t.from&&i+e.child(r).nodeSize==t.to},gt.prototype.eq=function(e){return this==e||e instanceof gt&&dt(this.attrs,e.attrs)&&dt(this.spec,e.spec)};var vt=function(e,t,n){this.from=e,this.to=t,this.type=n},yt={spec:{configurable:!0}};vt.prototype.copy=function(e,t){return new vt(e,t,this.type)},vt.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},vt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},vt.widget=function(e,t,n){return new vt(e,e,new ft(t,n))},vt.inline=function(e,t,n,r){return new vt(e,t,new mt(n,r))},vt.node=function(e,t,n,r){return new vt(e,t,new gt(n,r))},yt.spec.get=function(){return this.type.spec},Object.defineProperties(vt.prototype,yt);var bt=[],wt={},xt=function(e,t){this.local=e&&e.length?e:bt,this.children=t&&t.length?t:bt};xt.create=function(e,t){return t.length?Et(t,e,0,wt):kt},xt.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},xt.prototype.findInner=function(e,t,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,i)}},xt.prototype.map=function(e,t,n){return this==kt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||wt)},xt.prototype.mapInner=function(e,t,n,r,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+o||(t>=a[s]+o?a[s+1]=-1:(l=r-n-(t-e)+(o-i))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var h=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var u=n.map(a[p]+o),d=u-i;if(d<0||d>=r.content.size){h=!0;continue}var f=n.map(e[p+1]+o,-1)-i,m=r.content.findIndex(d),g=m.index,v=m.offset,y=r.maybeChild(g);if(y&&v==d&&v+y.nodeSize==f){var b=a[p+2].mapInner(n,y,u+1,a[p]+o+1,s);b!=kt?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,h=!0)}else h=!0}if(h){var w=Et(function(e,t,n,r,i,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var c=e.local[o].map(r,i,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[o].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+o+1);return n}(a,e,t||[],n,i,o,s),r,0,s);t=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var k=0,_=0;k<w.children.length;k+=3){for(var S=w.children[k];_<a.length&&a[_]<S;)_+=3;a.splice(_,0,w.children[k],w.children[k+1],w.children[k+2])}}return new xt(t&&t.sort(Tt),a)}(this.children,o,e,t,n,r,i):o?new xt(o.sort(Tt)):kt},xt.prototype.add=function(e,t){return t.length?this==kt?xt.create(e,t):this.addInner(e,t,0):this},xt.prototype.addInner=function(e,t,n){var r,i=this,o=0;e.forEach((function(e,s){var a,c=s+n;if(a=$t(t,e,c)){for(r||(r=i.children.slice());o<r.length&&r[o]<s;)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(e,a,c+1):r.splice(o,0,s,s+e.nodeSize,Et(a,e,c+1,wt)),o+=3}}));var s=St(o?Ct(t):t,-n);return new xt(s.length?this.local.concat(s).sort(Tt):this.local,r||this.children)},xt.prototype.remove=function(e){return 0==e.length||this==kt?this:this.removeInner(e,0)},xt.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,s=n[i]+t,a=n[i+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(o||(o=[])).push(l));if(o){n==this.children&&(n=this.children.slice());var h=n[i+2].removeInner(o,s+1);h!=kt?n[i+2]=h:(n.splice(i,3),i-=3)}}if(r.length)for(var p=0,u=void 0;p<e.length;p++)if(u=e[p])for(var d=0;d<r.length;d++)r[d].type.eq(u.type)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1));return n==this.children&&r==this.local?this:r.length||n.length?new xt(r,n):kt},xt.prototype.forChild=function(e,t){if(this==kt)return this;if(t.isLeaf)return xt.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(n=this.children[i+2]);break}for(var o=e+1,s=o+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof mt){var l=Math.max(o,c.from)-o,h=Math.min(s,c.to)-o;l<h&&(r||(r=[])).push(c.copy(l,h))}}if(r){var p=new xt(r.sort(Tt));return n?new _t([p,n]):p}return n||kt},xt.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof xt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},xt.prototype.locals=function(e){return At(this.localsInner(e))},xt.prototype.localsInner=function(e){if(this==kt)return bt;if(e.inlineContent||!this.local.some(mt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof mt||t.push(this.local[n]);return t};var kt=new xt;xt.empty=kt,xt.removeOverlap=At;var _t=function(e){this.members=e};function St(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new vt(i.from+t,i.to+t,i.type))}return n}function $t(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,i=null,o=0,s=void 0;o<e.length;o++)(s=e[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[o]=null);return i}function Ct(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Et(e,t,n,r){var i=[],o=!1;t.forEach((function(t,s){var a=$t(e,t,s+n);if(a){o=!0;var c=Et(a,t,n+s+1,r);c!=kt&&i.push(s,s+t.nodeSize,c)}}));for(var s=St(o?Ct(e):e,-n).sort(Tt),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new xt(s,i):kt}function Tt(e,t){return e.from-t.from||e.to-t.to}function At(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),Nt(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),Nt(t,i+1,o.copy(r.to,o.to)))}}return t}function Nt(e,t,n){for(;t<e.length&&Tt(n,e[t])>0;)t++;e.splice(t,0,n)}function Mt(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=kt&&t.push(r)})),e.cursorWrapper&&t.push(xt.create(e.state.doc,[e.cursorWrapper.deco])),_t.from(t)}_t.prototype.forChild=function(e,t){if(t.isLeaf)return xt.empty;for(var n=[],r=0;r<this.members.length;r++){var i=this.members[r].forChild(e,t);i!=kt&&(i instanceof _t?n=n.concat(i.members):n.push(i))}return _t.from(n)},_t.prototype.eq=function(e){if(!(e instanceof _t)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},_t.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?At(n?t:t.sort(Tt)):bt},_t.from=function(e){switch(e.length){case 0:return kt;case 1:return e[0];default:return new _t(e)}};var Ot=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=It(this),this.markCursor=null,this.cursorWrapper=null,Pt(this),this.nodeViews=Lt(this),this.docView=K(this.state.doc,Rt(this),Mt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new qe(e,(function(t,n,r){return Ae(e,t,n,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ue[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Je(e,t)||!e.editable&&t.type in We||n(e,t)})};for(var n in Ue)t(n);s.safari&&e.dom.addEventListener("input",(function(){return null})),Ke(e)}(this),this.pluginViews=[],this.updatePluginViews()},Dt={props:{configurable:!0},root:{configurable:!0}};function Rt(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[vt.node(0,e.state.doc.content.size,t)]}function Pt(e){var t=e.state.selection,n=t.$head,r=t.$anchor,i=t.visible;if(e.markCursor){var o=document.createElement("img");o.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:o,deco:vt.widget(n.pos,o,{raw:!0,marks:e.markCursor})}}else if(i||n.pos!=r.pos)e.cursorWrapper=null;else{var s;!e.cursorWrapper||e.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):e.cursorWrapper.deco.pos!=n.pos&&(s=e.cursorWrapper.dom),s&&(e.cursorWrapper={dom:s,deco:vt.widget(n.pos,s,{raw:!0})})}}function It(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Lt(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}Dt.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Ot.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ke(this),this._props=e,this.updateStateInner(e.state,!0)},Ot.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Ot.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Ot.prototype.updateStateInner=function(e,t){var n=this,i=this.state,o=!1;if(this.state=e,t){var a=Lt(this);(function(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r})(a,this.nodeViews)&&(this.nodeViews=a,o=!0),Ke(this)}this.editable=It(this),Pt(this);var c,l,h,p,u,d,f,g,v,y,b,w=Mt(this),x=Rt(this),k=t?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",_=o||!this.docView.matchesNode(e.doc,x,w),E=_||!e.selection.eq(i.selection),T="preserve"==k&&E&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(o,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=i-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:$(e.dom)}}(this);if(E){this.domObserver.stop();var A=_&&(s.ie||s.chrome)&&!i.selection.empty&&!e.selection.empty&&(p=i.selection,u=e.selection,d=Math.min(p.$anchor.sharedDepth(p.head),u.$anchor.sharedDepth(u.head)),p.$anchor.node(d)!=u.$anchor.node(d));_&&(!o&&this.docView.update(e.doc,x,w,this)||(this.docView.destroy(),this.docView=K(e.doc,x,w,this.dom,this))),A||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(c=this,l=c.docView.domFromPos(c.state.selection.anchor),h=c.root.getSelection(),m(l.node,l.offset,h.anchorNode,h.anchorOffset)))?xe(this,A):(Se(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==k)this.dom.scrollTop=0;else if("to selection"==k){var N=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r.NodeSelection?S(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),N):S(this,this.coordsAtPos(e.selection.head),N))}else T&&(g=(f=T).refDOM,v=f.refTop,y=f.stack,b=g?g.getBoundingClientRect().top:0,C(y,0==b?0:b-v))},Ot.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Ot.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Ot.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var s=i[o].props[e];if(null!=s&&(n=t?t(s):s))return n}},Ot.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Ot.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(E)return e.focus(E);var t=$(e);e.focus(null==E?{get preventScroll(){return E={preventScroll:!0},!0}}:void 0),E||(E=!1,C(t,0))}(this.dom),xe(this),this.domObserver.start()},Dt.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Ot.prototype.posAtCoords=function(e){return N(this,e)},Ot.prototype.coordsAtPos=function(e){return O(this,e)},Ot.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},Ot.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Ot.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Ot.prototype.endOfTextblock=function(e,t){return V(this,t||this.state,e)},Ot.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Ot.prototype.dispatchEvent=function(e){return function(e,t){Je(e,t)||!Ue[t.type]||!e.editable&&t.type in We||Ue[t.type](e,t)}(this,e)},Ot.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Ot.prototype,Dt)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(12),o=n(33),s=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var r=0,i=e.length;r<i;r++){var o=O(e[r])(n.selection);if(o){var s=m(o.pos,t)(n);if(s!==n)return s}}return n}},a=function(e){return function(t){if(u(t.selection)){var n=t.selection,o=n.$from,s=n.$to;if(e instanceof i.Fragment&&o.parent.canReplace(o.index(),o.indexAfter(),e)||o.parent.canReplaceWith(o.index(),o.indexAfter(),e.type))return f(t.replaceWith(o.pos,s.pos,e).setSelection(new r.NodeSelection(t.doc.resolve(o.pos))))}return t}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var i=r.Selection.findFrom(n.doc.resolve(e),t,!0);return i?n.setSelection(i):n}},l=function(e){return e.type&&e.type.spec.selectable},h=function(e,t,n){return function(e){return l(e)&&e.type.isLeaf}(e)?n.setSelection(new r.NodeSelection(n.doc.resolve(t))):c(t)(n)},p=function(e,t,n){return function(r){var i="number"==typeof t,o=r.selection.$from,c=i?r.doc.resolve(t):u(r.selection)?r.doc.resolve(o.pos+1):o,p=c.parent;if(u(r.selection)&&n&&r!==(r=a(e)(r)))return r;if(w(p)&&r!==(r=s(p.type,e)(r))){var d=l(e)?c.before(c.depth):c.pos;return h(e,d,r)}if(b(c,e)){r.insert(c.pos,e);var m=i?c.pos:l(e)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return f(h(e,m,r))}for(var g=c.depth;g>0;g--){var v=c.after(g),y=r.doc.resolve(v);if(b(y,e))return r.insert(v,e),f(h(e,v,r))}return r}},u=function(e){return e instanceof r.NodeSelection},d=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},f=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},m=function(e,t){return function(n){var r=n.doc.nodeAt(e),i=n.doc.resolve(e);if(g(i,t)){var o=(n=n.replaceWith(e,e+r.nodeSize,t)).selection.$from.pos-1;return n=c(Math.max(o,0),-1)(n),n=c(n.selection.$from.start())(n),f(n)}return n}},g=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof i.Fragment?t:i.Fragment.from(t))},v=function(e){return function(t){var n=t.doc.nodeAt(e);return f(t.delete(e,e+n.nodeSize))}},y=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t},b=function(e,t){var n=e.index();return t instanceof i.Fragment?e.parent.canReplace(n,n,t):t instanceof i.Node&&e.parent.canReplaceWith(n,n,t.type)},w=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},k=function(e){return function(t){for(var n=o.TableMap.get(t.$anchorCell.node(-1)),r=t.$anchorCell.start(-1),i=n.cellsInRect(e),s=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r)),a=0,c=i.length;a<c;a++)if(-1===s.indexOf(i[a]))return!1;return!0}},_=function(e){return e[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},S=function(e){for(var t=o.TableMap.get(e),n=[],r=0;r<t.height;r++){for(var i=[],s={},a=0;a<t.width;a++){var c=t.map[r*t.width+a],l=e.nodeAt(c),h=t.findCell(c);s[c]||h.top!==r?i.push(null):(s[c]=!0,i.push(l))}n.push(i)}return n},$=function(e,t){for(var n=[],r=o.TableMap.get(e),i=0;i<r.height;i++){for(var s=e.child(i),a=[],c=0;c<r.width;c++)if(t[i][c]){var l=r.map[i*r.width+c],h=t[i][c],p=e.nodeAt(l).type.createChecked(Object.assign({},h.attrs),h.content,h.marks);a.push(p)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return e.type.createChecked(e.attrs,n,e.marks)},C=function(e,t,n,r){var i=t[0]>n[0]?-1:1,o=e.splice(t[0],t.length),s=o.length%2==0?1:0,a=void 0;return a=-1===r&&1===i?n[0]-1:1===r&&-1===i?n[n.length-1]-s+1:-1===i?n[0]:n[n.length-1]-s,e.splice.apply(e,[a,0].concat(o)),e},E=function(e,t,n,r){var i="Target position is invalid, you can't move the "+r+" "+e+" to "+t+", the target can't be split. You could use tryToFit option.";if(1===(e>t?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(t))throw new Error(i)}else if(-1!==n.slice(1).indexOf(t))throw new Error(i);return!0},T=function(e){return function(t){var n=t.$from;return A(n,e)}},A=function(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}},N=function(e,t){return function(n){var r=T(e)(n);if(r)return R(r.pos,t)}},M=function(e){return function(t){return!!T(e)(t)}},O=function(e){return function(t){return T((function(t){return d(e,t)}))(t)}},D=function(e){var t=e.$from.nodeBefore,n=r.Selection.findFrom(e.$from,-1);if(n&&t){var i=O(t.type)(n);return i?i.pos:n.$from.pos}},R=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},P=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,r){if(n.push({node:e,pos:r}),!t)return!1})),n},I=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return P(e,n).filter((function(e){return t(e.node)}))},L=function(e,t,n){return I(e,(function(e){return e.type===t}),n)};var B=function(e){return T((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},V=function(e){return e instanceof o.CellSelection},F=function(e){if(V(e)){var t=o.TableMap.get(e.$anchorCell.node(-1));return k({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},z=function(e){return function(t){var n=B(t);if(n){var r=o.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.width-1){var i=r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height});return e.concat(i.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},q=function(e){return function(t){var n=B(t);if(n){var r=o.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.height-1){var i=r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1});return e.concat(i.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},j=function(e){return function(t,n){return function(r){var i=B(r.selection),s="row"===e;if(i){var a=o.TableMap.get(i.node);if(t>=0&&t<(s?a.height:a.width)){var c=s?0:t,l=s?t:0,h=s?a.width:t+1,p=s?t+1:a.height;if(n){var u=X(r.selection.$from);if(!u)return r;var d=a.findCell(u.pos-i.start);s?(l=Math.min(l,d.top),p=Math.max(p,d.bottom)):(c=Math.min(c,d.left),h=Math.max(h,d.right))}var m=a.cellsInRect({left:c,top:l,right:s?h:c+1,bottom:s?l+1:p}),g=p-l==1?m:a.cellsInRect({left:s?c:h-1,top:s?p-1:l,right:h,bottom:p}),v=i.start+m[0],y=i.start+g[g.length-1],b=r.doc.resolve(v),w=r.doc.resolve(y);return f(r.setSelection(new o.CellSelection(w,b)))}}return r}}},U=j("column"),W=j("row"),H=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(e>=0&&e<=r.height){for(var i=n.node,s=y(i.type.schema),a=n.start,c=0;c<e+1;c++)a+=i.child(c).nodeSize;var l=i.child(e),h=[],u=0;if(l.forEach((function(e){1===e.attrs.rowspan&&(u+=e.attrs.colspan,h.push(s[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),u<r.width){for(var d=[],f=function(n){var r=Z(n,(function(t,r){var i=t.node.attrs.rowspan;return i>1&&n+i>e}))(t);d.push.apply(d,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))},m=e;m>=0;m--)f(m);d.length&&d.forEach((function(e){t=G(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return p(s.row.create(l.attrs,h),a)(t)}}return t}},K=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(0===e&&1===r.width)return Y(t);if(e>=0&&e<=r.width)return o.removeColumn(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},J=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(0===e&&1===r.height)return Y(t);if(e>=0&&e<=r.height)return o.removeRow(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},Y=function(e){for(var t=e.selection.$from,n=t.depth;n>0;n--){if("table"===t.node(n).type.spec.tableRole)return f(e.delete(t.before(n),t.after(n)))}return e},G=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),f(n)):n}},X=function(e){return A(e,(function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)}))},Q=function(e){var t=X(e);if(t){var n=function(e){return A(e,(function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)}))}(e),r=o.TableMap.get(n.node),i=t.pos-n.start;return r.rectBetween(i,i)}},Z=function(e,t){return function(n){var r=[],i=q(e)(n.selection);if(i)for(var o=i.length-1;o>=0;o--)t(i[o],n)&&r.push(i[o]);return r}},ee=function(e){return function(t){for(var n=e,r=e,i=function(e){var i=z(e)(t.selection);i&&i.forEach((function(t){var i=t.node.attrs.colspan+e-1;i>=n&&(n=e),i>r&&(r=i)}))},o=e;o>=0;o--)i(o);var s=function(e){var n=z(e)(t.selection);n&&n.forEach((function(t){var n=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&n>r&&(r=n)}))};for(o=e;o<=r;o++)s(o);var a=[];for(o=n;o<=r;o++){var c=z(o)(t.selection);c&&c.length&&a.push(o)}n=a[0],r=a[a.length-1];for(var l=z(n)(t.selection),h=q(0)(t.selection),p=t.doc.resolve(l[l.length-1].pos),u=void 0,d=r;d>=n;d--){var f=z(d)(t.selection);if(f&&f.length){for(var m=h.length-1;m>=0;m--)if(h[m].pos===f[0].pos){u=f[0];break}if(u)break}}return{$anchor:p,$head:t.doc.resolve(u.pos),indexes:a}}},te=function(e){return function(t){for(var n=e,r=e,i=function(e){q(e)(t.selection).forEach((function(t){var i=t.node.attrs.rowspan+e-1;i>=n&&(n=e),i>r&&(r=i)}))},o=e;o>=0;o--)i(o);var s=function(e){q(e)(t.selection).forEach((function(t){var n=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(o=e;o<=r;o++)s(o);var a=[];for(o=n;o<=r;o++){var c=q(o)(t.selection);c&&c.length&&a.push(o)}n=a[0],r=a[a.length-1];for(var l=q(n)(t.selection),h=z(0)(t.selection),p=t.doc.resolve(l[l.length-1].pos),u=void 0,d=r;d>=n;d--){var f=q(d)(t.selection);if(f&&f.length){for(var m=h.length-1;m>=0;m--)if(h[m].pos===f[0].pos){u=f[0];break}if(u)break}}return{$anchor:p,$head:t.doc.resolve(u.pos),indexes:a}}};t.isNodeSelection=u,t.canInsert=b,t.convertTableNodeToArrayOfRows=S,t.convertArrayOfRowsToTableNode=$,t.findParentNode=T,t.findParentNodeClosestToPos=A,t.findParentDomRef=N,t.hasParentNode=M,t.findParentNodeOfType=O,t.findParentNodeOfTypeClosestToPos=function(e,t){return A(e,(function(e){return d(t,e)}))},t.hasParentNodeOfType=function(e){return function(t){return M((function(t){return d(e,t)}))(t)}},t.findParentDomRefOfType=function(e,t){return function(n){return N((function(t){return d(e,t)}),t)(n)}},t.findSelectedNodeOfType=function(e){return function(t){if(u(t)){var n=t.node,r=t.$from;if(d(e,n))return{node:n,pos:r.pos,depth:r.depth}}}},t.findPositionOfNodeBefore=D,t.findDomRefAtPos=R,t.flatten=P,t.findChildren=I,t.findTextNodes=function(e,t){return I(e,(function(e){return e.isText}),t)},t.findInlineNodes=function(e,t){return I(e,(function(e){return e.isInline}),t)},t.findBlockNodes=function(e,t){return I(e,(function(e){return e.isBlock}),t)},t.findChildrenByAttr=function(e,t,n){return I(e,(function(e){return!!t(e.attrs)}),n)},t.findChildrenByType=L,t.findChildrenByMark=function(e,t,n){return I(e,(function(e){return t.isInSet(e.marks)}),n)},t.contains=function(e,t){return!!L(e,t).length},t.findTable=B,t.isCellSelection=V,t.getSelectionRect=function(e){if(V(e)){var t=e.$anchorCell.start(-1);return o.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},t.isColumnSelected=function(e){return function(t){if(V(t)){var n=o.TableMap.get(t.$anchorCell.node(-1));return k({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},t.isRowSelected=function(e){return function(t){if(V(t)){var n=o.TableMap.get(t.$anchorCell.node(-1));return k({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},t.isTableSelected=F,t.getCellsInColumn=z,t.getCellsInRow=q,t.getCellsInTable=function(e){var t=B(e);if(t){var n=o.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(e){var n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}},t.selectColumn=U,t.selectRow=W,t.selectTable=function(e){var t=B(e.selection);if(t){var n=o.TableMap.get(t.node).map;if(n&&n.length){var r=t.start+n[0],i=t.start+n[n.length-1],s=e.doc.resolve(r),a=e.doc.resolve(i);return f(e.setSelection(new o.CellSelection(a,s)))}}return e},t.emptyCell=function(e,t){return function(n){if(e){var r=y(t).cell.createAndFill().content;if(!e.node.content.eq(r))return n.replaceWith(e.pos+1,e.pos+e.node.nodeSize,r),f(n)}return n}},t.addColumnAt=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(e>=0&&e<=r.width)return f(o.addColumn(t,{map:r,tableStart:n.start,table:n.node},e))}return t}},t.moveRow=function(e,t,n){return function(r){var i=Object.assign({tryToFit:!1,direction:0},n),o=B(r.selection);if(!o)return r;var s=te(e)(r).indexes,a=te(t)(r).indexes;if(s.indexOf(t)>-1)return r;!i.tryToFit&&a.length>1&&E(e,t,a,"row");var c=function(e,t,n,r){var i=S(e.node);return i=C(i,t,n,r),$(e.node,i)}(o,s,a,i.direction);return f(r).replaceWith(o.pos,o.pos+o.node.nodeSize,c)}},t.moveColumn=function(e,t,n){return function(r){var i=Object.assign({tryToFit:!1,direction:0},n),o=B(r.selection);if(!o)return r;var s=ee(e)(r).indexes,a=ee(t)(r).indexes;if(s.indexOf(t)>-1)return r;!i.tryToFit&&a.length>1&&E(e,t,a,"column");var c=function(e,t,n,r){var i=_(S(e.node));return i=C(i,t,n,r),i=_(i),$(e.node,i)}(o,s,a,i.direction);return f(r).replaceWith(o.pos,o.pos+o.node.nodeSize,c)}},t.addRowAt=function(e,t){return function(n){var r=B(n.selection);if(r){var i=o.TableMap.get(r.node),s=e-1;if(t&&s>=0)return f(H(s)(n));if(e>=0&&e<=i.height)return f(o.addRow(n,{map:i,tableStart:r.start,table:r.node},e))}return n}},t.cloneRowAt=H,t.removeColumnAt=K,t.removeRowAt=J,t.removeTable=Y,t.removeSelectedColumns=function(e){var t=e.selection;if(F(t))return Y(e);if(V(t)){var n=B(t);if(n){var r=o.TableMap.get(n.node),i=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==i.left&&i.right==r.width)return!1;for(var s=Object.assign({},i,{map:r,table:n.node,tableStart:n.start}),a=s.right-1;o.removeColumn(e,s,a),a!==s.left;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=o.TableMap.get(s.table);return f(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if(F(t))return Y(e);if(V(t)){var n=B(t);if(n){var r=o.TableMap.get(n.node),i=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==i.top&&i.bottom==r.height)return!1;for(var s=Object.assign({},i,{map:r,table:n.node,tableStart:n.start}),a=s.bottom-1;o.removeRow(e,s,a),a!==s.top;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=o.TableMap.get(s.table);return f(e)}}return e},t.removeColumnClosestToPos=function(e){return function(t){var n=Q(e);return n?K(n.left)(c(e.pos)(t)):t}},t.removeRowClosestToPos=function(e){return function(t){var n=Q(e);return n?J(n.top)(c(e.pos)(t)):t}},t.forEachCellInColumn=function(e,t,n){return function(i){var o=z(e)(i.selection);if(o){for(var s=o.length-1;s>=0;s--)i=t(o[s],i);if(n){var a=i.doc.resolve(i.mapping.map(o[o.length-1].pos));i.setSelection(r.Selection.near(a))}return f(i)}return i}},t.forEachCellInRow=function(e,t,n){return function(i){var o=q(e)(i.selection);if(o){for(var s=o.length-1;s>=0;s--)i=t(o[s],i);if(n){var a=i.doc.resolve(i.mapping.map(o[o.length-1].pos));i.setSelection(r.Selection.near(a))}}return i}},t.setCellAttrs=G,t.createTable=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=y(e),s=o.cell,a=o.header_cell,c=o.row,l=o.table,h=[],p=[],u=0;u<n;u++)h.push(x(s,i)),r&&p.push(x(a,i));for(var d=[],f=0;f<t;f++)d.push(c.createChecked(null,r&&0===f?p:h));return l.createChecked(null,d)},t.findCellClosestToPos=X,t.findCellRectClosestToPos=Q,t.getSelectionRangeInColumn=ee,t.getSelectionRangeInRow=te,t.removeParentNodeOfType=function(e){return function(t){var n=O(e)(t.selection);return n?v(n.pos)(t):t}},t.replaceParentNodeOfType=s,t.removeSelectedNode=function(e){if(u(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return f(e.delete(t,n))}return e},t.replaceSelectedNode=a,t.setTextSelection=c,t.safeInsert=p,t.setParentNodeMarkup=function(e,t,n,r){return function(i){var o=O(e)(i.selection);return o?f(i.setNodeMarkup(o.pos,t,Object.assign({},o.node.attrs,n),r)):i}},t.selectParentNodeOfType=function(e){return function(t){if(!u(t.selection)){var n=O(e)(t.selection);if(n)return f(t.setSelection(r.NodeSelection.create(t.doc,n.pos)))}return t}},t.removeNodeBefore=function(e){var t=D(e.selection);return"number"==typeof t?v(t)(e):e}},,,,function(e,t,n){"use strict";n.r(t);for(var r=n(9),i=n(12),o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},s=o,a={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},c="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),l="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),h="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),p="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),u="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),d=c&&(p||+c[1]<57)||h&&p,f=0;f<10;f++)o[48+f]=o[96+f]=String(f);for(f=1;f<=24;f++)o[f+111]="F"+f;for(f=65;f<=90;f++)o[f]=String.fromCharCode(f+32),a[f]=String.fromCharCode(f);for(var m in o)a.hasOwnProperty(m)||(a[m]=o[m]);var g=function(e){var t=!(d&&(e.ctrlKey||e.altKey||e.metaKey)||(l||u)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?a:o)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t},v="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function y(e){var t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var c=o[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);v?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function b(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function w(e){var t=function(e){var t=Object.create(null);for(var n in e)t[y(n)]=e[n];return t}(e);return function(e,n){var r,i=g(n),o=1==i.length&&" "!=i,a=t[b(i,n,!o)];if(a&&a(e.state,e.dispatch,e))return!0;if(o&&(n.shiftKey||n.altKey||n.metaKey)&&(r=s[n.keyCode])&&r!=i){var c=t[b(r,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}else if(o&&n.shiftKey){var l=t[b(i,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}var x=n(26),k={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var _=/Edge\/(\d+)/.exec(navigator.userAgent),S=/MSIE \d/.test(navigator.userAgent),$=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);k.mac=/Mac/.test(navigator.platform);var C=k.ie=!!(S||$||_);k.ie_version=S?document.documentMode||6:$?+$[1]:_?+_[1]:null,k.gecko=!C&&/gecko\/(\d+)/i.test(navigator.userAgent),k.gecko_version=k.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var E=!C&&/Chrome\/(\d+)/.exec(navigator.userAgent);k.chrome=!!E,k.chrome_version=E&&+E[1],k.ios=!C&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),k.android=/Android \d/.test(navigator.userAgent),k.webkit=!C&&"WebkitAppearance"in document.documentElement.style,k.safari=/Apple Computer/.test(navigator.vendor),k.webkit_version=k.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var T=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},A=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},N=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},M=function(e,t,n,r){return n&&(D(e,t,n,r,-1)||D(e,t,n,r,1))},O=/^(img|br|input|textarea|hr)$/i;function D(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:R(e))){var o=e.parentNode;if(1!=o.nodeType||P(e)||O.test(e.nodeName)||"false"==e.contentEditable)return!1;t=T(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(i<0?-1:0)],t=i<0?R(e):0}}}function R(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function P(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var I=function(e){var t=e.isCollapsed;return t&&k.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function L(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function B(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function V(e,t){return"number"==typeof e?e:e[t]}function F(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,s=o.defaultView,a=n||e.dom;a;a=A(a))if(1==a.nodeType){var c=a==o.body||1!=a.nodeType,l=c?B(s):a.getBoundingClientRect(),h=0,p=0;if(t.top<l.top+V(r,"top")?p=-(l.top-t.top+V(i,"top")):t.bottom>l.bottom-V(r,"bottom")&&(p=t.bottom-l.bottom+V(i,"bottom")),t.left<l.left+V(r,"left")?h=-(l.left-t.left+V(i,"left")):t.right>l.right-V(r,"right")&&(h=t.right-l.right+V(i,"right")),(h||p)&&(c?s.scrollBy(h,p):(p&&(a.scrollTop+=p),h&&(a.scrollLeft+=h))),c)break}}function z(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=A(e));return t}function q(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var j=null;function U(e,t){for(var n,r,i=2e8,o=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var h=void 0;if(1==c.nodeType)h=c.getClientRects();else{if(3!=c.nodeType)continue;h=N(c).getClientRects()}for(var p=0;p<h.length;p++){var u=h[p];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);var d=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(d<i){n=c,i=d,r=d&&3==n.nodeType?{left:u.right<t.left?u.right:u.left,top:t.top}:t,1==c.nodeType&&d&&(o=l+(t.left>=(u.left+u.right)/2?1:0));continue}}!n&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)&&(o=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=K(r,1);if(o.top!=o.bottom&&W(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:e,offset:o}:U(n,r)}function W(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function H(e,t){var n,r,i,o,s=e.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(t.left,t.top);a&&(i=(n=a).offsetNode,o=n.offset)}catch(e){}if(!i&&s.caretRangeFromPoint){var c=s.caretRangeFromPoint(t.left,t.top);c&&(i=(r=c).startContainer,o=r.startOffset)}var l,h=s.elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var p=e.dom.getBoundingClientRect();if(!W(t,p))return null;if(!(h=function e(t,n,r){var i=t.childNodes.length;if(i&&r.top<r.bottom)for(var o=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),s=o;;){var a=t.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),l=0;l<c.length;l++){var h=c[l];if(W(n,h))return e(a,n,h)}if((s=(s+1)%i)==o)break}return t}(e.dom,t,p)))return null}if(h=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(h,t),i){if(k.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length))<i.childNodes.length){var u,d=i.childNodes[o];"IMG"==d.nodeName&&(u=d.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&o++}i==e.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(l=function(e,t,n,r){for(var i=-1,o=t;o!=e.dom;){var s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}(e,i,o,t))}null==l&&(l=function(e,t,n){var r=U(t,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}(e,h,t));var f=e.docView.nearestDesc(h,!0);return{pos:l,inside:f?f.posAtStart-f.border:-1}}function K(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function J(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset;if(3==r.nodeType&&(k.chrome||k.gecko)){var o=K(N(r,i,i),0);if(k.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var s=K(N(r,i-1,i-1),-1);if(Math.abs(s.left-o.left)<1&&s.top==o.top){var a=K(N(r,i,i+1),-1);return Y(a,a.left<s.left)}}return o}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var c,l=!0;if(i<r.childNodes.length){var h=r.childNodes[i];1==h.nodeType&&(c=h.getBoundingClientRect())}if(!c&&i){var p=r.childNodes[i-1];1==p.nodeType&&(c=p.getBoundingClientRect(),l=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(c||r.getBoundingClientRect(),l)}for(var u=-1;u<2;u+=2)if(u<0&&i){var d=void 0,f=3==r.nodeType?N(r,i-1,i):3==(d=r.childNodes[i-1]).nodeType?N(d):1==d.nodeType&&"BR"!=d.nodeName?d:null;if(f){var m=K(f,1);if(m.top<m.bottom)return Y(m,!1)}}else if(u>0&&i<R(r)){var g=void 0,v=3==r.nodeType?N(r,i,i+1):3==(g=r.childNodes[i]).nodeType?N(g):1==g.nodeType?g:null;if(v){var y=K(v,-1);if(y.top<y.bottom)return Y(y,!0)}}return Y(K(3==r.nodeType?N(r):r,0),!1)}function Y(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function G(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i.focus()}}var X=/[\u0590-\u08ac]/;var Q=null,Z=null,ee=!1;function te(e,t,n){return Q==t&&Z==n?ee:(Q=t,Z=n,ee="up"==n||"down"==n?function(e,t,n){var r=t.selection,i="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return G(e,t,(function(){for(var t=e.docView.domFromPos(i.pos).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var o=J(e,i.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=N(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<o.top+1:l.top>o.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=getSelection();return X.test(r.parent.textContent)&&a.modify?G(e,t,(function(){var t=a.getRangeAt(0),i=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||i==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?o:s}(e,t,n))}var ne=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},re={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};ne.prototype.matchesWidget=function(){return!1},ne.prototype.matchesMark=function(){return!1},ne.prototype.matchesNode=function(){return!1},ne.prototype.matchesHack=function(){return!1},re.beforePosition.get=function(){return!1},ne.prototype.parseRule=function(){return null},ne.prototype.stopEvent=function(){return!1},re.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},re.border.get=function(){return 0},ne.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},ne.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},re.posBefore.get=function(){return this.parent.posBeforeChild(this)},re.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},re.posAfter.get=function(){return this.posBefore+this.size},re.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},ne.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},ne.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(e):i.nodeDOM==e))return i;n=!1}}},ne.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},ne.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}},ne.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}},ne.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:T(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],i=t+r.size;if(e<i)return r.domFromPos(e-t-r.border);t=i}},ne.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==r&&e<=c){var l=o+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=o;for(var h=s;h>0;h--){var p=this.children[h-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=T(p.dom)+1;break}e-=p.size}-1==r&&(r=0)}if(r>-1&&t<=c){t=c;for(var u=s+1;u<this.children.length;u++){var d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=T(d.dom);break}t+=d.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}},ne.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},ne.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},ne.prototype.setSelection=function(e,t,n,r){for(var i=Math.min(e,t),o=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(i>a&&o<l)return c.setSelection(e-a-c.border,t-a-c.border,n,r);a=l}var h=this.domFromPos(e),p=this.domFromPos(t),u=n.getSelection(),d=document.createRange();if(r||!M(h.node,h.offset,u.anchorNode,u.anchorOffset)||!M(p.node,p.offset,u.focusNode,u.focusOffset)){if(u.extend)d.setEnd(h.node,h.offset),d.collapse(!1);else{if(e>t){var f=h;h=p,p=f}d.setEnd(p.node,p.offset),d.setStart(h.node,h.offset)}u.removeAllRanges(),u.addRange(d),u.extend&&u.extend(p.node,p.offset)}},ne.prototype.ignoreMutation=function(e){return!this.contentDOM},re.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},ne.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var s=n+i.border,a=o-i.border;if(e>=s&&t<=a)return this.dirty=e==n||t==o?2:1,void(e!=s||t!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-s,t-s):i.dirty=3);i.dirty=3}n=o}this.dirty=2},ne.prototype.markParentsDirty=function(){for(var e=this.parent;e;e=e.parent){e.dirty<2&&(e.dirty=2)}},Object.defineProperties(ne.prototype,re);var ie=[],oe=function(e){function t(t,n,r,i){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,ie,s,null),this.widget=n,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,n),t}(ne),se=function(e){function t(t,n,r,i){e.call(this,t,ie,n,null),this.textDOM=r,this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(ne),ae=function(e){function t(t,n,r,i){e.call(this,t,[],r,i),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var i=t.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=_e(o,n,s,r)),e>0&&(o=_e(o,0,e,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},t}(ne),ce=function(e){function t(t,n,r,i,o,s,a,c,l){e.call(this,t,n.isLeaf?ie:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=i,s&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0}};return t.create=function(e,n,r,o,s,a){var c,l,h=s.nodeViews[n.type.name],p=h&&h(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r),u=p&&p.dom,d=p&&p.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else u||(u=(c=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,d=c.contentDOM);d||n.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),n.type.spec.draggable&&(u.draggable=!0));var f=u;return u=ye(u,r,n),p?l=new ue(e,n,r,o,u,d,f,p,s,a+1):n.isText?new he(e,n,r,o,u,f,s):new t(e,n,r,o,u,d,f,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?i.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&be(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,s=r&&e.composing&&this.localCompositionNode(e,t),a=new xe(this,s&&s.node);!function(e,t,n,r){var i=t.locals(e),o=0;if(0==i.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,i,t.forChild(o,a),s),o+=a.nodeSize}return}for(var c=0,l=[],h=null,p=0;;){if(c<i.length&&i[c].to==o){for(var u=i[c++],d=void 0;c<i.length&&i[c].to==o;)(d||(d=[u])).push(i[c++]);if(d){d.sort(ke);for(var f=0;f<d.length;f++)n(d[f],p,!!h)}else n(u,p,!!h)}var m=void 0,g=void 0;if(h)g=-1,m=h,h=null;else{if(!(p<e.childCount))break;g=p,m=e.child(p++)}for(var v=0;v<l.length;v++)l[v].to<=o&&l.splice(v--,1);for(;c<i.length&&i[c].from==o;)l.push(i[c++]);var y=o+m.nodeSize;if(m.isText){var b=y;c<i.length&&i[c].from<b&&(b=i[c].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(h=m.cut(b-o),m=m.cut(0,b-o),y=b,g=-1)}r(m,l.length?l.slice():ie,t.forChild(o,m),g),o=y}}(this.node,this.innerDeco,(function(t,s,c){t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!c&&a.syncToMarks(s==n.node.childCount?i.Mark.none:n.node.child(s).marks,r,e),a.placeWidget(t,e,o)}),(function(t,n,i,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,n,i,s)||a.updateNextNode(t,n,i,e,s)||a.addNode(t,n,i,e,o),o+=t.nodeSize})),a.syncToMarks(ie,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),this.renderChildren())},t.prototype.renderChildren=function(){!function e(t,n){for(var r=t.firstChild,i=0;i<n.length;i++){var o=n[i],s=o.dom;if(s.parentNode==t){for(;s!=r;)r=we(r);r=r.nextSibling}else t.insertBefore(s,r);if(o instanceof ae){var a=r?r.previousSibling:t.lastChild;e(o.contentDOM,o.children),r=a?a.nextSibling:t.firstChild}}for(;r;)r=we(r)}(this.contentDOM,this.children),k.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,i=n.from,o=n.to;if(!(!(e.state.selection instanceof r.TextSelection)||i<t||o>t+this.node.content.size)){var s=e.root.getSelection(),a=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=R(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=function(e,t,n,r){for(var i="",o=0,s=0;o<e.childCount;o++){var a=e.child(o),c=s+a.nodeSize;if(a.isText){if(i+=a.text,c>=r){for(var l=c-i.length,h=i.lastIndexOf(t);h>-1&&l+h>n;)h=i.lastIndexOf(t,h-1);if(h>-1&&l+h+t.length>=r)return l+h;if(c>r)break}}else i="";s=c}return-1}(this.node.content,c,i-t,o-t);return l<0?null:{node:a,pos:l,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,i=t.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new se(this,o,n,i);e.compositionNodes.push(s),this.children=_e(this.children,r,r+i.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!be(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ge(this.dom,this.nodeDOM,me(this.outerDeco,this.node,t),me(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(t.prototype,n),t}(ne);function le(e,t,n,r,i){return ye(r,t,e),new ce(null,e,t,n,r,r,r,i,0)}var he=function(e){function t(t,n,r,i,o,s,a){e.call(this,t,n,r,i,o,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},t.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var i=this.node.cut(e,n),o=document.createTextNode(i.text);return new t(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)},t}(ce),pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(ne),ue=function(e){function t(t,n,r,i,o,s,a,c,l,h){e.call(this,t,n,r,i,o,s,a,l,h),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,i){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(t,n);return o&&this.updateInner(t,n,r,i),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,i)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,i)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(ce);function de(e){e&&(this.nodeName=e)}de.prototype=Object.create(null);var fe=[new de];function me(e,t,n){if(0==e.length)return fe;for(var r=n?fe[0]:new de,i=[r],o=0;o<e.length;o++){var s=e[o].type.attrs,a=r;if(s)for(var c in s.nodeName&&i.push(a=new de(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==i.length&&i.push(a=r=new de(t.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return i}function ge(e,t,n,r){if(n==fe&&r==fe)return t;for(var i=t,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&i!=e&&(c=i.parentNode)&&c.tagName.toLowerCase()==s.nodeName?i=c:((c=document.createElement(s.nodeName)).appendChild(i),a=fe[0],i=c)}ve(i,a||fe[0],s)}return i}function ve(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" "):ie,s=n.class?n.class.split(" "):ie,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&e.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=n.style){if(t.style)for(var l,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=h.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function ye(e,t,n){return ge(e,e,fe,me(t,n,1!=e.nodeType))}function be(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function we(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var xe=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],r=e.childCount,i=t.length-1;r>0&&i>=0;i--){var o=t[i],s=o.node;if(s){if(s!=e.child(r-1))break;n.push(o),--r}}return{nodes:n.reverse(),offset:r}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function ke(e,t){return e.type.side-t.type.side}function _e(e,t,n,r,i){for(var o=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,h=a+=c.size;l>=n||h<=t?o.push(c):(l<t&&o.push(c.slice(0,t-l,r)),i&&(o.push(i),i=null),h>n&&o.push(c.slice(n-l,c.size,r)))}return o}function Se(e,t){var n=e.selection,i=n.$anchor,o=n.$head,s=t>0?i.max(o):i.min(o),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,t)}function $e(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ce(e,t,n){var i=e.state.selection;if(i instanceof r.TextSelection){if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=Se(e.state,t);return!!(o&&o instanceof r.NodeSelection)&&$e(e,o)}var s,a=i.$head,c=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!c||c.isText)return!1;var l=t<0?a.pos-c.nodeSize:a.pos;return!!(c.isAtom||(s=e.docView.descAt(l))&&!s.contentDOM)&&(r.NodeSelection.isSelectable(c)?$e(e,new r.NodeSelection(t<0?e.state.doc.resolve(a.pos-c.nodeSize):a)):!!k.webkit&&$e(e,new r.TextSelection(e.state.doc.resolve(t<0?l:l+c.nodeSize))))}if(i instanceof r.NodeSelection&&i.node.isInline)return $e(e,new r.TextSelection(t>0?i.$to:i.$from));var h=Se(e.state,t);return!!h&&$e(e,h)}function Ee(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Te(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Ae(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var i,o,s=!1;for(k.gecko&&1==n.nodeType&&r<Ee(n)&&Te(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Te(a))i=n,o=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(Me(n))break;for(var c=n.previousSibling;c&&Te(c);)i=n.parentNode,o=T(c),c=c.previousSibling;if(c)r=Ee(n=c);else{if((n=n.parentNode)==e.dom)break;r=0}}s?Oe(e,t,n,r):i&&Oe(e,t,i,o)}}function Ne(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var i,o,s=Ee(n);;)if(r<s){if(1!=n.nodeType)break;if(!Te(n.childNodes[r]))break;i=n,o=++r}else{if(Me(n))break;for(var a=n.nextSibling;a&&Te(a);)i=a.parentNode,o=T(a)+1,a=a.nextSibling;if(a)r=0,s=Ee(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}i&&Oe(e,t,i,o)}}function Me(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Oe(e,t,n,r){if(I(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection()}function De(e,t,n){var i=e.state.selection;if(i instanceof r.TextSelection&&!i.empty||n.indexOf("s")>-1)return!1;var o=i.$from,s=i.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=Se(e.state,t);if(a&&a instanceof r.NodeSelection)return $e(e,a)}if(!o.parent.inlineContent){var c=r.Selection.findFrom(t<0?o:s,t);return!c||$e(e,c)}return!1}function Re(e,t){if(!(e.state.selection instanceof r.TextSelection))return!0;var n=e.state.selection,i=n.$head,o=n.$anchor,s=n.empty;if(!i.sameParent(o))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!i.textOffset&&(t<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(i.pos-a.nodeSize,i.pos):c.delete(i.pos,i.pos+a.nodeSize),e.dispatch(c),!0}return!1}function Pe(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ie(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||k.mac&&72==n&&"c"==r?Re(e,-1)||Ae(e):46==n||k.mac&&68==n&&"c"==r?Re(e,1)||Ne(e):13==n||27==n||(37==n?Ce(e,-1,r)||Ae(e):39==n?Ce(e,1,r)||Ne(e):38==n?De(e,-1,r)||Ae(e):40==n?function(e){if(k.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;Pe(e,i,!0),setTimeout((function(){return Pe(e,i,!1)}),20)}}}(e)||De(e,1,r)||Ne(e):r==(k.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Le(e,t){var n=e.state.selection;if(Fe(e,n),e.editable?e.hasFocus():je(e)&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,T(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&k.ie&&k.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var i,o,s=n.anchor,a=n.head;!Be||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(i=Ve(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Ve(e,n.to))),e.docView.setSelection(s,a,e.root,t),Be&&(i&&(i.contentEditable="false"),o&&(o.contentEditable="false")),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):s!=a&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}xe.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},xe.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},xe.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},xe.prototype.syncToMarks=function(e,t,n){for(var r=0,i=this.stack.length>>1,o=Math.min(i,e.length);r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=ae.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}},xe.prototype.findNodeMatch=function(e,t,n,r){var i=-1,o=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(o&&o.matchesNode(e,t,n))i=s.indexOf(o);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},xe.prototype.updateNextNode=function(e,t,n,r,i){if(this.index==this.top.children.length)return!1;var o=this.top.children[this.index];if(o instanceof ce){var s=this.preMatched.indexOf(o);if(s>-1&&s+this.preMatchOffset!=i)return!1;var a=o.dom;if(!(this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))&&!(e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&be(t,o.outerDeco)))&&o.update(e,t,n,r))return o.dom!=a&&(this.changed=!0),this.index++,!0}return!1},xe.prototype.addNode=function(e,t,n,r,i){this.top.children.splice(this.index++,0,ce.create(this.top,e,t,n,r,i)),this.changed=!0},xe.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new oe(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},xe.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof ae;)e=e.children[e.children.length-1];if(!e||!(e instanceof he)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new pe(this.top,ie,t,null)),this.changed=!0}};var Be=k.safari||k.chrome&&k.chrome_version<63;function Ve(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,s=i?r.childNodes[i-1]:null;if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return o.contentEditable="true",o;if(s)return s.contentEditable="true",s}}function Fe(e,t){if(t instanceof r.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ze(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ze(e)}function ze(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function qe(e,t,n,i){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r.TextSelection.between(t,n,i)}function je(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ue(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(k.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||k.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function We(e,t,n,o){if(t<0){var s=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=function(e,t){var n,i,o=e.root.getSelection(),s=e.state.doc,a=e.docView.nearestDesc(o.focusNode),c=a&&0==a.size,l=e.docView.posFromDOM(o.focusNode,o.focusOffset),h=s.resolve(l);if(I(o)){for(n=h;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&r.NodeSelection.isSelectable(a.node)&&a.parent){var p=a.posBefore;i=new r.NodeSelection(l==p?h:s.resolve(p))}}else n=s.resolve(e.docView.posFromDOM(o.anchorNode,o.anchorOffset));return i||(i=qe(e,n,h,"pointer"==t||e.state.selection.head<h.pos&&!c?1:-1)),i}(e,s);if(!e.state.selection.eq(a)){var c=e.state.tr.setSelection(a);"pointer"==s?c.setMeta("pointer",!0):"key"==s&&c.scrollIntoView(),e.dispatch(c)}}else{var l=e.state.doc.resolve(t),h=l.sharedDepth(n);t=l.before(h+1),n=e.state.doc.resolve(n).after(h+1);var p,u,d=e.state.selection,f=function(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,s=r.fromOffset,a=r.toOffset,c=r.from,l=r.to,h=e.root.getSelection(),p=null,u=h.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(p=[{node:u,offset:h.anchorOffset}],I(h)||p.push({node:h.focusNode,offset:h.focusOffset})),k.chrome&&8===e.lastKeyCode)for(var d=a;d>s;d--){var f=o.childNodes[d-1],m=f.pmViewDesc;if("BR"==f.nodeType&&!m){a=d;break}if(!m||m.size)break}var g=e.state.doc,v=e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema),y=g.resolve(c),b=null,w=v.parse(o,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:s,to:a,preserveWhitespace:!y.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Ue,context:y});if(p&&null!=p[0].pos){var x=p[0].pos,_=p[1]&&p[1].pos;null==_&&(_=x),b={anchor:x+c,head:_+c}}return{doc:w,sel:b,from:c,to:l}}(e,t,n),m=e.state.doc,g=m.slice(f.from,f.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(p=e.state.selection.to,u="end"):(p=e.state.selection.from,u="start"),e.lastKeyCode=null;var v=function(e,t,n,r,i){var o=e.findDiffStart(t,n);if(null==o)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==i){var l=Math.max(0,o-Math.min(a,c));r-=a+l-o}if(a<o&&e.size<t.size){c=(o-=r<=o&&r>=a?o-r:0)+(c-a),a=o}else if(c<o){a=(o-=r<=o&&r>=c?o-r:0)+(a-c),c=o}return{start:o,endA:a,endB:c}}(g.content,f.doc.content,f.from,p,u);if(!v){if(!(o&&d instanceof r.TextSelection&&!d.empty&&d.$head.sameParent(d.$anchor))||e.composing||f.sel&&f.sel.anchor!=f.sel.head){if(f.sel){var y=He(e,e.state.doc,f.sel);y&&!y.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(y))}return}v={start:d.from,endA:d.to,endB:d.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof r.TextSelection&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),k.ie&&k.ie_version<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>f.from&&" "==f.doc.textBetween(v.start-f.from-1,v.start-f.from+1)&&(v.start--,v.endA--,v.endB--);var b,w=f.doc.resolveNoCache(v.start-f.from),x=f.doc.resolveNoCache(v.endB-f.from);if(!(!w.sameParent(x)&&w.pos<f.doc.content.size&&(b=r.Selection.findFrom(f.doc.resolve(w.pos+1),1,!0))&&b.head==x.pos&&e.someProp("handleKeyDown",(function(t){return t(e,L(13,"Enter"))}))))if(e.state.selection.anchor>v.start&&function(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||Ke(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=e.resolve(Ke(o,!0,!0));if(!s.parent.isTextblock||s.pos>n||Ke(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(m,v.start,v.endA,w,x)&&e.someProp("handleKeyDown",(function(t){return t(e,L(8,"Backspace"))})))k.android&&k.chrome&&e.domObserver.suppressSelectionUpdates();else{var _,S,$,C,E=v.start,T=v.endA;if(w.sameParent(x)&&w.parent.inlineContent)if(w.pos==x.pos)k.ie&&k.ie_version<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Le(e)}),20)),_=e.state.tr.delete(E,T),S=m.resolve(v.start).marksAcross(m.resolve(v.endA));else if(v.endA==v.endB&&(C=m.resolve(v.start))&&($=function(e,t){for(var n,r,o,s=e.firstChild.marks,a=t.firstChild.marks,c=s,l=a,h=0;h<a.length;h++)c=a[h].removeFromSet(c);for(var p=0;p<s.length;p++)l=s[p].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var u=[],d=0;d<t.childCount;d++)u.push(o(t.child(d)));if(i.Fragment.from(u).eq(e))return{mark:r,type:n}}(w.parent.content.cut(w.parentOffset,x.parentOffset),C.parent.content.cut(C.parentOffset,v.endA-C.start()))))_=e.state.tr,"add"==$.type?_.addMark(E,T,$.mark):_.removeMark(E,T,$.mark);else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){var A=w.parent.textBetween(w.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,E,T,A)})))return;_=e.state.tr.insertText(A,E,T)}if(_||(_=e.state.tr.replace(E,T,f.doc.slice(v.start-f.from,v.endB-f.from))),f.sel){var N=He(e,_.doc,f.sel);N&&!(k.chrome&&k.android&&e.composing&&N.empty&&N.head==E||k.ie&&N.empty&&N.head==E)&&_.setSelection(N)}S&&_.ensureMarks(S),e.dispatch(_.scrollIntoView())}}}function He(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:qe(e,t.resolve(n.anchor),t.resolve(n.head))}function Ke(e,t,n){for(var r=e.depth,i=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n)for(var o=e.node(r).maybeChild(e.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function Je(e,t){for(var n=[],r=t.content,o=t.openStart,s=t.openEnd;o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||i.DOMSerializer.fromSchema(e.state.schema),l=et(),h=l.createElement("div");h.appendChild(c.serializeFragment(r,{document:l}));for(var p,u=h.firstChild;u&&1==u.nodeType&&(p=Qe[u.nodeName.toLowerCase()]);){for(var d=p.length-1;d>=0;d--){for(var f=l.createElement(p[d]);h.firstChild;)f.appendChild(h.firstChild);h.appendChild(f)}u=h.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(n)),{dom:h,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Ye(e,t,n,r,o){var s,a,c=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||c||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t)})),c)return new i.Slice(i.Fragment.from(e.state.schema.text(t)),0,0);var h=e.someProp("clipboardTextParser",(function(e){return e(t,o)}));h?a=h:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=et().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&Qe[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length);r.innerHTML=e;for(var s=0;s<o;s++)r=r.firstChild;return r}(n);var p=s&&s.querySelector("[data-pm-slice]"),u=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(s,{preserveWhitespace:!(!l&&!u),context:o})}return a=u?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;o=i.Fragment.from(l.create(n[c+1],o)),s++,a++}return new i.Slice(o,s,a)}(function(e,t,n){t<e.openStart&&(e=new i.Slice(Xe(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new i.Slice(Xe(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(a,+u[1],+u[2]),u[3]):i.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=r.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&o.length&&function e(t,n,r,o,s){if(s<t.length&&s<n.length&&t[s]==n[s]){var a=e(t,n,r,o.lastChild,s+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(s==t.length-1?r.type:t[s+1]))return o.copy(o.content.append(i.Fragment.from(Ge(r,t,s+1))))}}(n,o,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(i.Fragment.empty,!0);return t.copy(r.append(o))}(s[s.length-1],o.length));var a=Ge(e,n);s.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),s)return{v:i.Fragment.from(s)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Ge(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,i.Fragment.from(e));return e}function Xe(e,t,n,r,o,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return o<r-1&&(c=Xe(c,t,n,r,o+1,s)),o>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}var Qe={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ze=null;function et(){return Ze||(Ze=document.implementation.createHTMLDocument("title"))}var tt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},nt=k.ie&&k.ie_version<=11,rt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};rt.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},rt.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var it=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);k.ie&&k.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new rt,nt&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};it.prototype.flushSoon=function(){var e=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout((function(){e.flushingSoon=!1,e.flush()}),20))},it.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,tt),nt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},it.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}nt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},it.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},it.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},it.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},it.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&je(e)){var e;if(this.suppressingSelectionUpdates)return Le(this.view);if(k.ie&&k.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&M(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},it.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},it.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})},it.prototype.flush=function(){if(this.view.docView&&!this.flushingSoon){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&je(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,o=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var c=this.registerMutation(e[a],s);c&&(r=r<0?c.from:Math.min(c.from,r),i=i<0?c.to:Math.max(c.to,i),c.typeOver&&!this.view.composing&&(o=!0))}if(k.gecko&&s.length>1){var l=s.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var h=l[0],p=l[1];h.parentNode&&h.parentNode.parentNode==p.parentNode?p.remove():h.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),function(e){if(ot)return;ot=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,i,o),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Le(this.view))}},it.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(k.ie&&k.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var s=e.addedNodes[o],a=s.previousSibling,c=s.nextSibling;(!a||Array.prototype.indexOf.call(e.addedNodes,a)<0)&&(r=a),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c)}for(var l=r&&r.parentNode==e.target?T(r)+1:0,h=n.localPosFromDOM(e.target,l,-1),p=i&&i.parentNode==e.target?T(i):e.target.childNodes.length,u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);return{from:h,to:n.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var ot=!1;var st={},at={};function ct(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function lt(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return ht(e,t)})}))}function ht(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function pt(e){return{left:e.clientX,top:e.clientY}}function ut(e,t,n,r,i){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function dt(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function ft(e,t,n,i,o){return ut(e,"handleClickOn",t,n,i)||e.someProp("handleClick",(function(n){return n(e,t,i)}))||(o?function(e,t){if(-1==t)return!1;var n,i,o=e.state.selection;o instanceof r.NodeSelection&&(n=o.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(c)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(dt(e,r.NodeSelection.create(e.state.doc,i),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&r.NodeSelection.isSelectable(i))&&(dt(e,new r.NodeSelection(n),"pointer"),!0)}(e,n))}function mt(e,t,n,r){return ut(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function gt(e,t,n,i){return ut(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",(function(n){return n(e,t,i)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(dt(e,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var i=n.resolve(t),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)dt(e,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;dt(e,r.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function vt(e){return _t(e)}at.keydown=function(e,t){e.shiftKey=16==t.keyCode||t.shiftKey,wt(e,t)||(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Ie(e,t)?t.preventDefault():ct(e,"key"))},at.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},at.keypress=function(e,t){if(!(wt(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||k.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var i=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,i)}))||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}}};var yt=k.mac?"metaKey":"ctrlKey";st.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=vt(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[yt]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(pt(t));o&&("singleClick"==i?e.mouseDown=new bt(e,o,t,n):("doubleClick"==i?mt:gt)(e,o.pos,o.inside,t)?t.preventDefault():ct(e,"pointer"))};var bt=function(e,t,n,i){var o,s,a=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=i,this.selectNode=n[yt],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{var c=e.state.doc.resolve(t.pos);o=c.parent,s=c.depth?c.before():0}this.mightDrag=null;var l=i?null:n.target,h=l?e.docView.nearestDesc(l,!0):null;this.target=h?h.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof r.NodeSelection&&s==e.state.selection.from)&&(this.mightDrag={node:o,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&k.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ct(e,"pointer")};function wt(e,t){return!!e.composing||!!(k.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}bt.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},bt.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(pt(e))),this.allowDefault||!t?ct(this.view,"pointer"):ft(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():!this.flushed&&(!k.chrome||this.view.state.selection instanceof r.TextSelection||t.pos!=this.view.state.selection.from&&t.pos!=this.view.state.selection.to)?ct(this.view,"pointer"):(dt(this.view,r.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault())}},bt.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),ct(this.view,"pointer")},st.touchdown=function(e){vt(e),ct(e,"pointer")},st.contextmenu=function(e){return vt(e)};var xt=k.android?5e3:-1;function kt(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return _t(e)}),t))}function _t(e,t){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();return!(!t&&!e.docView.dirty)&&(e.updateState(e.state),!0)}at.compositionstart=at.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),_t(e,!0),e.markCursor=null;else if(_t(e),k.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var s=o<0?i.lastChild:i.childNodes[o-1];if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}i=s,o=-1}e.composing=!0}kt(e,xt)},at.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,kt(e,20))};var St=k.ie&&k.ie_version<15||k.ios&&k.webkit_version<604;function $t(e,t,n,r){var o=Ye(e,t,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",(function(t){return t(e,r,o||i.Slice.empty)}))&&o){var s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(o);e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}st.copy=at.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var i=St?null:t.clipboardData,o=Je(e,n.content()),s=o.dom,a=o.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(e,t){var n=e.dom.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var i=getSelection(),o=n.createRange();o.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout((function(){n.body.removeChild(r),e.focus()}),50)}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},at.paste=function(e,t){var n=St?null:t.clipboardData,r=n&&n.getData("text/html"),i=n&&n.getData("text/plain");n&&(r||i||n.files.length)?($t(e,i,r,t),t.preventDefault()):function(e,t){var n=e.dom.ownerDocument,r=e.shiftKey||e.state.selection.$from.parent.type.spec.code,i=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((function(){e.focus(),n.body.removeChild(i),r?$t(e,i.value,null,t):$t(e,i.textContent,i.innerHTML,t)}),50)}(e,t)};var Ct=function(e,t){this.slice=e,this.move=t},Et=k.mac?"altKey":"ctrlKey";for(var Tt in st.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var i=e.state.selection,o=i.empty?null:e.posAtCoords(pt(t));if(o&&o.pos>=i.from&&o.pos<=(i instanceof r.NodeSelection?i.to-1:i.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=Je(e,a),l=c.dom,h=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(St?"Text":"text/html",l.innerHTML),St||t.dataTransfer.setData("text/plain",h),e.dragging=new Ct(a,!t[Et])}},st.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},at.dragover=at.dragenter=function(e,t){return t.preventDefault()},at.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var i=e.posAtCoords(pt(t));if(i){var o=e.state.doc.resolve(i.pos);if(o){var s=n&&n.slice||Ye(e,t.dataTransfer.getData(St?"Text":"text/plain"),St?null:t.dataTransfer.getData("text/html"),!1,o);if(s&&(t.preventDefault(),!e.someProp("handleDrop",(function(r){return r(e,t,s,n&&n.move)})))){var a=s?Object(x.d)(e.state.doc,o.pos,s):o.pos;null==a&&(a=o.pos);var c=e.state.tr;n&&n.move&&c.deleteSelection();var l=c.mapping.map(a),h=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=c.doc;if(h?c.replaceRangeWith(l,l,s.content.firstChild):c.replaceRange(l,l,s),!c.doc.eq(p)){var u=c.doc.resolve(l);h&&r.NodeSelection.isSelectable(s.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(s.content.firstChild)?c.setSelection(new r.NodeSelection(u)):c.setSelection(qe(e,u,c.doc.resolve(c.mapping.map(a)))),e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}}},st.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0)},st.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},st.beforeinput=function(e,t){if(k.chrome&&k.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,L(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},at)st[Tt]=at[Tt];function At(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Nt=function(e,t){this.spec=t||It,this.side=this.spec.side||0,this.toDOM=e};Nt.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,this.side<0?-1:1),o=i.pos;return i.deleted?null:new Dt(o-n,o-n,this)},Nt.prototype.valid=function(){return!0},Nt.prototype.eq=function(e){return this==e||e instanceof Nt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&At(this.spec,e.spec))};var Mt=function(e,t){this.spec=t||It,this.attrs=e};Mt.prototype.map=function(e,t,n,r){var i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Dt(i,o,this)},Mt.prototype.valid=function(e,t){return t.from<t.to},Mt.prototype.eq=function(e){return this==e||e instanceof Mt&&At(this.attrs,e.attrs)&&At(this.spec,e.spec)},Mt.is=function(e){return e.type instanceof Mt};var Ot=function(e,t){this.spec=t||It,this.attrs=e};Ot.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,1);if(i.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new Dt(i.pos-n,o.pos-n,this)},Ot.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,i=n.offset;return i==t.from&&i+e.child(r).nodeSize==t.to},Ot.prototype.eq=function(e){return this==e||e instanceof Ot&&At(this.attrs,e.attrs)&&At(this.spec,e.spec)};var Dt=function(e,t,n){this.from=e,this.to=t,this.type=n},Rt={spec:{configurable:!0}};Dt.prototype.copy=function(e,t){return new Dt(e,t,this.type)},Dt.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},Dt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},Dt.widget=function(e,t,n){return new Dt(e,e,new Nt(t,n))},Dt.inline=function(e,t,n,r){return new Dt(e,t,new Mt(n,r))},Dt.node=function(e,t,n,r){return new Dt(e,t,new Ot(n,r))},Rt.spec.get=function(){return this.type.spec},Object.defineProperties(Dt.prototype,Rt);var Pt=[],It={},Lt=function(e,t){this.local=e&&e.length?e:Pt,this.children=t&&t.length?t:Pt};Lt.create=function(e,t){return t.length?jt(t,e,0,It):Bt},Lt.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},Lt.prototype.findInner=function(e,t,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,i)}},Lt.prototype.map=function(e,t,n){return this==Bt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||It)},Lt.prototype.mapInner=function(e,t,n,r,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+o||(t>=a[s]+o?a[s+1]=-1:(l=r-n-(t-e)+(o-i))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var h=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var u=n.map(a[p]+o),d=u-i;if(d<0||d>=r.content.size){h=!0;continue}var f=n.map(e[p+1]+o,-1)-i,m=r.content.findIndex(d),g=m.index,v=m.offset,y=r.maybeChild(g);if(y&&v==d&&v+y.nodeSize==f){var b=a[p+2].mapInner(n,y,u+1,a[p]+o+1,s);b!=Bt?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,h=!0)}else h=!0}if(h){var w=jt(function(e,t,n,r,i,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var c=e.local[o].map(r,i,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[o].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+o+1);return n}(a,e,t||[],n,i,o,s),r,0,s);t=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var k=0,_=0;k<w.children.length;k+=3){for(var S=w.children[k];_<a.length&&a[_]<S;)_+=3;a.splice(_,0,w.children[k],w.children[k+1],w.children[k+2])}}return new Lt(t&&t.sort(Ut),a)}(this.children,o,e,t,n,r,i):o?new Lt(o.sort(Ut)):Bt},Lt.prototype.add=function(e,t){return t.length?this==Bt?Lt.create(e,t):this.addInner(e,t,0):this},Lt.prototype.addInner=function(e,t,n){var r,i=this,o=0;e.forEach((function(e,s){var a,c=s+n;if(a=zt(t,e,c)){for(r||(r=i.children.slice());o<r.length&&r[o]<s;)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(e,a,c+1):r.splice(o,0,s,s+e.nodeSize,jt(a,e,c+1,It)),o+=3}}));var s=Ft(o?qt(t):t,-n);return new Lt(s.length?this.local.concat(s).sort(Ut):this.local,r||this.children)},Lt.prototype.remove=function(e){return 0==e.length||this==Bt?this:this.removeInner(e,0)},Lt.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,s=n[i]+t,a=n[i+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(o||(o=[])).push(l));if(o){n==this.children&&(n=this.children.slice());var h=n[i+2].removeInner(o,s+1);h!=Bt?n[i+2]=h:(n.splice(i,3),i-=3)}}if(r.length)for(var p=0,u=void 0;p<e.length;p++)if(u=e[p])for(var d=0;d<r.length;d++)r[d].type.eq(u.type)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Lt(r,n):Bt},Lt.prototype.forChild=function(e,t){if(this==Bt)return this;if(t.isLeaf)return Lt.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(n=this.children[i+2]);break}for(var o=e+1,s=o+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof Mt){var l=Math.max(o,c.from)-o,h=Math.min(s,c.to)-o;l<h&&(r||(r=[])).push(c.copy(l,h))}}if(r){var p=new Lt(r.sort(Ut));return n?new Vt([p,n]):p}return n||Bt},Lt.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof Lt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},Lt.prototype.locals=function(e){return Wt(this.localsInner(e))},Lt.prototype.localsInner=function(e){if(this==Bt)return Pt;if(e.inlineContent||!this.local.some(Mt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Mt||t.push(this.local[n]);return t};var Bt=new Lt;Lt.empty=Bt,Lt.removeOverlap=Wt;var Vt=function(e){this.members=e};function Ft(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new Dt(i.from+t,i.to+t,i.type))}return n}function zt(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,i=null,o=0,s=void 0;o<e.length;o++)(s=e[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[o]=null);return i}function qt(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function jt(e,t,n,r){var i=[],o=!1;t.forEach((function(t,s){var a=zt(e,t,s+n);if(a){o=!0;var c=jt(a,t,n+s+1,r);c!=Bt&&i.push(s,s+t.nodeSize,c)}}));for(var s=Ft(o?qt(e):e,-n).sort(Ut),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Lt(s,i):Bt}function Ut(e,t){return e.from-t.from||e.to-t.to}function Wt(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),Ht(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),Ht(t,i+1,o.copy(r.to,o.to)))}}return t}function Ht(e,t,n){for(;t<e.length&&Ut(n,e[t])>0;)t++;e.splice(t,0,n)}function Kt(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Bt&&t.push(r)})),e.cursorWrapper&&t.push(Lt.create(e.state.doc,[e.cursorWrapper.deco])),Vt.from(t)}Vt.prototype.forChild=function(e,t){if(t.isLeaf)return Lt.empty;for(var n=[],r=0;r<this.members.length;r++){var i=this.members[r].forChild(e,t);i!=Bt&&(i instanceof Vt?n=n.concat(i.members):n.push(i))}return Vt.from(n)},Vt.prototype.eq=function(e){if(!(e instanceof Vt)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Vt.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?Wt(n?t:t.sort(Ut)):Pt},Vt.from=function(e){switch(e.length){case 0:return Bt;case 1:return e[0];default:return new Vt(e)}};var Jt,Yt,Gt=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=en(this),this.markCursor=null,this.cursorWrapper=null,Zt(this),this.nodeViews=tn(this),this.docView=le(this.state.doc,Qt(this),Kt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new it(e,(function(t,n,r){return We(e,t,n,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=st[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||ht(e,t)||!e.editable&&t.type in at||n(e,t)})};for(var n in st)t(n);k.safari&&e.dom.addEventListener("input",(function(){return null})),lt(e)}(this),this.pluginViews=[],this.updatePluginViews()},Xt={props:{configurable:!0},root:{configurable:!0}};function Qt(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[Dt.node(0,e.state.doc.content.size,t)]}function Zt(e){var t=e.state.selection,n=t.$head,r=t.$anchor,i=t.visible;if(e.markCursor){var o=document.createElement("img");o.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:o,deco:Dt.widget(n.pos,o,{raw:!0,marks:e.markCursor})}}else if(i||n.pos!=r.pos)e.cursorWrapper=null;else{var s;!e.cursorWrapper||e.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):e.cursorWrapper.deco.pos!=n.pos&&(s=e.cursorWrapper.dom),s&&(e.cursorWrapper={dom:s,deco:Dt.widget(n.pos,s,{raw:!0})})}}function en(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function tn(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}if(Xt.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Gt.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&lt(this),this._props=e,this.updateStateInner(e.state,!0)},Gt.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Gt.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Gt.prototype.updateStateInner=function(e,t){var n=this,i=this.state,o=!1;if(this.state=e,t){var s=tn(this);(function(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0),lt(this)}this.editable=en(this),Zt(this);var a,c,l,h,p,u,d,f,m,g,v,y=Kt(this),b=Qt(this),w=t?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",x=o||!this.docView.matchesNode(e.doc,b,y),_=x||!e.selection.eq(i.selection),S="preserve"==w&&_&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(o,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=i-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:z(e.dom)}}(this);if(_){this.domObserver.stop();var $=x&&(k.ie||k.chrome)&&!i.selection.empty&&!e.selection.empty&&(h=i.selection,p=e.selection,u=Math.min(h.$anchor.sharedDepth(h.head),p.$anchor.sharedDepth(p.head)),h.$anchor.node(u)!=p.$anchor.node(u));x&&(!o&&this.docView.update(e.doc,b,y,this)||(this.docView.destroy(),this.docView=le(e.doc,b,y,this.dom,this))),$||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(a=this,c=a.docView.domFromPos(a.state.selection.anchor),l=a.root.getSelection(),M(c.node,c.offset,l.anchorNode,l.anchorOffset)))?Le(this,$):(Fe(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==w)this.dom.scrollTop=0;else if("to selection"==w){var C=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r.NodeSelection?F(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),C):F(this,this.coordsAtPos(e.selection.head),C))}else S&&(f=(d=S).refDOM,m=d.refTop,g=d.stack,v=f?f.getBoundingClientRect().top:0,q(g,0==v?0:v-m))},Gt.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Gt.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Gt.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var s=i[o].props[e];if(null!=s&&(n=t?t(s):s))return n}},Gt.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Gt.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(j)return e.focus(j);var t=z(e);e.focus(null==j?{get preventScroll(){return j={preventScroll:!0},!0}}:void 0),j||(j=!1,q(t,0))}(this.dom),Le(this),this.domObserver.start()},Xt.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Gt.prototype.posAtCoords=function(e){return H(this,e)},Gt.prototype.coordsAtPos=function(e){return J(this,e)},Gt.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},Gt.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Gt.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Gt.prototype.endOfTextblock=function(e,t){return te(this,t||this.state,e)},Gt.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Kt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Gt.prototype.dispatchEvent=function(e){return function(e,t){ht(e,t)||!st[t.type]||!e.editable&&t.type in at||st[t.type](e,t)}(this,e)},Gt.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Gt.prototype,Xt),n.d(t,"CellSelection",(function(){return kn})),n.d(t,"TableMap",(function(){return an})),n.d(t,"__clipCells",(function(){return Mn})),n.d(t,"__insertCells",(function(){return Rn})),n.d(t,"__pastedCells",(function(){return An})),n.d(t,"addColumn",(function(){return Yn})),n.d(t,"addColumnAfter",(function(){return Xn})),n.d(t,"addColumnBefore",(function(){return Gn})),n.d(t,"addRow",(function(){return tr})),n.d(t,"addRowAfter",(function(){return rr})),n.d(t,"addRowBefore",(function(){return nr})),n.d(t,"cellAround",(function(){return hn})),n.d(t,"colCount",(function(){return vn})),n.d(t,"columnResizing",(function(){return xr})),n.d(t,"columnResizingPluginKey",(function(){return wr})),n.d(t,"deleteColumn",(function(){return Zn})),n.d(t,"deleteRow",(function(){return or})),n.d(t,"deleteTable",(function(){return vr})),n.d(t,"findCell",(function(){return gn})),n.d(t,"fixTables",(function(){return Kn})),n.d(t,"fixTablesKey",(function(){return Hn})),n.d(t,"goToNextCell",(function(){return gr})),n.d(t,"handlePaste",(function(){return zn})),n.d(t,"inSameTable",(function(){return mn})),n.d(t,"isInTable",(function(){return pn})),n.d(t,"mergeCells",(function(){return ar})),n.d(t,"moveCellForward",(function(){return fn})),n.d(t,"nextCell",(function(){return yn})),n.d(t,"removeColumn",(function(){return Qn})),n.d(t,"removeRow",(function(){return ir})),n.d(t,"rowIsHeader",(function(){return er})),n.d(t,"selectedRect",(function(){return Jn})),n.d(t,"selectionCell",(function(){return un})),n.d(t,"setCellAttr",(function(){return hr})),n.d(t,"splitCell",(function(){return cr})),n.d(t,"splitCellWithType",(function(){return lr})),n.d(t,"tableEditing",(function(){return Er})),n.d(t,"tableEditingKey",(function(){return ln})),n.d(t,"tableNodes",(function(){return En})),n.d(t,"toggleHeader",(function(){return ur})),n.d(t,"toggleHeaderCell",(function(){return mr})),n.d(t,"toggleHeaderColumn",(function(){return fr})),n.d(t,"toggleHeaderRow",(function(){return dr})),n.d(t,"updateColumnsOnResize",(function(){return br})),"undefined"!=typeof WeakMap){var nn=new WeakMap;Jt=function(e){return nn.get(e)},Yt=function(e,t){return nn.set(e,t),t}}else{var rn=[],on=0;Jt=function(e){for(var t=0;t<rn.length;t+=2)if(rn[t]==e)return rn[t+1]},Yt=function(e,t){return 10==on&&(on=0),rn[on++]=e,rn[on++]=t}}var sn=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},an=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function cn(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}an.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,i=t/this.width|0,o=r+1,s=i+1,a=1;o<this.width&&this.map[t+a]==n;a++)o++;for(var c=1;s<this.height&&this.map[t+this.width*c]==n;c++)s++;return new sn(r,i,o,s)}}throw new RangeError("No cell with offset "+e+" found")},an.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},an.prototype.nextCell=function(e,t,n){var r=this.findCell(e),i=r.left,o=r.right,s=r.top,a=r.bottom;return"horiz"==t?(n<0?0==i:o==this.width)?null:this.map[s*this.width+(n<0?i-1:o)]:(n<0?0==s:a==this.height)?null:this.map[i+this.width*(n<0?s-1:a)]},an.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,i=n.right,o=n.top,s=n.bottom,a=this.findCell(t),c=a.left,l=a.right,h=a.top,p=a.bottom;return new sn(Math.min(r,c),Math.min(o,h),Math.max(i,l),Math.max(s,p))},an.prototype.cellsInRect=function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var i=e.left;i<e.right;i++){var o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,i==e.left&&i&&this.map[o-1]==s||r==e.top&&r&&this.map[o-this.width]==s||t.push(s))}return t},an.prototype.positionAt=function(e,t,n){for(var r=0,i=0;;r++){var o=i+n.child(r).nodeSize;if(r==e){for(var s=t+e*this.width,a=(e+1)*this.width;s<a&&this.map[s]<i;)s++;return s==a?o-1:this.map[s]}i=o}},an.get=function(e){return Jt(e)||Yt(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var i=e.child(r),o=0;if(n)for(var s=0;s<r;s++)for(var a=e.child(s),c=0;c<a.childCount;c++){var l=a.child(c);s+l.attrs.rowspan>r&&(o+=l.attrs.colspan)}for(var h=0;h<i.childCount;h++){var p=i.child(h);o+=p.attrs.colspan,p.attrs.rowspan>1&&(n=!0)}-1==t?t=o:t!=o&&(t=Math.max(t,o))}return t}(e),n=e.childCount,r=[],i=0,o=null,s=[],a=0,c=t*n;a<c;a++)r[a]=0;for(var l=0,h=0;l<n;l++){var p=e.child(l);h++;for(var u=0;;u++){for(;i<r.length&&0!=r[i];)i++;if(u==p.childCount)break;for(var d=p.child(u),f=d.attrs,m=f.colspan,g=f.rowspan,v=f.colwidth,y=0;y<g;y++){if(y+l>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:h,n:g-y});break}for(var b=i+y*t,w=0;w<m;w++){0==r[b+w]?r[b+w]=h:(o||(o=[])).push({type:"collision",row:l,pos:h,n:m-w});var x=v&&v[w];if(x){var k=(b+w)%t*2,_=s[k];null==_||_!=x&&1==s[k+1]?(s[k]=x,s[k+1]=1):_==x&&s[k+1]++}}}i+=m,h+=d.nodeSize}for(var S=(l+1)*t,$=0;i<S;)0==r[i++]&&$++;$&&(o||(o=[])).push({type:"missing",row:l,n:$}),h++}for(var C=new an(t,n,r,o),E=!1,T=0;!E&&T<s.length;T+=2)null!=s[T]&&s[T+1]<n&&(E=!0);E&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,i={};r<e.map.length;r++){var o=e.map[r];if(!i[o]){i[o]=!0;for(var s=n.nodeAt(o),a=null,c=0;c<s.attrs.colspan;c++){var l=(r+c)%e.width,h=t[2*l];null==h||s.attrs.colwidth&&s.attrs.colwidth[c]==h||((a||(a=cn(s.attrs)))[c]=h)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}}(C,s,e);return C}(e))};var ln=new r.PluginKey("selectingCells");function hn(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function pn(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function un(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:hn(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var i=e.nodeBefore,o=e.pos;i;i=i.lastChild,o--){var s=i.type.spec.tableRole;if("cell"==s||"header_cell"==s)return e.doc.resolve(o-i.nodeSize)}}(t.$head)}function dn(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function fn(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function mn(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function gn(e){return an.get(e.node(-1)).findCell(e.pos-e.start(-1))}function vn(e){return an.get(e.node(-1)).colCount(e.pos-e.start(-1))}function yn(e,t,n){var r=e.start(-1),i=an.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==i?null:e.node(0).resolve(r+i)}function bn(e,t,n){var r={};for(var i in e)r[i]=e[i];return r[t]=n,r}function wn(e,t,n){void 0===n&&(n=1);var r=bn(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function xn(e,t,n){void 0===n&&(n=1);var r=bn(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var i=0;i<n;i++)r.colwidth.splice(t,0,0)}return r}var kn=function(e){function t(t,n){void 0===n&&(n=t);var i=t.node(-1),o=an.get(i),s=t.start(-1),a=o.rectBetween(t.pos-s,n.pos-s),c=t.node(0),l=o.cellsInRect(a).filter((function(e){return e!=n.pos-s}));l.unshift(n.pos-s);var h=l.map((function(e){var t=i.nodeAt(e),n=e+s+1;return new r.SelectionRange(c.resolve(n),c.resolve(n+t.content.size))}));e.call(this,h[0].$from,h[0].$to,h),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var i=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(dn(i)&&dn(o)&&mn(i,o)){var s=this.$anchorCell.node(-1)!=i.node(-1);return s&&this.isRowSelection()?t.rowSelection(i,o):s&&this.isColSelection()?t.colSelection(i,o):new t(i,o)}return r.TextSelection.between(i,o)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=an.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},s=[],a=r.top;a<r.bottom;a++){for(var c=[],l=a*t.width+r.left,h=r.left;h<r.right;h++,l++){var p=t.map[l];if(!o[p]){o[p]=!0;var u=t.findCell(p),d=e.nodeAt(p),f=r.left-u.left,m=u.right-r.right;if(f>0||m>0){var g=d.attrs;f>0&&(g=wn(g,0,f)),m>0&&(g=wn(g,g.colspan-m,m)),d=u.left<r.left?d.type.createAndFill(g):d.type.create(g,d.content)}if(u.top<r.top||u.bottom>r.bottom){var v=bn(d.attrs,"rowspan",Math.min(u.bottom,r.bottom)-Math.max(u.top,r.top));d=u.top<r.top?d.type.createAndFill(v):d.type.create(v,d.content)}c.push(d)}}s.push(e.child(a).copy(i.Fragment.from(c)))}var y=this.isColSelection()&&this.isRowSelection()?e:s;return new i.Slice(i.Fragment.from(y),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=i.Slice.empty);for(var r=t.steps.length,o=this.ranges,s=0;s<o.length;s++){var a=o[s],c=a.$from,l=a.$to,h=t.mapping.slice(r);t.replace(h.map(c.pos),h.map(l.pos),s?i.Slice.empty:n)}var p=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);p&&t.setSelection(p)},t.prototype.replaceWith=function(e,t){this.replace(e,new i.Slice(i.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=an.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),o=0;o<i.length;o++)e(t.nodeAt(i[o]),r+i[o])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=an.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),s=r.findCell(n.pos-i),a=e.node(0);return o.top<=s.top?(o.top>0&&(e=a.resolve(i+r.map[o.left])),s.bottom<r.height&&(n=a.resolve(i+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+r.map[s.left])),o.bottom<r.height&&(e=a.resolve(i+r.map[r.width*(r.height-1)+o.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=an.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,o)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=an.get(e.node(-1)),i=e.start(-1),o=r.findCell(e.pos-i),s=r.findCell(n.pos-i),a=e.node(0);return o.left<=s.left?(o.left>0&&(e=a.resolve(i+r.map[o.top*r.width])),s.right<r.width&&(n=a.resolve(i+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+r.map[s.top*r.width])),o.right<r.width&&(e=a.resolve(i+r.map[r.width*(o.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new _n(this.$anchorCell.pos,this.$headCell.pos)},t}(r.Selection);kn.prototype.visible=!1,r.Selection.jsonID("cell",kn);var _n=function(e,t){this.anchor=e,this.head=t};function Sn(e){if(!(e.selection instanceof kn))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(Dt.node(n,n+e.nodeSize,{class:"selectedCell"}))})),Lt.create(e.doc,t)}function $n(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(e){return Number(e)})):null,i=Number(e.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(var s in t){var a=t[s].getFromDOM,c=a&&a(e);null!=c&&(o[s]=c)}return o}function Cn(e,t){var n={};for(var r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var i=t[r].setDOMAttr;i&&i(e.attrs[r],n)}return n}function En(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return $n(e,t)}}],toDOM:function(e){return["td",Cn(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return $n(e,t)}}],toDOM:function(e){return["th",Cn(e,t),0]}}}}function Tn(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}return t}function An(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,s=o.type.spec.tableRole,a=o.type.schema,c=[];if("row"==s)for(var l=0;l<t.childCount;l++){var h=t.child(l).content,p=l?0:Math.max(0,n-1),u=l<t.childCount-1?0:Math.max(0,r-1);(p||u)&&(h=Nn(Tn(a).row,new i.Slice(h,p,u)).content),c.push(h)}else{if("cell"!=s&&"header_cell"!=s)return null;c.push(n||r?Nn(Tn(a).row,new i.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],s=o.childCount-1;s>=0;s--)for(var a=o.child(s).attrs,c=a.rowspan,l=a.colspan,h=r;h<r+c;h++)n[h]=(n[h]||0)+l;for(var p=0,u=0;u<n.length;u++)p=Math.max(p,n[u]);for(var d=0;d<n.length;d++)if(d>=t.length&&t.push(i.Fragment.empty),n[d]<p){for(var f=Tn(e).cell.createAndFill(),m=[],g=n[d];g<p;g++)m.push(f);t[d]=t[d].append(i.Fragment.from(m))}return{height:t.length,width:p,rows:t}}(a,c)}function Nn(e,t){var n=e.createAndFill();return new x.c(n).replace(0,n.content.size,t).doc}function Mn(e,t,n){var r=e.width,o=e.height,s=e.rows;if(r!=t){for(var a=[],c=[],l=0;l<s.length;l++){for(var h=s[l],p=[],u=a[l]||0,d=0;u<t;d++){var f=h.child(d%h.childCount);u+f.attrs.colspan>t&&(f=f.type.create(wn(f.attrs,f.attrs.colspan,u+f.attrs.colspan-t),f.content)),p.push(f),u+=f.attrs.colspan;for(var m=1;m<f.attrs.rowspan;m++)a[l+m]=(a[l+m]||0)+f.attrs.colspan}c.push(i.Fragment.from(p))}s=c,r=t}if(o!=n){for(var g=[],v=0,y=0;v<n;v++,y++){for(var b=[],w=s[y%o],x=0;x<w.childCount;x++){var k=w.child(x);v+k.attrs.rowspan>n&&(k=k.type.create(bn(k.attrs,"rowspan",n-k.attrs.rowspan),k.content)),b.push(k)}g.push(i.Fragment.from(b))}s=g,o=n}return{width:r,height:o,rows:s}}function On(e,t,n,r,i,o,s,a){if(0==s||s==t.height)return!1;for(var c=!1,l=i;l<o;l++){var h=s*t.width+l,p=t.map[h];if(t.map[h-t.width]==p){c=!0;var u=n.nodeAt(p),d=t.findCell(p),f=d.top,m=d.left;e.setNodeMarkup(e.mapping.slice(a).map(p+r),null,bn(u.attrs,"rowspan",s-f)),e.insert(e.mapping.slice(a).map(t.positionAt(s,m,n)),u.type.createAndFill(bn(u.attrs,"rowspan",f+u.attrs.rowspan-s))),l+=u.attrs.colspan-1}}return c}function Dn(e,t,n,r,i,o,s,a){if(0==s||s==t.width)return!1;for(var c=!1,l=i;l<o;l++){var h=l*t.width+s,p=t.map[h];if(t.map[h-1]==p){c=!0;var u=n.nodeAt(p),d=t.colCount(p),f=e.mapping.slice(a).map(p+r);e.setNodeMarkup(f,null,wn(u.attrs,s-d,u.attrs.colspan-(s-d))),e.insert(f+u.nodeSize,u.type.createAndFill(wn(u.attrs,0,s-d))),l+=u.attrs.rowspan-1}}return c}function Rn(e,t,n,r,o){var s=n?e.doc.nodeAt(n-1):e.doc,a=an.get(s),c=r.top,l=r.left,h=l+o.width,p=c+o.height,u=e.tr,d=0;function f(){s=n?u.doc.nodeAt(n-1):u.doc,a=an.get(s),d=u.mapping.maps.length}(function(e,t,n,r,o,s,a){var c,l,h=Tn(e.doc.type.schema);if(o>t.width)for(var p=0,u=0;p<t.height;p++){var d=n.child(p);u+=d.nodeSize;var f=[],m=void 0;m=null==d.lastChild||d.lastChild.type==h.cell?c||(c=h.cell.createAndFill()):l||(l=h.header_cell.createAndFill());for(var g=t.width;g<o;g++)f.push(m);e.insert(e.mapping.slice(a).map(u-1+r),f)}if(s>t.height){for(var v=[],y=0,b=(t.height-1)*t.width;y<Math.max(t.width,o);y++){var w=!(y>=t.width)&&n.nodeAt(t.map[b+y]).type==h.header_cell;v.push(w?l||(l=h.header_cell.createAndFill()):c||(c=h.cell.createAndFill()))}for(var x=h.row.create(null,i.Fragment.from(v)),k=[],_=t.height;_<s;_++)k.push(x);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),k)}return!(!c&&!l)})(u,a,s,n,h,p,d)&&f(),On(u,a,s,n,l,h,c,d)&&f(),On(u,a,s,n,l,h,p,d)&&f(),Dn(u,a,s,n,c,p,l,d)&&f(),Dn(u,a,s,n,c,p,h,d)&&f();for(var m=c;m<p;m++){var g=a.positionAt(m,l,s),v=a.positionAt(m,h,s);u.replace(u.mapping.slice(d).map(g+n),u.mapping.slice(d).map(v+n),new i.Slice(o.rows[m-c],0,0))}f(),u.setSelection(new kn(u.doc.resolve(n+a.positionAt(c,l,s)),u.doc.resolve(n+a.positionAt(p-1,h-1,s)))),t(u)}_n.prototype.map=function(e){return new _n(e.map(this.anchor),e.map(this.head))},_n.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&mn(t,n)?new kn(t,n):r.Selection.near(n,1)};var Pn=w({ArrowLeft:Ln("horiz",-1),ArrowRight:Ln("horiz",1),ArrowUp:Ln("vert",-1),ArrowDown:Ln("vert",1),"Shift-ArrowLeft":Bn("horiz",-1),"Shift-ArrowRight":Bn("horiz",1),"Shift-ArrowUp":Bn("vert",-1),"Shift-ArrowDown":Bn("vert",1),Backspace:Vn,"Mod-Backspace":Vn,Delete:Vn,"Mod-Delete":Vn});function In(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Ln(e,t){return function(n,i,o){var s=n.selection;if(s instanceof kn)return In(n,i,r.Selection.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var a=jn(o,e,t);if(null==a)return!1;if("horiz"==e)return In(n,i,r.Selection.near(n.doc.resolve(s.head+t),t));var c,l=n.doc.resolve(a),h=yn(l,e,t);return c=h?r.Selection.near(h,1):t<0?r.Selection.near(n.doc.resolve(l.before(-1)),-1):r.Selection.near(n.doc.resolve(l.after(-1)),1),In(n,i,c)}}function Bn(e,t){return function(n,r,i){var o=n.selection;if(!(o instanceof kn)){var s=jn(i,e,t);if(null==s)return!1;o=new kn(n.doc.resolve(s))}var a=yn(o.$headCell,e,t);return!!a&&In(n,r,new kn(o.$anchorCell,a))}}function Vn(e,t){var n=e.selection;if(!(n instanceof kn))return!1;if(t){var r=e.tr,o=Tn(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new i.Slice(o,0,0))})),r.docChanged&&t(r)}return!0}function Fn(e,t){var n=hn(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new kn(n))),!0)}function zn(e,t,n){if(!pn(e.state))return!1;var r=An(n),o=e.state.selection;if(o instanceof kn){r||(r={width:1,height:1,rows:[i.Fragment.from(Nn(Tn(e.state.schema).cell,n))]});var s=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),c=an.get(s).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=Mn(r,c.right-c.left,c.bottom-c.top),Rn(e.state,e.dispatch,a,c,r),!0}if(r){var l=un(e.state),h=l.start(-1);return Rn(e.state,e.dispatch,h,an.get(l.node(-1)).findCell(l.pos-h),r),!0}return!1}function qn(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r=Un(e,t.target);if(t.shiftKey&&e.state.selection instanceof kn)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(n=hn(e.state.selection.$anchor))&&Wn(e,t).pos!=n.pos)i(n,t),t.preventDefault();else if(!r)return;e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",s)}function i(t,n){var r=Wn(e,n),i=null==ln.getState(e.state);if(!r||!mn(t,r)){if(!i)return;r=t}var o=new kn(t,r);if(i||!e.state.selection.eq(o)){var s=e.state.tr.setSelection(o);i&&s.setMeta(ln,t.pos),e.dispatch(s)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",s),null!=ln.getState(e.state)&&e.dispatch(e.state.tr.setMeta(ln,-1))}function s(n){var s,a=ln.getState(e.state);if(null!=a)s=e.state.doc.resolve(a);else if(Un(e,n.target)!=r&&!(s=Wn(e,t)))return o();s&&i(s,n)}}function jn(e,t,n){if(!(e.state.selection instanceof r.TextSelection))return null;for(var i=e.state.selection.$head,o=i.depth-1;o>=0;o--){var s=i.node(o);if((n<0?i.index(o):i.indexAfter(o))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var a=i.before(o),c="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(c)?a:null}}return null}function Un(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function Wn(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?hn(e.state.doc.resolve(n.pos)):null}var Hn=new r.PluginKey("fix-tables");function Kn(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var i=an.get(t);if(!i.problems)return r;r||(r=e.tr);for(var o,s,a=[],c=0;c<i.height;c++)a.push(0);for(var l=0;l<i.problems.length;l++){var h=i.problems[l];if("collision"==h.type){for(var p=t.nodeAt(h.pos),u=0;u<p.attrs.rowspan;u++)a[h.row+u]+=h.n;r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,wn(p.attrs,p.attrs.colspan-h.n,h.n))}else if("missing"==h.type)a[h.row]+=h.n;else if("overlong_rowspan"==h.type){var d=t.nodeAt(h.pos);r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,bn(d.attrs,"rowspan",d.attrs.rowspan-h.n))}else if("colwidth mismatch"==h.type){var f=t.nodeAt(h.pos);r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,bn(f.attrs,"colwidth",h.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==o&&(o=m),s=m);for(var g=0,v=n+1;g<i.height;g++){var y=t.child(g),b=v+y.nodeSize,w=a[g];if(w>0){var x="cell";y.firstChild&&(x=y.firstChild.type.spec.tableRole);for(var k=[],_=0;_<w;_++)k.push(Tn(e.schema)[x].createAndFill());var S=0!=g&&o!=g-1||s!=g?b-1:v+1;r.insert(r.mapping.map(S),k)}v=b}return r.setMeta(Hn,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,i){var o=t.childCount,s=n.childCount;e:for(var a=0,c=0;a<s;a++){for(var l=n.child(a),h=c,p=Math.min(o,a+3);h<p;h++)if(t.child(h)==l){c=h+1,r+=l.nodeSize;continue e}i(l,r),c<o&&t.child(c).sameMarkup(l)?e(t.child(c),l,r+1,i):l.nodesBetween(0,l.content.size,i,r+1),r+=l.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Jn(e){var t,n=e.selection,r=un(e),i=r.node(-1),o=r.start(-1),s=an.get(i);return(t=n instanceof kn?s.rectBetween(n.$anchorCell.pos-o,n.$headCell.pos-o):s.findCell(r.pos-o)).tableStart=o,t.map=s,t.table=i,t}function Yn(e,t,n){var r=t.map,i=t.tableStart,o=t.table,s=n>0?-1:0;(function(e,t,n){for(var r=Tn(t.type.schema).header_cell,i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0})(r,o,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var l=r.map[c],h=o.nodeAt(l);e.setNodeMarkup(e.mapping.map(i+l),null,xn(h.attrs,n-r.colCount(l))),a+=h.attrs.rowspan-1}else{var p=null==s?Tn(o.type.schema).cell:o.nodeAt(r.map[c+s]).type,u=r.positionAt(a,n,o);e.insert(e.mapping.map(i+u),p.createAndFill())}}return e}function Gn(e,t){if(!pn(e))return!1;if(t){var n=Jn(e);t(Yn(e.tr,n,n.left))}return!0}function Xn(e,t){if(!pn(e))return!1;if(t){var n=Jn(e);t(Yn(e.tr,n,n.right))}return!0}function Qn(e,t,n){for(var r=t.map,i=t.table,o=t.tableStart,s=e.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,l=r.map[c],h=i.nodeAt(l);if(n>0&&r.map[c-1]==l||n<r.width-1&&r.map[c+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(o+l),null,wn(h.attrs,n-r.colCount(l)));else{var p=e.mapping.slice(s).map(o+l);e.delete(p,p+h.nodeSize)}a+=h.attrs.rowspan}}function Zn(e,t){if(!pn(e))return!1;if(t){var n=Jn(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var i=n.right-1;Qn(r,n,i),i!=n.left;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=an.get(n.table);t(r)}return!0}function er(e,t,n){for(var r=Tn(t.type.schema).header_cell,i=0;i<e.width;i++)if(t.nodeAt(e.map[i+n*e.width]).type!=r)return!1;return!0}function tr(e,t,n){for(var r=t.map,i=t.tableStart,o=t.table,s=i,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=[],l=n>0?-1:0;er(r,o,n+l)&&(l=0==n||n==r.height?null:0);for(var h=0,p=r.width*n;h<r.width;h++,p++)if(n>0&&n<r.height&&r.map[p]==r.map[p-r.width]){var u=r.map[p],d=o.nodeAt(u).attrs;e.setNodeMarkup(i+u,null,bn(d,"rowspan",d.rowspan+1)),h+=d.colspan-1}else{var f=null==l?Tn(o.type.schema).cell:o.nodeAt(r.map[p+l*r.width]).type;c.push(f.createAndFill())}return e.insert(s,Tn(o.type.schema).row.create(null,c)),e}function nr(e,t){if(!pn(e))return!1;if(t){var n=Jn(e);t(tr(e.tr,n,n.top))}return!0}function rr(e,t){if(!pn(e))return!1;if(t){var n=Jn(e);t(tr(e.tr,n,n.bottom))}return!0}function ir(e,t,n){for(var r=t.map,i=t.table,o=t.tableStart,s=0,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=s+i.child(n).nodeSize,l=e.mapping.maps.length;e.delete(s+o,c+o);for(var h=0,p=n*r.width;h<r.width;h++,p++){var u=r.map[p];if(n>0&&u==r.map[p-r.width]){var d=i.nodeAt(u).attrs;e.setNodeMarkup(e.mapping.slice(l).map(u+o),null,bn(d,"rowspan",d.rowspan-1)),h+=d.colspan-1}else if(n<r.width&&u==r.map[p+r.width]){var f=i.nodeAt(u),m=f.type.create(bn(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),g=r.positionAt(n+1,h,i);e.insert(e.mapping.slice(l).map(o+g),m),h+=f.attrs.colspan-1}}}function or(e,t){if(!pn(e))return!1;if(t){var n=Jn(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;ir(r,n,i),i!=n.top;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=an.get(n.table);t(r)}return!0}function sr(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function ar(e,t){var n=e.selection;if(!(n instanceof kn)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=Jn(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,i=e.map,o=t.top*n+t.left,s=o,a=(t.bottom-1)*n+t.left,c=o+(t.right-t.left-1),l=t.top;l<t.bottom;l++){if(t.left>0&&i[s]==i[s-1]||t.right<n&&i[c]==i[c+1])return!0;s+=n,c+=n}for(var h=t.left;h<t.right;h++){if(t.top>0&&i[o]==i[o-n]||t.bottom<r&&i[a]==i[a+n])return!0;o++,a++}return!1}(o,r))return!1;if(t){for(var s,a,c=e.tr,l={},h=i.Fragment.empty,p=r.top;p<r.bottom;p++)for(var u=r.left;u<r.right;u++){var d=o.map[p*o.width+u],f=r.table.nodeAt(d);if(!l[d])if(l[d]=!0,null==s)s=d,a=f;else{sr(f)||(h=h.append(f.content));var m=c.mapping.map(d+r.tableStart);c.delete(m,m+f.nodeSize)}}if(c.setNodeMarkup(s+r.tableStart,null,bn(xn(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),"rowspan",r.bottom-r.top)),h.size){var g=s+1+a.content.size,v=sr(a)?s+1:g;c.replaceWith(v+r.tableStart,g+r.tableStart,h)}c.setSelection(new kn(c.doc.resolve(s+r.tableStart))),t(c)}return!0}function cr(e,t){var n=Tn(e.schema);return lr((function(e){var t=e.node;return n[t.type.spec.tableRole]}))(e,t)}function lr(e){return function(t,n){var r,i,o=t.selection;if(o instanceof kn){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;r=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(!(r=function(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from)))return!1;i=hn(o.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=bn(s,"rowspan",1)),s.colspan>1&&(s=bn(s,"colspan",1));for(var l,h=Jn(t),p=t.tr,u=0;u<h.right-h.left;u++)a.push(c?bn(s,"colwidth",c&&c[u]?[c[u]]:null):s);for(var d=h.top;d<h.bottom;d++){var f=h.map.positionAt(d,h.left,h.table);d==h.top&&(f+=r.nodeSize);for(var m=h.left,g=0;m<h.right;m++,g++)m==h.left&&d==h.top||p.insert(l=p.mapping.map(f+h.tableStart,1),e({node:r,row:d,col:m}).createAndFill(a[g]))}p.setNodeMarkup(i,e({node:r,row:h.top,col:h.left}),a[0]),o instanceof kn&&p.setSelection(new kn(p.doc.resolve(o.$anchorCell.pos),l&&p.doc.resolve(l))),n(p)}return!0}}function hr(e,t){return function(n,r){if(!pn(n))return!1;var i=un(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){var o=n.tr;n.selection instanceof kn?n.selection.forEachCell((function(n,r){n.attrs[e]!==t&&o.setNodeMarkup(r,null,bn(n.attrs,e,t))})):o.setNodeMarkup(i.pos,null,bn(i.nodeAfter.attrs,e,t)),r(o)}return!0}}function pr(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),i=0;i<r.length;i++){var o=t.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function ur(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!pn(t))return!1;if(n){for(var r=Tn(t.schema),i=Jn(t),o=t.tr,s=i.map.cellsInRect("column"==e?new sn(i.left,0,i.right,i.map.height):"row"==e?new sn(0,i.top,i.map.width,i.bottom):i),a=s.map((function(e){return i.table.nodeAt(e)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[c],r.cell,a[c].attrs);if(0==o.steps.length)for(var l=0;l<s.length;l++)o.setNodeMarkup(i.tableStart+s[l],r.header_cell,a[l].attrs);n(o)}return!0}}(e):function(t,n){if(!pn(t))return!1;if(n){var r=Tn(t.schema),i=Jn(t),o=t.tr,s=pr("row",i,r),a=pr("column",i,r),c=("column"===e?s:"row"===e&&a)?1:0,l="column"==e?new sn(0,c,1,i.map.height):"row"==e?new sn(c,0,i.map.width,1):i,h="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(l).forEach((function(e){var t=e+i.tableStart,n=o.doc.nodeAt(t);n&&o.setNodeMarkup(t,h,n.attrs)})),n(o)}return!0}}var dr=ur("row",{useDeprecatedLogic:!0}),fr=ur("column",{useDeprecatedLogic:!0}),mr=ur("cell",{useDeprecatedLogic:!0});function gr(e){return function(t,n){if(!pn(t))return!1;var i=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,i=e.before();r>=0;r--){var o=e.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),a=e.indexAfter(-1),c=e.after();a<s.childCount;a++){var l=s.child(a);if(l.childCount)return c+1;c+=l.nodeSize}}}(un(t),e);if(null!=i){if(n){var o=t.doc.resolve(i);n(t.tr.setSelection(r.TextSelection.between(o,fn(o))).scrollIntoView())}return!0}}}function vr(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var yr=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),br(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function br(e,t,n,r,i,o){for(var s=0,a=!0,c=t.firstChild,l=e.firstChild,h=0,p=0;h<l.childCount;h++)for(var u=l.child(h).attrs,d=u.colspan,f=u.colwidth,m=0;m<d;m++,p++){var g=i==p?o:f&&f[m],v=g?g+"px":"";s+=g||r,g||(a=!1),c?(c.style.width!=v&&(c.style.width=v),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=v}for(;c;){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}yr.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,br(e,this.colgroup,this.table,this.cellMinWidth),!0)},yr.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var wr=new r.PluginKey("tableColumnResizing");function xr(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var i=e.View;void 0===i&&(i=yr);var o=e.lastColumnResizable;return void 0===o&&(o=!0),new r.Plugin({key:wr,state:{init:function(e,t){return this.spec.props.nodeViews[Tn(t.schema).table.name]=function(e,t){return new i(e,n,t)},new kr(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return wr.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,n){!function(e,t,n,r,i){var o=wr.getState(e.state);if(!o.dragging){var s=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=-1;if(s){var c=s.getBoundingClientRect(),l=c.left,h=c.right;t.clientX-l<=n?a=_r(e,t,"left"):h-t.clientX<=n&&(a=_r(e,t,"right"))}if(a!=o.activeHandle){if(!i&&-1!==a){var p=e.state.doc.resolve(a),u=p.node(-1),d=an.get(u),f=p.start(-1);if(d.colCount(p.pos-f)+p.nodeAfter.attrs.colspan-1==d.width-1)return}$r(e,a)}}}(e,n,t,0,o)},mouseleave:function(e){!function(e){var t=wr.getState(e.state);t.activeHandle>-1&&!t.dragging&&$r(e,-1)}(e)},mousedown:function(e,t){!function(e,t,n){var r=wr.getState(e.state);if(-1==r.activeHandle||r.dragging)return!1;var i=e.state.doc.nodeAt(r.activeHandle),o=function(e,t,n){var r=n.colspan,i=n.colwidth,o=i&&i[i.length-1];if(o)return o;var s=e.domAtPos(t),a=s.node.childNodes[s.offset].offsetWidth,c=r;if(i)for(var l=0;l<r;l++)i[l]&&(a-=i[l],c--);return a/c}(e,r.activeHandle,i.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=wr.getState(e.state);r.dragging&&(!function(e,t,n){for(var r=e.state.doc.resolve(t),i=r.node(-1),o=an.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=e.state.tr,l=0;l<o.height;l++){var h=l*o.width+a;if(!l||o.map[h]!=o.map[h-o.width]){var p=o.map[h],u=i.nodeAt(p).attrs,d=1==u.colspan?0:a-o.colCount(p);if(!u.colwidth||u.colwidth[d]!=n){var f=u.colwidth?u.colwidth.slice():Cr(u.colspan);f[d]=n,c.setNodeMarkup(s+p,null,bn(u,"colwidth",f))}}}c.docChanged&&e.dispatch(c)}(e,r.activeHandle,Sr(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(wr,{setDragging:null})))}function a(t){if(!t.which)return s(t);var r=wr.getState(e.state),i=Sr(r.dragging,t,n);!function(e,t,n,r){var i=e.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=an.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,c=e.domAtPos(i.start(-1)).node;for(;"TABLE"!=c.nodeName;)c=c.parentNode;br(o,c.firstChild,c,r,a,n)}(e,r.activeHandle,i,n)}e.dispatch(e.state.tr.setMeta(wr,{setDragging:{startX:t.clientX,startWidth:o}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault()}(e,t,n)}},decorations:function(e){var t=wr.getState(e);if(t.activeHandle>-1)return function(e,t){for(var n=[],r=e.doc.resolve(t),i=r.node(-1),o=an.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,c=0;c<o.height;c++){var l=a+c*o.width-1;if(!(a!=o.width&&o.map[l]==o.map[l+1]||0!=c&&o.map[l-1]==o.map[l-1-o.width])){var h=o.map[l],p=s+h+i.nodeAt(h).nodeSize-1,u=document.createElement("div");u.className="column-resize-handle",n.push(Dt.widget(p,u))}}return Lt.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})}var kr=function(e,t){this.activeHandle=e,this.dragging=t};function _r(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,i=hn(e.state.doc.resolve(r));if(!i)return-1;if("right"==n)return i.pos;var o=an.get(i.node(-1)),s=i.start(-1),a=o.map.indexOf(i.pos-s);return a%o.width==0?-1:s+o.map[a-1]}function Sr(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function $r(e,t){e.dispatch(e.state.tr.setMeta(wr,{setHandle:t}))}function Cr(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function Er(e){void 0===e&&(e={});var t=e.allowTableNodeSelection;return void 0===t&&(t=!1),new r.Plugin({key:ln,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(ln);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:Sn,handleDOMEvents:{mousedown:qn},createSelectionBetween:function(e){if(null!=ln.getState(e.state))return e.state.selection},handleTripleClick:Fn,handleKeyDown:Pn,handlePaste:zn},appendTransaction:function(e,n,i){return function(e,t,n){var i,o,s=(t||e).selection,a=(t||e).doc;if(s instanceof r.NodeSelection&&(o=s.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)i=kn.create(a,s.from);else if("row"==o){var c=a.resolve(s.from+1);i=kn.rowSelection(c,c)}else if(!n){var l=an.get(s.node),h=s.from+1,p=h+l.map[l.width*l.height-1];i=kn.create(a,h+1,p)}}else s instanceof r.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,i=n.pos,o=t.depth;o>=0&&!(t.after(o+1)<t.end(o));o--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,i--);return r==i&&/row|table/.test(t.node(o).type.spec.tableRole)}(s)?i=r.TextSelection.create(a,s.from):s instanceof r.TextSelection&&function(e){for(var t,n,r=e.$from,i=e.$to,o=r.depth;o>0;o--){var s=r.node(o);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){t=s;break}}for(var a=i.depth;a>0;a--){var c=i.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return t!==n&&0===i.parentOffset}(s)&&(i=r.TextSelection.create(a,s.$from.start(),s.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}(i,Kn(i,n),t)}})}kr.prototype.apply=function(e){var t=this,n=e.getMeta(wr);if(n&&null!=n.setHandle)return new kr(n.setHandle,null);if(n&&void 0!==n.setDragging)return new kr(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);dn(e.doc.resolve(r))||(r=null),t=new kr(r,t.dragging)}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(9),i=n(13);function o(e){return void 0===e&&(e={}),new r.Plugin({view:function(t){return new s(t,e)}})}var s=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var r=function(e){return n[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}}))};s.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,r=t.handler;return e.editorView.dom.removeEventListener(n,r)}))},s.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&this.updateOverlay()},s.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},s.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var i=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!e){var s=this.editorView.coordsAtPos(this.cursorPos);e={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var c=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=e.left-c.left+"px",this.element.style.top=e.top-c.top+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},s.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},s.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var n=t.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=Object(i.d)(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=t.pos),this.setCursor(n),this.scheduleRemoval(5e3)}}},s.prototype.dragend=function(){this.scheduleRemoval(20)},s.prototype.drop=function(){this.scheduleRemoval(20)},s.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(25),i=n(9),o=n(27),s=n(12),a=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));return t.valid(i)?new t(i):e.near(i)},t.prototype.content=function(){return s.Slice.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new c(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(0!=n)for(var r=e.node(t).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var i=r.child(n);;i=i.firstChild){if(0==i.childCount&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock},t.findFrom=function(e,n,r){if(!r&&t.valid(e))return e;for(var i=e.pos,o=null,s=e.depth;;s--){var a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.maybeChild(n>0?e.indexAfter(s):e.index(s)-1);break}if(0==s)return null;i+=n;var c=e.doc.resolve(i);if(t.valid(c))return c}for(;o=n>0?o.firstChild:o.lastChild;){i+=n;var l=e.doc.resolve(i);if(t.valid(l))return l}return null},t}(i.Selection);a.prototype.visible=!1,i.Selection.jsonID("gapcursor",a);var c=function(e){this.pos=e};c.prototype.map=function(e){return new c(e.map(this.pos))},c.prototype.resolve=function(e){var t=e.resolve(this.pos);return a.valid(t)?new a(t):i.Selection.near(t)};var l=function(){return new i.Plugin({props:{decorations:d,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&a.valid(n))return new a(n)},handleClick:u,handleKeyDown:h}})},h=Object(r.a)({ArrowLeft:p("horiz",-1),ArrowRight:p("horiz",1),ArrowUp:p("vert",-1),ArrowDown:p("vert",1)});function p(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){var s=e.selection,c=t>0?s.$to:s.$from,l=s.empty;if(s instanceof i.TextSelection){if(!o.endOfTextblock(n)||0==c.depth)return!1;l=!1,c=e.doc.resolve(t>0?c.after():c.before())}var h=a.findFrom(c,t,l);return!!h&&(r&&r(e.tr.setSelection(new a(h))),!0)}}function u(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!a.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&i.NodeSelection.isSelectable(e.state.doc.nodeAt(o)))&&(e.dispatch(e.state.tr.setSelection(new a(r))),!0)}function d(e){if(!(e.selection instanceof a))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",o.b.create(e.doc,[o.a.widget(e.selection.head,t,{key:"gapcursor"})])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(13),i=n(12),o=n(9);function s(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function a(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function c(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function l(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function h(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function p(e,t){var n=e.selection,s=n.$from,a=n.$to;if(e.selection instanceof o.NodeSelection&&e.selection.node.isBlock)return!(!s.parentOffset||!Object(r.c)(e.doc,s.pos))&&(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(t){var c=a.parentOffset==a.parent.content.size,l=e.tr;e.selection instanceof o.TextSelection&&l.deleteSelection();var p=0==s.depth?null:h(s.node(-1).contentMatchAt(s.indexAfter(-1))),u=c&&p?[{type:p}]:null,d=Object(r.c)(l.doc,l.mapping.map(s.pos),1,u);u||d||!Object(r.c)(l.doc,l.mapping.map(s.pos),1,p&&[{type:p}])||(u=[{type:p}],d=!0),d&&(l.split(l.mapping.map(s.pos),1,u),c||s.parentOffset||s.parent.type==p||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),i.Fragment.from(p.create(),s.parent))||l.setNodeMarkup(l.mapping.map(s.before()),p)),t(l.scrollIntoView())}return!0}function u(e,t,n){var s,a,c=t.nodeBefore,l=t.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(function(e,t,n){var i=t.nodeBefore,o=t.nodeAfter,s=t.index();return!!(i&&o&&i.type.compatibleContent(o.type))&&(!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(s,s+1)||!o.isTextblock&&!Object(r.b)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&a.matchType(s[0]||l.type).validEnd){if(n){for(var h=t.pos+l.nodeSize,p=i.Fragment.empty,u=s.length-1;u>=0;u--)p=i.Fragment.from(s[u].create(null,p));p=i.Fragment.from(c.copy(p));var d=e.tr.step(new r.a(t.pos-1,h,t.pos,h,new i.Slice(p,1,0),s.length,!0)),f=h+2*s.length;Object(r.b)(d.doc,f)&&d.join(f),n(d.scrollIntoView())}return!0}var m=o.Selection.findFrom(t,1),g=m&&m.$from.blockRange(m.$to),v=g&&Object(r.g)(g);return null!=v&&v>=t.depth&&(n&&n(e.tr.lift(g,v).scrollIntoView()),!0)}function d(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}var f=d(s,(function(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",e):i.parentOffset>0))return!1;var s=c(i);if(!s){var l=i.blockRange(),h=l&&Object(r.g)(l);return null!=h&&(t&&t(e.tr.lift(l,h).scrollIntoView()),!0)}var p=s.nodeBefore;if(!p.type.spec.isolating&&u(e,s,t))return!0;if(0==i.parent.content.size&&(a(p,"end")||o.NodeSelection.isSelectable(p))){if(t){var d=e.tr.deleteRange(i.before(),i.after());d.setSelection(a(p,"end")?o.Selection.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):o.NodeSelection.create(d.doc,s.pos-p.nodeSize)),t(d.scrollIntoView())}return!0}return!(!p.isAtom||s.depth!=i.depth-1)&&(t&&t(e.tr.delete(s.pos-p.nodeSize,s.pos).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var i=c(r),s=i&&i.nodeBefore;return!(!s||!o.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(o.NodeSelection.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)})),m=d(s,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var i=l(r);if(!i)return!1;var s=i.nodeAfter;if(u(e,i,t))return!0;if(0==r.parent.content.size&&(a(s,"start")||o.NodeSelection.isSelectable(s))){if(t){var c=e.tr.deleteRange(r.before(),r.after());c.setSelection(a(s,"start")?o.Selection.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):o.NodeSelection.create(c.doc,c.mapping.map(i.pos))),t(c.scrollIntoView())}return!0}return!(!s.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var i=l(r),s=i&&i.nodeAfter;return!(!s||!o.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(o.NodeSelection.create(e.doc,i.pos)).scrollIntoView()),!0)})),g={Enter:d((function(e,t){var n=e.selection,r=n.$head,i=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(i))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),(function(e,t){var n=e.selection,r=n.$from,i=n.$to;if(r.parent.inlineContent||i.parent.inlineContent)return!1;var s=h(r.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){var a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=e.tr.insert(a,s.createAndFill());c.setSelection(o.TextSelection.create(c.doc,a+1)),t(c.scrollIntoView())}return!0}),(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if(Object(r.c)(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var o=n.blockRange(),s=o&&Object(r.g)(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}),p),"Mod-Enter":function(e,t){var n=e.selection,r=n.$head,i=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(i))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=h(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(t){var l=r.after(),p=e.tr.replaceWith(l,l,c.createAndFill());p.setSelection(o.Selection.near(p.doc.resolve(l),1)),t(p.scrollIntoView())}return!0},Backspace:f,"Mod-Backspace":f,Delete:m,"Mod-Delete":m,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new o.AllSelection(e.doc))),!0}},v={"Ctrl-h":g.Backspace,"Alt-Backspace":g["Mod-Backspace"],"Ctrl-d":g.Delete,"Ctrl-Alt-Backspace":g["Mod-Delete"],"Alt-Delete":g["Mod-Delete"],"Alt-d":g["Mod-Delete"]};for(var y in g)v[y]=g[y];var b=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?v:g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(12),o=n(33),s=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var r=0,i=e.length;r<i;r++){var o=O(e[r])(n.selection);if(o){var s=m(o.pos,t)(n);if(s!==n)return s}}return n}},a=function(e){return function(t){if(u(t.selection)){var n=t.selection,o=n.$from,s=n.$to;if(e instanceof i.Fragment&&o.parent.canReplace(o.index(),o.indexAfter(),e)||o.parent.canReplaceWith(o.index(),o.indexAfter(),e.type))return f(t.replaceWith(o.pos,s.pos,e).setSelection(new r.NodeSelection(t.doc.resolve(o.pos))))}return t}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var i=r.Selection.findFrom(n.doc.resolve(e),t,!0);return i?n.setSelection(i):n}},l=function(e){return e.type&&e.type.spec.selectable},h=function(e,t,n){return function(e){return l(e)&&e.type.isLeaf}(e)?n.setSelection(new r.NodeSelection(n.doc.resolve(t))):c(t)(n)},p=function(e,t,n){return function(r){var i="number"==typeof t,o=r.selection.$from,c=i?r.doc.resolve(t):u(r.selection)?r.doc.resolve(o.pos+1):o,p=c.parent;if(u(r.selection)&&n&&r!==(r=a(e)(r)))return r;if(w(p)&&r!==(r=s(p.type,e)(r))){var d=l(e)?c.before(c.depth):c.pos;return h(e,d,r)}if(b(c,e)){r.insert(c.pos,e);var m=i?c.pos:l(e)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return f(h(e,m,r))}for(var g=c.depth;g>0;g--){var v=c.after(g),y=r.doc.resolve(v);if(b(y,e))return r.insert(v,e),f(h(e,v,r))}return r}},u=function(e){return e instanceof r.NodeSelection},d=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},f=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},m=function(e,t){return function(n){var r=n.doc.nodeAt(e),i=n.doc.resolve(e);if(g(i,t)){var o=(n=n.replaceWith(e,e+r.nodeSize,t)).selection.$from.pos-1;return n=c(Math.max(o,0),-1)(n),n=c(n.selection.$from.start())(n),f(n)}return n}},g=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof i.Fragment?t:i.Fragment.from(t))},v=function(e){return function(t){var n=t.doc.nodeAt(e);return f(t.delete(e,e+n.nodeSize))}},y=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t},b=function(e,t){var n=e.index();return t instanceof i.Fragment?e.parent.canReplace(n,n,t):t instanceof i.Node&&e.parent.canReplaceWith(n,n,t.type)},w=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},k=function(e){return function(t){for(var n=o.TableMap.get(t.$anchorCell.node(-1)),r=t.$anchorCell.start(-1),i=n.cellsInRect(e),s=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r)),a=0,c=i.length;a<c;a++)if(-1===s.indexOf(i[a]))return!1;return!0}},_=function(e){return e[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},S=function(e){for(var t=o.TableMap.get(e),n=[],r=0;r<t.height;r++){for(var i=[],s={},a=0;a<t.width;a++){var c=t.map[r*t.width+a],l=e.nodeAt(c),h=t.findCell(c);s[c]||h.top!==r?i.push(null):(s[c]=!0,i.push(l))}n.push(i)}return n},$=function(e,t){for(var n=[],r=o.TableMap.get(e),i=0;i<r.height;i++){for(var s=e.child(i),a=[],c=0;c<r.width;c++)if(t[i][c]){var l=r.map[i*r.width+c],h=t[i][c],p=e.nodeAt(l).type.createChecked(Object.assign({},h.attrs),h.content,h.marks);a.push(p)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return e.type.createChecked(e.attrs,n,e.marks)},C=function(e,t,n,r){var i=t[0]>n[0]?-1:1,o=e.splice(t[0],t.length),s=o.length%2==0?1:0,a=void 0;return a=-1===r&&1===i?n[0]-1:1===r&&-1===i?n[n.length-1]-s+1:-1===i?n[0]:n[n.length-1]-s,e.splice.apply(e,[a,0].concat(o)),e},E=function(e,t,n,r){var i="Target position is invalid, you can't move the "+r+" "+e+" to "+t+", the target can't be split. You could use tryToFit option.";if(1===(e>t?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(t))throw new Error(i)}else if(-1!==n.slice(1).indexOf(t))throw new Error(i);return!0},T=function(e){return function(t){var n=t.$from;return A(n,e)}},A=function(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}},N=function(e,t){return function(n){var r=T(e)(n);if(r)return R(r.pos,t)}},M=function(e){return function(t){return!!T(e)(t)}},O=function(e){return function(t){return T((function(t){return d(e,t)}))(t)}},D=function(e){var t=e.$from.nodeBefore,n=r.Selection.findFrom(e.$from,-1);if(n&&t){var i=O(t.type)(n);return i?i.pos:n.$from.pos}},R=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},P=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,r){if(n.push({node:e,pos:r}),!t)return!1})),n},I=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return P(e,n).filter((function(e){return t(e.node)}))},L=function(e,t,n){return I(e,(function(e){return e.type===t}),n)};var B=function(e){return T((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},V=function(e){return e instanceof o.CellSelection},F=function(e){if(V(e)){var t=o.TableMap.get(e.$anchorCell.node(-1));return k({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},z=function(e){return function(t){var n=B(t);if(n){var r=o.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.width-1){var i=r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height});return e.concat(i.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},q=function(e){return function(t){var n=B(t);if(n){var r=o.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.height-1){var i=r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1});return e.concat(i.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},j=function(e){return function(t,n){return function(r){var i=B(r.selection),s="row"===e;if(i){var a=o.TableMap.get(i.node);if(t>=0&&t<(s?a.height:a.width)){var c=s?0:t,l=s?t:0,h=s?a.width:t+1,p=s?t+1:a.height;if(n){var u=X(r.selection.$from);if(!u)return r;var d=a.findCell(u.pos-i.start);s?(l=Math.min(l,d.top),p=Math.max(p,d.bottom)):(c=Math.min(c,d.left),h=Math.max(h,d.right))}var m=a.cellsInRect({left:c,top:l,right:s?h:c+1,bottom:s?l+1:p}),g=p-l==1?m:a.cellsInRect({left:s?c:h-1,top:s?p-1:l,right:h,bottom:p}),v=i.start+m[0],y=i.start+g[g.length-1],b=r.doc.resolve(v),w=r.doc.resolve(y);return f(r.setSelection(new o.CellSelection(w,b)))}}return r}}},U=j("column"),W=j("row"),H=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(e>=0&&e<=r.height){for(var i=n.node,s=y(i.type.schema),a=n.start,c=0;c<e+1;c++)a+=i.child(c).nodeSize;var l=i.child(e),h=[],u=0;if(l.forEach((function(e){1===e.attrs.rowspan&&(u+=e.attrs.colspan,h.push(s[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),u<r.width){for(var d=[],f=function(n){var r=Z(n,(function(t,r){var i=t.node.attrs.rowspan;return i>1&&n+i>e}))(t);d.push.apply(d,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))},m=e;m>=0;m--)f(m);d.length&&d.forEach((function(e){t=G(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return p(s.row.create(l.attrs,h),a)(t)}}return t}},K=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(0===e&&1===r.width)return Y(t);if(e>=0&&e<=r.width)return o.removeColumn(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},J=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(0===e&&1===r.height)return Y(t);if(e>=0&&e<=r.height)return o.removeRow(t,{map:r,tableStart:n.start,table:n.node},e),f(t)}return t}},Y=function(e){for(var t=e.selection.$from,n=t.depth;n>0;n--){if("table"===t.node(n).type.spec.tableRole)return f(e.delete(t.before(n),t.after(n)))}return e},G=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),f(n)):n}},X=function(e){return A(e,(function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)}))},Q=function(e){var t=X(e);if(t){var n=function(e){return A(e,(function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)}))}(e),r=o.TableMap.get(n.node),i=t.pos-n.start;return r.rectBetween(i,i)}},Z=function(e,t){return function(n){var r=[],i=q(e)(n.selection);if(i)for(var o=i.length-1;o>=0;o--)t(i[o],n)&&r.push(i[o]);return r}},ee=function(e){return function(t){for(var n=e,r=e,i=function(e){var i=z(e)(t.selection);i&&i.forEach((function(t){var i=t.node.attrs.colspan+e-1;i>=n&&(n=e),i>r&&(r=i)}))},o=e;o>=0;o--)i(o);var s=function(e){var n=z(e)(t.selection);n&&n.forEach((function(t){var n=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&n>r&&(r=n)}))};for(o=e;o<=r;o++)s(o);var a=[];for(o=n;o<=r;o++){var c=z(o)(t.selection);c&&c.length&&a.push(o)}n=a[0],r=a[a.length-1];for(var l=z(n)(t.selection),h=q(0)(t.selection),p=t.doc.resolve(l[l.length-1].pos),u=void 0,d=r;d>=n;d--){var f=z(d)(t.selection);if(f&&f.length){for(var m=h.length-1;m>=0;m--)if(h[m].pos===f[0].pos){u=f[0];break}if(u)break}}return{$anchor:p,$head:t.doc.resolve(u.pos),indexes:a}}},te=function(e){return function(t){for(var n=e,r=e,i=function(e){q(e)(t.selection).forEach((function(t){var i=t.node.attrs.rowspan+e-1;i>=n&&(n=e),i>r&&(r=i)}))},o=e;o>=0;o--)i(o);var s=function(e){q(e)(t.selection).forEach((function(t){var n=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(o=e;o<=r;o++)s(o);var a=[];for(o=n;o<=r;o++){var c=q(o)(t.selection);c&&c.length&&a.push(o)}n=a[0],r=a[a.length-1];for(var l=q(n)(t.selection),h=z(0)(t.selection),p=t.doc.resolve(l[l.length-1].pos),u=void 0,d=r;d>=n;d--){var f=q(d)(t.selection);if(f&&f.length){for(var m=h.length-1;m>=0;m--)if(h[m].pos===f[0].pos){u=f[0];break}if(u)break}}return{$anchor:p,$head:t.doc.resolve(u.pos),indexes:a}}};t.isNodeSelection=u,t.canInsert=b,t.convertTableNodeToArrayOfRows=S,t.convertArrayOfRowsToTableNode=$,t.findParentNode=T,t.findParentNodeClosestToPos=A,t.findParentDomRef=N,t.hasParentNode=M,t.findParentNodeOfType=O,t.findParentNodeOfTypeClosestToPos=function(e,t){return A(e,(function(e){return d(t,e)}))},t.hasParentNodeOfType=function(e){return function(t){return M((function(t){return d(e,t)}))(t)}},t.findParentDomRefOfType=function(e,t){return function(n){return N((function(t){return d(e,t)}),t)(n)}},t.findSelectedNodeOfType=function(e){return function(t){if(u(t)){var n=t.node,r=t.$from;if(d(e,n))return{node:n,pos:r.pos,depth:r.depth}}}},t.findPositionOfNodeBefore=D,t.findDomRefAtPos=R,t.flatten=P,t.findChildren=I,t.findTextNodes=function(e,t){return I(e,(function(e){return e.isText}),t)},t.findInlineNodes=function(e,t){return I(e,(function(e){return e.isInline}),t)},t.findBlockNodes=function(e,t){return I(e,(function(e){return e.isBlock}),t)},t.findChildrenByAttr=function(e,t,n){return I(e,(function(e){return!!t(e.attrs)}),n)},t.findChildrenByType=L,t.findChildrenByMark=function(e,t,n){return I(e,(function(e){return t.isInSet(e.marks)}),n)},t.contains=function(e,t){return!!L(e,t).length},t.findTable=B,t.isCellSelection=V,t.getSelectionRect=function(e){if(V(e)){var t=e.$anchorCell.start(-1);return o.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},t.isColumnSelected=function(e){return function(t){if(V(t)){var n=o.TableMap.get(t.$anchorCell.node(-1));return k({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},t.isRowSelected=function(e){return function(t){if(V(t)){var n=o.TableMap.get(t.$anchorCell.node(-1));return k({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},t.isTableSelected=F,t.getCellsInColumn=z,t.getCellsInRow=q,t.getCellsInTable=function(e){var t=B(e);if(t){var n=o.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(e){var n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}},t.selectColumn=U,t.selectRow=W,t.selectTable=function(e){var t=B(e.selection);if(t){var n=o.TableMap.get(t.node).map;if(n&&n.length){var r=t.start+n[0],i=t.start+n[n.length-1],s=e.doc.resolve(r),a=e.doc.resolve(i);return f(e.setSelection(new o.CellSelection(a,s)))}}return e},t.emptyCell=function(e,t){return function(n){if(e){var r=y(t).cell.createAndFill().content;if(!e.node.content.eq(r))return n.replaceWith(e.pos+1,e.pos+e.node.nodeSize,r),f(n)}return n}},t.addColumnAt=function(e){return function(t){var n=B(t.selection);if(n){var r=o.TableMap.get(n.node);if(e>=0&&e<=r.width)return f(o.addColumn(t,{map:r,tableStart:n.start,table:n.node},e))}return t}},t.moveRow=function(e,t,n){return function(r){var i=Object.assign({tryToFit:!1,direction:0},n),o=B(r.selection);if(!o)return r;var s=te(e)(r).indexes,a=te(t)(r).indexes;if(s.indexOf(t)>-1)return r;!i.tryToFit&&a.length>1&&E(e,t,a,"row");var c=function(e,t,n,r){var i=S(e.node);return i=C(i,t,n,r),$(e.node,i)}(o,s,a,i.direction);return f(r).replaceWith(o.pos,o.pos+o.node.nodeSize,c)}},t.moveColumn=function(e,t,n){return function(r){var i=Object.assign({tryToFit:!1,direction:0},n),o=B(r.selection);if(!o)return r;var s=ee(e)(r).indexes,a=ee(t)(r).indexes;if(s.indexOf(t)>-1)return r;!i.tryToFit&&a.length>1&&E(e,t,a,"column");var c=function(e,t,n,r){var i=_(S(e.node));return i=C(i,t,n,r),i=_(i),$(e.node,i)}(o,s,a,i.direction);return f(r).replaceWith(o.pos,o.pos+o.node.nodeSize,c)}},t.addRowAt=function(e,t){return function(n){var r=B(n.selection);if(r){var i=o.TableMap.get(r.node),s=e-1;if(t&&s>=0)return f(H(s)(n));if(e>=0&&e<=i.height)return f(o.addRow(n,{map:i,tableStart:r.start,table:r.node},e))}return n}},t.cloneRowAt=H,t.removeColumnAt=K,t.removeRowAt=J,t.removeTable=Y,t.removeSelectedColumns=function(e){var t=e.selection;if(F(t))return Y(e);if(V(t)){var n=B(t);if(n){var r=o.TableMap.get(n.node),i=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==i.left&&i.right==r.width)return!1;for(var s=Object.assign({},i,{map:r,table:n.node,tableStart:n.start}),a=s.right-1;o.removeColumn(e,s,a),a!==s.left;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=o.TableMap.get(s.table);return f(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if(F(t))return Y(e);if(V(t)){var n=B(t);if(n){var r=o.TableMap.get(n.node),i=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==i.top&&i.bottom==r.height)return!1;for(var s=Object.assign({},i,{map:r,table:n.node,tableStart:n.start}),a=s.bottom-1;o.removeRow(e,s,a),a!==s.top;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=o.TableMap.get(s.table);return f(e)}}return e},t.removeColumnClosestToPos=function(e){return function(t){var n=Q(e);return n?K(n.left)(c(e.pos)(t)):t}},t.removeRowClosestToPos=function(e){return function(t){var n=Q(e);return n?J(n.top)(c(e.pos)(t)):t}},t.forEachCellInColumn=function(e,t,n){return function(i){var o=z(e)(i.selection);if(o){for(var s=o.length-1;s>=0;s--)i=t(o[s],i);if(n){var a=i.doc.resolve(i.mapping.map(o[o.length-1].pos));i.setSelection(r.Selection.near(a))}return f(i)}return i}},t.forEachCellInRow=function(e,t,n){return function(i){var o=q(e)(i.selection);if(o){for(var s=o.length-1;s>=0;s--)i=t(o[s],i);if(n){var a=i.doc.resolve(i.mapping.map(o[o.length-1].pos));i.setSelection(r.Selection.near(a))}}return i}},t.setCellAttrs=G,t.createTable=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=y(e),s=o.cell,a=o.header_cell,c=o.row,l=o.table,h=[],p=[],u=0;u<n;u++)h.push(x(s,i)),r&&p.push(x(a,i));for(var d=[],f=0;f<t;f++)d.push(c.createChecked(null,r&&0===f?p:h));return l.createChecked(null,d)},t.findCellClosestToPos=X,t.findCellRectClosestToPos=Q,t.getSelectionRangeInColumn=ee,t.getSelectionRangeInRow=te,t.removeParentNodeOfType=function(e){return function(t){var n=O(e)(t.selection);return n?v(n.pos)(t):t}},t.replaceParentNodeOfType=s,t.removeSelectedNode=function(e){if(u(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return f(e.delete(t,n))}return e},t.replaceSelectedNode=a,t.setTextSelection=c,t.safeInsert=p,t.setParentNodeMarkup=function(e,t,n,r){return function(i){var o=O(e)(i.selection);return o?f(i.setNodeMarkup(o.pos,t,Object.assign({},o.node.attrs,n),r)):i}},t.selectParentNodeOfType=function(e){return function(t){if(!u(t.selection)){var n=O(e)(t.selection);if(n)return f(t.setSelection(r.NodeSelection.create(t.doc,n.pos)))}return t}},t.removeNodeBefore=function(e){var t=D(e.selection);return"number"==typeof t?v(t)(e):e}},function(e,t,n){(function(e,n){!function(t){"use strict";const r=void 0!==e&&e.hrtime?()=>{const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>self.performance.now();class i{constructor(){this.start_time=r(),this.stack=[],this.current_children=this.timings=[]}start(e){const t={label:e,start:r(),end:null,children:[]};this.current_children.push(t),this.stack.push(t),this.current_timing=t,this.current_children=t.children}stop(e){if(e!==this.current_timing.label)throw new Error(`Mismatched timing labels (expected ${this.current_timing.label}, got ${e})`);this.current_timing.end=r(),this.stack.pop(),this.current_timing=this.stack[this.stack.length-1],this.current_children=this.current_timing?this.current_timing.children:this.timings}render(){return{timings:Object.assign({total:r()-this.start_time},function e(t){const n={};return t.forEach(t=>{n[t.label]=Object.assign({total:t.end-t.start},t.children&&e(t.children))}),n}(this.timings))}}}var o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},s="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:s,"5module":s+" export import",6:s+" const class extends export import super"},c=/^in(stanceof)?$/,l="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",h="--------------------------------------------------------------------------------------------------------------------------------------------------",p=new RegExp("["+l+"]"),u=new RegExp("["+l+h+"]");l=h=null;var d=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],f=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function m(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function g(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&p.test(String.fromCharCode(e)):!1!==t&&m(e,d)))}function v(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&(m(e,d)||m(e,f)))))}var y=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function b(e,t){return new y(e,{beforeExpr:!0,binop:t})}var w={beforeExpr:!0},x={startsExpr:!0},k={};function _(e,t){return void 0===t&&(t={}),t.keyword=e,k[e]=new y(e,t)}var S={num:new y("num",x),regexp:new y("regexp",x),string:new y("string",x),name:new y("name",x),eof:new y("eof"),bracketL:new y("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new y("]"),braceL:new y("{",{beforeExpr:!0,startsExpr:!0}),braceR:new y("}"),parenL:new y("(",{beforeExpr:!0,startsExpr:!0}),parenR:new y(")"),comma:new y(",",w),semi:new y(";",w),colon:new y(":",w),dot:new y("."),question:new y("?",w),arrow:new y("=>",w),template:new y("template"),invalidTemplate:new y("invalidTemplate"),ellipsis:new y("...",w),backQuote:new y("`",x),dollarBraceL:new y("${",{beforeExpr:!0,startsExpr:!0}),eq:new y("=",{beforeExpr:!0,isAssign:!0}),assign:new y("_=",{beforeExpr:!0,isAssign:!0}),incDec:new y("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new y("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:b("||",1),logicalAND:b("&&",2),bitwiseOR:b("|",3),bitwiseXOR:b("^",4),bitwiseAND:b("&",5),equality:b("==/!=/===/!==",6),relational:b("</>/<=/>=",7),bitShift:b("<</>>/>>>",8),plusMin:new y("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:b("%",10),star:b("*",10),slash:b("/",10),starstar:new y("**",{beforeExpr:!0}),_break:_("break"),_case:_("case",w),_catch:_("catch"),_continue:_("continue"),_debugger:_("debugger"),_default:_("default",w),_do:_("do",{isLoop:!0,beforeExpr:!0}),_else:_("else",w),_finally:_("finally"),_for:_("for",{isLoop:!0}),_function:_("function",x),_if:_("if"),_return:_("return",w),_switch:_("switch"),_throw:_("throw",w),_try:_("try"),_var:_("var"),_const:_("const"),_while:_("while",{isLoop:!0}),_with:_("with"),_new:_("new",{beforeExpr:!0,startsExpr:!0}),_this:_("this",x),_super:_("super",x),_class:_("class",x),_extends:_("extends",w),_export:_("export"),_import:_("import",x),_null:_("null",x),_true:_("true",x),_false:_("false",x),_in:_("in",{beforeExpr:!0,binop:7}),_instanceof:_("instanceof",{beforeExpr:!0,binop:7}),_typeof:_("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},$=/\r\n?|\n|\u2028|\u2029/,C=new RegExp($.source,"g");function E(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,N=Object.prototype,M=N.hasOwnProperty,O=N.toString;function D(e,t){return M.call(e,t)}var R=Array.isArray||function(e){return"[object Array]"===O.call(e)};function P(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var I=function(e,t){this.line=e,this.column=t};I.prototype.offset=function(e){return new I(this.line,this.column+e)};var L=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function B(e,t){for(var n=1,r=0;;){C.lastIndex=r;var i=C.exec(e);if(!(i&&i.index<t))return new I(n,t-r);++n,r=i.index+i[0].length}}var V={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function F(e){var t={};for(var n in V)t[n]=e&&D(e,n)?e[n]:V[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),R(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return R(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,o,s,a){var c={type:n?"Block":"Line",value:r,start:i,end:o};e.locations&&(c.loc=new L(this,s,a)),e.ranges&&(c.range=[i,o]),t.push(c)}}(t,t.onComment)),t}function z(e,t){return 2|(e?4:0)|(t?8:0)}var q=function(e,t,n){this.options=e=F(e),this.sourceFile=e.sourceFile,this.keywords=P(a[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";if(!0!==e.allowReserved){for(var i=e.ecmaVersion;!(r=o[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=P(r);var s=(r?r+" ":"")+o.strict;this.reservedWordsStrict=P(s),this.reservedWordsStrictBind=P(s+" "+o.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split($).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=S.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},j={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};q.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},j.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},j.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},j.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},j.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},j.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},j.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},q.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},q.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},q.parse=function(e,t){return new this(t,e).parse()},q.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},q.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(q.prototype,j);var U=q.prototype,W=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function H(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}U.strictDirective=function(e){for(;;){A.lastIndex=e,e+=A.exec(this.input)[0].length;var t=W.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,A.lastIndex=e,e+=A.exec(this.input)[0].length,";"===this.input[e]&&e++}},U.eat=function(e){return this.type===e&&(this.next(),!0)},U.isContextual=function(e){return this.type===S.name&&this.value===e&&!this.containsEsc},U.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},U.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},U.canInsertSemicolon=function(){return this.type===S.eof||this.type===S.braceR||$.test(this.input.slice(this.lastTokEnd,this.start))},U.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},U.semicolon=function(){this.eat(S.semi)||this.insertSemicolon()||this.unexpected()},U.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},U.expect=function(e){this.eat(e)||this.unexpected()},U.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},U.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},U.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},U.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},U.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var K=q.prototype;K.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==S.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var o=i[r];this.raiseRecoverable(this.undefinedExports[o].start,"Export '"+o+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var J={kind:"loop"},Y={kind:"switch"};K.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(g(r,!0)){for(var i=n+1;v(this.input.charCodeAt(i),!0);)++i;var o=this.input.slice(n,i);if(!c.test(o))return!0}return!1},K.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),t=this.pos+e[0].length;return!($.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&v(this.input.charAt(t+8)))},K.parseStatement=function(e,t,n){var r,i=this.type,o=this.startNode();switch(this.isLet(e)&&(i=S._var,r="let"),i){case S._break:case S._continue:return this.parseBreakContinueStatement(o,i.keyword);case S._debugger:return this.parseDebuggerStatement(o);case S._do:return this.parseDoStatement(o);case S._for:return this.parseForStatement(o);case S._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!e);case S._class:return e&&this.unexpected(),this.parseClass(o,!0);case S._if:return this.parseIfStatement(o);case S._return:return this.parseReturnStatement(o);case S._switch:return this.parseSwitchStatement(o);case S._throw:return this.parseThrowStatement(o);case S._try:return this.parseTryStatement(o);case S._const:case S._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(o,r);case S._while:return this.parseWhileStatement(o);case S._with:return this.parseWithStatement(o);case S.braceL:return this.parseBlock(!0,o);case S.semi:return this.parseEmptyStatement(o);case S._export:case S._import:if(this.options.ecmaVersion>10&&i===S._import){A.lastIndex=this.pos;var s=A.exec(this.input),a=this.pos+s[0].length;if(40===this.input.charCodeAt(a))return this.parseExpressionStatement(o,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===S._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!e);var c=this.value,l=this.parseExpression();return i===S.name&&"Identifier"===l.type&&this.eat(S.colon)?this.parseLabeledStatement(o,c,l,e):this.parseExpressionStatement(o,l)}},K.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(S.semi)||this.insertSemicolon()?e.label=null:this.type!==S.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},K.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},K.parseDoStatement=function(e){return this.next(),this.labels.push(J),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(S._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(S.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},K.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(J),this.enterScope(0),this.expect(S.parenL),this.type===S.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===S._var||this.type===S._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===S._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var o=new H,s=this.parseExpression(!0,o);return this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===S._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(s,!1,o),this.checkLVal(s),this.parseForIn(e,s)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,s))},K.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,X|(n?0:Q),!1,t)},K.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(S._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},K.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(S.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},K.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(S.braceL),this.labels.push(Y),this.enterScope(0);for(var n=!1;this.type!==S.braceR;)if(this.type===S._case||this.type===S._default){var r=this.type===S._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(S.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},K.parseThrowStatement=function(e){return this.next(),$.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var G=[];K.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===S._catch){var t=this.startNode();if(this.next(),this.eat(S.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(S.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(S._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},K.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},K.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(J),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},K.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},K.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},K.parseLabeledStatement=function(e,t,n,r){for(var i=0,o=this.labels;i<o.length;i+=1)o[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var s=this.type.isLoop?"loop":this.type===S._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var c=this.labels[a];if(c.statementStart!==e.start)break;c.statementStart=this.start,c.kind=s}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},K.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},K.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(S.braceL),e&&this.enterScope(0);!this.eat(S.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},K.parseFor=function(e,t){return e.init=t,this.expect(S.semi),e.test=this.type===S.semi?null:this.parseExpression(),this.expect(S.semi),e.update=this.type===S.parenR?null:this.parseExpression(),this.expect(S.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},K.parseForIn=function(e,t){var n=this.type===S._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(S.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},K.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(S.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===S._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(S.comma))break}return e},K.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var X=1,Q=2;K.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===S.star&&t&Q&&this.unexpected(),e.generator=this.eat(S.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&X&&(e.id=4&t&&this.type!==S.name?null:this.parseIdent(),!e.id||t&Q||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,o=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(z(e.async,e.generator)),t&X||(e.id=this.type===S.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=s,this.finishNode(e,t&X?"FunctionDeclaration":"FunctionExpression")},K.parseFunctionParams=function(e){this.expect(S.parenL),e.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},K.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(S.braceL);!this.eat(S.braceR);){var o=this.parseClassElement(null!==e.superClass);o&&(r.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind&&(i&&this.raise(o.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},K.parseClassElement=function(e){var t=this;if(this.eat(S.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,o=t.startLoc;return!(!t.eatContextual(e)||(t.type===S.parenL||r&&t.canInsertSemicolon())&&(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,o),n.key.name=e,t.finishNode(n.key,"Identifier"),1))};n.kind="method",n.static=r("static");var i=this.eat(S.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(S.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var s=n.key,a=!1;return n.computed||n.static||!("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)?n.static&&"Identifier"===s.type&&"prototype"===s.name&&this.raise(s.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(s.start,"Constructor can't have get/set modifier"),i&&this.raise(s.start,"Constructor can't be a generator"),o&&this.raise(s.start,"Constructor can't be an async method"),n.kind="constructor",a=e),this.parseClassMethod(n,i,o,a),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},K.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},K.parseClassId=function(e,t){this.type===S.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},K.parseClassSuper=function(e){e.superClass=this.eat(S._extends)?this.parseExprSubscripts():null},K.parseExport=function(e,t){if(this.next(),this.eat(S.star))return this.expectContextual("from"),this.type!==S.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(S._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===S._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|X,!1,n)}else if(this.type===S._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==S.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,s=e.specifiers;o<s.length;o+=1){var a=s[o];this.checkUnreserved(a.local),this.checkLocalExport(a.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},K.checkExport=function(e,t,n){e&&(D(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},K.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.checkPatternExport(e,o)}else if("ArrayPattern"===n)for(var s=0,a=t.elements;s<a.length;s+=1){var c=a[s];c&&this.checkPatternExport(e,c)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},K.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},K.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},K.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(S.braceL);!this.eat(S.braceR);){if(n)n=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},K.parseImport=function(e){return this.next(),this.type===S.string?(e.specifiers=G,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===S.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},K.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===S.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(S.comma))return e}if(this.type===S.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(S.braceL);!this.eat(S.braceR);){if(t)t=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},K.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},K.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var Z=q.prototype;Z.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},Z.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var o=e[n-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},Z.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Z.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==S.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case S.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(S.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case S.braceL:return this.parseObj(!0)}return this.parseIdent()},Z.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(S.comma),t&&this.type===S.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===S.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),r.push(s)}return r},Z.parseBindingListItem=function(e){return e},Z.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(S.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Z.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(D(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.checkLVal(o,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var s=0,a=e.elements;s<a.length;s+=1){var c=a[s];c&&this.checkLVal(c,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var ee=q.prototype;ee.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===o&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var s=t[r="$"+r];s?("init"===o?this.strict&&s.init||s.get||s.set:s.init||s[o])&&this.raiseRecoverable(i.start,"Redefinition of property"):s=t[r]={init:!1,get:!1,set:!1},s[o]=!0}}},ee.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===S.comma){var o=this.startNodeAt(n,r);for(o.expressions=[i];this.eat(S.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},ee.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,o=-1,s=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,s=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new H,r=!0);var a=this.start,c=this.startLoc;this.type!==S.parenL&&this.type!==S.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,c)),this.type.isAssign){var h=this.startNodeAt(a,c);return h.operator=this.value,h.left=this.type===S.eq?this.toAssignable(l,!1,t):l,r||H.call(t),t.shorthandAssign=-1,this.checkLVal(l),this.next(),h.right=this.parseMaybeAssign(e),this.finishNode(h,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),s>-1&&(t.shorthandAssign=s),l},ee.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(S.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(S.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},ee.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},ee.parseExprOp=function(e,t,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==S._in)&&o>r){var s=this.type===S.logicalOR||this.type===S.logicalAND,a=this.value;this.next();var c=this.start,l=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1),c,l,o,i),p=this.buildBinary(t,n,e,h,a,s);return this.parseExprOp(p,t,n,r,i)}return e},ee.buildBinary=function(e,t,n,r,i,o){var s=this.startNodeAt(e,t);return s.left=n,s.operator=i,s.right=r,this.finishNode(s,o?"LogicalExpression":"BinaryExpression")},ee.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),s=this.type===S.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),s?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(o,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var a=this.startNodeAt(r,i);a.operator=this.value,a.prefix=!1,a.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(a,"UpdateExpression")}}return!t&&this.eat(S.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},ee.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var o=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},ee.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var o=this.parseSubscript(e,t,n,r,i);if(o===e||"ArrowFunctionExpression"===o.type)return o;e=o}},ee.parseSubscript=function(e,t,n,r,i){var o=this.eat(S.bracketL);if(o||this.eat(S.dot)){var s=this.startNodeAt(t,n);s.object=e,s.property=o?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),s.computed=!!o,o&&this.expect(S.bracketR),e=this.finishNode(s,"MemberExpression")}else if(!r&&this.eat(S.parenL)){var a=new H,c=this.yieldPos,l=this.awaitPos,h=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1,a);if(i&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=c,this.awaitPos=l,this.awaitIdentPos=h,this.parseArrowExpression(this.startNodeAt(t,n),p,!0);this.checkExpressionErrors(a,!0),this.yieldPos=c||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=h||this.awaitIdentPos;var u=this.startNodeAt(t,n);u.callee=e,u.arguments=p,e=this.finishNode(u,"CallExpression")}else if(this.type===S.backQuote){var d=this.startNodeAt(t,n);d.tag=e,d.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(d,"TaggedTemplateExpression")}return e},ee.parseExprAtom=function(e){this.type===S.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case S._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==S.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==S.dot&&this.type!==S.bracketL&&this.type!==S.parenL&&this.unexpected(),this.finishNode(t,"Super");case S._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case S.name:var r=this.start,i=this.startLoc,o=this.containsEsc,s=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(S._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(S.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[s],!1);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===S.name&&!o)return s=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(S.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[s],!0)}return s;case S.regexp:var a=this.value;return(t=this.parseLiteral(a.value)).regex={pattern:a.pattern,flags:a.flags},t;case S.num:case S.string:return this.parseLiteral(this.value);case S._null:case S._true:case S._false:return(t=this.startNode()).value=this.type===S._null?null:this.type===S._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case S.parenL:var c=this.start,l=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),l;case S.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(S.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case S.braceL:return this.parseObj(!1,e);case S._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case S._class:return this.parseClass(this.startNode(),!1);case S._new:return this.parseNew();case S.backQuote:return this.parseTemplate();case S._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},ee.parseExprImport=function(){var e=this.startNode();switch(this.next(),this.type){case S.parenL:return this.parseDynamicImport(e);default:this.unexpected()}},ee.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(S.parenR)){var t=this.start;this.eat(S.comma)&&this.eat(S.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},ee.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1)),this.next(),this.finishNode(t,"Literal")},ee.parseParenExpression=function(){this.expect(S.parenL);var e=this.parseExpression();return this.expect(S.parenR),e},ee.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,s=this.start,a=this.startLoc,c=[],l=!0,h=!1,p=new H,u=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==S.parenR;){if(l?l=!1:this.expect(S.comma),i&&this.afterTrailingComma(S.parenR,!0)){h=!0;break}if(this.type===S.ellipsis){o=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(S.parenR),e&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=u,this.awaitPos=d,this.parseParenArrowList(n,r,c);c.length&&!h||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(p,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=d||this.awaitPos,c.length>1?((t=this.startNodeAt(s,a)).expressions=c,this.finishNodeAt(t,"SequenceExpression",f,m)):t=c[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},ee.parseParenItem=function(e){return e},ee.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var te=[];ee.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(S.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc,o=this.type===S._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),o&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(S.parenL)?e.arguments=this.parseExprList(S.parenR,this.options.ecmaVersion>=8,!1):e.arguments=te,this.finishNode(e,"NewExpression")},ee.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===S.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===S.backQuote,this.finishNode(n,"TemplateElement")},ee.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===S.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(S.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(S.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},ee.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===S.name||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===S.star)&&!$.test(this.input.slice(this.lastTokEnd,this.start))},ee.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(S.braceR);){if(r)r=!1;else if(this.expect(S.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(S.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),n.properties.push(o)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},ee.parseProperty=function(e,t){var n,r,i,o,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(S.ellipsis))return e?(s.argument=this.parseIdent(!1),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(this.type===S.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,t),this.type===S.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(n=this.eat(S.star)));var a=this.containsEsc;return this.parsePropertyName(s),!e&&!a&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(s)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(S.star),this.parsePropertyName(s,t)):r=!1,this.parsePropertyValue(s,e,n,r,i,o,t,a),this.finishNode(s,"Property")},ee.parsePropertyValue=function(e,t,n,r,i,o,s,a){if((n||r)&&this.type===S.colon&&this.unexpected(),this.eat(S.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===S.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||a||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===S.comma||this.type===S.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===S.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var c="get"===e.kind?0:1;if(e.value.params.length!==c){var l=e.value.start;"get"===e.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},ee.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(S.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(S.bracketR),e.key;e.computed=!1}return e.key=this.type===S.num||this.type===S.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},ee.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},ee.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,o=this.awaitPos,s=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|z(t,r.generator)|(n?128:0)),this.expect(S.parenL),r.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=s,this.finishNode(r,"FunctionExpression")},ee.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(16|z(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},ee.parseFunctionBody=function(e,t,n){var r=t&&this.type!==S.braceL,i=this.strict,o=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!s||(o=this.strictDirective(this.end))&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!i&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},ee.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},ee.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var o=i[r];this.checkLVal(o,1,t?null:n)}},ee.parseExprList=function(e,t,n,r){for(var i=[],o=!0;!this.eat(e);){if(o)o=!1;else if(this.expect(S.comma),t&&this.afterTrailingComma(e))break;var s=void 0;n&&this.type===S.comma?s=null:this.type===S.ellipsis?(s=this.parseSpread(r),r&&this.type===S.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):s=this.parseMaybeAssign(!1,r),i.push(s)}return i},ee.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},ee.parseIdent=function(e,t){var n=this.startNode();return this.type===S.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},ee.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===S.semi||this.canInsertSemicolon()||this.type!==S.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(S.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},ee.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var ne=q.prototype;ne.raise=function(e,t){var n=B(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},ne.raiseRecoverable=ne.raise,ne.curPosition=function(){if(this.options.locations)return new I(this.curLine,this.pos-this.lineStart)};var re=q.prototype,ie=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};re.enterScope=function(e){this.scopeStack.push(new ie(e))},re.exitScope=function(){this.scopeStack.pop()},re.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},re.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t)this.currentScope().lexical.push(e);else if(3===t){var o=this.currentScope();r=this.treatFunctionsAsVar?o.lexical.indexOf(e)>-1:o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var s=this.scopeStack.length-1;s>=0;--s){var a=this.scopeStack[s];if(a.lexical.indexOf(e)>-1&&!(32&a.flags&&a.lexical[0]===e)||!this.treatFunctionsAsVarInScope(a)&&a.functions.indexOf(e)>-1){r=!0;break}if(a.var.push(e),this.inModule&&1&a.flags&&delete this.undefinedExports[e],3&a.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},re.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},re.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},re.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags)return t}},re.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags&&!(16&t.flags))return t}};var oe=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new L(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},se=q.prototype;function ae(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}se.startNode=function(){return new oe(this,this.start,this.startLoc)},se.startNodeAt=function(e,t){return new oe(this,e,t)},se.finishNode=function(e,t){return ae.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},se.finishNodeAt=function(e,t,n,r){return ae.call(this,e,t,n,r)};var ce=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},le={b_stat:new ce("{",!1),b_expr:new ce("{",!0),b_tmpl:new ce("${",!1),p_stat:new ce("(",!1),p_expr:new ce("(",!0),q_tmpl:new ce("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new ce("function",!1),f_expr:new ce("function",!0),f_expr_gen:new ce("function",!0,!1,null,!0),f_gen:new ce("function",!1,!1,null,!0)},he=q.prototype;he.initialContext=function(){return[le.b_stat]},he.braceIsBlock=function(e){var t=this.curContext();return t===le.f_expr||t===le.f_stat||(e!==S.colon||t!==le.b_stat&&t!==le.b_expr?e===S._return||e===S.name&&this.exprAllowed?$.test(this.input.slice(this.lastTokEnd,this.start)):e===S._else||e===S.semi||e===S.eof||e===S.parenR||e===S.arrow||(e===S.braceL?t===le.b_stat:e!==S._var&&e!==S._const&&e!==S.name&&!this.exprAllowed):!t.isExpr)},he.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},he.updateContext=function(e){var t,n=this.type;n.keyword&&e===S.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},S.parenR.updateContext=S.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===le.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},S.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?le.b_stat:le.b_expr),this.exprAllowed=!0},S.dollarBraceL.updateContext=function(){this.context.push(le.b_tmpl),this.exprAllowed=!0},S.parenL.updateContext=function(e){var t=e===S._if||e===S._for||e===S._with||e===S._while;this.context.push(t?le.p_stat:le.p_expr),this.exprAllowed=!0},S.incDec.updateContext=function(){},S._function.updateContext=S._class.updateContext=function(e){!e.beforeExpr||e===S.semi||e===S._else||e===S._return&&$.test(this.input.slice(this.lastTokEnd,this.start))||(e===S.colon||e===S.braceL)&&this.curContext()===le.b_stat?this.context.push(le.f_stat):this.context.push(le.f_expr),this.exprAllowed=!1},S.backQuote.updateContext=function(){this.curContext()===le.q_tmpl?this.context.pop():this.context.push(le.q_tmpl),this.exprAllowed=!1},S.star.updateContext=function(e){if(e===S._function){var t=this.context.length-1;this.context[t]===le.f_expr?this.context[t]=le.f_expr_gen:this.context[t]=le.f_gen}this.exprAllowed=!0},S.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==S.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var pe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ue=pe+" Extended_Pictographic",de={9:pe,10:ue,11:ue},fe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",me="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ge=me+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ve={9:me,10:ge,11:ge+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},ye={};function be(e){var t=ye[e]={binary:P(de[e]+" "+fe),nonBinary:{General_Category:P(fe),Script:P(ve[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}be(9),be(10),be(11);var we=q.prototype,xe=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=ye[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ke(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function _e(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function Se(e){return e>=65&&e<=90||e>=97&&e<=122}function $e(e){return Se(e)||95===e}function Ce(e){return $e(e)||Ee(e)}function Ee(e){return e>=48&&e<=57}function Te(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Ae(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Ne(e){return e>=48&&e<=55}xe.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},xe.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},xe.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},xe.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},xe.prototype.current=function(){return this.at(this.pos)},xe.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},xe.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},xe.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},we.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},we.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},we.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},we.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},we.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},we.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},we.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},we.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},we.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},we.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},we.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},we.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},we.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},we.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},we.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},we.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},we.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!_e(t)&&(e.lastIntValue=t,e.advance(),!0)},we.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!_e(n);)e.advance();return e.pos!==t},we.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},we.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},we.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},we.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ke(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ke(e.lastIntValue);return!0}return!1},we.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return g(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},we.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return v(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},we.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},we.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},we.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},we.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},we.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},we.regexp_eatZero=function(e){return 48===e.current()&&!Ee(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},we.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},we.regexp_eatControlLetter=function(e){var t=e.current();return!!Se(t)&&(e.lastIntValue=t%32,e.advance(),!0)},we.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(r-55296)+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(t=e.lastIntValue)>=0&&t<=1114111)return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},we.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},we.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},we.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},we.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},we.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){D(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},we.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},we.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";$e(t=e.current());)e.lastStringValue+=ke(t),e.advance();return""!==e.lastStringValue},we.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Ce(t=e.current());)e.lastStringValue+=ke(t),e.advance();return""!==e.lastStringValue},we.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},we.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},we.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},we.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Ne(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},we.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},we.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Ee(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},we.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},we.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ee(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},we.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Te(n=e.current());)e.lastIntValue=16*e.lastIntValue+Ae(n),e.advance();return e.pos!==t},we.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},we.regexp_eatOctalDigit=function(e){var t=e.current();return Ne(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},we.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Te(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Ae(i),e.advance()}return!0};var Me=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new L(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Oe=q.prototype;function De(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Oe.next=function(){this.options.onToken&&this.options.onToken(new Me(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Oe.getToken=function(){return this.next(),new Me(this)},"undefined"!=typeof Symbol&&(Oe[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===S.eof,value:t}}}}),Oe.curContext=function(){return this.context[this.context.length-1]},Oe.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(S.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Oe.readToken=function(e){return g(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Oe.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Oe.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(C.lastIndex=n;(e=C.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},Oe.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!E(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},Oe.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&T.test(String.fromCharCode(e))))break e;++this.pos}}},Oe.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},Oe.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(S.ellipsis)):(++this.pos,this.finishToken(S.dot))},Oe.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(S.assign,2):this.finishOp(S.slash,1)},Oe.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?S.star:S.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=S.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(S.assign,n+1):this.finishOp(r,n)},Oe.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?S.logicalOR:S.logicalAND,2):61===t?this.finishOp(S.assign,2):this.finishOp(124===e?S.bitwiseOR:S.bitwiseAND,1)},Oe.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(S.assign,2):this.finishOp(S.bitwiseXOR,1)},Oe.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!$.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(S.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(S.assign,2):this.finishOp(S.plusMin,1)},Oe.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(S.assign,n+1):this.finishOp(S.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(S.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Oe.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(S.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(S.arrow)):this.finishOp(61===e?S.eq:S.prefix,1)},Oe.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(S.parenL);case 41:return++this.pos,this.finishToken(S.parenR);case 59:return++this.pos,this.finishToken(S.semi);case 44:return++this.pos,this.finishToken(S.comma);case 91:return++this.pos,this.finishToken(S.bracketL);case 93:return++this.pos,this.finishToken(S.bracketR);case 123:return++this.pos,this.finishToken(S.braceL);case 125:return++this.pos,this.finishToken(S.braceR);case 58:return++this.pos,this.finishToken(S.colon);case 63:return++this.pos,this.finishToken(S.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(S.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(S.prefix,1)}this.raise(this.pos,"Unexpected character '"+De(e)+"'")},Oe.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},Oe.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if($.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var o=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(o);var a=this.regexpState||(this.regexpState=new xe(this));a.reset(n,i,s),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var c=null;try{c=new RegExp(i,s)}catch(e){}return this.finishToken(S.regexp,{pattern:i,flags:s,value:c})},Oe.readInt=function(e,t){for(var n=this.pos,r=0,i=0,o=null==t?1/0:t;i<o;++i){var s=this.input.charCodeAt(this.pos),a=void 0;if((a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;++this.pos,r=r*e+a}return this.pos===n||null!=t&&this.pos-n!==t?null:r},Oe.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!=typeof BigInt?BigInt(this.input.slice(t,this.pos)):null,++this.pos):g(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,n)},Oe.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(t,this.pos),o="undefined"!=typeof BigInt?BigInt(i):null;return++this.pos,g(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,o)}46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),g(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=this.input.slice(t,this.pos),a=n?parseInt(s,8):parseFloat(s);return this.finishToken(S.num,a)},Oe.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Oe.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(E(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(S.string,t)};var Re={};function Pe(e,t){return q.parse(e,t)}function Ie(e,t,n){return q.parseExpressionAt(e,t,n)}function Le(e,{enter:t,leave:n}){return function e(t,n,r,i,o,s){if(t){if(r){const e=Be,i=Ve,a=Fe;Be=!1,Ve=!1,Fe=null,r.call(ze,t,n,o,s),Fe&&qe(n,o,s,t=Fe),Ve&&je(n,o,s);const c=Be,l=Ve;if(Be=e,Ve=i,Fe=a,c)return t;if(l)return null}for(const n in t){const o=t[n];if("object"==typeof o)if(Array.isArray(o))for(let s=0,a=0;s<o.length;s+=1,a+=1)null!==o[s]&&"string"==typeof o[s].type&&(e(o[s],t,r,i,n,a)||s--);else null!==o&&"string"==typeof o.type&&e(o,t,r,i,n,null)}if(i){const e=Fe,r=Ve;Fe=null,Ve=!1,i.call(ze,t,n,o,s),Fe&&qe(n,o,s,t=Fe),Ve&&je(n,o,s);const a=Ve;if(Fe=e,Ve=r,a)return null}}return t}(e,null,t,n)}Oe.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Re)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Oe.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Re;this.raise(e,t)},Oe.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==S.template&&this.type!==S.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(S.template,e)):36===n?(this.pos+=2,this.finishToken(S.dollarBraceL)):(++this.pos,this.finishToken(S.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(E(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Oe.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(S.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Oe.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return De(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return E(t)?"":String.fromCharCode(t)}},Oe.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},Oe.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(v(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(t?g:v)(s,r)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=De(s),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},Oe.readWord=function(){var e=this.readWord1(),t=S.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=k[e]),this.finishToken(t,e)},q.acorn={Parser:q,version:"7.1.0",defaultOptions:V,Position:I,SourceLocation:L,getLineInfo:B,Node:oe,TokenType:y,tokTypes:S,keywordTypes:k,TokContext:ce,tokContexts:le,isIdentifierChar:v,isIdentifierStart:g,Token:Me,isNewLine:E,lineBreak:$,lineBreakG:C,nonASCIIwhitespace:T};let Be=!1,Ve=!1,Fe=null;const ze={skip:()=>Be=!0,remove:()=>Ve=!0,replace:e=>Fe=e};function qe(e,t,n,r){e&&(null!==n?e[t][n]=r:e[t]=r)}function je(e,t,n){e&&(null!==n?e[t].splice(n,1):delete e[t])}function Ue(e,t){if("MemberExpression"===e.type)return!e.computed&&Ue(e.object,e);if("Identifier"===e.type){if(!t)return!0;switch(t.type){case"MemberExpression":return t.computed||e===t.object;case"MethodDefinition":return t.computed;case"Property":return t.computed||e===t.value;case"ExportSpecifier":case"ImportSpecifier":return e===t.local;case"LabeledStatement":case"BreakStatement":case"ContinueStatement":return!1;default:return!0}}return!1}function We(e){const t=new WeakMap;let n=new He(null,!1);Le(e,{enter(e,r){"ImportDeclaration"===e.type?e.specifiers.forEach(e=>{n.declarations.set(e.local.name,e)}):/(Function(Declaration|Expression)|ArrowFunctionExpression)/.test(e.type)?("FunctionDeclaration"===e.type?(n.declarations.set(e.id.name,e),t.set(e,n=new He(n,!1))):(t.set(e,n=new He(n,!1)),"FunctionExpression"===e.type&&e.id&&n.declarations.set(e.id.name,e)),e.params.forEach(t=>{Ke(t).forEach(t=>{n.declarations.set(t,e)})})):/For(?:In|Of)?Statement/.test(e.type)?t.set(e,n=new He(n,!0)):"BlockStatement"===e.type?t.set(e,n=new He(n,!0)):/(Class|Variable)Declaration/.test(e.type)?n.add_declaration(e):"CatchClause"===e.type&&(t.set(e,n=new He(n,!0)),e.param&&Ke(e.param).forEach(t=>{n.declarations.set(t,e.param)}))},leave(e){t.has(e)&&(n=n.parent)}});const r=new Map;return Le(e,{enter(e,i){t.has(e)&&(n=t.get(e)),"Identifier"===e.type&&Ue(e,i)&&(n.find_owner(e.name)||r.set(e.name,e),function e(t,n){t.references.add(n),t.parent&&e(t.parent,n)}(n,e.name))},leave(e){t.has(e)&&(n=n.parent)}}),{map:t,scope:n,globals:r}}class He{__init(){this.declarations=new Map}__init2(){this.initialised_declarations=new Set}__init3(){this.references=new Set}constructor(e,t){He.prototype.__init.call(this),He.prototype.__init2.call(this),He.prototype.__init3.call(this),this.parent=e,this.block=t}add_declaration(e){"VariableDeclaration"===e.type?"var"===e.kind&&this.block&&this.parent?this.parent.add_declaration(e):"VariableDeclaration"===e.type&&e.declarations.forEach(t=>{Ke(t.id).forEach(n=>{this.declarations.set(n,e),t.init&&this.initialised_declarations.add(n)})}):this.declarations.set(e.id.name,e)}find_owner(e){return this.declarations.has(e)?this:this.parent&&this.parent.find_owner(e)}has(e){return this.declarations.has(e)||this.parent&&this.parent.has(e)}}function Ke(e){return Je(e).map(e=>e.name)}function Je(e){const t=[];return Ye[e.type]&&Ye[e.type](t,e),t}const Ye={Identifier(e,t){e.push(t)},MemberExpression(e,t){let n=t;for(;"MemberExpression"===n.type;)n=n.object;e.push(n)},ObjectPattern(e,t){t.properties.forEach(t=>{"RestElement"===t.type?e.push(t.argument):Ye[t.value.type](e,t.value)})},ArrayPattern(e,t){t.elements.forEach(t=>{t&&Ye[t.type](e,t)})},RestElement(e,t){Ye[t.argument.type](e,t.argument)},AssignmentPattern(e,t){Ye[t.left.type](e,t.left)}};function Ge(e){for(var t=0,n=0,r=0,i=0,o="",s=0;s<e.length;s++){var a=e[s];if(s>0&&(o+=";"),0!==a.length){for(var c=0,l=[],h=0,p=a;h<p.length;h++){var u=p[h],d=Xe(u[0]-c);c=u[0],u.length>1&&(d+=Xe(u[1]-t)+Xe(u[2]-n)+Xe(u[3]-r),t=u[1],n=u[2],r=u[3]),5===u.length&&(d+=Xe(u[4]-i),i=u[4]),l.push(d)}o+=l.join(",")}}return o}function Xe(e){var t="";e=e<0?-e<<1|1:e<<1;do{var n=31&e;(e>>>=5)>0&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[n]}while(e>0);return t}const Qe=Math.round(1e20*Math.random()).toString(36),Ze=new RegExp(`_${Qe}_(?:(\\d+)|(AT)|(HASH))_(\\w+)?`,"g"),et=(e,t)=>({onComment:(n,r,i,o)=>{if(n&&/\n/.test(r)){let e=i;for(;e>0&&"\n"!==t[e-1];)e-=1;let n=e;for(;/[ \t]/.test(t[n]);)n+=1;const o=t.slice(e,n);r=r.replace(new RegExp(`^${o}`,"gm"),"")}e.push({type:n?"Block":"Line",value:r,start:i,end:o})},enter(n){let r;for(;e[0]&&e[0].start<n.start;){r=e.shift(),r.value=r.value.replace(Ze,(e,t,n,r,i)=>r?`#${i}`:n?`@${i}`:e);const i=e[0]||n;r.has_trailing_newline="Line"===r.type||/\n/.test(t.slice(r.end,i.start)),(n.leadingComments||(n.leadingComments=[])).push(r)}},leave(n){if(e[0]){const r=t.slice(n.end,e[0].start);/^[,) \t]*$/.test(r)&&(n.trailingComments=[e.shift()])}}});function tt(e,t){const n=dt[e.type];if(!n)throw new Error(`Not implemented ${e.type}`);const r=n(e,t);return e.leadingComments&&r.unshift(nt(e.leadingComments.map(e=>"Block"===e.type?`/*${e.value}*/${e.has_trailing_newline?`\n${t.indent}`:" "}`:`//${e.value}${e.has_trailing_newline?`\n${t.indent}`:" "}`).join(""))),e.trailingComments&&t.comments.push(e.trailingComments[0]),r}function nt(e,t){return{content:e,loc:t&&t.loc,has_newline:/\n/.test(e)}}const rt={"||":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},it={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,CallExpression:19,NewExpression:19,AwaitExpression:17,ArrowFunctionExpression:17,ClassExpression:17,FunctionExpression:17,ObjectExpression:17,UpdateExpression:16,UnaryExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function ot(e,t,n){const r=it[e.type],i=it[t.type];return r!==i?!n&&15===r&&14===i&&"**"===t.operator||r<i:(13===r||14===r)&&("**"===e.operator&&"**"===t.operator?!n:n?rt[e.operator]<=rt[t.operator]:rt[e.operator]<rt[t.operator])}const st=e=>{for(let t=0;t<e.length;t+=1)if(e[t].has_newline)return!0;return!1},at=e=>{let t=0;for(let n=0;n<e.length;n+=1)t+=e[n].content.length;return t},ct=(e,t)=>e+t,lt=(e,t)=>{if(0===e.length)return[];const n=[...e[0]];for(let r=1;r<e.length;r+=1)n.push(t,...e[r]);return n},ht=e=>(t,n)=>e(t,{...n,scope:n.scope_map.get(t)}),pt=(e,t)=>{const n=[],r=e.map(e=>{const n=tt(e,{...t,indent:t.indent});let r=!1;for(;t.comments.length;){const e=t.comments.shift(),i=r?`\n${t.indent}`:" ";n.push(nt("Block"===e.type?`${i}/*${e.value}*/`:`${i}//${e.value}`)),r="Line"===e.type}return n});let i=!1;for(let e=0;e<r.length;e+=1){const o=st(r[e]);e>0&&n.push(nt(o||i?`\n\n${t.indent}`:`\n${t.indent}`)),n.push(...r[e]),i=o}return n},ut=(e,t)=>{const n=[nt(`${e.kind} `)],r=e.declarations.map(n=>tt(n,{...t,indent:t.indent+(1===e.declarations.length?"":"\t")})),i=r.some(st)||r.map(at).reduce(ct,0)+2*(t.indent.length+r.length-1)>80,o=nt(i?`,\n${t.indent}\t`:", ");return n.push(...lt(r,o)),n},dt={Program:(e,t)=>pt(e.body,t),BlockStatement:ht((e,t)=>[nt(`{\n${t.indent}\t`),...pt(e.body,{...t,indent:t.indent+"\t"}),nt(`\n${t.indent}}`)]),EmptyStatement:(e,t)=>[],ParenthesizedExpression:(e,t)=>tt(e.expression,t),ExpressionStatement:(e,t)=>3===it[e.expression.type]&&"ObjectPattern"===e.expression.left.type?[nt("("),...tt(e.expression,t),nt(");")]:[...tt(e.expression,t),nt(";")],IfStatement(e,t){const n=[nt("if ("),...tt(e.test,t),nt(") "),...tt(e.consequent,t)];return e.alternate&&n.push(nt(" else "),...tt(e.alternate,t)),n},LabeledStatement:(e,t)=>[...tt(e.label,t),nt(": "),...tt(e.body,t)],BreakStatement:(e,t)=>e.label?[nt("break "),...tt(e.label,t),nt(";")]:[nt("break;")],ContinueStatement:(e,t)=>e.label?[nt("continue "),...tt(e.label,t),nt(";")]:[nt("continue;")],WithStatement:(e,t)=>[nt("with ("),...tt(e.object,t),nt(") "),...tt(e.body,t)],SwitchStatement(e,t){const n=[nt("switch ("),...tt(e.discriminant,t),nt(") {")];return e.cases.forEach(e=>{e.test?n.push(nt(`\n${t.indent}\tcase `),...tt(e.test,{...t,indent:`${t.indent}\t`}),nt(":")):n.push(nt(`\n${t.indent}\tdefault:`)),e.consequent.forEach(e=>{n.push(nt(`\n${t.indent}\t\t`),...tt(e,{...t,indent:`${t.indent}\t\t`}))})}),n.push(nt(`\n${t.indent}}`)),n},ReturnStatement:(e,t)=>e.argument?[nt("return "),...tt(e.argument,t),nt(";")]:[nt("return;")],ThrowStatement:(e,t)=>[nt("throw "),...tt(e.argument,t),nt(";")],TryStatement(e,t){const n=[nt("try "),...tt(e.block,t)];return e.handler&&(e.handler.param?n.push(nt(" catch("),...tt(e.handler.param,t),nt(") ")):n.push(nt(" catch ")),n.push(...tt(e.handler.body,t))),e.finalizer&&n.push(nt(" finally "),...tt(e.finalizer,t)),n},WhileStatement:(e,t)=>[nt("while ("),...tt(e.test,t),nt(") "),...tt(e.body,t)],DoWhileStatement:(e,t)=>[nt("do "),...tt(e.body,t),nt(" while ("),...tt(e.test,t),nt(");")],ForStatement:ht((e,t)=>{const n=[nt("for (")];return e.init&&("VariableDeclaration"===e.init.type?n.push(...ut(e.init,t)):n.push(...tt(e.init,t))),n.push(nt("; ")),e.test&&n.push(...tt(e.test,t)),n.push(nt("; ")),e.update&&n.push(...tt(e.update,t)),n.push(nt(") "),...tt(e.body,t)),n}),ForInStatement:ht((e,t)=>{const n=[nt(`for ${e.await?"await ":""}(`)];return"VariableDeclaration"===e.left.type?n.push(...ut(e.left,t)):n.push(...tt(e.left,t)),n.push(nt("ForInStatement"===e.type?" in ":" of "),...tt(e.right,t),nt(") "),...tt(e.body,t)),n}),DebuggerStatement:(e,t)=>[nt("debugger",e),nt(";")],FunctionDeclaration:ht((e,t)=>{const n=[];e.async&&n.push(nt("async ")),n.push(nt(e.generator?"function* ":"function ")),e.id&&n.push(...tt(e.id,t)),n.push(nt("("));const r=e.params.map(e=>tt(e,{...t,indent:t.indent+"\t"})),i=r.some(st)||r.map(at).reduce(ct,0)+2*(t.indent.length+r.length-1)>80,o=nt(i?`,\n${t.indent}`:", ");return i?n.push(nt(`\n${t.indent}\t`),...lt(r,o),nt(`\n${t.indent}`)):n.push(...lt(r,o)),n.push(nt(") "),...tt(e.body,t)),n}),VariableDeclaration:(e,t)=>ut(e,t).concat(nt(";")),VariableDeclarator:(e,t)=>e.init?[...tt(e.id,t),nt(" = "),...tt(e.init,t)]:tt(e.id,t),ClassDeclaration(e,t){const n=[nt("class ")];return e.id&&n.push(...tt(e.id,t),nt(" ")),e.superClass&&n.push(nt("extends "),...tt(e.superClass,t),nt(" ")),n.push(...tt(e.body,t)),n},ImportDeclaration(e,t){const n=[nt("import ")],{length:r}=e.specifiers,i=tt(e.source,t);if(r>0){let o=0;for(;o<r;){o>0&&n.push(nt(", "));const t=e.specifiers[o];if("ImportDefaultSpecifier"===t.type)n.push(nt(t.local.name,t)),o+=1;else{if("ImportNamespaceSpecifier"!==t.type)break;n.push(nt("* as "+t.local.name,t)),o+=1}}if(o<r){const r=e.specifiers.slice(o).map(e=>{const n=tt(e.imported,t)[0],r=tt(e.local,t)[0];return n.content===r.content?[r]:[n,nt(" as "),r]});at(n)+r.map(at).reduce(ct,0)+2*r.length+6+at(i)>80?n.push(nt("{\n\t"),...lt(r,nt(",\n\t")),nt("\n}")):n.push(nt("{ "),...lt(r,nt(", ")),nt(" }"))}n.push(nt(" from "))}return n.push(...i,nt(";")),n},ImportExpression:(e,t)=>[nt("import("),...tt(e.source,t),nt(")")],ExportDefaultDeclaration(e,t){const n=[nt("export default "),...tt(e.declaration,t)];return"FunctionDeclaration"!==e.declaration.type&&n.push(nt(";")),n},ExportNamedDeclaration(e,t){const n=[nt("export ")];if(e.declaration)n.push(...tt(e.declaration,t));else{const r=e.specifiers.map(e=>{const n=tt(e.local,t)[0],r=tt(e.exported,t)[0];return n.content===r.content?[n]:[n,nt(" as "),r]});7+r.map(at).reduce(ct,0)+2*r.length>80?n.push(nt("{\n\t"),...lt(r,nt(",\n\t")),nt("\n}")):n.push(nt("{ "),...lt(r,nt(", ")),nt(" }")),e.source&&n.push(nt(" from "),...tt(e.source,t))}return n.push(nt(";")),n},ExportAllDeclaration:(e,t)=>[nt("export * from "),...tt(e.source,t),nt(";")],MethodDefinition(e,t){const n=[];e.static&&n.push(nt("static ")),"get"!==e.kind&&"set"!==e.kind||n.push(nt(e.kind+" ")),e.value.async&&n.push(nt("async ")),e.value.generator&&n.push(nt("*")),e.computed?n.push(nt("["),...tt(e.key,t),nt("]")):n.push(...tt(e.key,t)),n.push(nt("("));const{params:r}=e.value;for(let e=0;e<r.length;e+=1)n.push(...tt(r[e],t)),e<r.length-1&&n.push(nt(", "));return n.push(nt(") "),...tt(e.value.body,t)),n},ArrowFunctionExpression:ht((e,t)=>{const n=[];if(e.async&&n.push(nt("async ")),1===e.params.length&&"Identifier"===e.params[0].type)n.push(...tt(e.params[0],t));else{const r=e.params.map(e=>tt(e,{...t,indent:t.indent+"\t"}));n.push(nt("("),...lt(r,nt(", ")),nt(")"))}return n.push(nt(" => ")),"ObjectExpression"===e.body.type?n.push(nt("("),...tt(e.body,t),nt(")")):n.push(...tt(e.body,t)),n}),ThisExpression:(e,t)=>[nt("this",e)],Super:(e,t)=>[nt("super",e)],RestElement:(e,t)=>[nt("..."),...tt(e.argument,t)],YieldExpression:(e,t)=>e.argument?[nt(e.delegate?"yield* ":"yield "),...tt(e.argument,t)]:[nt(e.delegate?"yield*":"yield")],AwaitExpression(e,t){if(e.argument){const n=it[e.argument.type];return n&&n<it.AwaitExpression?[nt("await ("),...tt(e.argument,t),nt(")")]:[nt("await "),...tt(e.argument,t)]}return[nt("await")]},TemplateLiteral(e,t){const n=[nt("`")],{quasis:r,expressions:i}=e;for(let e=0;e<i.length;e++)n.push(nt(r[e].value.raw),nt("${"),...tt(i[e],t),nt("}"));return n.push(nt(r[r.length-1].value.raw),nt("`")),n},TaggedTemplateExpression:(e,t)=>tt(e.tag,t).concat(tt(e.quasi,t)),ArrayExpression(e,t){const n=[nt("[")],r=[];let i=[];for(let n=0;n<e.elements.length;n+=1){const o=e.elements[n];o?(r.push([...i,...tt(o,{...t,indent:t.indent+"\t"})]),i=[]):i.push(nt(","))}return r.some(st)||r.map(at).reduce(ct,0)+2*(t.indent.length+r.length-1)>80?n.push(nt(`\n${t.indent}\t`),...lt(r,nt(`,\n${t.indent}\t`)),nt(`\n${t.indent}`),...i):n.push(...lt(r,nt(", ")),...i),n.push(nt("]")),n},ObjectExpression(e,t){if(0===e.properties.length)return[nt("{}")];let n=!1;const r=[],i=nt(", ");e.properties.forEach((o,s)=>{if(r.push(...tt(o,{...t,indent:t.indent+"\t"})),t.comments.length)for(r.push(nt(", "));t.comments.length;){const e=t.comments.shift();r.push(nt("Block"===e.type?`/*${e.value}*/\n${t.indent}\t`:`//${e.value}\n${t.indent}\t`)),"Line"===e.type&&(n=!0)}else s<e.properties.length-1&&r.push(i)});const o=n||st(r)||at(r)>40;return o&&(i.content=`,\n${t.indent}\t`),[nt(o?`{\n${t.indent}\t`:"{ "),...r,nt(o?`\n${t.indent}}`:" }")]},Property(e,t){const n=tt(e.value,t);if(e.key===e.value)return n;if(!e.computed&&"AssignmentPattern"===e.value.type&&"Identifier"===e.value.left.type&&e.value.left.name===e.key.name)return n;if("Identifier"===e.value.type&&("Identifier"===e.key.type&&e.key.name===n[0].content||"Literal"===e.key.type&&e.key.value===n[0].content))return n;const r=tt(e.key,t);if("FunctionExpression"===e.value.type&&!e.value.id){t={...t,scope:t.scope_map.get(e.value)};const n="init"!==e.kind?[nt(`${e.kind} `)]:[];return e.value.async&&n.push(nt("async ")),e.value.generator&&n.push(nt("*")),n.push(...e.computed?[nt("["),...r,nt("]")]:r,nt("("),...lt(e.value.params.map(e=>tt(e,t)),nt(", ")),nt(") "),...tt(e.value.body,t)),n}return e.computed?[nt("["),...r,nt("]: "),...n]:[...r,nt(": "),...n]},ObjectPattern(e,t){const n=[nt("{ ")];for(let r=0;r<e.properties.length;r+=1)n.push(...tt(e.properties[r],t)),r<e.properties.length-1&&n.push(nt(", "));return n.push(nt(" }")),n},SequenceExpression(e,t){const n=e.expressions.map(e=>tt(e,t));return[nt("("),...lt(n,nt(", ")),nt(")")]},UnaryExpression(e,t){const n=[nt(e.operator)];return e.operator.length>1&&n.push(nt(" ")),it[e.argument.type]<it.UnaryExpression?n.push(nt("("),...tt(e.argument,t),nt(")")):n.push(...tt(e.argument,t)),n},UpdateExpression:(e,t)=>e.prefix?[nt(e.operator),...tt(e.argument,t)]:[...tt(e.argument,t),nt(e.operator)],AssignmentExpression:(e,t)=>[...tt(e.left,t),nt(` ${e.operator||"="} `),...tt(e.right,t)],BinaryExpression(e,t){const n=[];return ot(e.left,e,!1)?n.push(nt("("),...tt(e.left,t),nt(")")):n.push(...tt(e.left,t)),n.push(nt(` ${e.operator} `)),ot(e.right,e,!0)?n.push(nt("("),...tt(e.right,t),nt(")")):n.push(...tt(e.right,t)),n},ConditionalExpression(e,t){const n=[];it[e.test.type]>it.ConditionalExpression?n.push(...tt(e.test,t)):n.push(nt("("),...tt(e.test,t),nt(")"));const r={...t,indent:t.indent+"\t"},i=tt(e.consequent,r),o=tt(e.alternate,r);return st(i)||st(o)||at(n)+at(i)+at(o)>50?n.push(nt(`\n${t.indent}? `),...i,nt(`\n${t.indent}: `),...o):n.push(nt(" ? "),...i,nt(" : "),...o),n},NewExpression(e,t){const n=[nt("new ")];it[e.callee.type]<it.CallExpression||function(e){for(;e;){if("CallExpression"===e.type[0])return!0;if("MemberExpression"!==e.type)return!1;e=e.object}}(e.callee)?n.push(nt("("),...tt(e.callee,t),nt(")")):n.push(...tt(e.callee,t));const r=e.arguments.map(e=>tt(e,{...t,indent:t.indent+"\t"})),i=r.some(st)?nt(",\n"+t.indent):nt(", ");return n.push(nt("("),...lt(r,i),nt(")")),n},CallExpression(e,t){const n=[];it[e.callee.type]<it.CallExpression?n.push(nt("("),...tt(e.callee,t),nt(")")):n.push(...tt(e.callee,t));const r=e.arguments.map(e=>tt(e,t));if(r.slice(0,-1).some(st)){const r=e.arguments.map(e=>tt(e,{...t,indent:`${t.indent}\t`}));n.push(nt(`(\n${t.indent}\t`),...lt(r,nt(`,\n${t.indent}\t`)),nt(`\n${t.indent})`))}else n.push(nt("("),...lt(r,nt(", ")),nt(")"));return n},MemberExpression(e,t){const n=[];return it[e.object.type]<it.MemberExpression?n.push(nt("("),...tt(e.object,t),nt(")")):n.push(...tt(e.object,t)),e.computed?n.push(nt("["),...tt(e.property,t),nt("]")):n.push(nt("."),...tt(e.property,t)),n},MetaProperty:(e,t)=>[...tt(e.meta,t),nt("."),...tt(e.property,t)],Identifier(e,t){let n=e.name;if("@"===n[0])n=t.getName(n.slice(1));else if("#"===e.name[0]){const r=t.scope.find_owner(e.name);if(!r)throw new Error("Could not find owner for node");t.deconflicted.has(r)||t.deconflicted.set(r,new Map);const i=t.deconflicted.get(r);i.has(e.name)||i.set(e.name,((e,t)=>{const n=e;let r=1;for(;t.has(e);)e=`${n}$${r++}`;return e})(e.name.slice(1),r.references)),n=i.get(e.name)}return[nt(n,e)]},Literal(e,t){if("string"==typeof e.value)return[nt(JSON.stringify(e.value).replace(Ze,(e,t,n,r,i)=>{if(n)return"@"+i;if(r)return"#"+i;throw new Error("this shouldn't happen")}),e)];const{regex:n}=e;return n?[nt(`/${n.pattern}/${n.flags}`,e)]:[nt(String(e.value),e)]}};dt.ForOfStatement=dt.ForInStatement,dt.FunctionExpression=dt.FunctionDeclaration,dt.ClassExpression=dt.ClassDeclaration,dt.ClassBody=dt.BlockStatement,dt.SpreadElement=dt.RestElement,dt.ArrayPattern=dt.ArrayExpression,dt.LogicalExpression=dt.BinaryExpression,dt.AssignmentPattern=dt.AssignmentExpression;let ft=()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};"undefined"!=typeof window&&"function"==typeof window.btoa?ft=e=>window.btoa(unescape(encodeURIComponent(e))):"function"==typeof n&&(ft=e=>n.from(e,"utf-8").toString("base64"));const mt={"@":"AT","#":"HASH"},gt=e=>{let t=e[0];for(let n=1;n<e.length;n+=1)t+=`_${Qe}_${n-1}_${e[n]}`;return t.replace(/([@#])(\w+)/g,(e,t,n)=>`_${Qe}_${mt[t]}_${n}`)},vt=(e,t)=>{for(let n=0;n<e.length;n+=1){const r=e[n];if(Array.isArray(r))vt(r,t);else if("ExpressionStatement"!==r.type)t.push(r);else{if(r.expression===wt)continue;if(Array.isArray(r.expression)){let e=r.expression[0];for(;Array.isArray(e);)e=e[0];e&&(e.leadingComments=r.leadingComments),vt(r.expression,t);continue}if(/(Expression|Literal)$/.test(r.expression.type)){t.push(r);continue}r.leadingComments&&(r.expression.leadingComments=r.leadingComments),r.trailingComments&&(r.expression.trailingComments=r.trailingComments),t.push(r.expression)}}return t},yt=(e,t)=>{for(let n=0;n<e.length;n+=1){const r=e[n];r.value!==wt&&(r.key===r.value&&Array.isArray(r.key)?yt(r.key,t):t.push(r))}return t},bt=(e,t)=>{for(let n=0;n<e.length;n+=1){const r=e[n];r!==wt&&(Array.isArray(r)?bt(r,t):t.push(r))}return t},wt={type:"Empty"},xt=(e,t)=>{const{onComment:n}=et(e,t);return{ecmaVersion:11,sourceType:"module",allowAwaitOutsideFunction:!0,allowImportExportEverywhere:!0,allowReturnOutsideFunction:!0,onComment:n}},kt=(e,t,n,r)=>{r.forEach(e=>{e.value=e.value.replace(Ze,(e,t)=>+t in n?n[+t]:e)});const{enter:i,leave:o}=et(r,e);Le(t,{enter:i,leave(e,t,r,i){if("Identifier"===e.type){Ze.lastIndex=0;const t=Ze.exec(e.name);if(t)if(t[1]){if(+t[1]in n){let r=n[+t[1]];"string"==typeof r?r={type:"Identifier",name:r,leadingComments:e.leadingComments,trailingComments:e.trailingComments}:"number"==typeof r&&(r={type:"Literal",value:r,leadingComments:e.leadingComments,trailingComments:e.trailingComments}),this.replace(r||wt)}}else e.name=`${t[2]?"@":"#"}${t[4]}`}"Literal"===e.type&&"string"==typeof e.value&&(Ze.lastIndex=0,e.value=e.value.replace(Ze,(e,t)=>+t in n?n[+t]:e)),"TemplateElement"===e.type&&(Ze.lastIndex=0,e.value.raw=e.value.raw.replace(Ze,(e,t)=>+t in n?n[+t]:e)),"Program"!==e.type&&"BlockStatement"!==e.type||(e.body=vt(e.body,[])),"ObjectExpression"!==e.type&&"ObjectPattern"!==e.type||(e.properties=yt(e.properties,[])),"ArrayExpression"!==e.type&&"ArrayPattern"!==e.type||(e.elements=bt(e.elements,[])),"FunctionExpression"!==e.type&&"FunctionDeclaration"!==e.type&&"ArrowFunctionExpression"!==e.type||(e.params=bt(e.params,[])),"CallExpression"!==e.type&&"NewExpression"!==e.type||(e.arguments=bt(e.arguments,[])),"ImportDeclaration"!==e.type&&"ExportNamedDeclaration"!==e.type||(e.specifiers=bt(e.specifiers,[])),"ForStatement"===e.type&&(e.init=e.init===wt?null:e.init,e.test=e.test===wt?null:e.test,e.update=e.update===wt?null:e.update),o(e)}})};function _t(e,...t){const n=gt(e),r=[];try{const e=Pe(n,xt(r,n));return kt(n,e,t,r),e.body}catch(e){Ct(n,e)}}function St(e,...t){const n=gt(e),r=[];try{const e=Ie(n,0,xt(r,n));return kt(n,e,t,r),e}catch(e){Ct(n,e)}}function $t(e,...t){const n=`{${gt(e)}}`,r=[];try{const e=Ie(n,0,xt(r,n));return kt(n,e,t,r),e.properties[0]}catch(e){Ct(n,e)}}function Ct(e,t){throw Ze.lastIndex=0,e=e.replace(Ze,(e,t,n,r,i)=>n?`@${i}`:r?`#${i}`:"${...}"),console.log(`failed to parse:\n${e}`),t}const Et=e=>((e,t)=>{const{onComment:n,enter:r,leave:i}=et([],e),o=Pe(e,{onComment:n,...t});return Le(o,{enter:r,leave:i}),o})(e,{sourceType:"module",ecmaVersion:11,locations:!0}),Tt=(e,t)=>((e,t,n)=>{const{onComment:r,enter:i,leave:o}=et([],e),s=Ie(e,t,{onComment:r,...n});return Le(s,{enter:i,leave:o}),s})(e,t,{ecmaVersion:11,locations:!0}),At=/[ \t\r\n]/,Nt=/^(?:offset|client)(?:Width|Height)$/,Mt=new Map([["true",!0],["false",!1],["null",null]]);function Ot(e){const t=e.index,n=e.read_until(/\s*}/);if(n&&/^[a-z]+$/.test(n)){const e=t+n.length;return Mt.has(n)?{type:"Literal",start:t,end:e,value:Mt.get(n),raw:n}:{type:"Identifier",start:t,end:t+n.length,name:n}}e.index=t;try{const t=Tt(e.template,e.index);let n=0;for(let r=e.index;r<t.start;r+=1)"("===e.template[r]&&(n+=1);let r=t.end;for(;n>0;){const t=e.template[r];")"===t?n-=1:At.test(t)||e.error({code:"unexpected-token",message:"Expected )"},r),r+=1}return e.index=r,t}catch(t){e.acorn_error(t)}}function Dt(e,t,n){const r=t.find(e=>"context"===e.name);if(!r)return"default";1===r.value.length&&"Text"===r.value[0].type||e.error({code:"invalid-script",message:"context attribute must be static"},n);const i=r.value[0].data;return"module"!==i&&e.error({code:"invalid-script",message:'If the context attribute is supplied, its value must be "module"'},r.start),i}function Rt(e,t){function n(e,t){return r.slice(e,t).map((function(t,n){for(var r=String(e+n+1);r.length<c;)r=" "+r;return r+" |"+t})).join("\n")}var r=e.source.split(/\n|\r\n?|\f/),i=e.line,o=e.column,s=Math.max(1,i-t)-1,a=Math.min(i+t,r.length+1),c=Math.max(4,String(a).length)+1,l=0;(o+=("    ".length-1)*(r[i-1].substr(0,o-1).match(/\t/g)||[]).length)>100&&(l=o-60+3,o=58);for(var h=s;h<=a;h++)h>=0&&h<r.length&&(r[h]=r[h].replace(/\t/g,"    "),r[h]=(l>0&&r[h].length>l?"":"")+r[h].substr(l,98)+(r[h].length>l+100-1?"":""));return[n(s,i),new Array(o+c+2).join("-")+"^",n(i,a)].join("\n")}for(var Pt=function(e,t,n,r,i){var o=Object.create(SyntaxError.prototype);return o.name="CssSyntaxError",o.message=e,o.stack=((new Error).stack||"").replace(/^.+\n/,o.name+": "+o.message+"\n"),o.source=t,o.offset=n,o.line=r,o.column=i,o.sourceFragment=function(e){return Rt(o,isNaN(e)?0:e)},Object.defineProperty(o,"formattedMessage",{get:function(){return"Parse error: "+o.message+"\n"+Rt(o,2)}}),o.parseError={offset:n,line:r,column:i},o},It={WhiteSpace:1,Identifier:2,Number:3,String:4,Comment:5,Punctuator:6,CDO:7,CDC:8,Atrule:14,Function:15,Url:16,Raw:17,ExclamationMark:33,QuotationMark:34,NumberSign:35,DollarSign:36,PercentSign:37,Ampersand:38,Apostrophe:39,LeftParenthesis:40,RightParenthesis:41,Asterisk:42,PlusSign:43,Comma:44,HyphenMinus:45,FullStop:46,Solidus:47,Colon:58,Semicolon:59,LessThanSign:60,EqualsSign:61,GreaterThanSign:62,QuestionMark:63,CommercialAt:64,LeftSquareBracket:91,Backslash:92,RightSquareBracket:93,CircumflexAccent:94,LowLine:95,GraveAccent:96,LeftCurlyBracket:123,VerticalLine:124,RightCurlyBracket:125,Tilde:126},Lt=Object.keys(It).reduce((function(e,t){return e[It[t]]=t,e}),{}),Bt="undefined"!=typeof Uint32Array?Uint32Array:Array,Vt=new Bt(128),Ft=new Bt(128),zt=new Bt(128),qt=0;qt<Vt.length;qt++)Vt[qt]=2;for([It.ExclamationMark,It.QuotationMark,It.NumberSign,It.DollarSign,It.PercentSign,It.Ampersand,It.Apostrophe,It.LeftParenthesis,It.RightParenthesis,It.Asterisk,It.PlusSign,It.Comma,It.HyphenMinus,It.FullStop,It.Solidus,It.Colon,It.Semicolon,It.LessThanSign,It.EqualsSign,It.GreaterThanSign,It.QuestionMark,It.CommercialAt,It.LeftSquareBracket,It.RightSquareBracket,It.CircumflexAccent,It.GraveAccent,It.LeftCurlyBracket,It.VerticalLine,It.RightCurlyBracket,It.Tilde].forEach((function(e){Vt[Number(e)]=6,Ft[Number(e)]=6})),qt=48;qt<=57;qt++)Vt[qt]=3;Vt[32]=1,Vt[9]=1,Vt[10]=1,Vt[13]=1,Vt[12]=1,Vt[It.Apostrophe]=4,Vt[It.QuotationMark]=4,zt[32]=1,zt[9]=1,zt[10]=1,zt[13]=1,zt[12]=1,zt[It.Apostrophe]=1,zt[It.QuotationMark]=1,zt[It.LeftParenthesis]=1,zt[It.RightParenthesis]=1,Ft[32]=6,Ft[9]=6,Ft[10]=6,Ft[13]=6,Ft[12]=6,Ft[It.HyphenMinus]=0;var jt={TYPE:It,NAME:Lt,SYMBOL_TYPE:Vt,PUNCTUATION:Ft,STOP_URL_RAW:zt},Ut=jt.PUNCTUATION,Wt=jt.STOP_URL_RAW,Ht=jt.TYPE,Kt=Ht.FullStop,Jt=Ht.PlusSign,Yt=Ht.HyphenMinus,Gt=Ht.Punctuator;function Xt(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Qt(e){return e>=48&&e<=57}function Zt(e,t,n){return 10===n||12===n||13===n?13===n&&t+1<e.length&&10===e.charCodeAt(t+1)?2:1:0}function en(e,t,n,r){if(n-t!==r.length)return!1;if(t<0||n>e.length)return!1;for(var i=t;i<n;i++){var o=e.charCodeAt(i);if(o>=65&&o<=90&&(o|=32),o!==r.charCodeAt(i-t))return!1}return!0}function tn(e,t){for(;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)break}return t}function nn(e,t){for(var n=0;n<7&&t+n<e.length;n++){var r=e.charCodeAt(t+n);if(6===n||!Xt(r)){n>0&&(t+=n-1+Zt(e,t+n,r),32!==r&&9!==r||t++);break}}return t}var rn={firstCharOffset:function(e){return 65279===e.charCodeAt(0)||65534===e.charCodeAt(0)?1:0},isHex:Xt,isNumber:Qt,isNewline:Zt,cmpChar:function(e,t,n){var r=e.charCodeAt(t);return r>=65&&r<=90&&(r|=32),r===n},cmpStr:en,endsWith:function(e,t){return en(e,e.length-t.length,e.length,t)},findLastNonSpaceLocation:function(e){for(var t=e.source.length-1;t>=0;t--){var n=e.source.charCodeAt(t);if(32!==n&&9!==n&&13!==n&&10!==n&&12!==n)break}return e.getLocation(t+1)},findWhiteSpaceEnd:function(e,t){for(;t<e.length;t++){var n=e.charCodeAt(t);if(32!==n&&9!==n&&13!==n&&10!==n&&12!==n)break}return t},findCommentEnd:function(e,t){var n=e.indexOf("*/",t);return-1===n?e.length:n+2},findStringEnd:function(e,t,n){for(;t<e.length;t++){var r=e.charCodeAt(t);if(92===r)t++;else if(r===n){t++;break}}return t},findDecimalNumberEnd:tn,findNumberEnd:function(e,t,n){var r;return t=tn(e,t),n&&t+1<e.length&&e.charCodeAt(t)===Kt&&Qt(r=e.charCodeAt(t+1))&&(t=tn(e,t+1)),t+1<e.length&&101==(32|e.charCodeAt(t))&&((r=e.charCodeAt(t+1))!==Jt&&r!==Yt||t+2<e.length&&(r=e.charCodeAt(t+2)),Qt(r)&&(t=tn(e,t+2))),t},findEscaseEnd:nn,findIdentifierEnd:function(e,t){for(;t<e.length;t++){var n=e.charCodeAt(t);if(92===n)t=nn(e,t+1);else if(n<128&&Ut[n]===Gt)break}return t},findUrlRawEnd:function(e,t){for(;t<e.length;t++){var n=e.charCodeAt(t);if(92===n)t=nn(e,t+1);else if(n<128&&1===Wt[n])break}return t}},on=jt.TYPE,sn=jt.NAME,an=jt.SYMBOL_TYPE,cn=rn.firstCharOffset,ln=rn.cmpStr,hn=rn.isNumber,pn=rn.findLastNonSpaceLocation,un=rn.findWhiteSpaceEnd,dn=rn.findCommentEnd,fn=rn.findStringEnd,mn=rn.findNumberEnd,gn=rn.findIdentifierEnd,vn=rn.findUrlRawEnd,yn=on.WhiteSpace,bn=on.Identifier,wn=on.Number,xn=on.String,kn=on.Comment,_n=on.Punctuator,Sn=on.CDO,$n=on.CDC,Cn=on.Atrule,En=on.Function,Tn=on.Url,An=on.Raw,Nn=on.Asterisk,Mn=on.Solidus,On=on.FullStop,Dn=on.PlusSign,Rn=on.HyphenMinus,Pn=on.GreaterThanSign,In=on.LessThanSign,Ln=on.ExclamationMark,Bn=on.CommercialAt,Vn=on.QuotationMark,Fn=on.Apostrophe,zn=on.LeftParenthesis,qn=on.RightParenthesis,jn=on.LeftCurlyBracket,Un=on.RightCurlyBracket,Wn=on.LeftSquareBracket,Hn=on.RightSquareBracket,Kn="undefined"!=typeof Uint32Array?Uint32Array:Array;function Jn(e,t){var n=t.length,r=cn(t),i=e.lines,o=e.startLine,s=e.columns,a=e.startColumn;(null===i||i.length<n+1)&&(i=new Kn(Math.max(n+1024,16384)),s=new Kn(i.length));for(var c=r;c<n;c++){var l=t.charCodeAt(c);i[c]=o,s[c]=a++,10!==l&&13!==l&&12!==l||(13===l&&c+1<n&&10===t.charCodeAt(c+1)&&(i[++c]=o,s[c]=a),o++,a=1)}i[c]=o,s[c]=a,e.linesAnsColumnsComputed=!0,e.lines=i,e.columns=s}var Yn=function(e,t,n,r){this.offsetAndType=null,this.balance=null,this.lines=null,this.columns=null,this.setSource(e,t,n,r)};Yn.prototype={setSource:function(e,t,n,r){var i=String(e||""),o=cn(i);this.source=i,this.firstCharOffset=o,this.startOffset=void 0===t?0:t,this.startLine=void 0===n?1:n,this.startColumn=void 0===r?1:r,this.linesAnsColumnsComputed=!1,this.eof=!1,this.currentToken=-1,this.tokenType=0,this.tokenStart=o,this.tokenEnd=o,function(e,t,n){var r=t.length,i=e.offsetAndType,o=e.balance,s=0,a=0,c=n,l=0,h=0,p=0,u=0;for((null===i||i.length<r+1)&&(i=new Kn(r+1024),o=new Kn(r+1024));c<r;){var d=t.charCodeAt(c),f=d<128?an[d]:bn;switch(o[s]=r,f){case yn:c=un(t,c+1);break;case _n:switch(d){case h:for(h=(p=o[u=16777215&p])>>24,o[s]=u,o[u++]=s;u<s;u++)o[u]===r&&(o[u]=s);break;case Wn:o[s]=p,p=(h=Hn)<<24|s;break;case jn:o[s]=p,p=(h=Un)<<24|s;break;case zn:o[s]=p,p=(h=qn)<<24|s}if(d===Nn&&a===Mn){f=kn,c=dn(t,c+1),s--;break}if(d===On&&(a===Dn||a===Rn)&&c+1<r&&hn(t.charCodeAt(c+1))){f=wn,c=mn(t,c+2,!1),s--;break}if(d===Ln&&a===In&&c+2<r&&t.charCodeAt(c+1)===Rn&&t.charCodeAt(c+2)===Rn){f=Sn,c+=3,s--;break}if(d===Rn&&a===Rn&&c+1<r&&t.charCodeAt(c+1)===Pn){f=$n,c+=2,s--;break}if(d===zn&&a===bn){c+=1,o[--s]=o[s+1],p--,c-l==4&&ln(t,l,c,"url(")?(l=un(t,c),(d=t.charCodeAt(l))!==zn&&d!==qn&&d!==Vn&&d!==Fn?(i[s++]=Tn<<24|c,o[s]=r,l!==c&&(i[s++]=yn<<24|l,o[s]=r),f=An,c=vn(t,l)):f=Tn):f=En;break}f=d,c+=1;break;case wn:c=mn(t,c+1,a!==On),a!==On&&a!==Rn&&a!==Dn||s--;break;case xn:c=fn(t,c+1,d);break;default:l=c,c=gn(t,c),a===Rn&&(a=0==--s?0:i[s-1]>>24),a===Bn&&(s--,f=Cn)}i[s++]=f<<24|c,a=f}for(i[s]=c,o[s]=r;0!==p;)p=o[u=16777215&p],o[u]=r;e.offsetAndType=i,e.tokenCount=s,e.balance=o}(this,i,o),this.next()},lookupType:function(e){return(e+=this.currentToken)<this.tokenCount?this.offsetAndType[e]>>24:0},lookupNonWSType:function(e){e+=this.currentToken;for(var t;e<this.tokenCount;e++)if((t=this.offsetAndType[e]>>24)!==yn)return t;return 0},lookupValue:function(e,t){return(e+=this.currentToken)<this.tokenCount&&ln(this.source,16777215&this.offsetAndType[e-1],16777215&this.offsetAndType[e],t)},getTokenStart:function(e){return e===this.currentToken?this.tokenStart:e>0?e<this.tokenCount?16777215&this.offsetAndType[e-1]:16777215&this.offsetAndType[this.tokenCount]:this.firstCharOffset},getOffsetExcludeWS:function(){return this.currentToken>0&&this.offsetAndType[this.currentToken-1]>>24===yn?this.currentToken>1?16777215&this.offsetAndType[this.currentToken-2]:this.firstCharOffset:this.tokenStart},getRawLength:function(e,t,n,r){var i,o=e;e:for(;o<this.tokenCount&&!((i=this.balance[o])<e);o++)switch(this.offsetAndType[o]>>24){case t:break e;case n:r&&o++;break e;default:this.balance[i]===o&&(o=i)}return o-this.currentToken},getTokenValue:function(){return this.source.substring(this.tokenStart,this.tokenEnd)},substrToCursor:function(e){return this.source.substring(e,this.tokenStart)},skipWS:function(){for(var e=this.currentToken,t=0;e<this.tokenCount&&this.offsetAndType[e]>>24===yn;e++,t++);t>0&&this.skip(t)},skipSC:function(){for(;this.tokenType===yn||this.tokenType===kn;)this.next()},skip:function(e){var t=this.currentToken+e;t<this.tokenCount?(this.currentToken=t,this.tokenStart=16777215&this.offsetAndType[t-1],t=this.offsetAndType[t],this.tokenType=t>>24,this.tokenEnd=16777215&t):(this.currentToken=this.tokenCount,this.next())},next:function(){var e=this.currentToken+1;e<this.tokenCount?(this.currentToken=e,this.tokenStart=this.tokenEnd,e=this.offsetAndType[e],this.tokenType=e>>24,this.tokenEnd=16777215&e):(this.currentToken=this.tokenCount,this.eof=!0,this.tokenType=0,this.tokenStart=this.tokenEnd=this.source.length)},eat:function(e){if(this.tokenType!==e){var t=this.tokenStart,n=sn[e]+" is expected";e===bn?this.tokenType!==En&&this.tokenType!==Tn||(t=this.tokenEnd-1,n+=" but function found"):this.source.charCodeAt(this.tokenStart)===e&&(t+=1),this.error(n,t)}this.next()},eatNonWS:function(e){this.skipWS(),this.eat(e)},consume:function(e){var t=this.getTokenValue();return this.eat(e),t},consumeFunctionName:function(){var e=this.source.substring(this.tokenStart,this.tokenEnd-1);return this.eat(En),e},consumeNonWS:function(e){return this.skipWS(),this.consume(e)},expectIdentifier:function(e){this.tokenType===bn&&!1!==ln(this.source,this.tokenStart,this.tokenEnd,e)||this.error("Identifier `"+e+"` is expected"),this.next()},getLocation:function(e,t){return this.linesAnsColumnsComputed||Jn(this,this.source),{source:t,offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]}},getLocationRange:function(e,t,n){return this.linesAnsColumnsComputed||Jn(this,this.source),{source:n,start:{offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]},end:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}},error:function(e,t){var n=void 0!==t&&t<this.source.length?this.getLocation(t):this.eof?pn(this):this.getLocation(this.tokenStart);throw new Pt(e||"Unexpected input",this.source,n.offset,n.line,n.column)},dump:function(){var e=0;return Array.prototype.slice.call(this.offsetAndType,0,this.tokenCount).map((function(t,n){var r=e,i=16777215&t;return e=i,{idx:n,type:sn[t>>24],chunk:this.source.substring(r,i),balance:this.balance[n]}}),this)}},Yn.CssSyntaxError=Pt,Object.keys(jt).forEach((function(e){Yn[e]=jt[e]})),Object.keys(rn).forEach((function(e){Yn[e]=rn[e]})),new Yn("\n\r\r\n\f\x3c!----\x3e//\"\"''/*\r\n\f*/1a;.\\31\t+2{url(a);func();+1.2e3 -.4e-5 .6e+7}").getLocation();var Gn=Yn;function Xn(e){return{prev:null,next:null,data:e}}var Qn=null,Zn=function(){this.cursor=null,this.head=null,this.tail=null};function er(e,t,n){var r;return null!==Qn?(r=Qn,Qn=Qn.cursor,r.prev=t,r.next=n,r.cursor=e.cursor):r={prev:t,next:n,cursor:e.cursor},e.cursor=r,r}function tr(e){var t=e.cursor;e.cursor=t.cursor,t.prev=null,t.next=null,t.cursor=Qn,Qn=t}Zn.createItem=Xn,Zn.prototype.createItem=Xn,Zn.prototype.getSize=function(){for(var e=0,t=this.head;t;)e++,t=t.next;return e},Zn.prototype.fromArray=function(e){var t=null;this.head=null;for(var n=0;n<e.length;n++){var r=Xn(e[n]);null!==t?t.next=r:this.head=r,r.prev=t,t=r}return this.tail=t,this},Zn.prototype.toArray=function(){for(var e=this.head,t=[];e;)t.push(e.data),e=e.next;return t},Zn.prototype.toJSON=Zn.prototype.toArray,Zn.prototype.isEmpty=function(){return null===this.head},Zn.prototype.first=function(){return this.head&&this.head.data},Zn.prototype.last=function(){return this.tail&&this.tail.data},Zn.prototype.each=function(e,t){var n;void 0===t&&(t=this);for(var r=er(this,null,this.head);null!==r.next;)n=r.next,r.next=n.next,e.call(t,n.data,n,this);tr(this)},Zn.prototype.eachRight=function(e,t){var n;void 0===t&&(t=this);for(var r=er(this,this.tail,null);null!==r.prev;)n=r.prev,r.prev=n.prev,e.call(t,n.data,n,this);tr(this)},Zn.prototype.nextUntil=function(e,t,n){if(null!==e){var r;void 0===n&&(n=this);for(var i=er(this,null,e);null!==i.next&&(r=i.next,i.next=r.next,!t.call(n,r.data,r,this)););tr(this)}},Zn.prototype.prevUntil=function(e,t,n){if(null!==e){var r;void 0===n&&(n=this);for(var i=er(this,e,null);null!==i.prev&&(r=i.prev,i.prev=r.prev,!t.call(n,r.data,r,this)););tr(this)}},Zn.prototype.some=function(e,t){var n=this.head;for(void 0===t&&(t=this);null!==n;){if(e.call(t,n.data,n,this))return!0;n=n.next}return!1},Zn.prototype.map=function(e,t){var n=[],r=this.head;for(void 0===t&&(t=this);null!==r;)n.push(e.call(t,r.data,r,this)),r=r.next;return n},Zn.prototype.clear=function(){this.head=null,this.tail=null},Zn.prototype.copy=function(){for(var e=new Zn,t=this.head;null!==t;)e.insert(Xn(t.data)),t=t.next;return e},Zn.prototype.updateCursors=function(e,t,n,r){for(var i=this.cursor;null!==i;)i.prev===e&&(i.prev=t),i.next===n&&(i.next=r),i=i.cursor},Zn.prototype.prepend=function(e){return this.updateCursors(null,e,this.head,e),null!==this.head?(this.head.prev=e,e.next=this.head):this.tail=e,this.head=e,this},Zn.prototype.prependData=function(e){return this.prepend(Xn(e))},Zn.prototype.append=function(e){return this.updateCursors(this.tail,e,null,e),null!==this.tail?(this.tail.next=e,e.prev=this.tail):this.head=e,this.tail=e,this},Zn.prototype.appendData=function(e){return this.append(Xn(e))},Zn.prototype.insert=function(e,t){if(null!=t)if(this.updateCursors(t.prev,e,t,e),null===t.prev){if(this.head!==t)throw new Error("before doesn't belong to list");this.head=e,t.prev=e,e.next=t,this.updateCursors(null,e)}else t.prev.next=e,e.prev=t.prev,t.prev=e,e.next=t;else this.append(e)},Zn.prototype.insertData=function(e,t){this.insert(Xn(e),t)},Zn.prototype.remove=function(e){if(this.updateCursors(e,e.prev,e,e.next),null!==e.prev)e.prev.next=e.next;else{if(this.head!==e)throw new Error("item doesn't belong to list");this.head=e.next}if(null!==e.next)e.next.prev=e.prev;else{if(this.tail!==e)throw new Error("item doesn't belong to list");this.tail=e.prev}return e.prev=null,e.next=null,e},Zn.prototype.appendList=function(e){null!==e.head&&(this.updateCursors(this.tail,e.tail,null,e.head),null!==this.tail?(this.tail.next=e.head,e.head.prev=this.tail):this.head=e.head,this.tail=e.tail,e.head=null,e.tail=null)},Zn.prototype.insertList=function(e,t){if(null!=t){if(null===e.head)return;this.updateCursors(t.prev,e.tail,t,e.head),null!==t.prev?(t.prev.next=e.head,e.head.prev=t.prev):this.head=e.head,t.prev=e.tail,e.tail.next=t,e.head=null,e.tail=null}else this.appendList(e)},Zn.prototype.replace=function(e,t){"head"in t?this.insertList(t,e):this.insert(t,e),this.remove(e)};var nr=Zn,rr=Gn.TYPE,ir=rr.WhiteSpace,or=rr.Comment,sr=function(e){var t=new nr,n=null,r={recognizer:e,space:null,ignoreWS:!1,ignoreWSAfter:!1};for(this.scanner.skipSC();!this.scanner.eof;){switch(this.scanner.tokenType){case or:this.scanner.next();continue;case ir:r.ignoreWS?this.scanner.next():r.space=this.WhiteSpace();continue}if(void 0===(n=e.getNode.call(this,r)))break;null!==r.space&&(t.appendData(r.space),r.space=null),t.appendData(n),r.ignoreWSAfter?(r.ignoreWSAfter=!1,r.ignoreWS=!0):r.ignoreWS=!1}return t},ar=function(){};function cr(e){return function(){return this[e]()}}var lr=Gn.cmpChar,hr=Gn.TYPE,pr=hr.Identifier,ur=hr.String,dr=hr.Number,fr=hr.Function,mr=hr.Url,gr=hr.NumberSign,vr=hr.LeftParenthesis,yr=hr.LeftSquareBracket,br=hr.PlusSign,wr=hr.HyphenMinus,xr=hr.Comma,kr=hr.Solidus,_r=hr.Asterisk,Sr=hr.PercentSign,$r=hr.Backslash,Cr=function(e){switch(this.scanner.tokenType){case gr:return this.HexColor();case xr:return e.space=null,e.ignoreWSAfter=!0,this.Operator();case kr:case _r:case br:case wr:return this.Operator();case vr:return this.Parentheses(this.readSequence,e.recognizer);case yr:return this.Brackets(this.readSequence,e.recognizer);case ur:return this.String();case dr:switch(this.scanner.lookupType(1)){case Sr:return this.Percentage();case pr:return lr(this.scanner.source,this.scanner.tokenEnd,$r)?this.Number():this.Dimension();default:return this.Number()}case fr:return this.Function(this.readSequence,e.recognizer);case mr:return this.Url();case pr:return lr(this.scanner.source,this.scanner.tokenStart,117)&&lr(this.scanner.source,this.scanner.tokenStart+1,br)?this.UnicodeRange():this.Identifier()}},Er={getNode:Cr},Tr=Gn.TYPE,Ar=Tr.Identifier,Nr=Tr.Number,Mr=Tr.NumberSign,Or=Tr.LeftSquareBracket,Dr=Tr.PlusSign,Rr=Tr.Solidus,Pr=Tr.Asterisk,Ir=Tr.FullStop,Lr=Tr.Colon,Br=Tr.GreaterThanSign,Vr=Tr.VerticalLine,Fr=Tr.Tilde,zr={getNode:function(e){switch(this.scanner.tokenType){case Dr:case Br:case Fr:return e.space=null,e.ignoreWSAfter=!0,this.Combinator();case Rr:return this.Combinator();case Ir:return this.ClassSelector();case Or:return this.AttributeSelector();case Mr:return this.IdSelector();case Lr:return this.scanner.lookupType(1)===Lr?this.PseudoElementSelector():this.PseudoClassSelector();case Ar:case Pr:case Vr:return this.TypeSelector();case Nr:return this.Percentage()}}},qr=function(){this.scanner.skipSC();var e=this.IdSelector();return this.scanner.skipSC(),(new nr).appendData(e)},jr=Gn.TYPE,Ur=jr.Identifier,Wr=jr.Comma,Hr=jr.Semicolon,Kr=jr.HyphenMinus,Jr=jr.ExclamationMark,Yr={AtruleExpression:Er,Selector:zr,Value:{getNode:Cr,"-moz-element":qr,element:qr,expression:function(){return(new nr).appendData(this.Raw(this.scanner.currentToken,0,0,!1,!1))},var:function(){var e=new nr;this.scanner.skipSC();var t=this.scanner.tokenStart;return this.scanner.eat(Kr),this.scanner.source.charCodeAt(this.scanner.tokenStart)!==Kr&&this.scanner.error("HyphenMinus is expected"),this.scanner.eat(Ur),e.appendData({type:"Identifier",loc:this.getLocation(t,this.scanner.tokenStart),name:this.scanner.substrToCursor(t)}),this.scanner.skipSC(),this.scanner.tokenType===Wr&&(e.appendData(this.Operator()),e.appendData(this.parseCustomProperty?this.Value(null):this.Raw(this.scanner.currentToken,Jr,Hr,!1,!1))),e}}},Gr=Gn.TYPE,Xr=Gr.String,Qr=Gr.Identifier,Zr=Gr.Url,ei=Gr.LeftParenthesis,ti={parse:{expression:function(){var e=new nr;switch(this.scanner.skipSC(),this.scanner.tokenType){case Xr:e.appendData(this.String());break;case Zr:e.appendData(this.Url());break;default:this.scanner.error("String or url() is expected")}return this.scanner.lookupNonWSType(0)!==Qr&&this.scanner.lookupNonWSType(0)!==ei||(e.appendData(this.WhiteSpace()),e.appendData(this.MediaQueryList())),e},block:null}},ni={parse:{expression:function(){return(new nr).appendData(this.MediaQueryList())},block:function(){return this.Block(this.Rule)}}},ri=Gn.TYPE.LeftCurlyBracket,ii={parse:{expression:function(){return this.scanner.lookupNonWSType(0)===ri?null:(new nr).appendData(this.SelectorList())},block:function(){return this.Block(this.Declaration)}}},oi=Gn.TYPE,si=oi.WhiteSpace,ai=oi.Comment,ci=oi.Identifier,li=oi.Function,hi=oi.LeftParenthesis,pi=oi.HyphenMinus,ui=oi.Colon;function di(){return(new nr).appendData(this.Raw(this.scanner.currentToken,0,0,!1,!1))}function fi(){var e=0;return this.scanner.skipSC(),this.scanner.tokenType===ci?e=1:this.scanner.tokenType===pi&&this.scanner.lookupType(1)===ci&&(e=2),0!==e&&this.scanner.lookupNonWSType(e)===ui?(new nr).appendData(this.Declaration()):mi.call(this)}function mi(){var e,t=new nr,n=null;this.scanner.skipSC();e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case si:n=this.WhiteSpace();continue;case ai:this.scanner.next();continue;case li:e=this.Function(di,this.scope.AtruleExpression);break;case ci:e=this.Identifier();break;case hi:e=this.Parentheses(fi,this.scope.AtruleExpression);break;default:break e}null!==n&&(t.appendData(n),n=null),t.appendData(e)}return t}var gi={"font-face":{parse:{expression:null,block:function(){return this.Block(this.Declaration)}}},import:ti,media:ni,page:ii,supports:{parse:{expression:function(){var e=mi.call(this);return e.isEmpty()&&this.scanner.error("Condition is expected"),e},block:function(){return this.Block(this.Rule)}}}},vi={parse:function(){return(new nr).appendData(this.SelectorList())}},yi={parse:function(){return(new nr).appendData(this.Nth(!0))}},bi={parse:function(){return(new nr).appendData(this.Nth(!1))}},wi={dir:{parse:function(){return(new nr).appendData(this.Identifier())}},has:{parse:function(){return(new nr).appendData(this.SelectorList())}},lang:{parse:function(){return(new nr).appendData(this.Identifier())}},matches:vi,not:vi,"nth-child":yi,"nth-last-child":yi,"nth-last-of-type":bi,"nth-of-type":bi,slotted:{parse:function(){return(new nr).appendData(this.Selector())}}},xi=Gn.cmpChar,ki=Gn.isNumber,_i=Gn.TYPE,Si=_i.Identifier,$i=_i.Number,Ci=_i.PlusSign,Ei=_i.HyphenMinus;function Ti(e,t){var n=e.tokenStart;for(e.source.charCodeAt(n)!==Ci&&e.source.charCodeAt(n)!==Ei||(t&&e.error(),n++);n<e.tokenEnd;n++)ki(e.source.charCodeAt(n))||e.error("Unexpected input",n)}var Ai={name:"AnPlusB",structure:{a:[String,null],b:[String,null]},parse:function(){var e=this.scanner.tokenStart,t=e,n="",r=null,i=null;if(this.scanner.tokenType!==$i&&this.scanner.tokenType!==Ci||(Ti(this.scanner,!1),n=this.scanner.getTokenValue(),this.scanner.next(),t=this.scanner.tokenStart),this.scanner.tokenType===Si){var o=this.scanner.tokenStart;xi(this.scanner.source,o,Ei)&&(""===n?(n="-",o++):this.scanner.error("Unexpected hyphen minus")),xi(this.scanner.source,o,110)||this.scanner.error(),r=""===n?"1":"+"===n?"+1":"-"===n?"-1":n;var s=this.scanner.tokenEnd-o;s>1?(this.scanner.source.charCodeAt(o+1)!==Ei&&this.scanner.error("Unexpected input",o+1),s>2?this.scanner.tokenStart=o+2:(this.scanner.next(),this.scanner.skipSC()),Ti(this.scanner,!0),i="-"+this.scanner.getTokenValue(),this.scanner.next(),t=this.scanner.tokenStart):(n="",this.scanner.next(),t=this.scanner.tokenStart,this.scanner.skipSC(),this.scanner.tokenType!==Ei&&this.scanner.tokenType!==Ci||(n=this.scanner.getTokenValue(),this.scanner.next(),this.scanner.skipSC()),this.scanner.tokenType===$i?(Ti(this.scanner,""!==n),ki(this.scanner.source.charCodeAt(this.scanner.tokenStart))||(n=this.scanner.source.charAt(this.scanner.tokenStart),this.scanner.tokenStart++),""===n?this.scanner.error():"+"===n&&(n=""),i=n+this.scanner.getTokenValue(),this.scanner.next(),t=this.scanner.tokenStart):n&&this.scanner.eat($i))}else""!==n&&"+"!==n||this.scanner.error("Number or identifier is expected",this.scanner.tokenStart+(this.scanner.tokenType===Ci||this.scanner.tokenType===Ei)),i=n;return{type:"AnPlusB",loc:this.getLocation(e,t),a:r,b:i}},generate:function(e,t){var n=null!==t.a&&void 0!==t.a,r=null!==t.b&&void 0!==t.b;n?(e("+1"===t.a?"+n":"1"===t.a?"n":"-1"===t.a?"-n":t.a+"n"),r&&("-"===(r=String(t.b)).charAt(0)||"+"===r.charAt(0)?(e(r.charAt(0)),e(r.substr(1))):(e("+"),e(r)))):e(String(t.b))}},Ni=Gn.TYPE,Mi=Ni.Atrule,Oi=Ni.Semicolon,Di=Ni.LeftCurlyBracket,Ri=Ni.RightCurlyBracket;function Pi(){for(var e,t=1;e=this.scanner.lookupType(t);t++){if(e===Ri)return!0;if(e===Di||e===Mi)return!1}this.scanner.skip(t),this.scanner.eat(Ri)}var Ii={name:"Atrule",structure:{name:String,expression:["AtruleExpression",null],block:["Block",null]},parse:function(){var e,t,n=this.scanner.tokenStart,r=null,i=null;if(this.scanner.eat(Mi),t=(e=this.scanner.substrToCursor(n+1)).toLowerCase(),this.scanner.skipSC(),null===(r=this.AtruleExpression(e)).children.head&&(r=null),this.scanner.skipSC(),this.atrule.hasOwnProperty(t))"function"==typeof this.atrule[t].block?(this.scanner.tokenType!==Di&&this.scanner.error("Curly bracket is expected"),i=this.atrule[t].block.call(this)):this.tolerant&&this.scanner.eof||this.scanner.eat(Oi);else switch(this.scanner.tokenType){case Oi:this.scanner.next();break;case Di:i=this.Block(Pi.call(this)?this.Declaration:this.Rule);break;default:this.tolerant||this.scanner.error("Semicolon or block is expected")}return{type:"Atrule",loc:this.getLocation(n,this.scanner.tokenStart),name:e,expression:r,block:i}},generate:function(e,t){e("@"),e(t.name),null!==t.expression&&(e(" "),this.generate(e,t.expression)),t.block?this.generate(e,t.block):e(";")},walkContext:"atrule"},Li=Gn.TYPE,Bi=Li.Semicolon,Vi=Li.LeftCurlyBracket;function Fi(e){return(new nr).appendData(this.Raw(e,Bi,Vi,!1,!0))}function zi(){return this.readSequence(this.scope.AtruleExpression)}var qi={name:"AtruleExpression",structure:{children:[[]]},parse:function(e){var t=null,n=this.scanner.currentToken;return null!==e&&(e=e.toLowerCase()),this.parseAtruleExpression?(this.atrule.hasOwnProperty(e)?"function"==typeof this.atrule[e].expression&&(t=this.tolerantParse(this.atrule[e].expression,Fi)):(this.scanner.skipSC(),t=this.tolerantParse(zi,Fi)),this.tolerant&&(this.scanner.eof||this.scanner.tokenType!==Bi&&this.scanner.tokenType!==Vi)&&(t=Fi.call(this,n))):t=Fi.call(this,n),null===t&&(t=new nr),{type:"AtruleExpression",loc:this.getLocationFromList(t),children:t}},generate:function(e,t){this.each(e,t)},walkContext:"atruleExpression"},ji=Gn.TYPE,Ui=ji.Identifier,Wi=ji.String,Hi=ji.DollarSign,Ki=ji.Asterisk,Ji=ji.Colon,Yi=ji.EqualsSign,Gi=ji.LeftSquareBracket,Xi=ji.RightSquareBracket,Qi=ji.CircumflexAccent,Zi=ji.VerticalLine,eo=ji.Tilde;function to(){this.scanner.eof&&this.scanner.error("Unexpected end of input");var e=this.scanner.tokenStart,t=!1,n=!0;return this.scanner.tokenType===Ki?(t=!0,n=!1,this.scanner.next()):this.scanner.tokenType!==Zi&&this.scanner.eat(Ui),this.scanner.tokenType===Zi?this.scanner.lookupType(1)!==Yi?(this.scanner.next(),this.scanner.eat(Ui)):t&&this.scanner.error("Identifier is expected",this.scanner.tokenEnd):t&&this.scanner.error("Vertical line is expected"),n&&this.scanner.tokenType===Ji&&(this.scanner.next(),this.scanner.eat(Ui)),{type:"Identifier",loc:this.getLocation(e,this.scanner.tokenStart),name:this.scanner.substrToCursor(e)}}function no(){var e=this.scanner.tokenStart,t=this.scanner.tokenType;return t!==Yi&&t!==eo&&t!==Qi&&t!==Hi&&t!==Ki&&t!==Zi&&this.scanner.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),t===Yi?this.scanner.next():(this.scanner.next(),this.scanner.eat(Yi)),this.scanner.substrToCursor(e)}var ro={name:"AttributeSelector",structure:{name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]},parse:function(){var e,t=this.scanner.tokenStart,n=null,r=null,i=null;return this.scanner.eat(Gi),this.scanner.skipSC(),e=to.call(this),this.scanner.skipSC(),this.scanner.tokenType!==Xi&&(this.scanner.tokenType!==Ui&&(n=no.call(this),this.scanner.skipSC(),r=this.scanner.tokenType===Wi?this.String():this.Identifier(),this.scanner.skipSC()),this.scanner.tokenType===Ui&&(i=this.scanner.getTokenValue(),this.scanner.next(),this.scanner.skipSC())),this.scanner.eat(Xi),{type:"AttributeSelector",loc:this.getLocation(t,this.scanner.tokenStart),name:e,matcher:n,value:r,flags:i}},generate:function(e,t){var n=" ";e("["),this.generate(e,t.name),null!==t.matcher&&(e(t.matcher),null!==t.value&&(this.generate(e,t.value),"String"===t.value.type&&(n=""))),null!==t.flags&&(e(n),e(t.flags)),e("]")}},io=Gn.TYPE,oo=io.WhiteSpace,so=io.Comment,ao=io.Semicolon,co=io.Atrule,lo=io.LeftCurlyBracket,ho=io.RightCurlyBracket;function po(e){return this.Raw(e,0,ao,!0,!0)}var uo={name:"Block",structure:{children:[["Atrule","Rule","Declaration"]]},parse:function(e){e||(e=this.Declaration);var t=this.scanner.tokenStart,n=new nr;this.scanner.eat(lo);e:for(;!this.scanner.eof;)switch(this.scanner.tokenType){case ho:break e;case oo:case so:case ao:this.scanner.next();break;case co:n.appendData(this.tolerantParse(this.Atrule,po));break;default:n.appendData(this.tolerantParse(e,po))}return this.tolerant&&this.scanner.eof||this.scanner.eat(ho),{type:"Block",loc:this.getLocation(t,this.scanner.tokenStart),children:n}},generate:function(e,t){e("{"),this.each(e,t),e("}")},walkContext:"block"},fo=Gn.TYPE,mo=fo.LeftSquareBracket,go=fo.RightSquareBracket,vo={name:"Brackets",structure:{children:[[]]},parse:function(e,t){var n,r=this.scanner.tokenStart;return this.scanner.eat(mo),n=e.call(this,t),this.scanner.eat(go),{type:"Brackets",loc:this.getLocation(r,this.scanner.tokenStart),children:n}},generate:function(e,t){e("["),this.each(e,t),e("]")}},yo=Gn.TYPE.CDC,bo={name:"CDC",structure:[],parse:function(){var e=this.scanner.tokenStart;return this.scanner.eat(yo),{type:"CDC",loc:this.getLocation(e,this.scanner.tokenStart)}},generate:function(e){e("--\x3e")}},wo=Gn.TYPE.CDO,xo={name:"CDO",structure:[],parse:function(){var e=this.scanner.tokenStart;return this.scanner.eat(wo),{type:"CDO",loc:this.getLocation(e,this.scanner.tokenStart)}},generate:function(e){e("\x3c!--")}},ko=Gn.TYPE,_o=ko.Identifier,So=ko.FullStop,$o={name:"ClassSelector",structure:{name:String},parse:function(){return this.scanner.eat(So),{type:"ClassSelector",loc:this.getLocation(this.scanner.tokenStart-1,this.scanner.tokenEnd),name:this.scanner.consume(_o)}},generate:function(e,t){e("."),e(t.name)}},Co=Gn.TYPE,Eo=Co.PlusSign,To=Co.Solidus,Ao=Co.GreaterThanSign,No=Co.Tilde,Mo={name:"Combinator",structure:{name:String},parse:function(){var e=this.scanner.tokenStart;switch(this.scanner.tokenType){case Ao:case Eo:case No:this.scanner.next();break;case To:this.scanner.next(),this.scanner.expectIdentifier("deep"),this.scanner.eat(To);break;default:this.scanner.error("Combinator is expected")}return{type:"Combinator",loc:this.getLocation(e,this.scanner.tokenStart),name:this.scanner.substrToCursor(e)}},generate:function(e,t){e(t.name)}},Oo=Gn.TYPE,Do=Oo.Asterisk,Ro=Oo.Solidus,Po={name:"Comment",structure:{value:String},parse:function(){var e=this.scanner.tokenStart,t=this.scanner.tokenEnd;return t-e+2>=2&&this.scanner.source.charCodeAt(t-2)===Do&&this.scanner.source.charCodeAt(t-1)===Ro&&(t-=2),this.scanner.next(),{type:"Comment",loc:this.getLocation(e,this.scanner.tokenStart),value:this.scanner.source.substring(e+2,t)}},generate:function(e,t){e("/*"),e(t.value),e("*/")}},Io=Gn.TYPE,Lo=Io.Identifier,Bo=Io.Colon,Vo=Io.ExclamationMark,Fo=Io.Solidus,zo=Io.Asterisk,qo=Io.DollarSign,jo=Io.HyphenMinus,Uo=Io.Semicolon,Wo=Io.RightCurlyBracket,Ho=Io.RightParenthesis,Ko=Io.PlusSign,Jo=Io.NumberSign,Yo={name:"Declaration",structure:{important:[Boolean,String],property:String,value:["Value","Raw"]},parse:function(){var e,t,n=this.scanner.tokenStart,r=Go.call(this),i=!1;return this.scanner.skipSC(),this.scanner.eat(Bo),e=((t=r).length>=2&&t.charCodeAt(0)===jo&&t.charCodeAt(1)===jo?this.parseCustomProperty:this.parseValue)?this.Value(r):this.Raw(this.scanner.currentToken,Vo,Uo,!1,!1),this.scanner.tokenType===Vo&&(i=function(e){e.eat(Vo),e.skipSC();var t=e.consume(Lo);return"important"===t||t}(this.scanner),this.scanner.skipSC()),this.scanner.eof||this.scanner.tokenType===Uo||this.scanner.tokenType===Ho||this.scanner.tokenType===Wo||this.scanner.error(),{type:"Declaration",loc:this.getLocation(n,this.scanner.tokenStart),important:i,property:r,value:e}},generate:function(e,t,n){e(t.property),e(":"),this.generate(e,t.value),t.important&&e(!0===t.important?"!important":"!"+t.important),n&&n.next&&e(";")},walkContext:"declaration"};function Go(){var e=this.scanner.tokenStart,t=0;switch(this.scanner.tokenType){case zo:case qo:case Ko:case Jo:t=1;break;case Fo:t=this.scanner.lookupType(1)===Fo?2:1}return this.scanner.lookupType(t)===jo&&t++,t&&this.scanner.skip(t),this.scanner.eat(Lo),this.scanner.substrToCursor(e)}var Xo=Gn.TYPE,Qo=Xo.WhiteSpace,Zo=Xo.Comment,es=Xo.Semicolon;function ts(e){return this.Raw(e,0,es,!0,!0)}var ns={name:"DeclarationList",structure:{children:[["Declaration"]]},parse:function(){for(var e=new nr;!this.scanner.eof;)switch(this.scanner.tokenType){case Qo:case Zo:case es:this.scanner.next();break;default:e.appendData(this.tolerantParse(this.Declaration,ts))}return{type:"DeclarationList",loc:this.getLocationFromList(e),children:e}},generate:function(e,t){this.each(e,t)}},rs=Gn.TYPE.Number,is={name:"Dimension",structure:{value:String,unit:String},parse:function(){var e=this.scanner.tokenStart,t=this.scanner.consume(rs),n=function(e){var t=e.getTokenValue(),n=t.indexOf("\\");return n>0?(e.tokenStart+=n,t.substring(0,n)):(e.next(),t)}(this.scanner);return{type:"Dimension",loc:this.getLocation(e,this.scanner.tokenStart),value:t,unit:n}},generate:function(e,t){e(t.value),e(t.unit)}},os=Gn.TYPE.RightParenthesis,ss={name:"Function",structure:{name:String,children:[[]]},parse:function(e,t){var n,r=this.scanner.tokenStart,i=this.scanner.consumeFunctionName(),o=i.toLowerCase();return n=t.hasOwnProperty(o)?t[o].call(this,t):e.call(this,t),this.scanner.eat(os),{type:"Function",loc:this.getLocation(r,this.scanner.tokenStart),name:i,children:n}},generate:function(e,t){e(t.name),e("("),this.each(e,t),e(")")},walkContext:"function"},as=Gn.isHex,cs=Gn.TYPE,ls=cs.Identifier,hs=cs.Number,ps=cs.NumberSign;function us(e,t){if(!as(e.source.charCodeAt(e.tokenStart))){if(!t)return;e.error("Unexpected input",e.tokenStart)}for(var n=e.tokenStart+1;n<e.tokenEnd;n++){var r=e.source.charCodeAt(n);if(!as(r))return void(e.tokenStart=n)}e.next()}var ds={name:"HexColor",structure:{value:String},parse:function(){var e=this.scanner.tokenStart;switch(this.scanner.eat(ps),this.scanner.tokenType){case hs:us(this.scanner,!0),this.scanner.tokenType===ls&&us(this.scanner,!1);break;case ls:us(this.scanner,!0);break;default:this.scanner.error("Number or identifier is expected")}return{type:"HexColor",loc:this.getLocation(e,this.scanner.tokenStart),value:this.scanner.substrToCursor(e+1)}},generate:function(e,t){e("#"),e(t.value)}},fs=Gn.TYPE.Identifier,ms={name:"Identifier",structure:{name:String},parse:function(){return{type:"Identifier",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),name:this.scanner.consume(fs)}},generate:function(e,t){e(t.name)}},gs=Gn.TYPE,vs=gs.Identifier,ys=gs.NumberSign,bs={name:"IdSelector",structure:{name:String},parse:function(){return this.scanner.eat(ys),{type:"IdSelector",loc:this.getLocation(this.scanner.tokenStart-1,this.scanner.tokenEnd),name:this.scanner.consume(vs)}},generate:function(e,t){e("#"),e(t.name)}},ws=Gn.TYPE,xs=ws.Identifier,ks=ws.Number,_s=ws.LeftParenthesis,Ss=ws.RightParenthesis,$s=ws.Colon,Cs=ws.Solidus,Es={name:"MediaFeature",structure:{name:String,value:["Identifier","Number","Dimension","Ratio",null]},parse:function(){var e,t=this.scanner.tokenStart,n=null;if(this.scanner.eat(_s),this.scanner.skipSC(),e=this.scanner.consume(xs),this.scanner.skipSC(),this.scanner.tokenType!==Ss){switch(this.scanner.eat($s),this.scanner.skipSC(),this.scanner.tokenType){case ks:n=this.scanner.lookupType(1)===xs?this.Dimension():this.scanner.lookupNonWSType(1)===Cs?this.Ratio():this.Number();break;case xs:n=this.Identifier();break;default:this.scanner.error("Number, dimension, ratio or identifier is expected")}this.scanner.skipSC()}return this.scanner.eat(Ss),{type:"MediaFeature",loc:this.getLocation(t,this.scanner.tokenStart),name:e,value:n}},generate:function(e,t){e("("),e(t.name),null!==t.value&&(e(":"),this.generate(e,t.value)),e(")")}},Ts=Gn.TYPE,As=Ts.WhiteSpace,Ns=Ts.Comment,Ms=Ts.Identifier,Os=Ts.LeftParenthesis,Ds={name:"MediaQuery",structure:{children:[["Identifier","MediaFeature","WhiteSpace"]]},parse:function(){this.scanner.skipSC();var e=new nr,t=null,n=null;e:for(;!this.scanner.eof;){switch(this.scanner.tokenType){case Ns:this.scanner.next();continue;case As:n=this.WhiteSpace();continue;case Ms:t=this.Identifier();break;case Os:t=this.MediaFeature();break;default:break e}null!==n&&(e.appendData(n),n=null),e.appendData(t)}return null===t&&this.scanner.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(e),children:e}},generate:function(e,t){this.each(e,t)}},Rs=Gn.TYPE.Comma,Ps={name:"MediaQueryList",structure:{children:[["MediaQuery"]]},parse:function(e){var t=new nr;for(this.scanner.skipSC();!this.scanner.eof&&(t.appendData(this.MediaQuery(e)),this.scanner.tokenType===Rs);)this.scanner.next();return{type:"MediaQueryList",loc:this.getLocationFromList(t),children:t}},generate:function(e,t){this.eachComma(e,t)}},Is=Gn.TYPE.Number,Ls={name:"Number",structure:{value:String},parse:function(){return{type:"Number",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.scanner.consume(Is)}},generate:function(e,t){e(t.value)}},Bs={name:"Operator",structure:{value:String},parse:function(){var e=this.scanner.tokenStart;return this.scanner.next(),{type:"Operator",loc:this.getLocation(e,this.scanner.tokenStart),value:this.scanner.substrToCursor(e)}},generate:function(e,t){e(t.value)}},Vs=Gn.TYPE,Fs=Vs.LeftParenthesis,zs=Vs.RightParenthesis,qs={name:"Parentheses",structure:{children:[[]]},parse:function(e,t){var n,r=this.scanner.tokenStart;return this.scanner.eat(Fs),n=e.call(this,t),this.scanner.eat(zs),{type:"Parentheses",loc:this.getLocation(r,this.scanner.tokenStart),children:n}},generate:function(e,t){e("("),this.each(e,t),e(")")}},js=Gn.TYPE,Us=js.Number,Ws=js.PercentSign,Hs={name:"Percentage",structure:{value:String},parse:function(){var e=this.scanner.tokenStart,t=this.scanner.consume(Us);return this.scanner.eat(Ws),{type:"Percentage",loc:this.getLocation(e,this.scanner.tokenStart),value:t}},generate:function(e,t){e(t.value),e("%")}},Ks=Gn.TYPE,Js=Ks.Identifier,Ys=Ks.Function,Gs=Ks.Colon,Xs=Ks.RightParenthesis,Qs={name:"PseudoClassSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var e,t,n=this.scanner.tokenStart,r=null;return this.scanner.eat(Gs),this.scanner.tokenType===Ys?(t=(e=this.scanner.consumeFunctionName()).toLowerCase(),this.pseudo.hasOwnProperty(t)?(this.scanner.skipSC(),r=this.pseudo[t].call(this),this.scanner.skipSC()):r=(new nr).appendData(this.Raw(this.scanner.currentToken,0,0,!1,!1)),this.scanner.eat(Xs)):e=this.scanner.consume(Js),{type:"PseudoClassSelector",loc:this.getLocation(n,this.scanner.tokenStart),name:e,children:r}},generate:function(e,t){e(":"),e(t.name),null!==t.children&&(e("("),this.each(e,t),e(")"))},walkContext:"function"},Zs=Gn.TYPE,ea=Zs.Identifier,ta=Zs.Function,na=Zs.Colon,ra=Zs.RightParenthesis,ia={name:"PseudoElementSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){var e,t,n=this.scanner.tokenStart,r=null;return this.scanner.eat(na),this.scanner.eat(na),this.scanner.tokenType===ta?(t=(e=this.scanner.consumeFunctionName()).toLowerCase(),this.pseudo.hasOwnProperty(t)?(this.scanner.skipSC(),r=this.pseudo[t].call(this),this.scanner.skipSC()):r=(new nr).appendData(this.Raw(this.scanner.currentToken,0,0,!1,!1)),this.scanner.eat(ra)):e=this.scanner.consume(ea),{type:"PseudoElementSelector",loc:this.getLocation(n,this.scanner.tokenStart),name:e,children:r}},generate:function(e,t){e("::"),e(t.name),null!==t.children&&(e("("),this.each(e,t),e(")"))},walkContext:"function"},oa=Gn.isNumber,sa=Gn.TYPE,aa=sa.Number,ca=sa.Solidus,la=sa.FullStop;function ha(e){for(var t=e.consumeNonWS(aa),n=0;n<t.length;n++){var r=t.charCodeAt(n);oa(r)||r===la||e.error("Unsigned number is expected",e.tokenStart-t.length+n)}return 0===Number(t)&&e.error("Zero number is not allowed",e.tokenStart-t.length),t}var pa={name:"Ratio",structure:{left:String,right:String},parse:function(){var e,t=this.scanner.tokenStart,n=ha(this.scanner);return this.scanner.eatNonWS(ca),e=ha(this.scanner),{type:"Ratio",loc:this.getLocation(t,this.scanner.tokenStart),left:n,right:e}},generate:function(e,t){e(t.left),e("/"),e(t.right)}},ua={name:"Raw",structure:{value:String},parse:function(e,t,n,r,i){var o,s=this.scanner.getTokenStart(e);return this.scanner.skip(this.scanner.getRawLength(e,t,n,r)),o=i&&this.scanner.tokenStart>s?this.scanner.getOffsetExcludeWS():this.scanner.tokenStart,{type:"Raw",loc:this.getLocation(s,o),value:this.scanner.source.substring(s,o)}},generate:function(e,t){e(t.value)}},da=Gn.TYPE.LeftCurlyBracket;function fa(e){return this.Raw(e,da,0,!1,!0)}var ma={name:"Rule",structure:{selector:["SelectorList","Raw"],block:["Block"]},parse:function(){var e=this.scanner.currentToken,t=this.scanner.tokenStart,n=this.parseSelector?this.tolerantParse(this.SelectorList,fa):fa.call(this,e),r=this.Block(this.Declaration);return{type:"Rule",loc:this.getLocation(t,this.scanner.tokenStart),selector:n,block:r}},generate:function(e,t){this.generate(e,t.selector),this.generate(e,t.block)},walkContext:"rule"},ga=Gn.TYPE,va=ga.Comma,ya=ga.LeftCurlyBracket,ba={name:"SelectorList",structure:{children:[["Selector","Raw"]]},parse:function(){for(var e=new nr;!this.scanner.eof&&(e.appendData(this.parseSelector?this.Selector():this.Raw(this.scanner.currentToken,va,ya,!1,!1)),this.scanner.tokenType===va);)this.scanner.next();return{type:"SelectorList",loc:this.getLocationFromList(e),children:e}},generate:function(e,t){this.eachComma(e,t)},walkContext:"selector"},wa=Gn.TYPE.String,xa={name:"String",structure:{value:String},parse:function(){return{type:"String",loc:this.getLocation(this.scanner.tokenStart,this.scanner.tokenEnd),value:this.scanner.consume(wa)}},generate:function(e,t){e(t.value)}},ka=Gn.TYPE,_a=ka.WhiteSpace,Sa=ka.Comment,$a=ka.ExclamationMark,Ca=ka.Atrule,Ea=ka.CDO,Ta=ka.CDC;function Aa(e){return this.Raw(e,0,0,!1,!1)}var Na={name:"StyleSheet",structure:{children:[["Comment","Atrule","Rule","Raw"]]},parse:function(){for(var e,t=this.scanner.tokenStart,n=new nr;!this.scanner.eof;){switch(this.scanner.tokenType){case _a:this.scanner.next();continue;case Sa:if(this.scanner.source.charCodeAt(this.scanner.tokenStart+2)!==$a){this.scanner.next();continue}e=this.Comment();break;case Ea:e=this.CDO();break;case Ta:e=this.CDC();break;case Ca:e=this.Atrule();break;default:e=this.tolerantParse(this.Rule,Aa)}n.appendData(e)}return{type:"StyleSheet",loc:this.getLocation(t,this.scanner.tokenStart),children:n}},generate:function(e,t){this.each(e,t)},walkContext:"stylesheet"},Ma=Gn.TYPE,Oa=Ma.Identifier,Da=Ma.Asterisk,Ra=Ma.VerticalLine;function Pa(){this.scanner.tokenType!==Oa&&this.scanner.tokenType!==Da&&this.scanner.error("Identifier or asterisk is expected"),this.scanner.next()}var Ia={name:"TypeSelector",structure:{name:String},parse:function(){var e=this.scanner.tokenStart;return this.scanner.tokenType===Ra?(this.scanner.next(),Pa.call(this)):(Pa.call(this),this.scanner.tokenType===Ra&&(this.scanner.next(),Pa.call(this))),{type:"TypeSelector",loc:this.getLocation(e,this.scanner.tokenStart),name:this.scanner.substrToCursor(e)}},generate:function(e,t){e(t.name)}},La=Gn.isHex,Ba=Gn.TYPE,Va=Ba.Identifier,Fa=Ba.Number,za=Ba.PlusSign,qa=Ba.HyphenMinus,ja=Ba.FullStop,Ua=Ba.QuestionMark;function Wa(e){var t=e.tokenStart+1,n=0;e:{if(e.tokenType===Fa){if(e.source.charCodeAt(e.tokenStart)!==ja&&function(e){for(var t=e.tokenStart+1;t<e.tokenEnd;t++){var n=e.source.charCodeAt(t);if(n===ja||n===za)return e.tokenStart=t,!1}return!0}(e))e.next();else if(e.source.charCodeAt(e.tokenStart)!==qa)break e}else e.next();e.tokenType===qa&&e.next(),e.tokenType===Fa&&e.next(),e.tokenType===Va&&e.next(),e.tokenStart===t&&e.error("Unexpected input",t)}for(var r=t,i=!1;r<e.tokenStart;r++){var o=e.source.charCodeAt(r);!1!==La(o)||o===qa&&!i||e.error("Unexpected input",r),o===qa?(0===n&&e.error("Unexpected input",r),i=!0,n=0):++n>6&&e.error("Too long hex sequence",r)}if(0===n&&e.error("Unexpected input",r-1),!i)for(;n<6&&!e.eof&&e.tokenType===Ua;e.next())n++}var Ha={name:"UnicodeRange",structure:{value:String},parse:function(){var e=this.scanner.tokenStart;return this.scanner.next(),Wa(this.scanner),{type:"UnicodeRange",loc:this.getLocation(e,this.scanner.tokenStart),value:this.scanner.substrToCursor(e)}},generate:function(e,t){e(t.value)}},Ka=Gn.TYPE,Ja=Ka.String,Ya=Ka.Url,Ga=Ka.Raw,Xa=Ka.RightParenthesis,Qa={name:"Url",structure:{value:["String","Raw"]},parse:function(){var e,t=this.scanner.tokenStart;switch(this.scanner.eat(Ya),this.scanner.skipSC(),this.scanner.tokenType){case Ja:e=this.String();break;case Ga:e=this.Raw(this.scanner.currentToken,0,Ga,!0,!1);break;default:this.scanner.error("String or Raw is expected")}return this.scanner.skipSC(),this.scanner.eat(Xa),{type:"Url",loc:this.getLocation(t,this.scanner.tokenStart),value:e}},generate:function(e,t){e("url"),e("("),this.generate(e,t.value),e(")")}},Za=Gn.endsWith,ec=Gn.TYPE,tc=ec.WhiteSpace,nc=ec.Comment,rc=ec.Function,ic=ec.Colon,oc=ec.Semicolon,sc=ec.ExclamationMark,ac={name:"Value",structure:{children:[[]]},parse:function(e){if(null!==e&&Za(e,"filter")&&function(e){for(var t,n=0;(t=e.lookupType(n))&&(t===tc||t===nc);n++);if(e.lookupValue(n,"alpha(")||e.lookupValue(n,"chroma(")||e.lookupValue(n,"dropshadow(")){if(e.lookupType(n)!==rc)return!1}else if(!1===e.lookupValue(n,"progid")||e.lookupType(n+1)!==ic)return!1;return!0}(this.scanner))return this.scanner.skipSC(),this.Raw(this.scanner.currentToken,sc,oc,!1,!1);var t=this.scanner.tokenStart,n=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(t,this.scanner.tokenStart),children:n}},generate:function(e,t){this.each(e,t)}},cc=Gn.TYPE.WhiteSpace,lc=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),hc=function(e){var t={scanner:new Gn,filename:"<unknown>",needPositions:!1,tolerant:!1,onParseError:ar,parseAtruleExpression:!0,parseSelector:!0,parseValue:!0,parseCustomProperty:!1,readSequence:sr,tolerantParse:function(e,t){if(!this.tolerant)return e.call(this);var n=this.scanner.currentToken;try{return e.call(this)}catch(e){return this.onParseError(e),t.call(this,n)}},getLocation:function(e,t){return this.needPositions?this.scanner.getLocationRange(e,t,this.filename):null},getLocationFromList:function(e){return this.needPositions?this.scanner.getLocationRange(null!==e.head?e.first().loc.start.offset-this.scanner.startOffset:this.scanner.tokenStart,null!==e.head?e.last().loc.end.offset-this.scanner.startOffset:this.scanner.tokenStart,this.filename):null}};for(var n in e=function(e){var t={context:{},scope:{},atrule:{},pseudo:{}};if(e.parseContext)for(var n in e.parseContext)switch(typeof e.parseContext[n]){case"function":t.context[n]=e.parseContext[n];break;case"string":t.context[n]=cr(e.parseContext[n])}if(e.scope)for(var n in e.scope)t.scope[n]=e.scope[n];if(e.atrule)for(var n in e.atrule){var r=e.atrule[n];r.parse&&(t.atrule[n]=r.parse)}if(e.pseudo)for(var n in e.pseudo){var i=e.pseudo[n];i.parse&&(t.pseudo[n]=i.parse)}if(e.node)for(var n in e.node)t[n]=e.node[n].parse;return t}(e||{}))t[n]=e[n];return function(e,n){var r,i=(n=n||{}).context||"default";if(t.scanner.setSource(e,n.offset,n.line,n.column),t.filename=n.filename||"<unknown>",t.needPositions=Boolean(n.positions),t.tolerant=Boolean(n.tolerant),t.onParseError="function"==typeof n.onParseError?n.onParseError:ar,t.parseAtruleExpression=!("parseAtruleExpression"in n)||Boolean(n.parseAtruleExpression),t.parseSelector=!("parseSelector"in n)||Boolean(n.parseSelector),t.parseValue=!("parseValue"in n)||Boolean(n.parseValue),t.parseCustomProperty="parseCustomProperty"in n&&Boolean(n.parseCustomProperty),!t.context.hasOwnProperty(i))throw new Error("Unknown context `"+i+"`");return r=t.context[i].call(t,n),t.scanner.eof||t.scanner.error(),r}}({parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atruleExpression:function(e){return this.AtruleExpression(e.atrule?String(e.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block:function(){return this.Block(this.Declaration)},declarationList:"DeclarationList",declaration:"Declaration",value:function(e){return this.Value(e.property?String(e.property):null)}},scope:Yr,atrule:gi,pseudo:wi,node:{AnPlusB:Ai,Atrule:Ii,AtruleExpression:qi,AttributeSelector:ro,Block:uo,Brackets:vo,CDC:bo,CDO:xo,ClassSelector:$o,Combinator:Mo,Comment:Po,Declaration:Yo,DeclarationList:ns,Dimension:is,Function:ss,HexColor:ds,Identifier:ms,IdSelector:bs,MediaFeature:Es,MediaQuery:Ds,MediaQueryList:Ps,Nth:{name:"Nth",structure:{nth:["AnPlusB","Identifier"],selector:["SelectorList",null]},parse:function(e){this.scanner.skipSC();var t,n=this.scanner.tokenStart,r=n,i=null;return t=this.scanner.lookupValue(0,"odd")||this.scanner.lookupValue(0,"even")?this.Identifier():this.AnPlusB(),this.scanner.skipSC(),e&&this.scanner.lookupValue(0,"of")?(this.scanner.next(),i=this.SelectorList(),this.needPositions&&(r=i.children.last().loc.end.offset)):this.needPositions&&(r=t.loc.end.offset),{type:"Nth",loc:this.getLocation(n,r),nth:t,selector:i}},generate:function(e,t){this.generate(e,t.nth),null!==t.selector&&(e(" of "),this.generate(e,t.selector))}},Number:Ls,Operator:Bs,Parentheses:qs,Percentage:Hs,PseudoClassSelector:Qs,PseudoElementSelector:ia,Ratio:pa,Raw:ua,Rule:ma,Selector:{name:"Selector",structure:{children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]},parse:function(){var e=this.readSequence(this.scope.Selector);return e.isEmpty()&&this.scanner.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(e),children:e}},generate:function(e,t){this.each(e,t)}},SelectorList:ba,String:xa,StyleSheet:Na,TypeSelector:Ia,UnicodeRange:Ha,Url:Qa,Value:ac,WhiteSpace:{name:"WhiteSpace",structure:{value:String},parse:function(){return this.scanner.eat(cc),lc},generate:function(e,t){e(t.value)}}}});function pc(e,t){return!!t&&"TypeSelector"===e.type&&"ref"===e.name&&"PseudoClassSelector"===t.type}var uc={CounterClockwiseContourIntegral:8755,ClockwiseContourIntegral:8754,DoubleLongLeftRightArrow:10234,DiacriticalDoubleAcute:733,NotSquareSupersetEqual:8931,CloseCurlyDoubleQuote:8221,DoubleContourIntegral:8751,FilledVerySmallSquare:9642,NegativeVeryThinSpace:8203,NotPrecedesSlantEqual:8928,NotRightTriangleEqual:8941,NotSucceedsSlantEqual:8929,CapitalDifferentialD:8517,DoubleLeftRightArrow:8660,DoubleLongRightArrow:10233,EmptyVerySmallSquare:9643,NestedGreaterGreater:8811,NotDoubleVerticalBar:8742,NotLeftTriangleEqual:8940,NotSquareSubsetEqual:8930,OpenCurlyDoubleQuote:8220,ReverseUpEquilibrium:10607,DoubleLongLeftArrow:10232,DownLeftRightVector:10576,LeftArrowRightArrow:8646,NegativeMediumSpace:8203,RightArrowLeftArrow:8644,SquareSupersetEqual:8850,leftrightsquigarrow:8621,DownRightTeeVector:10591,DownRightVectorBar:10583,LongLeftRightArrow:10231,Longleftrightarrow:10234,NegativeThickSpace:8203,PrecedesSlantEqual:8828,ReverseEquilibrium:8651,RightDoubleBracket:10215,RightDownTeeVector:10589,RightDownVectorBar:10581,RightTriangleEqual:8885,SquareIntersection:8851,SucceedsSlantEqual:8829,blacktriangleright:9656,longleftrightarrow:10231,DoubleUpDownArrow:8661,DoubleVerticalBar:8741,DownLeftTeeVector:10590,DownLeftVectorBar:10582,FilledSmallSquare:9724,GreaterSlantEqual:10878,LeftDoubleBracket:10214,LeftDownTeeVector:10593,LeftDownVectorBar:10585,LeftTriangleEqual:8884,NegativeThinSpace:8203,NotReverseElement:8716,NotTildeFullEqual:8775,RightAngleBracket:10217,RightUpDownVector:10575,SquareSubsetEqual:8849,VerticalSeparator:10072,blacktriangledown:9662,blacktriangleleft:9666,leftrightharpoons:8651,rightleftharpoons:8652,twoheadrightarrow:8608,DiacriticalAcute:180,DiacriticalGrave:96,DiacriticalTilde:732,DoubleRightArrow:8658,DownArrowUpArrow:8693,EmptySmallSquare:9723,GreaterEqualLess:8923,GreaterFullEqual:8807,LeftAngleBracket:10216,LeftUpDownVector:10577,LessEqualGreater:8922,NonBreakingSpace:160,NotRightTriangle:8939,NotSupersetEqual:8841,RightTriangleBar:10704,RightUpTeeVector:10588,RightUpVectorBar:10580,UnderParenthesis:9181,UpArrowDownArrow:8645,circlearrowright:8635,downharpoonright:8642,ntrianglerighteq:8941,rightharpoondown:8641,rightrightarrows:8649,twoheadleftarrow:8606,vartriangleright:8883,CloseCurlyQuote:8217,ContourIntegral:8750,DoubleDownArrow:8659,DoubleLeftArrow:8656,DownRightVector:8641,LeftRightVector:10574,LeftTriangleBar:10703,LeftUpTeeVector:10592,LeftUpVectorBar:10584,LowerRightArrow:8600,NotGreaterEqual:8817,NotGreaterTilde:8821,NotLeftTriangle:8938,OverParenthesis:9180,RightDownVector:8642,ShortRightArrow:8594,UpperRightArrow:8599,bigtriangledown:9661,circlearrowleft:8634,curvearrowright:8631,downharpoonleft:8643,leftharpoondown:8637,leftrightarrows:8646,nLeftrightarrow:8654,nleftrightarrow:8622,ntrianglelefteq:8940,rightleftarrows:8644,rightsquigarrow:8605,rightthreetimes:8908,straightepsilon:1013,trianglerighteq:8885,vartriangleleft:8882,DiacriticalDot:729,DoubleRightTee:8872,DownLeftVector:8637,GreaterGreater:10914,HorizontalLine:9472,InvisibleComma:8291,InvisibleTimes:8290,LeftDownVector:8643,LeftRightArrow:8596,Leftrightarrow:8660,LessSlantEqual:10877,LongRightArrow:10230,Longrightarrow:10233,LowerLeftArrow:8601,NestedLessLess:8810,NotGreaterLess:8825,NotLessGreater:8824,NotSubsetEqual:8840,NotVerticalBar:8740,OpenCurlyQuote:8216,ReverseElement:8715,RightTeeVector:10587,RightVectorBar:10579,ShortDownArrow:8595,ShortLeftArrow:8592,SquareSuperset:8848,TildeFullEqual:8773,UpperLeftArrow:8598,ZeroWidthSpace:8203,curvearrowleft:8630,doublebarwedge:8966,downdownarrows:8650,hookrightarrow:8618,leftleftarrows:8647,leftrightarrow:8596,leftthreetimes:8907,longrightarrow:10230,looparrowright:8620,nshortparallel:8742,ntriangleright:8939,rightarrowtail:8611,rightharpoonup:8640,trianglelefteq:8884,upharpoonright:8638,ApplyFunction:8289,DifferentialD:8518,DoubleLeftTee:10980,DoubleUpArrow:8657,LeftTeeVector:10586,LeftVectorBar:10578,LessFullEqual:8806,LongLeftArrow:10229,Longleftarrow:10232,NotTildeEqual:8772,NotTildeTilde:8777,Poincareplane:8460,PrecedesEqual:10927,PrecedesTilde:8830,RightArrowBar:8677,RightTeeArrow:8614,RightTriangle:8883,RightUpVector:8638,SucceedsEqual:10928,SucceedsTilde:8831,SupersetEqual:8839,UpEquilibrium:10606,VerticalTilde:8768,VeryThinSpace:8202,bigtriangleup:9651,blacktriangle:9652,divideontimes:8903,fallingdotseq:8786,hookleftarrow:8617,leftarrowtail:8610,leftharpoonup:8636,longleftarrow:10229,looparrowleft:8619,measuredangle:8737,ntriangleleft:8938,shortparallel:8741,smallsetminus:8726,triangleright:9657,upharpoonleft:8639,DownArrowBar:10515,DownTeeArrow:8615,ExponentialE:8519,GreaterEqual:8805,GreaterTilde:8819,HilbertSpace:8459,HumpDownHump:8782,Intersection:8898,LeftArrowBar:8676,LeftTeeArrow:8612,LeftTriangle:8882,LeftUpVector:8639,NotCongruent:8802,NotLessEqual:8816,NotLessTilde:8820,Proportional:8733,RightCeiling:8969,RoundImplies:10608,ShortUpArrow:8593,SquareSubset:8847,UnderBracket:9141,VerticalLine:124,blacklozenge:10731,exponentiale:8519,risingdotseq:8787,triangledown:9663,triangleleft:9667,CircleMinus:8854,CircleTimes:8855,Equilibrium:8652,GreaterLess:8823,LeftCeiling:8968,LessGreater:8822,MediumSpace:8287,NotPrecedes:8832,NotSucceeds:8833,OverBracket:9140,RightVector:8640,Rrightarrow:8667,RuleDelayed:10740,SmallCircle:8728,SquareUnion:8852,SubsetEqual:8838,UpDownArrow:8597,Updownarrow:8661,VerticalBar:8739,backepsilon:1014,blacksquare:9642,circledcirc:8858,circleddash:8861,curlyeqprec:8926,curlyeqsucc:8927,diamondsuit:9830,eqslantless:10901,expectation:8496,nRightarrow:8655,nrightarrow:8603,preccurlyeq:8828,precnapprox:10937,quaternions:8461,straightphi:981,succcurlyeq:8829,succnapprox:10938,thickapprox:8776,updownarrow:8597,Bernoullis:8492,CirclePlus:8853,EqualTilde:8770,Fouriertrf:8497,ImaginaryI:8520,Laplacetrf:8466,LeftVector:8636,Lleftarrow:8666,NotElement:8713,NotGreater:8815,Proportion:8759,RightArrow:8594,RightFloor:8971,Rightarrow:8658,TildeEqual:8771,TildeTilde:8776,UnderBrace:9183,UpArrowBar:10514,UpTeeArrow:8613,circledast:8859,complement:8705,curlywedge:8911,eqslantgtr:10902,gtreqqless:10892,lessapprox:10885,lesseqqgtr:10891,lmoustache:9136,longmapsto:10236,mapstodown:8615,mapstoleft:8612,nLeftarrow:8653,nleftarrow:8602,precapprox:10935,rightarrow:8594,rmoustache:9137,sqsubseteq:8849,sqsupseteq:8850,subsetneqq:10955,succapprox:10936,supsetneqq:10956,upuparrows:8648,varepsilon:949,varnothing:8709,Backslash:8726,CenterDot:183,CircleDot:8857,Congruent:8801,Coproduct:8720,DoubleDot:168,DownArrow:8595,DownBreve:785,Downarrow:8659,HumpEqual:8783,LeftArrow:8592,LeftFloor:8970,Leftarrow:8656,LessTilde:8818,Mellintrf:8499,MinusPlus:8723,NotCupCap:8813,NotExists:8708,OverBrace:9182,PlusMinus:177,Therefore:8756,ThinSpace:8201,TripleDot:8411,UnionPlus:8846,backprime:8245,backsimeq:8909,bigotimes:10754,centerdot:183,checkmark:10003,complexes:8450,dotsquare:8865,downarrow:8595,gtrapprox:10886,gtreqless:8923,heartsuit:9829,leftarrow:8592,lesseqgtr:8922,nparallel:8742,nshortmid:8740,nsubseteq:8840,nsupseteq:8841,pitchfork:8916,rationals:8474,spadesuit:9824,subseteqq:10949,subsetneq:8842,supseteqq:10950,supsetneq:8843,therefore:8756,triangleq:8796,varpropto:8733,DDotrahd:10513,DotEqual:8784,Integral:8747,LessLess:10913,NotEqual:8800,NotTilde:8769,PartialD:8706,Precedes:8826,RightTee:8866,Succeeds:8827,SuchThat:8715,Superset:8835,Uarrocir:10569,UnderBar:818,andslope:10840,angmsdaa:10664,angmsdab:10665,angmsdac:10666,angmsdad:10667,angmsdae:10668,angmsdaf:10669,angmsdag:10670,angmsdah:10671,angrtvbd:10653,approxeq:8778,awconint:8755,backcong:8780,barwedge:8965,bbrktbrk:9142,bigoplus:10753,bigsqcup:10758,biguplus:10756,bigwedge:8896,boxminus:8863,boxtimes:8864,capbrcup:10825,circledR:174,circledS:9416,cirfnint:10768,clubsuit:9827,cupbrcap:10824,curlyvee:8910,cwconint:8754,doteqdot:8785,dotminus:8760,drbkarow:10512,dzigrarr:10239,elinters:9191,emptyset:8709,eqvparsl:10725,fpartint:10765,geqslant:10878,gesdotol:10884,gnapprox:10890,hksearow:10533,hkswarow:10534,imagline:8464,imagpart:8465,infintie:10717,integers:8484,intercal:8890,intlarhk:10775,laemptyv:10676,ldrushar:10571,leqslant:10877,lesdotor:10883,llcorner:8990,lnapprox:10889,lrcorner:8991,lurdshar:10570,mapstoup:8613,multimap:8888,naturals:8469,otimesas:10806,parallel:8741,plusacir:10787,pointint:10773,precneqq:10933,precnsim:8936,profalar:9006,profline:8978,profsurf:8979,raemptyv:10675,realpart:8476,rppolint:10770,rtriltri:10702,scpolint:10771,setminus:8726,shortmid:8739,smeparsl:10724,sqsubset:8847,sqsupset:8848,subseteq:8838,succneqq:10934,succnsim:8937,supseteq:8839,thetasym:977,thicksim:8764,timesbar:10801,triangle:9653,triminus:10810,trpezium:9186,ulcorner:8988,urcorner:8989,varkappa:1008,varsigma:962,vartheta:977,Because:8757,Cayleys:8493,Cconint:8752,Cedilla:184,Diamond:8900,DownTee:8868,Element:8712,Epsilon:917,Implies:8658,LeftTee:8867,NewLine:10,NoBreak:8288,NotLess:8814,Omicron:927,OverBar:175,Product:8719,UpArrow:8593,Uparrow:8657,Upsilon:933,alefsym:8501,angrtvb:8894,angzarr:9084,asympeq:8781,backsim:8765,because:8757,bemptyv:10672,between:8812,bigcirc:9711,bigodot:10752,bigstar:9733,boxplus:8862,ccupssm:10832,cemptyv:10674,cirscir:10690,coloneq:8788,congdot:10861,cudarrl:10552,cudarrr:10549,cularrp:10557,curarrm:10556,dbkarow:10511,ddagger:8225,ddotseq:10871,demptyv:10673,diamond:8900,digamma:989,dotplus:8724,dwangle:10662,epsilon:949,eqcolon:8789,equivDD:10872,gesdoto:10882,gtquest:10876,gtrless:8823,harrcir:10568,intprod:10812,isindot:8949,larrbfs:10527,larrsim:10611,lbrksld:10639,lbrkslu:10637,ldrdhar:10599,lesdoto:10881,lessdot:8918,lessgtr:8822,lesssim:8818,lotimes:10804,lozenge:9674,ltquest:10875,luruhar:10598,maltese:10016,minusdu:10794,napprox:8777,natural:9838,nearrow:8599,nexists:8708,notinva:8713,notinvb:8951,notinvc:8950,notniva:8716,notnivb:8958,notnivc:8957,npolint:10772,nsqsube:8930,nsqsupe:8931,nvinfin:10718,nwarrow:8598,olcross:10683,omicron:959,orderof:8500,orslope:10839,pertenk:8241,planckh:8462,pluscir:10786,plussim:10790,plustwo:10791,precsim:8830,quatint:10774,questeq:8799,rarrbfs:10528,rarrsim:10612,rbrksld:10638,rbrkslu:10640,rdldhar:10601,realine:8475,rotimes:10805,ruluhar:10600,searrow:8600,simplus:10788,simrarr:10610,subedot:10947,submult:10945,subplus:10943,subrarr:10617,succsim:8831,supdsub:10968,supedot:10948,suphsub:10967,suplarr:10619,supmult:10946,supplus:10944,swarrow:8601,topfork:10970,triplus:10809,tritime:10811,uparrow:8593,upsilon:965,uwangle:10663,vzigzag:10650,zigrarr:8669,Aacute:193,Abreve:258,Agrave:192,Assign:8788,Atilde:195,Barwed:8966,Bumpeq:8782,Cacute:262,Ccaron:268,Ccedil:199,Colone:10868,Conint:8751,CupCap:8781,Dagger:8225,Dcaron:270,DotDot:8412,Dstrok:272,Eacute:201,Ecaron:282,Egrave:200,Exists:8707,ForAll:8704,Gammad:988,Gbreve:286,Gcedil:290,HARDcy:1066,Hstrok:294,Iacute:205,Igrave:204,Itilde:296,Jsercy:1032,Kcedil:310,Lacute:313,Lambda:923,Lcaron:317,Lcedil:315,Lmidot:319,Lstrok:321,Nacute:323,Ncaron:327,Ncedil:325,Ntilde:209,Oacute:211,Odblac:336,Ograve:210,Oslash:216,Otilde:213,Otimes:10807,Racute:340,Rarrtl:10518,Rcaron:344,Rcedil:342,SHCHcy:1065,SOFTcy:1068,Sacute:346,Scaron:352,Scedil:350,Square:9633,Subset:8912,Supset:8913,Tcaron:356,Tcedil:354,Tstrok:358,Uacute:218,Ubreve:364,Udblac:368,Ugrave:217,Utilde:360,Vdashl:10982,Verbar:8214,Vvdash:8874,Yacute:221,Zacute:377,Zcaron:381,aacute:225,abreve:259,agrave:224,andand:10837,angmsd:8737,angsph:8738,apacir:10863,approx:8776,atilde:227,barvee:8893,barwed:8965,becaus:8757,bernou:8492,bigcap:8898,bigcup:8899,bigvee:8897,bkarow:10509,bottom:8869,bowtie:8904,boxbox:10697,bprime:8245,brvbar:166,bullet:8226,bumpeq:8783,cacute:263,capand:10820,capcap:10827,capcup:10823,capdot:10816,ccaron:269,ccedil:231,circeq:8791,cirmid:10991,colone:8788,commat:64,compfn:8728,conint:8750,coprod:8720,copysr:8471,cularr:8630,cupcap:10822,cupcup:10826,cupdot:8845,curarr:8631,curren:164,cylcty:9005,dagger:8224,daleth:8504,dcaron:271,dfisht:10623,divide:247,divonx:8903,dlcorn:8990,dlcrop:8973,dollar:36,drcorn:8991,drcrop:8972,dstrok:273,eacute:233,easter:10862,ecaron:283,ecolon:8789,egrave:232,egsdot:10904,elsdot:10903,emptyv:8709,emsp13:8196,emsp14:8197,eparsl:10723,eqcirc:8790,equals:61,equest:8799,female:9792,ffilig:64259,ffllig:64260,forall:8704,frac12:189,frac13:8531,frac14:188,frac15:8533,frac16:8537,frac18:8539,frac23:8532,frac25:8534,frac34:190,frac35:8535,frac38:8540,frac45:8536,frac56:8538,frac58:8541,frac78:8542,gacute:501,gammad:989,gbreve:287,gesdot:10880,gesles:10900,gtlPar:10645,gtrarr:10616,gtrdot:8919,gtrsim:8819,hairsp:8202,hamilt:8459,hardcy:1098,hearts:9829,hellip:8230,hercon:8889,homtht:8763,horbar:8213,hslash:8463,hstrok:295,hybull:8259,hyphen:8208,iacute:237,igrave:236,iiiint:10764,iinfin:10716,incare:8453,inodot:305,intcal:8890,iquest:191,isinsv:8947,itilde:297,jsercy:1112,kappav:1008,kcedil:311,kgreen:312,lAtail:10523,lacute:314,lagran:8466,lambda:955,langle:10216,larrfs:10525,larrhk:8617,larrlp:8619,larrpl:10553,larrtl:8610,latail:10521,lbrace:123,lbrack:91,lcaron:318,lcedil:316,ldquor:8222,lesdot:10879,lesges:10899,lfisht:10620,lfloor:8970,lharul:10602,llhard:10603,lmidot:320,lmoust:9136,loplus:10797,lowast:8727,lowbar:95,lparlt:10643,lrhard:10605,lsaquo:8249,lsquor:8218,lstrok:322,lthree:8907,ltimes:8905,ltlarr:10614,ltrPar:10646,mapsto:8614,marker:9646,mcomma:10793,midast:42,midcir:10992,middot:183,minusb:8863,minusd:8760,mnplus:8723,models:8871,mstpos:8766,nVDash:8879,nVdash:8878,nacute:324,ncaron:328,ncedil:326,nearhk:10532,nequiv:8802,nesear:10536,nexist:8708,nltrie:8940,nprcue:8928,nrtrie:8941,nsccue:8929,nsimeq:8772,ntilde:241,numero:8470,nvDash:8877,nvHarr:10500,nvdash:8876,nvlArr:10498,nvrArr:10499,nwarhk:10531,nwnear:10535,oacute:243,odblac:337,odsold:10684,ograve:242,ominus:8854,origof:8886,oslash:248,otilde:245,otimes:8855,parsim:10995,percnt:37,period:46,permil:8240,phmmat:8499,planck:8463,plankv:8463,plusdo:8724,plusdu:10789,plusmn:177,preceq:10927,primes:8473,prnsim:8936,propto:8733,prurel:8880,puncsp:8200,qprime:8279,rAtail:10524,racute:341,rangle:10217,rarrap:10613,rarrfs:10526,rarrhk:8618,rarrlp:8620,rarrpl:10565,rarrtl:8611,ratail:10522,rbrace:125,rbrack:93,rcaron:345,rcedil:343,rdquor:8221,rfisht:10621,rfloor:8971,rharul:10604,rmoust:9137,roplus:10798,rpargt:10644,rsaquo:8250,rsquor:8217,rthree:8908,rtimes:8906,sacute:347,scaron:353,scedil:351,scnsim:8937,searhk:10533,seswar:10537,sfrown:8994,shchcy:1097,sigmaf:962,sigmav:962,simdot:10858,smashp:10803,softcy:1100,solbar:9023,spades:9824,sqsube:8849,sqsupe:8850,square:9633,squarf:9642,ssetmn:8726,ssmile:8995,sstarf:8902,subdot:10941,subset:8834,subsim:10951,subsub:10965,subsup:10963,succeq:10928,supdot:10942,supset:8835,supsim:10952,supsub:10964,supsup:10966,swarhk:10534,swnwar:10538,target:8982,tcaron:357,tcedil:355,telrec:8981,there4:8756,thetav:977,thinsp:8201,thksim:8764,timesb:8864,timesd:10800,topbot:9014,topcir:10993,tprime:8244,tridot:9708,tstrok:359,uacute:250,ubreve:365,udblac:369,ufisht:10622,ugrave:249,ulcorn:8988,ulcrop:8975,urcorn:8989,urcrop:8974,utilde:361,vangrt:10652,varphi:966,varrho:1009,veebar:8891,vellip:8942,verbar:124,wedbar:10847,wedgeq:8793,weierp:8472,wreath:8768,xoplus:10753,xotime:10754,xsqcup:10758,xuplus:10756,xwedge:8896,yacute:253,zacute:378,zcaron:382,zeetrf:8488,AElig:198,Acirc:194,Alpha:913,Amacr:256,Aogon:260,Aring:197,Breve:728,Ccirc:264,Colon:8759,Cross:10799,Dashv:10980,Delta:916,Ecirc:202,Emacr:274,Eogon:280,Equal:10869,Gamma:915,Gcirc:284,Hacek:711,Hcirc:292,IJlig:306,Icirc:206,Imacr:298,Iogon:302,Iukcy:1030,Jcirc:308,Jukcy:1028,Kappa:922,OElig:338,Ocirc:212,Omacr:332,Omega:937,Prime:8243,RBarr:10512,Scirc:348,Sigma:931,THORN:222,TRADE:8482,TSHcy:1035,Theta:920,Tilde:8764,Ubrcy:1038,Ucirc:219,Umacr:362,Union:8899,Uogon:370,UpTee:8869,Uring:366,VDash:8875,Vdash:8873,Wcirc:372,Wedge:8896,Ycirc:374,acirc:226,acute:180,aelig:230,aleph:8501,alpha:945,amacr:257,amalg:10815,angle:8736,angrt:8735,angst:8491,aogon:261,aring:229,asymp:8776,awint:10769,bcong:8780,bdquo:8222,bepsi:1014,blank:9251,blk12:9618,blk14:9617,blk34:9619,block:9608,boxDL:9559,boxDR:9556,boxDl:9558,boxDr:9555,boxHD:9574,boxHU:9577,boxHd:9572,boxHu:9575,boxUL:9565,boxUR:9562,boxUl:9564,boxUr:9561,boxVH:9580,boxVL:9571,boxVR:9568,boxVh:9579,boxVl:9570,boxVr:9567,boxdL:9557,boxdR:9554,boxdl:9488,boxdr:9484,boxhD:9573,boxhU:9576,boxhd:9516,boxhu:9524,boxuL:9563,boxuR:9560,boxul:9496,boxur:9492,boxvH:9578,boxvL:9569,boxvR:9566,boxvh:9532,boxvl:9508,boxvr:9500,breve:728,bsemi:8271,bsime:8909,bsolb:10693,bumpE:10926,bumpe:8783,caret:8257,caron:711,ccaps:10829,ccirc:265,ccups:10828,cedil:184,check:10003,clubs:9827,colon:58,comma:44,crarr:8629,cross:10007,csube:10961,csupe:10962,ctdot:8943,cuepr:8926,cuesc:8927,cupor:10821,cuvee:8910,cuwed:8911,cwint:8753,dashv:8867,dblac:733,ddarr:8650,delta:948,dharl:8643,dharr:8642,diams:9830,disin:8946,doteq:8784,dtdot:8945,dtrif:9662,duarr:8693,duhar:10607,eDDot:10871,ecirc:234,efDot:8786,emacr:275,empty:8709,eogon:281,eplus:10865,epsiv:949,eqsim:8770,equiv:8801,erDot:8787,erarr:10609,esdot:8784,exist:8707,fflig:64256,filig:64257,fllig:64258,fltns:9649,forkv:10969,frasl:8260,frown:8994,gamma:947,gcirc:285,gescc:10921,gimel:8503,gneqq:8809,gnsim:8935,grave:96,gsime:10894,gsiml:10896,gtcir:10874,gtdot:8919,harrw:8621,hcirc:293,hoarr:8703,icirc:238,iexcl:161,iiint:8749,iiota:8489,ijlig:307,imacr:299,image:8465,imath:305,imped:437,infin:8734,iogon:303,iprod:10812,isinE:8953,isins:8948,isinv:8712,iukcy:1110,jcirc:309,jmath:567,jukcy:1108,kappa:954,lAarr:8666,lBarr:10510,langd:10641,laquo:171,larrb:8676,lbarr:10508,lbbrk:10098,lbrke:10635,lceil:8968,ldquo:8220,lescc:10920,lhard:8637,lharu:8636,lhblk:9604,llarr:8647,lltri:9722,lneqq:8808,lnsim:8934,loang:10220,loarr:8701,lobrk:10214,lopar:10629,lrarr:8646,lrhar:8651,lrtri:8895,lsime:10893,lsimg:10895,lsquo:8216,ltcir:10873,ltdot:8918,ltrie:8884,ltrif:9666,mDDot:8762,mdash:8212,micro:181,minus:8722,mumap:8888,nabla:8711,napos:329,natur:9838,ncong:8775,ndash:8211,neArr:8663,nearr:8599,ngsim:8821,nhArr:8654,nharr:8622,nhpar:10994,nlArr:8653,nlarr:8602,nless:8814,nlsim:8820,nltri:8938,notin:8713,notni:8716,nprec:8832,nrArr:8655,nrarr:8603,nrtri:8939,nsime:8772,nsmid:8740,nspar:8742,nsube:8840,nsucc:8833,nsupe:8841,numsp:8199,nwArr:8662,nwarr:8598,ocirc:244,odash:8861,oelig:339,ofcir:10687,ohbar:10677,olarr:8634,olcir:10686,oline:8254,omacr:333,omega:969,operp:10681,oplus:8853,orarr:8635,order:8500,ovbar:9021,parsl:11005,phone:9742,plusb:8862,pluse:10866,pound:163,prcue:8828,prime:8242,prnap:10937,prsim:8830,quest:63,rAarr:8667,rBarr:10511,radic:8730,rangd:10642,range:10661,raquo:187,rarrb:8677,rarrc:10547,rarrw:8605,ratio:8758,rbarr:10509,rbbrk:10099,rbrke:10636,rceil:8969,rdquo:8221,reals:8477,rhard:8641,rharu:8640,rlarr:8644,rlhar:8652,rnmid:10990,roang:10221,roarr:8702,robrk:10215,ropar:10630,rrarr:8649,rsquo:8217,rtrie:8885,rtrif:9656,sbquo:8218,sccue:8829,scirc:349,scnap:10938,scsim:8831,sdotb:8865,sdote:10854,seArr:8664,searr:8600,setmn:8726,sharp:9839,sigma:963,simeq:8771,simgE:10912,simlE:10911,simne:8774,slarr:8592,smile:8995,sqcap:8851,sqcup:8852,sqsub:8847,sqsup:8848,srarr:8594,starf:9733,strns:175,subnE:10955,subne:8842,supnE:10956,supne:8843,swArr:8665,swarr:8601,szlig:223,theta:952,thkap:8776,thorn:254,tilde:732,times:215,trade:8482,trisb:10701,tshcy:1115,twixt:8812,ubrcy:1118,ucirc:251,udarr:8645,udhar:10606,uharl:8639,uharr:8638,uhblk:9600,ultri:9720,umacr:363,uogon:371,uplus:8846,upsih:978,uring:367,urtri:9721,utdot:8944,utrif:9652,uuarr:8648,vBarv:10985,vDash:8872,varpi:982,vdash:8866,veeeq:8794,vltri:8882,vprop:8733,vrtri:8883,wcirc:373,wedge:8743,xcirc:9711,xdtri:9661,xhArr:10234,xharr:10231,xlArr:10232,xlarr:10229,xodot:10752,xrArr:10233,xrarr:10230,xutri:9651,ycirc:375,Aopf:120120,Ascr:119964,Auml:196,Barv:10983,Beta:914,Bopf:120121,Bscr:8492,CHcy:1063,COPY:169,Cdot:266,Copf:8450,Cscr:119966,DJcy:1026,DScy:1029,DZcy:1039,Darr:8609,Dopf:120123,Dscr:119967,Edot:278,Eopf:120124,Escr:8496,Esim:10867,Euml:203,Fopf:120125,Fscr:8497,GJcy:1027,Gdot:288,Gopf:120126,Gscr:119970,Hopf:8461,Hscr:8459,IEcy:1045,IOcy:1025,Idot:304,Iopf:120128,Iota:921,Iscr:8464,Iuml:207,Jopf:120129,Jscr:119973,KHcy:1061,KJcy:1036,Kopf:120130,Kscr:119974,LJcy:1033,Lang:10218,Larr:8606,Lopf:120131,Lscr:8466,Mopf:120132,Mscr:8499,NJcy:1034,Nopf:8469,Nscr:119977,Oopf:120134,Oscr:119978,Ouml:214,Popf:8473,Pscr:119979,QUOT:34,Qopf:8474,Qscr:119980,Rang:10219,Rarr:8608,Ropf:8477,Rscr:8475,SHcy:1064,Sopf:120138,Sqrt:8730,Sscr:119982,Star:8902,TScy:1062,Topf:120139,Tscr:119983,Uarr:8607,Uopf:120140,Upsi:978,Uscr:119984,Uuml:220,Vbar:10987,Vert:8214,Vopf:120141,Vscr:119985,Wopf:120142,Wscr:119986,Xopf:120143,Xscr:119987,YAcy:1071,YIcy:1031,YUcy:1070,Yopf:120144,Yscr:119988,Yuml:376,ZHcy:1046,Zdot:379,Zeta:918,Zopf:8484,Zscr:119989,andd:10844,andv:10842,ange:10660,aopf:120146,apid:8779,apos:39,ascr:119990,auml:228,bNot:10989,bbrk:9141,beta:946,beth:8502,bnot:8976,bopf:120147,boxH:9552,boxV:9553,boxh:9472,boxv:9474,bscr:119991,bsim:8765,bsol:92,bull:8226,bump:8782,cdot:267,cent:162,chcy:1095,cirE:10691,circ:710,cire:8791,comp:8705,cong:8773,copf:120148,copy:169,cscr:119992,csub:10959,csup:10960,dArr:8659,dHar:10597,darr:8595,dash:8208,diam:8900,djcy:1106,dopf:120149,dscr:119993,dscy:1109,dsol:10742,dtri:9663,dzcy:1119,eDot:8785,ecir:8790,edot:279,emsp:8195,ensp:8194,eopf:120150,epar:8917,epsi:1013,escr:8495,esim:8770,euml:235,euro:8364,excl:33,flat:9837,fnof:402,fopf:120151,fork:8916,fscr:119995,gdot:289,geqq:8807,gjcy:1107,gnap:10890,gneq:10888,gopf:120152,gscr:8458,gsim:8819,gtcc:10919,hArr:8660,half:189,harr:8596,hbar:8463,hopf:120153,hscr:119997,iecy:1077,imof:8887,iocy:1105,iopf:120154,iota:953,iscr:119998,isin:8712,iuml:239,jopf:120155,jscr:119999,khcy:1093,kjcy:1116,kopf:120156,kscr:12e4,lArr:8656,lHar:10594,lang:10216,larr:8592,late:10925,lcub:123,ldca:10550,ldsh:8626,leqq:8806,ljcy:1113,lnap:10889,lneq:10887,lopf:120157,lozf:10731,lpar:40,lscr:120001,lsim:8818,lsqb:91,ltcc:10918,ltri:9667,macr:175,male:9794,malt:10016,mlcp:10971,mldr:8230,mopf:120158,mscr:120002,nbsp:160,ncap:10819,ncup:10818,ngeq:8817,ngtr:8815,nisd:8954,njcy:1114,nldr:8229,nleq:8816,nmid:8740,nopf:120159,npar:8742,nscr:120003,nsim:8769,nsub:8836,nsup:8837,ntgl:8825,ntlg:8824,oast:8859,ocir:8858,odiv:10808,odot:8857,ogon:731,oint:8750,omid:10678,oopf:120160,opar:10679,ordf:170,ordm:186,oror:10838,oscr:8500,osol:8856,ouml:246,para:182,part:8706,perp:8869,phiv:966,plus:43,popf:120161,prap:10935,prec:8826,prnE:10933,prod:8719,prop:8733,pscr:120005,qint:10764,qopf:120162,qscr:120006,quot:34,rArr:8658,rHar:10596,race:10714,rang:10217,rarr:8594,rcub:125,rdca:10551,rdsh:8627,real:8476,rect:9645,rhov:1009,ring:730,ropf:120163,rpar:41,rscr:120007,rsqb:93,rtri:9657,scap:10936,scnE:10934,sdot:8901,sect:167,semi:59,sext:10038,shcy:1096,sime:8771,simg:10910,siml:10909,smid:8739,smte:10924,solb:10692,sopf:120164,spar:8741,squf:9642,sscr:120008,star:9734,subE:10949,sube:8838,succ:8827,sung:9834,sup1:185,sup2:178,sup3:179,supE:10950,supe:8839,tbrk:9140,tdot:8411,tint:8749,toea:10536,topf:120165,tosa:10537,trie:8796,tscr:120009,tscy:1094,uArr:8657,uHar:10595,uarr:8593,uopf:120166,upsi:965,uscr:120010,utri:9653,uuml:252,vArr:8661,vBar:10984,varr:8597,vert:124,vopf:120167,vscr:120011,wopf:120168,wscr:120012,xcap:8898,xcup:8899,xmap:10236,xnis:8955,xopf:120169,xscr:120013,xvee:8897,yacy:1103,yicy:1111,yopf:120170,yscr:120014,yucy:1102,yuml:255,zdot:380,zeta:950,zhcy:1078,zopf:120171,zscr:120015,zwnj:8204,AMP:38,Acy:1040,Afr:120068,And:10835,Bcy:1041,Bfr:120069,Cap:8914,Cfr:8493,Chi:935,Cup:8915,Dcy:1044,Del:8711,Dfr:120071,Dot:168,ENG:330,ETH:208,Ecy:1069,Efr:120072,Eta:919,Fcy:1060,Ffr:120073,Gcy:1043,Gfr:120074,Hat:94,Hfr:8460,Icy:1048,Ifr:8465,Int:8748,Jcy:1049,Jfr:120077,Kcy:1050,Kfr:120078,Lcy:1051,Lfr:120079,Lsh:8624,Map:10501,Mcy:1052,Mfr:120080,Ncy:1053,Nfr:120081,Not:10988,Ocy:1054,Ofr:120082,Pcy:1055,Pfr:120083,Phi:934,Psi:936,Qfr:120084,REG:174,Rcy:1056,Rfr:8476,Rho:929,Rsh:8625,Scy:1057,Sfr:120086,Sub:8912,Sum:8721,Sup:8913,Tab:9,Tau:932,Tcy:1058,Tfr:120087,Ucy:1059,Ufr:120088,Vcy:1042,Vee:8897,Vfr:120089,Wfr:120090,Xfr:120091,Ycy:1067,Yfr:120092,Zcy:1047,Zfr:8488,acd:8767,acy:1072,afr:120094,amp:38,and:8743,ang:8736,apE:10864,ape:8778,ast:42,bcy:1073,bfr:120095,bot:8869,cap:8745,cfr:120096,chi:967,cir:9675,cup:8746,dcy:1076,deg:176,dfr:120097,die:168,div:247,dot:729,ecy:1101,efr:120098,egs:10902,ell:8467,els:10901,eng:331,eta:951,eth:240,fcy:1092,ffr:120099,gEl:10892,gap:10886,gcy:1075,gel:8923,geq:8805,ges:10878,gfr:120100,ggg:8921,glE:10898,gla:10917,glj:10916,gnE:8809,gne:10888,hfr:120101,icy:1080,iff:8660,ifr:120102,int:8747,jcy:1081,jfr:120103,kcy:1082,kfr:120104,lEg:10891,lap:10885,lat:10923,lcy:1083,leg:8922,leq:8804,les:10877,lfr:120105,lgE:10897,lnE:8808,lne:10887,loz:9674,lrm:8206,lsh:8624,map:8614,mcy:1084,mfr:120106,mho:8487,mid:8739,nap:8777,ncy:1085,nfr:120107,nge:8817,ngt:8815,nis:8956,niv:8715,nle:8816,nlt:8814,not:172,npr:8832,nsc:8833,num:35,ocy:1086,ofr:120108,ogt:10689,ohm:8486,olt:10688,ord:10845,orv:10843,par:8741,pcy:1087,pfr:120109,phi:966,piv:982,prE:10931,pre:10927,psi:968,qfr:120110,rcy:1088,reg:174,rfr:120111,rho:961,rlm:8207,rsh:8625,scE:10932,sce:10928,scy:1089,sfr:120112,shy:173,sim:8764,smt:10922,sol:47,squ:9633,sub:8834,sum:8721,sup:8835,tau:964,tcy:1090,tfr:120113,top:8868,ucy:1091,ufr:120114,uml:168,vcy:1074,vee:8744,vfr:120115,wfr:120116,xfr:120117,ycy:1099,yen:165,yfr:120118,zcy:1079,zfr:120119,zwj:8205,DD:8517,GT:62,Gg:8921,Gt:8811,Im:8465,LT:60,Ll:8920,Lt:8810,Mu:924,Nu:925,Or:10836,Pi:928,Pr:10939,Re:8476,Sc:10940,Xi:926,ac:8766,af:8289,ap:8776,dd:8518,ee:8519,eg:10906,el:10905,gE:8807,ge:8805,gg:8811,gl:8823,gt:62,ic:8291,ii:8520,in:8712,it:8290,lE:8806,le:8804,lg:8822,ll:8810,lt:60,mp:8723,mu:956,ne:8800,ni:8715,nu:957,oS:9416,or:8744,pi:960,pm:177,pr:8826,rx:8478,sc:8827,wp:8472,wr:8768,xi:958};const dc=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],fc=new RegExp(`&(#?(?:x[\\w\\d]+|\\d+|${Object.keys(uc).join("|")}))(?:;|\\b)`,"g");function mc(e){return e.replace(fc,(e,t)=>{let n;return n="#"!==t[0]?uc[t]:"x"===t[1]?parseInt(t.substring(2),16):parseInt(t.substring(1),10),n?String.fromCodePoint(function(e){return 10===e?32:e<128?e:e<=159?dc[e-128]:e<55296?e:e<=57343?0:e<=65535?e:e>=65536&&e<=131071?e:e>=131072&&e<=196607?e:0}(n)):e})}const gc=new Map([["li",new Set(["li"])],["dt",new Set(["dt","dd"])],["dd",new Set(["dt","dd"])],["p",new Set("address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "))],["rt",new Set(["rt","rp"])],["rp",new Set(["rt","rp"])],["optgroup",new Set(["optgroup"])],["option",new Set(["option","optgroup"])],["thead",new Set(["tbody","tfoot"])],["tbody",new Set(["tbody","tfoot"])],["tfoot",new Set(["tbody"])],["tr",new Set(["tr","tbody"])],["td",new Set(["td","th","tr"])],["th",new Set(["td","th","tr"])]]);function vc(e,t){return!(!gc.has(e)||t&&!gc.get(e).has(t))}function yc(e,t){const n=e.charCodeAt(t);return n<=55295||n>=57344?n:(n<<10)+e.charCodeAt(t+1)-56613888}const bc=new Set(["alert","Array","Boolean","clearInterval","clearTimeout","confirm","console","Date","decodeURI","decodeURIComponent","document","encodeURI","encodeURIComponent","Error","EvalError","Event","fetch","global","globalThis","history","Infinity","InternalError","Intl","isFinite","isNaN","JSON","localStorage","location","Map","Math","NaN","navigator","Number","Object","parseFloat","parseInt","process","Promise","prompt","RangeError","ReferenceError","RegExp","sessionStorage","Set","setInterval","setTimeout","String","SyntaxError","TypeError","undefined","URIError","URL","window"]),wc=new Set(["arguments","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield"]),xc=/^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;function kc(e){return xc.test(e)||"!doctype"===e.toLowerCase()}function _c(e){return e.replace(/[^a-zA-Z0-9_]+/g,"_").replace(/^_/,"").replace(/_$/,"").replace(/^[0-9]/,"_$&")}function Sc(e,t){const n=new Ac(t).get(e);return n&&n[0]&&n[0][0]>.7?n[0][1]:null}function $c(e,t){if(null===e&&null===t)throw"Trying to compare two null values";if(null===e||null===t)return 0;const n=function(e,t){const n=[];let r,i;for(let o=0;o<=t.length;o++)for(let s=0;s<=e.length;s++)i=o&&s?e.charAt(s-1)===t.charAt(o-1)?r:Math.min(n[s],n[s-1],r)+1:o+s,r=n[s],n[s]=i;return n.pop()}(e=String(e),t=String(t));return e.length>t.length?1-n/e.length:1-n/t.length}const Cc=/[^\w, ]+/;function Ec(e,t=2){const n={},r=function(e,t=2){const n="-"+e.toLowerCase().replace(Cc,"")+"-",r=t-n.length,i=[];if(r>0)for(let t=0;t<r;++t)e+="-";for(let e=0;e<n.length-t+1;++e)i.push(n.slice(e,e+t));return i}(e,t);let i=0;for(;i<r.length;++i)r[i]in n?n[r[i]]+=1:n[r[i]]=1;return n}function Tc(e,t){return t[0]-e[0]}class Ac{constructor(e){this.exact_set={},this.match_dict={},this.items={};for(let e=2;e<4;++e)this.items[e]=[];for(let t=0;t<e.length;++t)this.add(e[t])}add(e){if(e.toLowerCase()in this.exact_set)return!1;let t=2;for(;t<4;++t)this._add(e,t)}_add(e,t){const n=e.toLowerCase(),r=this.items[t]||[],i=r.length;r.push(0);const o=Ec(n,t);let s,a,c=0;for(s in o)a=o[s],c+=Math.pow(a,2),s in this.match_dict?this.match_dict[s].push([i,a]):this.match_dict[s]=[[i,a]];const l=Math.sqrt(c);r[i]=[l,n],this.items[t]=r,this.exact_set[n]=e}get(e){const t=e.toLowerCase(),n=this.exact_set[t];if(n)return[[1,n]];let r=[];for(let t=3;t>=2;--t)if(r=this.__get(e,t),r)return r;return null}__get(e,t){const n=e.toLowerCase(),r={},i=Ec(n,t),o=this.items[t];let s,a,c,l,h,p=0;for(s in i)if(a=i[s],p+=Math.pow(a,2),s in this.match_dict)for(c=0;c<this.match_dict[s].length;++c)l=this.match_dict[s][c][0],h=this.match_dict[s][c][1],l in r?r[l]+=a*h:r[l]=a*h;const u=Math.sqrt(p);let d,f=[];for(const e in r)d=r[e],f.push([d/(u*o[e][0]),o[e][1]]);f.sort(Tc);let m=[];const g=Math.min(50,f.length);for(let e=0;e<g;++e)m.push([$c(f[e][1],n),f[e][1]]);f=m,f.sort(Tc),m=[];for(let e=0;e<f.length;++e)f[e][0]==f[0][0]&&m.push([f[e][0],this.exact_set[f[e][1]]]);return m}}function Nc(e,t="or"){return 1===e.length?e[0]:`${e.slice(0,-1).join(", ")} ${t} ${e[e.length-1]}`}const Mc=/^\!?[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Oc=new Map([["svelte:head","Head"],["svelte:options","Options"],["svelte:window","Window"],["svelte:body","Body"]]),Dc=Array.from(Oc.keys()).concat("svelte:self","svelte:component"),Rc=new Map([["script",{read:function(e,t,n){const r=e.index,i=e.template.indexOf("<\/script>",r);-1===i&&e.error({code:"unclosed-script",message:"<script> must have a closing tag"});const o=" ".repeat(r)+e.template.slice(r,i);let s;e.index=i+"<\/script>".length;try{s=Et(o)}catch(t){e.acorn_error(t)}return s.start=r,{type:"Script",start:t,end:e.index,context:Dt(e,n,t),content:s}},property:"js"}],["style",{read:function(e,t,n){const r=e.index,i=e.read_until(/<\/style>/),o=e.index;let s;try{s=hc(i,{positions:!0,offset:r})}catch(t){if("CssSyntaxError"!==t.name)throw t;e.error({code:"css-syntax-error",message:t.message},t.offset)}return s=JSON.parse(JSON.stringify(s)),Le(s,{enter:t=>{if("Selector"===t.type)for(let n=0;n<t.children.length;n+=1){const r=t.children[n];pc(r,t.children[n+1])&&e.error({code:"invalid-ref-selector",message:"ref selectors are no longer supported"},r.loc.start.offset)}"Declaration"===t.type&&"Value"===t.value.type&&0===t.value.children.length&&e.error({code:"invalid-declaration",message:"Declaration cannot be empty"},t.start),t.loc&&(t.start=t.loc.start.offset,t.end=t.loc.end.offset,delete t.loc)}}),e.eat("</style>",!0),{type:"Style",start:t,end:e.index,attributes:n,children:s.children,content:{start:r,end:o,styles:i}}},property:"css"}]]),Pc=/^svelte:self(?=[\s/>])/,Ic=/^svelte:component(?=[\s/>])/;function Lc(e){const t=e.index++;let n=e.current();if(e.eat("!--")){const n=e.read_until(/-->/);return e.eat("--\x3e",!0,"comment was left open, expected --\x3e"),void e.current().children.push({start:t,end:e.index,type:"Comment",data:n})}const r=e.eat("/"),i=function(e){const t=e.index;if(e.read(Pc)){let n=e.stack.length,r=!1;for(;n--;){const t=e.stack[n];if("IfBlock"===t.type||"EachBlock"===t.type){r=!0;break}}return r||e.error({code:"invalid-self-placement",message:"<svelte:self> components can only exist inside if-blocks or each-blocks"},t),"svelte:self"}if(e.read(Ic))return"svelte:component";const n=e.read_until(/(\s|\/|>)/);if(Oc.has(n))return n;if(n.startsWith("svelte:")){const r=Sc(n.slice(7),Dc);let i=`Valid <svelte:...> tag names are ${Nc(Dc)}`;r&&(i+=` (did you mean '${r}'?)`),e.error({code:"invalid-tag-name",message:i},t)}return Mc.test(n)||e.error({code:"invalid-tag-name",message:"Expected valid tag name"},t),n}(e);if(Oc.has(i)){const n=Oc.get(i).toLowerCase();r?"svelte:window"!==i&&"svelte:body"!==i||!e.current().children.length||e.error({code:`invalid-${n}-content`,message:`<${i}> cannot have children`},e.current().children[0].start):(i in e.meta_tags&&e.error({code:`duplicate-${n}`,message:`A component can only have one <${i}> tag`},t),e.stack.length>1&&e.error({code:`invalid-${n}-placement`,message:`<${i}> tags cannot be inside elements or blocks`},t),e.meta_tags[i]=!0)}const o={start:t,end:null,type:Oc.has(i)?Oc.get(i):/[A-Z]/.test(i[0])||"svelte:self"===i||"svelte:component"===i?"InlineComponent":"title"===i&&function(e){let t=e.length;for(;t--;){const{type:n}=e[t];if("Head"===n)return!0;if("Element"===n||"InlineComponent"===n)return!1}return!1}(e.stack)?"Title":"slot"!==i||e.customElement?"Element":"Slot",name:i,attributes:[],children:[]};if(e.allow_whitespace(),r){for(kc(i)&&e.error({code:"invalid-void-content",message:`<${i}> is a void element and cannot have children, or a closing tag`},t),e.eat(">",!0);n.name!==i;)"Element"!==n.type&&e.error({code:"invalid-closing-tag",message:`</${i}> attempted to close an element that was not open`},t),n.end=t,e.stack.pop(),n=e.current();return n.end=e.index,void e.stack.pop()}vc(n.name,i)&&(n.end=t,e.stack.pop());const s=new Set;let a;for(;a=Bc(e,s);)o.attributes.push(a),e.allow_whitespace();if("svelte:component"===i){const n=o.attributes.findIndex(e=>"Attribute"===e.type&&"this"===e.name);~n||e.error({code:"missing-component-definition",message:"<svelte:component> must have a 'this' attribute"},t);const r=o.attributes.splice(n,1)[0];!0!==r.value&&1===r.value.length&&"Text"!==r.value[0].type||e.error({code:"invalid-component-definition",message:"invalid component definition"},r.start),o.expression=r.value[0].expression}if(Rc.has(i)&&1===e.stack.length){const n=Rc.get(i);e.eat(">",!0);const r=n.read(e,t,o.attributes);return void(r&&e[n.property].push(r))}e.current().children.push(o);const c=e.eat("/")||kc(i);if(e.eat(">",!0),c)o.end=e.index;else if("textarea"===i)o.children=Vc(e,()=>"</textarea>"===e.template.slice(e.index,e.index+11)),e.read(/<\/textarea>/),o.end=e.index;else if("script"===i){const t=e.index,n=e.read_until(/<\/script>/),r=e.index;o.children.push({start:t,end:r,type:"Text",data:n}),e.eat("<\/script>",!0),o.end=e.index}else if("style"===i){const t=e.index,n=e.read_until(/<\/style>/),r=e.index;o.children.push({start:t,end:r,type:"Text",data:n}),e.eat("</style>",!0)}else e.stack.push(o)}function Bc(e,t){const n=e.index;if(e.eat("{")){if(e.allow_whitespace(),e.eat("...")){const t=Ot(e);return e.allow_whitespace(),e.eat("}",!0),{start:n,end:e.index,type:"Spread",expression:t}}{const t=e.index,r=e.read_identifier();return e.allow_whitespace(),e.eat("}",!0),{start:n,end:e.index,type:"Attribute",name:r,value:[{start:t,end:t+r.length,type:"AttributeShorthand",expression:{start:t,end:t+r.length,type:"Identifier",name:r}}]}}}const r=e.read_until(/[\s=\/>"']/);if(!r)return null;let i=e.index;e.allow_whitespace();const o=r.indexOf(":"),s=-1!==o&&function(e){return"use"===e?"Action":"animate"===e?"Animation":"bind"===e?"Binding":"class"===e?"Class":"on"===e?"EventHandler":"let"===e?"Let":"ref"===e?"Ref":"in"===e||"out"===e||"transition"===e?"Transition":void 0}(r.slice(0,o));t.has(r)&&e.error({code:"duplicate-attribute",message:"Attributes need to be unique"},n),"EventHandler"!==s&&t.add(r);let a=!0;if(e.eat("=")?(e.allow_whitespace(),a=function(e){const t=e.eat("'")?"'":e.eat('"')?'"':null,n="'"===t?/'/:'"'===t?/"/:/(\/>|[\s"'=<>`])/,r=Vc(e,()=>!!e.match_regex(n));return t&&(e.index+=1),r}(e),i=e.index):e.match_regex(/["']/)&&e.error({code:"unexpected-token",message:"Expected ="},e.index),s){const[t,...c]=r.slice(o+1).split("|");"Ref"===s&&e.error({code:"invalid-ref-directive",message:`The ref directive is no longer supported  use \`bind:this={${t}}\` instead`},n),a[0]&&(a.length>1||"Text"===a[0].type)&&e.error({code:"invalid-directive-value",message:"Directive value must be a JavaScript expression enclosed in curly braces"},a[0].start);const l={start:n,end:i,type:s,name:t,modifiers:c,expression:a[0]&&a[0].expression||null};if("Transition"===s){const e=r.slice(0,o);l.intro="in"===e||"transition"===e,l.outro="out"===e||"transition"===e}return l.expression||"Binding"!==s&&"Class"!==s||(l.expression={start:l.start+o+1,end:l.end,type:"Identifier",name:l.name}),l}return{start:n,end:i,type:"Attribute",name:r,value:a}}function Vc(e,t){let n={start:e.index,end:null,type:"Text",raw:"",data:null};function r(){n.raw&&(n.data=mc(n.raw),n.end=e.index,i.push(n))}const i=[];for(;e.index<e.template.length;){const o=e.index;if(t())return r(),i;if(e.eat("{")){r(),e.allow_whitespace();const t=Ot(e);e.allow_whitespace(),e.eat("}",!0),i.push({start:o,end:e.index,type:"MustacheTag",expression:t}),n={start:e.index,end:null,type:"Text",raw:"",data:null}}else n.raw+=e.template[e.index++]}e.error({code:"unexpected-eof",message:"Unexpected end of input"})}function Fc(e){e.eat("=")&&e.error({code:"invalid-assignment-pattern",message:"Assignment patterns are not supported"},e.index-1)}function zc(e){e.error({code:"rest-pattern-not-last",message:"Rest destructuring expected to be last"},e.index)}function qc(e){let t=0;for(;At.test(e[t]);)t+=1;return e.slice(t)}function jc(e){let t=e.length;for(;At.test(e[t-1]);)t-=1;return e.slice(0,t)}function Uc(e){const t=e.index;if(e.index+=1,e.allow_whitespace(),e.eat("/")){let n,r=e.current();for(vc(r.name)&&(r.end=t,e.stack.pop(),r=e.current()),"ElseBlock"!==r.type&&"PendingBlock"!==r.type&&"ThenBlock"!==r.type&&"CatchBlock"!==r.type||(r.end=t,e.stack.pop(),r=e.current(),n="await"),"IfBlock"===r.type?n="if":"EachBlock"===r.type?n="each":"AwaitBlock"===r.type?n="await":e.error({code:"unexpected-block-close",message:"Unexpected block closing tag"}),e.eat(n,!0),e.allow_whitespace(),e.eat("}",!0);r.elseif;)r.end=e.index,e.stack.pop(),r=e.current(),r.else&&(r.else.end=t);const i=e.template[r.start-1],o=e.template[e.index];!function e(t,n,r){if(!t.children||0===t.children.length)return;const i=t.children[0],o=t.children[t.children.length-1];"Text"===i.type&&n&&(i.data=qc(i.data),i.data||t.children.shift()),"Text"===o.type&&r&&(o.data=jc(o.data),o.data||t.children.pop()),t.else&&e(t.else,n,r),i.elseif&&e(i,n,r)}(r,!i||At.test(i),!o||At.test(o)),r.end=e.index,e.stack.pop()}else if(e.eat(":else"))if(e.eat("if")&&e.error({code:"invalid-elseif",message:"'elseif' should be 'else if'"}),e.allow_whitespace(),e.eat("if")){const t=e.current();"IfBlock"!==t.type&&e.error({code:"invalid-elseif-placement",message:"Cannot have an {:else if ...} block outside an {#if ...} block"}),e.require_whitespace();const n=Ot(e);e.allow_whitespace(),e.eat("}",!0),t.else={start:e.index,end:null,type:"ElseBlock",children:[{start:e.index,end:null,type:"IfBlock",elseif:!0,expression:n,children:[]}]},e.stack.push(t.else.children[0])}else{const t=e.current();"IfBlock"!==t.type&&"EachBlock"!==t.type&&e.error({code:"invalid-else-placement",message:"Cannot have an {:else} block outside an {#if ...} or {#each ...} block"}),e.allow_whitespace(),e.eat("}",!0),t.else={start:e.index,end:null,type:"ElseBlock",children:[]},e.stack.push(t.else)}else if(e.match(":then")||e.match(":catch")){const n=e.current(),r=e.eat(":then")||!e.eat(":catch");r?"PendingBlock"!==n.type&&e.error({code:"invalid-then-placement",message:"Cannot have an {:then} block outside an {#await ...} block"}):"ThenBlock"!==n.type&&"PendingBlock"!==n.type&&e.error({code:"invalid-catch-placement",message:"Cannot have an {:catch} block outside an {#await ...} block"}),n.end=t,e.stack.pop();const i=e.current();e.eat("}")||(e.require_whitespace(),i[r?"value":"error"]=e.read_identifier(),e.allow_whitespace(),e.eat("}",!0));const o={start:t,end:null,type:r?"ThenBlock":"CatchBlock",children:[],skip:!1};i[r?"then":"catch"]=o,e.stack.push(o)}else if(e.eat("#")){let n;e.eat("if")?n="IfBlock":e.eat("each")?n="EachBlock":e.eat("await")?n="AwaitBlock":e.error({code:"expected-block-type",message:"Expected if, each or await"}),e.require_whitespace();const r=Ot(e),i="AwaitBlock"===n?{start:t,end:null,type:n,expression:r,value:null,error:null,pending:{start:null,end:null,type:"PendingBlock",children:[],skip:!0},then:{start:null,end:null,type:"ThenBlock",children:[],skip:!0},catch:{start:null,end:null,type:"CatchBlock",children:[],skip:!0}}:{start:t,end:null,type:n,expression:r,children:[]};e.allow_whitespace(),"EachBlock"===n&&(e.eat("as",!0),e.require_whitespace(),i.context=function e(t){const n={start:t.index,end:null,type:null};if(t.eat("[")){n.type="ArrayPattern",n.elements=[];do{t.allow_whitespace();const r=n.elements[n.elements.length-1];r&&"RestIdentifier"===r.type&&zc(t),","===t.template[t.index]?n.elements.push(null):(n.elements.push(e(t)),t.allow_whitespace())}while(t.eat(","));Fc(t),t.eat("]",!0),n.end=t.index}else if(t.eat("{")){n.type="ObjectPattern",n.properties=[];do{if(t.allow_whitespace(),t.eat("...")){t.allow_whitespace();const e=t.index,r=t.read_identifier(),i={start:e,end:t.index,type:"Identifier",name:r},o={start:e,end:t.index,type:"Property",kind:"rest",shorthand:!0,key:i,value:i};n.properties.push(o),t.allow_whitespace(),t.eat(",")&&t.error({code:"comma-after-rest",message:"Comma is not permitted after the rest element"},t.index-1);break}const r=t.index,i=t.read_identifier(),o={start:r,end:t.index,type:"Identifier",name:i};t.allow_whitespace();const s=t.eat(":")?(t.allow_whitespace(),e(t)):o,a={start:r,end:s.end,type:"Property",kind:"init",shorthand:"Identifier"===s.type&&s.name===i,key:o,value:s};n.properties.push(a),t.allow_whitespace()}while(t.eat(","));Fc(t),t.eat("}",!0),n.end=t.index}else if(t.eat("...")){const e=t.read_identifier();e?(n.type="RestIdentifier",n.end=t.index,n.name=e):t.error({code:"invalid-context",message:"Expected a rest pattern"})}else{const e=t.read_identifier();e?(n.type="Identifier",n.end=t.index,n.name=e):t.error({code:"invalid-context",message:"Expected a name, array pattern or object pattern"}),Fc(t)}return n}(e),e.allow_whitespace(),e.eat(",")&&(e.allow_whitespace(),i.index=e.read_identifier(),i.index||e.error({code:"expected-name",message:"Expected name"}),e.allow_whitespace()),e.eat("(")&&(e.allow_whitespace(),i.key=Ot(e),e.allow_whitespace(),e.eat(")",!0),e.allow_whitespace()));const o="AwaitBlock"===n&&e.eat("then");if(o&&(e.require_whitespace(),i.value=e.read_identifier(),e.allow_whitespace()),e.eat("}",!0),e.current().children.push(i),e.stack.push(i),"AwaitBlock"===n){let t;o?(i.then.skip=!1,t=i.then):(i.pending.skip=!1,t=i.pending),t.start=e.index,e.stack.push(t)}}else if(e.eat("@html")){e.require_whitespace();const n=Ot(e);e.allow_whitespace(),e.eat("}",!0),e.current().children.push({start:t,end:e.index,type:"RawMustacheTag",expression:n})}else if(e.eat("@debug")){let n;if(e.read(/\s*}/))n=[];else{const t=Ot(e);n="SequenceExpression"===t.type?t.expressions:[t],n.forEach(t=>{"Identifier"!==t.type&&e.error({code:"invalid-debug-args",message:"{@debug ...} arguments must be identifiers, not arbitrary expressions"},t.start)}),e.allow_whitespace(),e.eat("}",!0)}e.current().children.push({start:t,end:e.index,type:"DebugTag",identifiers:n})}else{const n=Ot(e);e.allow_whitespace(),e.eat("}",!0),e.current().children.push({start:t,end:e.index,type:"MustacheTag",expression:n})}}function Wc(e){const t=e.index;let n="";for(;e.index<e.template.length&&!e.match("<")&&!e.match("{");)n+=e.template[e.index++];const r={start:t,end:e.index,type:"Text",raw:n,data:mc(n)};e.current().children.push(r)}function Hc(e){return e.match("<")?Lc:e.match("{")?Uc:Wc}function Kc(e,t){void 0===t&&(t={});var n=t.offsetLine||0,r=t.offsetColumn||0,i=e.split("\n"),o=0,s=i.map((function(e,t){var n=o+e.length+1,r={start:o,end:n,line:t};return o=n,r})),a=0;function c(e,t){return e.start<=t&&t<e.end}function l(e,t){return{line:n+e.line,column:r+t-e.start,character:t}}return function(t,n){"string"==typeof t&&(t=e.indexOf(t,n||0));for(var r=s[a],i=t>=r.end?1:-1;r;){if(c(r,t))return l(r,t);r=s[a+=i]}}}function Jc(e,t,n){if("number"==typeof n)throw new Error("locate takes a { startIndex, offsetLine, offsetColumn } object as the third argument");return Kc(e,n)(t,n&&n.startIndex)}function Yc(e){return e.replace(/^\t+/,e=>e.split("\t").join("  "))}function Gc(e,t,n){const r=e.split("\n"),i=Math.max(0,t-2),o=Math.min(t+3,r.length),s=String(o+1).length;return r.slice(i,o).map((e,r)=>{const o=i+r===t,a=String(r+i+1).padStart(s," ");if(o){const t=" ".repeat(s+2+Yc(e.slice(0,n)).length)+"^";return`${a}: ${Yc(e)}\n${t}`}return`${a}: ${Yc(e)}`}).join("\n")}class Xc extends Error{toString(){return`${this.message} (${this.start.line}:${this.start.column})\n${this.frame}`}}function Qc(e,t){const n=new Xc(e);n.name=t.name;const r=Jc(t.source,t.start,{offsetLine:1}),i=Jc(t.source,t.end||t.start,{offsetLine:1});throw n.code=t.code,n.start=r,n.end=i,n.pos=t.start,n.filename=t.filename,n.frame=Gc(t.source,r.line-1,r.column),n}class Zc{constructor(e,t){if(this.index=0,this.stack=[],this.css=[],this.js=[],this.meta_tags={},"string"!=typeof e)throw new TypeError("Template must be a string");this.template=e.replace(/\s+$/,""),this.filename=t.filename,this.customElement=t.customElement,this.html={start:null,end:null,type:"Fragment",children:[]},this.stack.push(this.html);let n=Hc;for(;this.index<this.template.length;)n=n(this)||Hc;if(this.stack.length>1){const e=this.current(),t="Element"===e.type?`<${e.name}>`:"Block",n="Element"===e.type?"element":"block";this.error({code:`unclosed-${n}`,message:`${t} was left open`},e.start)}if(n!==Hc&&this.error({code:"unexpected-eof",message:"Unexpected end of input"}),this.html.children.length){let t=this.html.children[0].start;for(;At.test(e[t]);)t+=1;let n=this.html.children[this.html.children.length-1].end;for(;At.test(e[n-1]);)n-=1;this.html.start=t,this.html.end=n}else this.html.start=this.html.end=null}current(){return this.stack[this.stack.length-1]}acorn_error(e){this.error({code:"parse-error",message:e.message.replace(/ \(\d+:\d+\)$/,"")},e.pos)}error({code:e,message:t},n=this.index){Qc(t,{name:"ParseError",code:e,source:this.template,start:n,filename:this.filename})}eat(e,t,n){return this.match(e)?(this.index+=e.length,!0):(t&&this.error({code:`unexpected-${this.index===this.template.length?"eof":"token"}`,message:n||`Expected ${e}`}),!1)}match(e){return this.template.slice(this.index,this.index+e.length)===e}match_regex(e){const t=e.exec(this.template.slice(this.index));return t&&0===t.index?t[0]:null}allow_whitespace(){for(;this.index<this.template.length&&At.test(this.template[this.index]);)this.index++}read(e){const t=this.match_regex(e);return t&&(this.index+=t.length),t}read_identifier(){const e=this.index;let t=this.index;const n=yc(this.template,t);if(!g(n,!0))return null;for(t+=n<=65535?1:2;t<this.template.length;){const e=yc(this.template,t);if(!v(e,!0))break;t+=e<=65535?1:2}const r=this.template.slice(this.index,this.index=t);return wc.has(r)&&this.error({code:"unexpected-reserved-word",message:`'${r}' is a reserved word in JavaScript and cannot be used here`},e),r}read_until(e){this.index>=this.template.length&&this.error({code:"unexpected-eof",message:"Unexpected end of input"});const t=this.index,n=e.exec(this.template.slice(t));return n?(this.index=t+n.index,this.template.slice(t,this.index)):(this.index=this.template.length,this.template.slice(t))}require_whitespace(){At.test(this.template[this.index])||this.error({code:"missing-whitespace",message:"Expected whitespace"}),this.allow_whitespace()}}function el(e,t={}){const n=new Zc(e,t);n.css.length>1&&n.error({code:"duplicate-style",message:"You can only have one top-level <style> tag per component"},n.css[1].start);const r=n.js.filter(e=>"default"===e.context),i=n.js.filter(e=>"module"===e.context);return r.length>1&&n.error({code:"invalid-script",message:"A component can only have one instance-level <script> element"},r[1].start),i.length>1&&n.error({code:"invalid-script",message:'A component can only have one <script context="module"> element'},i[1].start),{html:n.html,css:n.css[0],instance:r[0],module:i[0]}}function tl(e){return e&&"MemberExpression"===e.type&&"@_document"===e.object.name&&"head"===e.property.name}class nl{constructor(e){this.dependencies=new Set,this.event_listeners=[],this.variables=new Map,this.has_update_method=!1,this.parent=e.parent,this.renderer=e.renderer,this.name=e.name,this.type=e.type,this.comment=e.comment,this.wrappers=[],this.key=e.key,this.first=null,this.bindings=e.bindings,this.chunks={init:[],create:[],claim:[],hydrate:[],mount:[],measure:[],fix:[],animate:[],intro:[],update:[],outro:[],destroy:[]},this.has_animation=!1,this.has_intro_method=!1,this.has_outro_method=!1,this.outros=0,this.get_unique_name=this.renderer.component.get_unique_name_maker(),this.aliases=new Map,this.key&&this.aliases.set("key",this.get_unique_name("key"))}assign_variable_names(){const e=new Set,t=new Set;let n=this.wrappers.length;for(;n--;){const r=this.wrappers[n];r.var&&(e.has(r.var.name)&&t.add(r.var.name),e.add(r.var.name))}const r=new Map;for(n=this.wrappers.length;n--;){const e=this.wrappers[n];if(!e.var)continue;let i="";if(t.has(e.var.name)){const t=r.get(e.var.name)||0;r.set(e.var.name,t+1),i=t}e.var.name=this.get_unique_name(e.var.name+i).name}}add_dependencies(e){e.forEach(e=>{this.dependencies.add(e)}),this.has_update_method=!0,this.parent&&this.parent.add_dependencies(e)}add_element(e,t,n,r,i){this.add_variable(e),this.chunks.create.push(_t`${e} = ${t};`),this.renderer.options.hydratable&&this.chunks.claim.push(_t`${e} = ${n||t};`),r?(this.chunks.mount.push(_t`@append(${r}, ${e});`),tl(r)&&!i&&this.chunks.destroy.push(_t`@detach(${e});`)):(this.chunks.mount.push(_t`@insert(#target, ${e}, anchor);`),i||this.chunks.destroy.push(_t`if (detaching) @detach(${e});`))}add_intro(e){this.has_intros=this.has_intro_method=!0,!e&&this.parent&&this.parent.add_intro()}add_outro(e){this.has_outros=this.has_outro_method=!0,this.outros+=1,!e&&this.parent&&this.parent.add_outro()}add_animation(){this.has_animation=!0}add_variable(e,t){if(this.variables.has(e.name))throw new Error(`Variable '${e.name}' already initialised with a different value`);this.variables.set(e.name,{id:e,init:t})}alias(e){return this.aliases.has(e)||this.aliases.set(e,this.get_unique_name(e)),this.aliases.get(e)}child(e){return new nl(Object.assign({},this,{key:null},e,{parent:this}))}get_contents(e){const{dev:t}=this.renderer.options;this.has_outros&&(this.add_variable({type:"Identifier",name:"#current"}),this.chunks.intro.length>0&&(this.chunks.intro.push(_t`#current = true;`),this.chunks.mount.push(_t`#current = true;`)),this.chunks.outro.length>0&&this.chunks.outro.push(_t`#current = false;`)),this.autofocus&&this.chunks.mount.push(_t`${this.autofocus}.focus();`),this.render_listeners();const n={},r=St`@noop`;if(n.key=e,this.first&&(n.first=St`null`,this.chunks.hydrate.push(_t`this.first = ${this.first};`)),0===this.chunks.create.length&&0===this.chunks.hydrate.length)n.create=r;else{const e=this.chunks.hydrate.length>0&&(this.renderer.options.hydratable?_t`this.h();`:this.chunks.hydrate);n.create=St`function #create() {
				${this.chunks.create}
				${e}
			}`}if((this.renderer.options.hydratable||this.chunks.claim.length>0)&&(0===this.chunks.claim.length&&0===this.chunks.hydrate.length?n.claim=r:n.claim=St`function #claim(#nodes) {
					${this.chunks.claim}
					${this.renderer.options.hydratable&&this.chunks.hydrate.length>0&&_t`this.h();`}
				}`),this.renderer.options.hydratable&&this.chunks.hydrate.length>0&&(n.hydrate=St`function #hydrate() {
				${this.chunks.hydrate}
			}`),0===this.chunks.mount.length?n.mount=r:n.mount=St`function #mount(#target, anchor) {
				${this.chunks.mount}
			}`,this.has_update_method||this.maintain_context)if(0!==this.chunks.update.length||this.maintain_context){const e=this.maintain_context?St`#new_ctx`:St`#ctx`;let t={type:"Identifier",name:"#dirty"};this.renderer.context_overflow||this.parent||(t={type:"ArrayPattern",elements:[t]}),n.update=St`function #update(${e}, ${t}) {
					${this.maintain_context&&_t`#ctx = ${e};`}
					${this.chunks.update}
				}`}else n.update=r;if(this.has_animation&&(n.measure=St`function #measure() {
				${this.chunks.measure}
			}`,n.fix=St`function #fix() {
				${this.chunks.fix}
			}`,n.animate=St`function #animate() {
				${this.chunks.animate}
			}`),(this.has_intro_method||this.has_outro_method)&&(0===this.chunks.intro.length?n.intro=r:n.intro=St`function #intro(#local) {
					${this.has_outros&&_t`if (#current) return;`}
					${this.chunks.intro}
				}`,0===this.chunks.outro.length?n.outro=r:n.outro=St`function #outro(#local) {
					${this.chunks.outro}
				}`),0===this.chunks.destroy.length?n.destroy=r:n.destroy=St`function #destroy(detaching) {
				${this.chunks.destroy}
			}`,!this.renderer.component.compile_options.dev)for(const e in n){const t=n[e];t&&(t.id=null)}const i=St`{
			key: ${n.key},
			first: ${n.first},
			c: ${n.create},
			l: ${n.claim},
			h: ${n.hydrate},
			m: ${n.mount},
			p: ${n.update},
			r: ${n.measure},
			f: ${n.fix},
			a: ${n.animate},
			i: ${n.intro},
			o: ${n.outro},
			d: ${n.destroy}
		}`,o=t&&this.get_unique_name("block");return _t`
			${Array.from(this.variables.values()).map(({id:e,init:t})=>t?_t`let ${e} = ${t}`:_t`let ${e}`)}

			${this.chunks.init}

			${t?_t`
					const ${o} = ${i};
					@dispatch_dev("SvelteRegisterBlock", {
						block: ${o},
						id: ${this.name||"create_fragment"}.name,
						type: "${this.type}",
						source: "${this.comment?this.comment.replace(/"/g,'\\"'):""}",
						ctx: #ctx
					});
					return ${o};`:_t`
					return ${i};`}
		`}has_content(){return this.renderer.options.dev||this.first||this.event_listeners.length>0||this.chunks.intro.length>0||this.chunks.outro.length>0||this.chunks.create.length>0||this.chunks.hydrate.length>0||this.chunks.claim.length>0||this.chunks.mount.length>0||this.chunks.update.length>0||this.chunks.destroy.length>0||this.has_animation}render(){const e=this.key&&this.get_unique_name("key"),t=[St`#ctx`];e&&t.unshift(e);const n=_t`function ${this.name}(${t}) {
			${this.get_contents(e)}
		}`;return this.comment?_t`
				// ${this.comment}
				${n}`:n}render_listeners(e=""){if(this.event_listeners.length>0){const t={type:"Identifier",name:`#dispose${e}`};this.add_variable(t),1===this.event_listeners.length?(this.chunks.mount.push(_t`${t} = ${this.event_listeners[0]};`),this.chunks.destroy.push(_t`${t}();`)):(this.chunks.mount.push(_t`
					${t} = [
						${this.event_listeners}
					];
				`),this.chunks.destroy.push(_t`@run_all(${t});`))}}}class rl{constructor(e,t,n,r){this.node=r,Object.defineProperties(this,{renderer:{value:e},parent:{value:n}}),this.can_use_innerhtml=!e.options.hydratable,this.is_static_content=!e.options.hydratable,t.wrappers.push(this)}cannot_use_innerhtml(){this.can_use_innerhtml=!1,this.parent&&this.parent.cannot_use_innerhtml()}not_static_content(){this.is_static_content=!1,this.parent&&this.parent.not_static_content()}get_or_create_anchor(e,t,n){const r=this.next?!this.next.is_dom_node():!t||!this.parent.is_dom_node(),i=r?e.get_unique_name(`${this.var.name}_anchor`):this.next&&this.next.var||{type:"Identifier",name:"null"};return r&&e.add_element(i,St`@empty()`,n&&St`@empty()`,t),i}get_update_mount_node(e){return this.parent&&this.parent.is_dom_node()?this.parent.var:St`${e}.parentNode`}is_dom_node(){return"Element"===this.node.type||"Text"===this.node.type||"MustacheTag"===this.node.type}render(e,t,n){throw Error("Wrapper class is not renderable")}}function il(e,t){const{locate:n,source:r}=t;let i,o=e.start;if("ElseBlock"===e.type){for(;"{"!==r[o-1];)o-=1;for(;"{"===r[o-1];)o-=1}if("InlineComponent"===e.type||"Element"===e.type)for(i=e.children.length?e.children[0].start:e.start;">"!==r[i-1];)i-=1;else{for(i=e.expression?e.expression.node.end:o;"}"!==r[i];)i+=1;for(;"}"===r[i];)i+=1}const s=n(o);return`${`(${s.line}:${s.column})`} ${r.slice(o,i)}`.replace(/\s/g," ")}class ol extends rl{constructor(e,t,n,r,i,o,s){super(t,n,r,i),this.var=null,this.block=n.child({comment:il(i,this.renderer.component),name:this.renderer.component.get_unique_name(`create_${e}_block`),type:e}),this.fragment=new ih(t,this.block,this.node.children,r,o,s),this.is_dynamic=this.block.dependencies.size>0}}const sl=St`true`,al=St`false`;class cl{constructor(e,t){this.node=e,this.parent=t,e.expression||(this.parent.renderer.add_to_context(e.handler_name.name),this.parent.renderer.component.partly_hoisted.push(_t`
				function ${e.handler_name.name}(event) {
					@bubble($$self, event);
				}
			`))}get_snippet(e){const t=this.node.expression?this.node.expression.manipulate(e):e.renderer.reference(this.node.handler_name);return this.node.reassigned?(e.maintain_context=!0,St`function () { if (@is_function(${t})) ${t}.apply(this, arguments); }`):t}render(e,t){let n=this.get_snippet(e);this.node.modifiers.has("preventDefault")&&(n=St`@prevent_default(${n})`),this.node.modifiers.has("stopPropagation")&&(n=St`@stop_propagation(${n})`),this.node.modifiers.has("self")&&(n=St`@self(${n})`);const r=[],i=["passive","once","capture"].filter(e=>this.node.modifiers.has(e));i.length?r.push(1===i.length&&"capture"===i[0]?sl:St`{ ${i.map(e=>$t`${e}: true`)} }`):e.renderer.options.dev&&r.push(al),e.renderer.options.dev&&(r.push(this.node.modifiers.has("preventDefault")?sl:al),r.push(this.node.modifiers.has("stopPropagation")?sl:al)),e.event_listeners.push(St`@listen(${t}, "${this.node.name}", ${n}, ${r})`)}}function ll(e,t,n){n.forEach(n=>hl(e,t,n))}function hl(e,t,n){n.render(e,t)}function pl(e,t){t.forEach(t=>{e.add(t)})}class ul extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r),this.var=null,this.block=t.child({comment:il(r,this.renderer.component),name:this.renderer.component.get_unique_name("create_else_block"),type:"else"}),this.fragment=new ih(e,this.block,this.node.children,n,i,o),this.is_dynamic=this.block.dependencies.size>0}}function dl(e){return{type:"Literal",value:e}}const fl={'"':"&quot;","'":"&#39;","&":"&amp;","<":"&lt;",">":"&gt;"};function ml(e){return String(e).replace(/["'&<>]/g,e=>fl[e])}const gl="accent-height accumulate additive alignment-baseline allowReorder alphabetic amplitude arabic-form ascent attributeName attributeType autoReverse azimuth baseFrequency baseline-shift baseProfile bbox begin bias by calcMode cap-height class clip clipPathUnits clip-path clip-rule color color-interpolation color-interpolation-filters color-profile color-rendering contentScriptType contentStyleType cursor cx cy d decelerate descent diffuseConstant direction display divisor dominant-baseline dur dx dy edgeMode elevation enable-background end exponent externalResourcesRequired fill fill-opacity fill-rule filter filterRes filterUnits flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight format from fr fx fy g1 g2 glyph-name glyph-orientation-horizontal glyph-orientation-vertical glyphRef gradientTransform gradientUnits hanging height href horiz-adv-x horiz-origin-x id ideographic image-rendering in in2 intercept k k1 k2 k3 k4 kernelMatrix kernelUnitLength kerning keyPoints keySplines keyTimes lang lengthAdjust letter-spacing lighting-color limitingConeAngle local marker-end marker-mid marker-start markerHeight markerUnits markerWidth mask maskContentUnits maskUnits mathematical max media method min mode name numOctaves offset onabort onactivate onbegin onclick onend onerror onfocusin onfocusout onload onmousedown onmousemove onmouseout onmouseover onmouseup onrepeat onresize onscroll onunload opacity operator order orient orientation origin overflow overline-position overline-thickness panose-1 paint-order pathLength patternContentUnits patternTransform patternUnits pointer-events points pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits r radius refX refY rendering-intent repeatCount repeatDur requiredExtensions requiredFeatures restart result rotate rx ry scale seed shape-rendering slope spacing specularConstant specularExponent speed spreadMethod startOffset stdDeviation stemh stemv stitchTiles stop-color stop-opacity strikethrough-position strikethrough-thickness string stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width style surfaceScale systemLanguage tabindex tableValues target targetX targetY text-anchor text-decoration text-rendering textLength to transform type u1 u2 underline-position underline-thickness unicode unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical values version vert-adv-y vert-origin-x vert-origin-y viewBox viewTarget visibility width widths word-spacing writing-mode x x-height x1 x2 xChannelSelector xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xml:lang xml:space y y1 y2 yChannelSelector z zoomAndPan".split(" "),vl=new Map;function yl(e){return e=e.toLowerCase(),vl.get(e)||e}gl.forEach(e=>{vl.set(e.toLowerCase(),e)});const bl="http://www.w3.org/1999/xhtml",wl="http://www.w3.org/1998/Math/MathML",xl="http://www.w3.org/2000/svg",kl="http://www.w3.org/1999/xlink",_l="http://www.w3.org/XML/1998/namespace",Sl="http://www.w3.org/2000/xmlns",$l=["html","mathml","svg","xlink","xml","xmlns",bl,wl,xl,kl,_l,Sl],Cl={html:bl,mathml:wl,svg:xl,xlink:kl,xml:_l,xmlns:Sl};class El{constructor(e,t,n){if(this.node=n,this.parent=e,n.dependencies.size>0&&(e.cannot_use_innerhtml(),e.not_static_content(),t.add_dependencies(n.dependencies),"option"===this.parent.node.name&&"value"===n.name)){let e=this.parent;for(;e&&("Element"!==e.node.type||"select"!==e.node.name);)e=e.parent;e&&e.select_binding_dependencies&&e.select_binding_dependencies.forEach(e=>{this.node.dependencies.forEach(t=>{this.parent.renderer.component.indirect_dependencies.get(e).add(t)})})}}render(e){const t=this.parent,n=yl(this.node.name),r=this.get_metadata(),i="value"===n&&("option"===t.node.name||"input"===t.node.name&&t.node.bindings.find(e=>/checked|group/.test(e.name))),o=i?"__value":r&&r.property_name,s=/-/.test(t.node.name)?"@set_custom_element_data":"xlink:"===n.slice(0,6)?"@xlink_attr":"@attr",a=t.renderer.component.compile_options.legacy&&"type"===n&&"input"===this.parent.node.name,c=this.node.get_dependencies(),l=this.get_value(e),h="src"===this.node.name,p="value"===n&&"select"===t.node.name,u="value"===n&&"input"===t.node.name,d=h||this.node.should_cache()||p,f=d&&e.get_unique_name(`${t.var.name}_${n.replace(/[^a-zA-Z_$]/g,"_")}_value`);let m;d&&e.add_variable(f);const g=d?St`${f} = ${l}`:l;if(a)e.chunks.hydrate.push(_t`@set_input_type(${t.var}, ${g});`),m=_t`@set_input_type(${t.var}, ${d?f:l});`;else if(p){const n=t.node.get_static_attribute_value("multiple"),r=e.get_unique_name("i"),i=e.get_unique_name("option"),o=n?_t`
					${i}.selected = ~${f}.indexOf(${i}.__value);`:_t`
					if (${i}.__value === ${f}) {
						${i}.selected = true;
						${{type:"BreakStatement"}};
					}`;m=_t`
				for (var ${r} = 0; ${r} < ${t.var}.options.length; ${r} += 1) {
					var ${i} = ${t.var}.options[${r}];

					${o}
				}
			`,e.chunks.mount.push(_t`
				${f} = ${l};
				${m}
			`)}else h?(e.chunks.hydrate.push(_t`if (${t.var}.src !== ${g}) ${s}(${t.var}, "${n}", ${f});`),m=_t`${s}(${t.var}, "${n}", ${d?f:l});`):o?(e.chunks.hydrate.push(_t`${t.var}.${o} = ${g};`),m=e.renderer.options.dev?_t`@prop_dev(${t.var}, "${o}", ${d?f:l});`:_t`${t.var}.${o} = ${d?f:l};`):(e.chunks.hydrate.push(_t`${s}(${t.var}, "${n}", ${g});`),m=_t`${s}(${t.var}, "${n}", ${d?f:l});`);if(c.length>0){let n=e.renderer.dirty(c);if(d&&(n=h?St`${n} && (${t.var}.src !== (${f} = ${l}))`:St`${n} && (${f} !== (${f} = ${l}))`),u){const e=t.node.get_static_attribute_value("type");null!==e&&""!==e&&"text"!==e&&"email"!==e&&"password"!==e||(n=St`${n} && ${t.var}.${o} !== ${d?f:l}`)}e.has_outros&&(n=St`!#current || ${n}`),e.chunks.update.push(_t`
				if (${n}) {
					${m}
				}`)}if(this.node.is_true&&"autofocus"===n&&(e.autofocus=t.var),i){const n=_t`${t.var}.value = ${t.var}.__value;`;e.chunks.hydrate.push(n),this.node.get_dependencies().length>0&&e.chunks.update.push(n)}}get_metadata(){if(this.parent.node.namespace)return null;const e=Tl[yl(this.node.name)];return e&&e.applies_to&&!e.applies_to.includes(this.parent.node.name)?null:e}get_value(e){if(this.node.is_true){const e=this.get_metadata();return e&&Al.has(e.property_name.toLowerCase())?St`true`:St`""`}if(0===this.node.chunks.length)return St`""`;if(1===this.node.chunks.length)return"Text"===this.node.chunks[0].type?dl(this.node.chunks[0].data):this.node.chunks[0].manipulate(e);let t="class"===this.node.name?this.get_class_name_text(e):this.render_chunks(e).reduce((e,t)=>St`${e} + ${t}`);return"Text"!==this.node.chunks[0].type&&(t=St`"" + ${t}`),t}get_class_name_text(e){const t=this.node.chunks.some(e=>e.synthetic),n=this.render_chunks(e);return t&&2===n.length&&(n[0]=St`@null_to_empty(${n[0]})`),n.reduce((e,t)=>St`${e} + ${t}`)}render_chunks(e){return this.node.chunks.map(t=>"Text"===t.type?dl(t.data):t.manipulate(e))}stringify(){if(this.node.is_true)return"";const e=this.node.chunks;return 0===e.length?'=""':`="${e.map(e=>"Text"===e.type?e.data.replace(/"/g,'\\"'):`\${${e.manipulate()}}`).join("")}"`}}const Tl={allowfullscreen:{property_name:"allowFullscreen",applies_to:["iframe"]},allowpaymentrequest:{property_name:"allowPaymentRequest",applies_to:["iframe"]},async:{applies_to:["script"]},autofocus:{applies_to:["button","input","keygen","select","textarea"]},autoplay:{applies_to:["audio","video"]},checked:{applies_to:["input"]},controls:{applies_to:["audio","video"]},default:{applies_to:["track"]},defer:{applies_to:["script"]},disabled:{applies_to:["button","fieldset","input","keygen","optgroup","option","select","textarea"]},formnovalidate:{property_name:"formNoValidate",applies_to:["button","input"]},hidden:{},indeterminate:{applies_to:["input"]},ismap:{property_name:"isMap",applies_to:["img"]},loop:{applies_to:["audio","bgsound","video"]},multiple:{applies_to:["input","select"]},muted:{applies_to:["audio","video"]},nomodule:{property_name:"noModule",applies_to:["script"]},novalidate:{property_name:"noValidate",applies_to:["form"]},open:{applies_to:["details","dialog"]},playsinline:{property_name:"playsInline",applies_to:["video"]},readonly:{property_name:"readOnly",applies_to:["input","textarea"]},required:{applies_to:["input","select","textarea"]},reversed:{applies_to:["ol"]},selected:{applies_to:["option"]},value:{applies_to:["button","option","input","li","meter","progress","param","select","textarea"]}};Object.keys(Tl).forEach(e=>{const t=Tl[e];t.property_name||(t.property_name=e)});const Al=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);class Nl extends El{render(e){const t=function(e){const t=[];let n=e.slice();for(;n.length;){const e=n[0];if("Text"!==e.type)return null;const r=/^\s*([\w-]+):\s*/.exec(e.data);if(!r)return null;const i=r[1],o=r.index+r[0].length,s=e.data.slice(o);s?n[0]={start:e.start+o,end:e.end,type:"Text",data:s}:n.shift();const a=Ml(n);t.push({key:i,value:a.value,important:a.important}),n=a.chunks}return t}(this.node.chunks);if(!t)return super.render(e);t.forEach(t=>{let n;if(function(e){return e.length>1||"Text"!==e[0].type}(t.value)){const r=new Set;if(n=t.value.map(t=>"Text"===t.type?dl(t.data):(pl(r,t.dynamic_dependencies()),t.manipulate(e))).reduce((e,t)=>St`${e} + ${t}`),r.size){let i=e.renderer.dirty(Array.from(r));e.has_outros&&(i=St`!#current || ${i}`);const o=_t`
						if (${i}) {
							@set_style(${this.parent.var}, "${t.key}", ${n}, ${t.important?1:null});
						}`;e.chunks.update.push(o)}}else n=dl(t.value[0].data);e.chunks.hydrate.push(_t`@set_style(${this.parent.var}, "${t.key}", ${n}, ${t.important?1:null});`)})}}function Ml(e){const t=[];let n=!1,r=null,i=!1,o=!1;for(;e.length&&!o;){const s=e.shift();if("Text"===s.type){let a=0;for(;a<s.data.length;){const e=s.data[a];if(i)i=!1;else if("\\"===e)i=!0;else if(e===r)r=null;else if('"'===e||"'"===e)r=e;else if(")"===e&&n)n=!1;else if("u"===e&&"url("===s.data.slice(a,a+4))n=!0;else if(";"===e&&!n&&!r){o=!0;break}a+=1}for(a>0&&t.push({type:"Text",start:s.start,end:s.start+a,data:s.data.slice(0,a)});/[;\s]/.test(s.data[a]);)a+=1;const c=s.data.slice(a);if(c){e.unshift({start:s.start+a,end:s.end,type:"Text",data:c});break}}else t.push(s)}let s=!1;const a=t[t.length-1];return a&&"Text"===a.type&&/\s*!important\s*$/.test(a.data)&&(s=!0,a.data=a.data.replace(/\s*!important\s*$/,""),a.data||t.pop()),{chunks:e,value:t,important:s}}function Ol(e){for(;"MemberExpression"===e.type;)e=e.object;return e}function Dl(e){const t=[],n=[];for(;"MemberExpression"===e.type;)t.unshift(e.property),e.computed||n.unshift(e.property.name),e=e.object;const r="Identifier"===e.type?e.name:"ThisExpression"===e.type?"this":null;return t.unshift(e),e.computed||n.unshift(r),{name:r,nodes:t,parts:n}}class Rl{constructor(e,t,n){this.node=t,this.parent=n;const{dependencies:r}=this.node.expression;if(e.add_dependencies(r),"select"===n.node.name&&(n.select_binding_dependencies=r,r.forEach(e=>{n.renderer.component.indirect_dependencies.set(e,new Set)})),t.is_contextual){const{name:e}=Ol(this.node.expression.node);this.parent.node.scope.get_owner(e).has_binding=!0}this.object=Ol(this.node.expression.node).name,this.handler=function(e,t,n,r,i){const o=function(e,t,n){const{node:r}=t,{name:i}=n.node;if("this"===i)return St`$$node`;if("select"===r.name)return!0===r.get_static_attribute_value("multiple")?St`@select_multiple_value(this)`:St`@select_value(this)`;const o=r.get_static_attribute_value("type");if("group"===i){const t=Pl(e,n.node.expression.node);return"checkbox"===o?St`@get_binding_group_value($$binding_groups[${t}])`:St`this.__value`}return"range"===o||"number"===o?St`@to_number(this.${i})`:"buffered"===i||"seekable"===i||"played"===i?St`@time_ranges_to_array(this.${i})`:St`this.${i}`}(t,e.parent,e),s=new Set(e.node.expression.contextual_dependencies),a=n.bindings.get(r);let c;if(a){const{object:e,property:t,modifier:n,store:r}=a;"Identifier"===i.type&&(i=n(St`${e}[${t}]`),s.add(e.name),s.add(t.name)),r&&(c=_t`${r}.set(${`$${r}`});`)}else{const e=Ol(i);if("$"===e.name[0]){const t=e.name.slice(1);c=_t`${t}.set(${e.name});`}}const l=_t`
		${i} = ${o};
		${c}
	`;return{uses_context:e.node.is_contextual||e.node.expression.uses_context,mutation:l,contextual_dependencies:s}}(this,n.renderer,e,this.object,this.node.raw_expression),this.snippet=this.node.expression.manipulate(e),this.is_readonly=this.node.is_readonly,this.needs_lock="currentTime"===this.node.name||"input"===n.node.name&&"number"===n.node.get_static_attribute_value("type")}get_dependencies(){const e=new Set(this.node.expression.dependencies);return this.node.expression.dependencies.forEach(t=>{const n=this.parent.renderer.component.indirect_dependencies.get(t);n&&n.forEach(t=>{e.add(t)})}),e}is_readonly_media_attribute(){return this.node.is_readonly_media_attribute()}render(e,t){if(this.is_readonly)return;const{parent:n}=this,r=this.needs_lock?[St`!${t}`]:[],i=[],o=[...this.node.expression.dependencies];if(o.length>0&&r.push(e.renderer.dirty(o)),"input"===n.node.name){const e=n.node.get_static_attribute_value("type");null!==e&&""!==e&&"text"!==e&&"email"!==e&&"password"!==e||r.push(St`(${n.var}.${this.node.name} !== ${this.snippet})`)}let s=function(e,t){const{node:n}=e;if(t.is_readonly_media_attribute())return null;if("this"===t.node.name)return null;if("select"===n.name)return!0===n.get_static_attribute_value("multiple")?_t`@select_options(${e.var}, ${t.snippet})`:_t`@select_option(${e.var}, ${t.snippet})`;if("group"===t.node.name){const r="checkbox"===n.get_static_attribute_value("type")?St`~${t.snippet}.indexOf(${e.var}.__value)`:St`${e.var}.__value === ${t.snippet}`;return _t`${e.var}.checked = ${r};`}return"value"===t.node.name?_t`@set_input_value(${e.var}, ${t.snippet});`:_t`${e.var}.${t.node.name} = ${t.snippet};`}(n,this),a=s;switch(this.node.name){case"group":{const t=Pl(n.renderer,this.node.expression.node);e.renderer.add_to_context("$$binding_groups");const r=e.renderer.reference("$$binding_groups");e.chunks.hydrate.push(_t`${r}[${t}].push(${n.var});`),e.chunks.destroy.push(_t`${r}[${t}].splice(${r}[${t}].indexOf(${n.var}), 1);`);break}case"textContent":r.push(St`${this.snippet} !== ${n.var}.textContent`),i.push(St`${this.snippet} !== void 0`);break;case"innerHTML":r.push(St`${this.snippet} !== ${n.var}.innerHTML`),i.push(St`${this.snippet} !== void 0`);break;case"currentTime":r.push(St`!@_isNaN(${this.snippet})`),a=null;break;case"playbackRate":case"volume":r.push(St`!@_isNaN(${this.snippet})`),i.push(St`!@_isNaN(${this.snippet})`);break;case"paused":{const t=e.get_unique_name(`${n.var.name}_is_paused`);e.add_variable(t,St`true`),r.push(St`${t} !== (${t} = ${this.snippet})`),s=_t`${n.var}[${t} ? "pause" : "play"]();`,a=null;break}case"value":"file"===n.node.get_static_attribute_value("type")&&(s=null,a=null)}if(s)if(r.length>0){const t=r.reduce((e,t)=>St`${e} && ${t}`);e.chunks.update.push(_t`
					if (${t}) {
						${s}
					}
				`)}else e.chunks.update.push(s);if(a)if(i.length>0){const t=i.reduce((e,t)=>St`${e} && ${t}`);e.chunks.mount.push(_t`
					if (${t}) {
						${a}
					}
				`)}else e.chunks.mount.push(a)}}function Pl(e,t){const{parts:n}=Dl(t),r=n.join(".");let i=e.binding_groups.indexOf(r);return-1===i&&(i=e.binding_groups.length,e.binding_groups.push(r)),i}function Il(e,t,n){const{expression:r}=n;let i,o;r&&(i=r.manipulate(e),o=r.dynamic_dependencies());const s=e.get_unique_name(`${n.name.replace(/[^a-zA-Z0-9_$]/g,"_")}_action`);e.add_variable(s);const a=e.renderer.reference(n.name);if(e.event_listeners.push(St`@action_destroyer(${s} = ${a}.call(null, ${t}, ${i}))`),o&&o.length>0){let t=St`${s} && @is_function(${s}.update)`;o.length>0&&(t=St`${t} && ${e.renderer.dirty(o)}`),e.chunks.update.push(_t`if (${t}) ${s}.update.call(null, ${i});`)}}function Ll(e,t,n){if(0===n.length)return{block:e,scope:t};const r={type:"ObjectPattern",properties:n.map(e=>({type:"Property",kind:"init",key:e.name,value:e.value||e.name}))},i=[],o=new Map;n.forEach(t=>{let n;if(t.names.length>1){const r=e.get_unique_name(t.names.join("_")).name;o.set(t.value,r),n={type:"Identifier",name:r}}else n=t.value||t.name;i.push({type:"Property",kind:"init",key:t.name,value:n})});const s={type:"ObjectPattern",properties:i},a=new Set,c=new Map;n.forEach(e=>{e.names.forEach(t=>{a.add(t),o.has(e.value)&&c.set(t,o.get(e.value))})});const l={type:"ObjectExpression",properties:Array.from(a).map(t=>$t`${e.renderer.context_lookup.get(t).index}: ${t}`)},{context_lookup:h}=e.renderer;return{block:e,scope:t,get_context:St`${r} => ${l}`,get_changes:St`${s} => ${{type:"ParenthesizedExpression",get expression(){if(e.renderer.context_overflow){const e=[];Array.from(a).forEach(t=>{const n=h.get(t).index.value,r=Math.floor(n/31),i=c.has(t)?c.get(t):t;e[r]||(e[r]=[]),e[r].push({name:i,n:n%31})});const t=[];for(let n=0;n<e.length;n+=1)t[n]=e[n]?e[n].map(({name:e,n:t})=>St`${e} ? ${1<<t} : 0`).reduce((e,t)=>St`${e} | ${t}`):St`0`;return{type:"ArrayExpression",elements:t}}return Array.from(a).map(e=>St`${c.has(e)?c.get(e):e} ? ${1<<h.get(e).index.value} : 0`).reduce((e,t)=>St`${e} | ${t}`)}}}`}}function Bl(e,t,n,r){const i=e.get_unique_name(`${r.name}_binding`);t.renderer.add_to_context(i.name);const o=t.renderer.reference(i.name);let s,a,c;if(n.is_contextual&&"Identifier"===n.raw_expression.type){const{name:e}=n.raw_expression,{snippet:r}=t.bindings.get(e);s=r,c=_t`${s} = $$value`}else a=Dl(n.raw_expression).name,s=n.raw_expression,c="Identifier"===n.raw_expression.type?_t`
				${t.renderer.invalidate(a,St`${s} = $$value`)};
			`:_t`
				${s} = $$value;
				${t.renderer.invalidate(a)};
			`;const l=Array.from(n.expression.contextual_dependencies).map(e=>({type:"Identifier",name:e}));if(l.length){e.partly_hoisted.push(_t`
			function ${i}($$value, ${l}) {
				if (${s} === $$value) return;
				@binding_callbacks[$$value ? 'unshift' : 'push'](() => {
					${c}
				});
			}
		`);const n=[];for(const e of l)n.push(e),t.add_variable(e,t.renderer.reference(e.name));const a=t.get_unique_name(`assign_${r.name}`),h=t.get_unique_name(`unassign_${r.name}`);t.chunks.init.push(_t`
			const ${a} = () => ${o}(${r}, ${n});
			const ${h} = () => ${o}(null, ${n});
		`);const p=Array.from(l).map(e=>St`${e} !== ${t.renderer.reference(e.name)}`).reduce((e,t)=>St`${e} || ${t}`);return t.chunks.update.push(_t`
			if (${p}) {
				${h}();
				${n.map(e=>_t`${e} = ${t.renderer.reference(e.name)}`)};
				${a}();
			}`),t.chunks.destroy.push(_t`${h}();`),_t`${a}();`}return e.partly_hoisted.push(_t`
		function ${i}($$value) {
			@binding_callbacks[$$value ? 'unshift' : 'push'](() => {
				${c}
			});
		}
	`),t.chunks.destroy.push(_t`${o}(null);`),_t`${o}(${r});`}class Vl{constructor(e,t,n,r){this.start=r.start,this.end=r.end,this.type=r.type,Object.defineProperties(this,{component:{value:e},parent:{value:t}})}cannot_use_innerhtml(){!1!==this.can_use_innerhtml&&(this.can_use_innerhtml=!1,this.parent&&this.parent.cannot_use_innerhtml())}find_nearest(e){return e.test(this.type)?this:this.parent?this.parent.find_nearest(e):void 0}get_static_attribute_value(e){const t=this.attributes&&this.attributes.find(t=>"Attribute"===t.type&&t.name.toLowerCase()===e);return t?!!t.is_true||(0===t.chunks.length?"":1===t.chunks.length&&"Text"===t.chunks[0].type?t.chunks[0].data:null):null}has_ancestor(e){return!!this.parent&&(this.parent.type===e||this.parent.has_ancestor(e))}}function Fl(e){return We(e)}function zl(e){if(e){if(e.mutated||e.reassigned)return!0;if(!e.module&&e.writable&&e.export_name)return!0}return!1}function ql(e,t,n,r,i=!1){const{component:o}=e,[s,...a]=Array.from(r).filter(e=>{const n=t.find_owner(e);return!n||n===o.instance_scope}).map(e=>o.var_lookup.get(e)).filter(e=>e&&!e.hoistable&&!e.global&&!e.module&&(e.referenced||e.subscribable||e.is_reactive_dependency||e.export_name||"$"===e.name[0]));function c(t,n){return i&&!t.subscribable&&"$"!==t.name[0]?n||St`${t.name}`:e.invalidate(t.name)}if(s){if(o.has_reactive_assignments=!0,"AssignmentExpression"===n.type&&"="===n.operator&&function e(t,n){if(!!t!=!!n)return!1;if(Array.isArray(t)!==Array.isArray(n))return!1;if(t&&"object"==typeof t){if(Array.isArray(t))return t.length===n.length&&t.every((t,r)=>e(t,n[r]));const r=Object.keys(t).sort(),i=Object.keys(n).sort();if(r.length!==i.length)return!1;let o=r.length;for(;o--;){const s=r[o];if(i[o]!==s)return!1;if("start"!==s&&"end"!==s&&!e(t[s],n[s]))return!1}return!0}return t===n}(n.left,n.right)&&0===a.length)return c(s,n);{const t="$"===s.name[0],r=a.map(e=>c(e));(r.length>0||"AssignmentExpression"===n.type&&"Identifier"!==n.left.type||"UpdateExpression"===n.type&&!n.prefix)&&r.unshift({type:"Identifier",name:s.name});let o=t?St`@set_store_value(${s.name.slice(1)}, ${n}, ${r})`:i?n:St`$$invalidate(${e.context_lookup.get(s.name).index}, ${n}, ${r})`;return s.subscribable&&s.reassigned&&(o=St`${`$$subscribe_${s.name}`}(${o})}`),o}}return n}class jl{constructor(e,t,n,r,i){this.type="Expression",this.dependencies=new Set,this.contextual_dependencies=new Set,this.declarations=[],this.uses_context=!1,Object.defineProperties(this,{component:{value:e}}),this.node=r,this.template_scope=n,this.owner=t;const{dependencies:o,contextual_dependencies:s}=this;let{map:a,scope:c}=Fl(r);this.scope=c,this.scope_map=a;const l=this;let h;Le(r,{enter(t,r,p){if("value"===p&&r.shorthand)return;if(a.has(t)&&(c=a.get(t)),!h&&/FunctionExpression/.test(t.type)&&(h=t),Ue(t,r)){const{name:r,nodes:a}=Dl(t);if(c.has(r))return;if("$"===r[0]&&n.names.has(r.slice(1))&&e.error(t,{code:"contextual-store",message:"Stores must be declared at the top level of the component (this may change in a future version of Svelte)"}),n.is_let(r))h||(s.add(r),o.add(r));else if(n.names.has(r)){l.uses_context=!0,s.add(r);const e=n.get_owner(r),t="EachBlock"===e.type&&e.key&&r===e.index;i&&!t||n.dependencies_for_name.get(r).forEach(e=>o.add(e))}else i||o.add(r),e.add_reference(r),e.warn_if_undefined(r,a[0],n);this.skip()}let u,d=!1;if(h)if("AssignmentExpression"===t.type)d="MemberExpression"===t.left.type,u=d?[Ol(t.left).name]:Ke(t.left);else if("UpdateExpression"===t.type){const{name:e}=Ol(t.argument);u=[e]}u&&u.forEach(t=>{if(n.names.has(t))n.dependencies_for_name.get(t).forEach(t=>{const n=e.var_lookup.get(t);n&&(n[d?"mutated":"reassigned"]=!0)});else{e.add_reference(t);const n=e.var_lookup.get(t);n&&(n[d?"mutated":"reassigned"]=!0)}})},leave(e){a.has(e)&&(c=c.parent),e===h&&(h=null)}})}dynamic_dependencies(){return Array.from(this.dependencies).filter(e=>!!this.template_scope.is_let(e)||("$$props"===e||zl(this.component.var_lookup.get(e))))}manipulate(e){if(this.manipulated)return this.manipulated;const{component:t,declarations:n,scope_map:r,template_scope:i,owner:o}=this;let s,a,c,l=this.scope;const h=Le(this.node,{enter(n,o){if("Property"===n.type&&n.shorthand&&(n.value=JSON.parse(JSON.stringify(n.value)),n.shorthand=!1),r.has(n)&&(l=r.get(n)),Ue(n,o)){const{name:r}=Dl(n);if(l.has(r))return;if(s)i.names.has(r)?(c.add(r),i.dependencies_for_name.get(r).forEach(e=>{a.add(e)})):(a.add(r),t.add_reference(r));else if(function(e,t,n){if("$$props"===n)return!0;if(!t.is_top_level(n))return!0;const r=e.var_lookup.get(n);return!(!r||r.hoistable)}(t,i,r)){const t=e.renderer.reference(n);this.replace(t)}this.skip()}s||(n.type,"FunctionExpression"!==n.type&&"ArrowFunctionExpression"!==n.type||(s=n,a=new Set,c=new Set))},leave(h,p){if(r.has(h)&&(l=l.parent),h===s){const r=t.get_unique_name(_c(function(e,t){return"EventHandler"===t.type?`${t.name}_handler`:"Action"===t.type?`${t.name}_function`:"func"}(0,o))),i=_t`const ${r} = ${h}`;if(0===a.size&&0===c.size)t.fully_hoisted.push(i),this.replace(r),t.add_var({name:r.name,internal:!0,hoistable:!0,referenced:!0});else if(0===c.size)t.partly_hoisted.push(i),e.renderer.add_to_context(r.name),this.replace(e.renderer.reference(r));else{const o=Array.from(c);h.params=[...o.map(e=>({type:"Identifier",name:e})),...h.params];const s=o.map(t=>e.renderer.reference(t));t.partly_hoisted.push(i),e.renderer.add_to_context(r.name);const a=e.renderer.reference(r);this.replace(r),h.params.length>0?n.push(_t`
								function ${r}(...args) {
									return ${a}(${s}, ...args);
								}
							`):n.push(_t`
								function ${r}() {
									return ${a}(${s});
								}
							`)}s=null,a=null,c=null,p&&"Property"===p.type&&(p.method=!1)}if("AssignmentExpression"===h.type||"UpdateExpression"===h.type){const t="AssignmentExpression"===h.type?h.left:h.argument,n=new Set(Ke(t)),r=new Set;n.forEach(e=>{const t=i.dependencies_for_name.get(e);t?t.forEach(e=>r.add(e)):r.add(e)}),this.replace(ql(e.renderer,l,h,r))}}});return n.length>0&&(e.maintain_context=!0,n.forEach(t=>{e.chunks.init.push(t)})),this.manipulated=h}}class Ul extends Vl{constructor(e,t,n,r){super(e,t,n,r),e.warn_if_undefined(r.name,r,n),this.name=r.name,e.add_reference(r.name.split(".")[0]),this.expression=r.expression?new jl(e,this,n,r.expression):null,this.uses_context=this.expression&&this.expression.uses_context}}const Wl=[{event_names:["input"],filter:(e,t)=>"textarea"===e.name||"input"===e.name&&!/radio|checkbox|range|file/.test(e.get_static_attribute_value("type"))},{event_names:["input"],filter:(e,t)=>("textContent"===t||"innerHTML"===t)&&e.attributes.some(e=>"contenteditable"===e.name)},{event_names:["change"],filter:(e,t)=>"select"===e.name||"input"===e.name&&/radio|checkbox|file/.test(e.get_static_attribute_value("type"))},{event_names:["change","input"],filter:(e,t)=>"input"===e.name&&"range"===e.get_static_attribute_value("type")},{event_names:["elementresize"],filter:(e,t)=>Nt.test(t)},{event_names:["timeupdate"],filter:(e,t)=>e.is_media_node()&&("currentTime"===t||"played"===t||"ended"===t)},{event_names:["durationchange"],filter:(e,t)=>e.is_media_node()&&"duration"===t},{event_names:["play","pause"],filter:(e,t)=>e.is_media_node()&&"paused"===t},{event_names:["progress"],filter:(e,t)=>e.is_media_node()&&"buffered"===t},{event_names:["loadedmetadata"],filter:(e,t)=>e.is_media_node()&&("buffered"===t||"seekable"===t)},{event_names:["volumechange"],filter:(e,t)=>e.is_media_node()&&"volume"===t},{event_names:["ratechange"],filter:(e,t)=>e.is_media_node()&&"playbackRate"===t},{event_names:["seeking","seeked"],filter:(e,t)=>e.is_media_node()&&"seeking"===t},{event_names:["ended"],filter:(e,t)=>e.is_media_node()&&"ended"===t},{event_names:["resize"],filter:(e,t)=>e.is_media_node()&&("videoHeight"===t||"videoWidth"===t)},{event_names:["toggle"],filter:(e,t)=>"details"===e.name}];class Hl extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r),this.var=null;const{expression:s}=r,a=!s;if(s){this.dependencies=s.dynamic_dependencies();let e=!1;Le(s.node,{enter(t){"CallExpression"!==t.type&&"NewExpression"!==t.type||(e=!0)}}),e?(this.condition=t.get_unique_name("show_if"),this.snippet=s.manipulate(t)):this.condition=s.manipulate(t)}this.block=t.child({comment:il(r,n.renderer.component),name:n.renderer.component.get_unique_name(a?"create_else_block":"create_if_block"),type:r.expression?"if":"else"}),this.fragment=new ih(e,this.block,r.children,n,i,o),this.is_dynamic=this.block.dependencies.size>0}}class Kl extends rl{constructor(e,t,n,r){super(e,t,n,r),this.cannot_use_innerhtml(),this.is_dependencies_static()||this.not_static_content(),t.add_dependencies(r.expression.dependencies)}is_dependencies_static(){return 0===this.node.expression.contextual_dependencies.size&&0===this.node.expression.dynamic_dependencies().length}rename_this_method(e,t){const n=this.node.expression.dynamic_dependencies();let r=this.node.expression.manipulate(e);const i=this.node.should_cache&&e.get_unique_name(`${this.var.name}_value`),o=this.node.should_cache?i:r;if(r=St`${r} + ""`,this.node.should_cache&&e.add_variable(i,r),n.length>0){let s=e.renderer.dirty(n);e.has_outros&&(s=St`!#current || ${s}`);const a=St`${i} !== (${i} = ${r})`;this.node.should_cache&&(s=St`${s} && ${a}`),e.chunks.update.push(_t`if (${s}) ${t(o)}`)}return{init:o}}}function Jl(e,t=null){return{type:"ObjectExpression",properties:Array.from(e.values()).filter(e=>"name"!==e.name).map(e=>{const n=function(e,t){if(t.is_true)return St`true`;if(0===t.chunks.length)return St`""`;let n=t.chunks.map(t=>"Text"===t.type?dl(t.data):e?t.manipulate(e):t.node).reduce((e,t)=>St`${e} + ${t}`);return t.chunks.length>1&&"Text"!==t.chunks[0].type&&(n=St`"" + ${n}`),n}(t,e);return $t`${e.name}: ${n}`})}}const Yl=new Set(["audio","datalist","dl","optgroup","select","video"]);class Gl extends rl{constructor(e,t,n,r,i){super(e,t,n,r),this.skip=function(e){if(/\S/.test(e.data))return!1;const t=e.find_nearest(/(?:Element|InlineComponent|Head)/);return!!t&&("Head"===t.type||("InlineComponent"===t.type?1===t.children.length&&e===t.children[0]:(!/svg$/.test(t.namespace)||!e.prev||"Element"!==e.prev.type||"tspan"!==e.prev.name)&&(t.namespace||Yl.has(t.name))))}(this.node),this.data=i,this.var=this.skip?null:St`t`}use_space(){if(this.renderer.component.component_options.preserveWhitespace)return!1;if(/[\S\u00A0]/.test(this.data))return!1;let e=this.parent&&this.parent.node;for(;e;){if("Element"===e.type&&"pre"===e.name)return!1;e=e.parent}return!0}render(e,t,n){if(this.skip)return;const r=this.use_space();e.add_element(this.var,r?St`@space()`:St`@text("${this.data}")`,n&&(r?St`@claim_space(${n})`:St`@claim_text(${n}, "${this.data}")`),t)}}const Xl={innerWidth:"resize",innerHeight:"resize",outerWidth:"resize",outerHeight:"resize",scrollX:"scroll",scrollY:"scroll"},Ql={scrollX:"pageXOffset",scrollY:"pageYOffset"},Zl=new Set(["innerWidth","innerHeight","outerWidth","outerHeight","online"]);class eh extends rl{constructor(e,t,n,r){super(e,t,n,r),this.handlers=this.node.handlers.map(e=>new cl(e,this))}render(e,t,n){const{renderer:r}=this,{component:i}=r,o={},s={};!function(e,t,n){n.forEach(n=>Il(e,t,n))}(e,"@_window",this.node.actions),ll(e,"@_window",this.handlers),this.node.bindings.forEach(e=>{if(Zl.has(e.name)&&r.readonly.add(e.expression.node.name),s[e.name]=e.expression.node.name,"online"===e.name)return;const t=Xl[e.name],n=Ql[e.name]||e.name;o[t]||(o[t]=[]),o[t].push({name:e.expression.node.name,value:n})});const a=e.get_unique_name("scrolling"),c=e.get_unique_name("clear_scrolling"),l=e.get_unique_name("scrolling_timeout");if(Object.keys(o).forEach(t=>{const n=e.get_unique_name(`onwindow${t}`),h=o[t];r.add_to_context(n.name);const p=r.reference(n.name);if("scroll"===t){e.add_variable(a,St`false`),e.add_variable(c,St`() => { ${a} = false }`),e.add_variable(l);const n=s.scrollX&&s.scrollY?St`"${s.scrollX}" in this._state || "${s.scrollY}" in this._state`:St`"${s.scrollX||s.scrollY}" in this._state`,i=s.scrollX&&St`this._state.${s.scrollX}`,o=s.scrollY&&St`this._state.${s.scrollY}`;r.meta_bindings.push(_t`
					if (${n}) {
						@_scrollTo(${i||"@_window.pageXOffset"}, ${o||"@_window.pageYOffset"});
					}
					${i&&`${i} = @_window.pageXOffset;`}
					${o&&`${o} = @_window.pageYOffset;`}
				`),e.event_listeners.push(St`
					@listen(@_window, "${t}", () => {
						${a} = true;
						@_clearTimeout(${l});
						${l} = @_setTimeout(${c}, 100);
						${p}();
					})
				`)}else h.forEach(e=>{r.meta_bindings.push(_t`this._state.${e.name} = @_window.${e.value};`)}),e.event_listeners.push(St`
					@listen(@_window, "${t}", ${p})
				`);i.partly_hoisted.push(_t`
				function ${n}() {
					${h.map(e=>r.invalidate(e.name,St`${e.name} = @_window.${e.value}`))}
				}
			`),e.chunks.init.push(_t`
				@add_render_callback(${p});
			`),i.has_reactive_assignments=!0}),s.scrollX||s.scrollY){const t=r.dirty([s.scrollX,s.scrollY].filter(Boolean)),n=s.scrollX?r.reference(s.scrollX):St`@_window.pageXOffset`,i=s.scrollY?r.reference(s.scrollY):St`@_window.pageYOffset`;e.chunks.update.push(_t`
				if (${t} && !${a}) {
					${a} = true;
					@_clearTimeout(${l});
					@_scrollTo(${n}, ${i});
					${l} = @_setTimeout(${c}, 100);
				}
			`)}if(s.online){const t=e.get_unique_name("onlinestatuschanged"),n=s.online;r.add_to_context(t.name);const o=r.reference(t.name);i.partly_hoisted.push(_t`
				function ${t}() {
					${r.invalidate(n,St`${n} = @_navigator.onLine`)}
				}
			`),e.chunks.init.push(_t`
				@add_render_callback(${o});
			`),e.event_listeners.push(St`@listen(@_window, "online", ${o})`,St`@listen(@_window, "offline", ${o})`),i.has_reactive_assignments=!0}}}const th={AwaitBlock:class extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r),this.var={type:"Identifier",name:"await_block"},this.cannot_use_innerhtml(),this.not_static_content(),t.add_dependencies(this.node.expression.dependencies),this.node.value&&t.renderer.add_to_context(this.node.value,!0),this.node.error&&t.renderer.add_to_context(this.node.error,!0);let s=!1,a=!1,c=!1;["pending","then","catch"].forEach(n=>{const r=this.node[n],l=new ol(n,e,t,this,r,i,o);e.blocks.push(l.block),l.is_dynamic&&(s=!0,t.add_dependencies(l.block.dependencies)),l.block.has_intros&&(a=!0),l.block.has_outros&&(c=!0),this[n]=l}),this.pending.block.has_update_method=s,this.then.block.has_update_method=s,this.catch.block.has_update_method=s,this.pending.block.has_intro_method=a,this.then.block.has_intro_method=a,this.catch.block.has_intro_method=a,this.pending.block.has_outro_method=c,this.then.block.has_outro_method=c,this.catch.block.has_outro_method=c,c&&t.add_outro()}render(e,t,n){const r=this.get_or_create_anchor(e,t,n),i=this.get_update_mount_node(r),o=this.node.expression.manipulate(e),s=e.get_unique_name("info"),a=e.get_unique_name("promise");e.add_variable(a),e.maintain_context=!0;const c=this.node.value&&e.renderer.context_lookup.get(this.node.value).index,l=this.node.error&&e.renderer.context_lookup.get(this.node.error).index,h=St`{
			ctx: #ctx,
			current: null,
			token: null,
			pending: ${this.pending.block.name},
			then: ${this.then.block.name},
			catch: ${this.catch.block.name},
			value: ${c},
			error: ${l},
			blocks: ${this.pending.block.has_outro_method&&St`[,,,]`}
		}`;e.chunks.init.push(_t`
			let ${s} = ${h};
		`),e.chunks.init.push(_t`
			@handle_promise(${a} = ${o}, ${s});
		`),e.chunks.create.push(_t`
			${s}.block.c();
		`),n&&this.renderer.options.hydratable&&e.chunks.claim.push(_t`
				${s}.block.l(${n});
			`);const p=t||"#target",u=t?"null":"anchor",d=this.pending.block.has_intro_method||this.pending.block.has_outro_method;e.chunks.mount.push(_t`
			${s}.block.m(${p}, ${s}.anchor = ${u});
			${s}.mount = () => ${i};
			${s}.anchor = ${r};
		`),d&&e.chunks.intro.push(_t`@transition_in(${s}.block);`);const f=this.node.expression.dynamic_dependencies();if(f.length>0){const t=St`
				${e.renderer.dirty(f)} &&
				${a} !== (${a} = ${o}) &&
				@handle_promise(${a}, ${s})`;e.chunks.update.push(_t`${s}.ctx = #ctx;`),this.pending.block.has_update_method?e.chunks.update.push(_t`
					if (${t}) {

					} else {
						const #child_ctx = #ctx.slice();
						${this.node.value&&St`#child_ctx[${c}] = ${s}.resolved;`}
						${s}.block.p(#child_ctx, #dirty);
					}
				`):e.chunks.update.push(_t`
					${t}
				`)}else this.pending.block.has_update_method&&e.chunks.update.push(_t`
					{
						const #child_ctx = #ctx.slice();
						${this.node.value&&St`#child_ctx[${c}] = ${s}.resolved;`}
						${s}.block.p(#child_ctx, #dirty);
					}
				`);this.pending.block.has_outro_method&&e.chunks.outro.push(_t`
				for (let #i = 0; #i < 3; #i += 1) {
					const block = ${s}.blocks[#i];
					@transition_out(block);
				}
			`),e.chunks.destroy.push(_t`
			${s}.block.d(${t?null:"detaching"});
			${s}.token = null;
			${s} = null;
		`),[this.pending,this.then,this.catch].forEach(e=>{e.fragment.render(e.block,null,St`#nodes`)})}},Body:class extends rl{constructor(e,t,n,r){super(e,t,n,r),this.handlers=this.node.handlers.map(e=>new cl(e,this))}render(e,t,n){ll(e,St`@_document.body`,this.handlers)}},Comment:null,DebugTag:class extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r)}render(e,t,n){const{renderer:r}=this,{component:i}=r;if(!r.options.dev)return;const{var_lookup:o}=i,s=i.locate(this.node.start+1),a={start:s,end:{line:s.line,column:s.column+6}},c={type:"DebuggerStatement",loc:a};if(0===this.node.expressions.length)e.chunks.create.push(c),e.chunks.update.push(c);else{const t={type:"Identifier",name:"log",loc:a},n=new Set;this.node.expressions.forEach(e=>{pl(n,e.dependencies)});const i=this.node.expressions.filter(e=>{const t=o.get(e.node.name);return!(t&&t.hoistable)}).map(e=>e.node.name),s=this.node.expressions.map(e=>$t`${e.node.name}`),c=_t`
				${i.map(e=>_t`const ${e} = ${r.reference(e)};`)}
				@_console.${t}({ ${s} });
				debugger;`;if(n.size){const t=r.dirty(Array.from(n));e.chunks.update.push(_t`
					if (${t}) {
						${c}
					}
				`)}e.chunks.create.push(_t`{
				${c}
			}`)}}},EachBlock:class extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r),this.var={type:"Identifier",name:"each"},this.cannot_use_innerhtml(),this.not_static_content();const{dependencies:s}=r.expression;t.add_dependencies(s),this.node.contexts.forEach(t=>{e.add_to_context(t.key.name,!0)}),this.block=t.child({comment:il(this.node,this.renderer.component),name:e.component.get_unique_name("create_each_block"),type:"each",key:r.key,bindings:new Map(t.bindings)}),this.block.has_animation=this.node.has_animation,this.index_name=this.node.index?{type:"Identifier",name:this.node.index}:e.component.get_unique_name(`${this.node.context}_index`);const a="ArrayExpression"===r.expression.node.type&&r.expression.node.elements.every(e=>"SpreadElement"!==e.type)?r.expression.node.elements.length:null;let c=this.node.start+2;for(;"e"!==e.component.source[c];)c+=1;const l=e.component.locate(c),h={type:"Identifier",name:"length",loc:{start:l,end:{line:l.line,column:l.column+4}}},p=e.component.get_unique_name(`${this.var.name}_value`),u=t.get_unique_name(`${this.var.name}_blocks`);e.add_to_context(p.name,!0),e.add_to_context(this.index_name.name,!0),this.vars={create_each_block:this.block.name,each_block_value:p,get_each_context:e.component.get_unique_name(`get_${this.var.name}_context`),iterations:u,fixed_length:a,data_length:null===a?St`${p}.${h}`:a,view_length:null===a?St`${u}.length`:a};const d="Identifier"===r.expression.node.type&&"$"===r.expression.node.name[0]?r.expression.node.name.slice(1):null;r.contexts.forEach(e=>{this.block.bindings.set(e.key.name,{object:this.vars.each_block_value,property:this.index_name,modifier:e.modifier,snippet:e.modifier(St`${this.vars.each_block_value}[${this.index_name}]`),store:d,tail:e.modifier(St`[${this.index_name}]`)})}),this.node.index&&this.block.get_unique_name(this.node.index),e.blocks.push(this.block),this.fragment=new ih(e,this.block,r.children,this,i,o),this.node.else&&(this.else=new ul(e,t,this,this.node.else,i,o),e.blocks.push(this.else.block),this.else.is_dynamic&&this.block.add_dependencies(this.else.block.dependencies)),t.add_dependencies(this.block.dependencies),(this.block.has_outros||this.else&&this.else.block.has_outros)&&t.add_outro()}render(e,t,n){if(0===this.fragment.nodes.length)return;const{renderer:r}=this,{component:i}=r,o=this.next?!this.next.is_dom_node():!t||!this.parent.is_dom_node();this.context_props=this.node.contexts.map(e=>_t`child_ctx[${r.context_lookup.get(e.key.name).index}] = ${e.modifier(St`list[i]`)};`),this.node.has_binding&&this.context_props.push(_t`child_ctx[${r.context_lookup.get(this.vars.each_block_value.name).index}] = list;`),(this.node.has_binding||this.node.index)&&this.context_props.push(_t`child_ctx[${r.context_lookup.get(this.index_name.name).index}] = i;`);const s=this.node.expression.manipulate(e);e.chunks.init.push(_t`let ${this.vars.each_block_value} = ${s};`),r.blocks.push(_t`
			function ${this.vars.get_each_context}(#ctx, list, i) {
				const child_ctx = #ctx.slice();
				${this.context_props}
				return child_ctx;
			}
		`);const a={type:"Identifier",name:t?"null":"anchor"},c=t||{type:"Identifier",name:"#target"},l=o?e.get_unique_name(`${this.var.name}_anchor`):this.next&&this.next.var||{type:"Identifier",name:"null"},h=this.get_update_mount_node(l),p={block:e,parent_node:t,parent_nodes:n,snippet:s,initial_anchor_node:a,initial_mount_node:c,update_anchor_node:l,update_mount_node:h};if(this.node.key?this.render_keyed(p):this.render_unkeyed(p),(this.block.has_intro_method||this.block.has_outro_method)&&e.chunks.intro.push(_t`
				for (let #i = 0; #i < ${this.vars.data_length}; #i += 1) {
					@transition_in(${this.vars.iterations}[#i]);
				}
			`),o&&e.add_element(l,St`@empty()`,n&&St`@empty()`,t),this.else){const r=i.get_unique_name(`${this.var.name}_else`);e.chunks.init.push(_t`let ${r} = null;`),e.chunks.init.push(_t`
				if (!${this.vars.data_length}) {
					${r} = ${this.else.block.name}(#ctx);
				}
			`),e.chunks.create.push(_t`
				if (${r}) {
					${r}.c();
				}
			`),this.renderer.options.hydratable&&e.chunks.claim.push(_t`
					if (${r}) {
						${r}.l(${n});
					}
				`),e.chunks.mount.push(_t`
				if (${r}) {
					${r}.m(${c}, ${a});
				}
			`),this.else.block.has_update_method?e.chunks.update.push(_t`
					if (!${this.vars.data_length} && ${r}) {
						${r}.p(#ctx, #dirty);
					} else if (!${this.vars.data_length}) {
						${r} = ${this.else.block.name}(#ctx);
						${r}.c();
						${r}.m(${h}, ${l});
					} else if (${r}) {
						${r}.d(1);
						${r} = null;
					}
				`):e.chunks.update.push(_t`
					if (${this.vars.data_length}) {
						if (${r}) {
							${r}.d(1);
							${r} = null;
						}
					} else if (!${r}) {
						${r} = ${this.else.block.name}(#ctx);
						${r}.c();
						${r}.m(${h}, ${l});
					}
				`),e.chunks.destroy.push(_t`
				if (${r}) ${r}.d(${t?"":"detaching"});
			`)}this.fragment.render(this.block,null,St`#nodes`),this.else&&this.else.fragment.render(this.else.block,null,St`#nodes`)}render_keyed({block:e,parent_node:t,parent_nodes:n,snippet:r,initial_anchor_node:i,initial_mount_node:o,update_anchor_node:s,update_mount_node:a}){const{create_each_block:c,iterations:l,data_length:h,view_length:p}=this.vars,u=e.get_unique_name("get_key"),d=e.get_unique_name(`${this.var.name}_lookup`);e.add_variable(l,St`[]`),e.add_variable(d,St`new @_Map()`),this.fragment.nodes[0].is_dom_node()?this.block.first=this.fragment.nodes[0].var:(this.block.first=this.block.get_unique_name("first"),this.block.add_element(this.block.first,St`@empty()`,n&&St`@empty()`,null)),e.chunks.init.push(_t`
			const ${u} = #ctx => ${this.node.key.manipulate(e)};

			${this.renderer.options.dev&&_t`@validate_each_keys(#ctx, ${this.vars.each_block_value}, ${this.vars.get_each_context}, ${u});`}
			for (let #i = 0; #i < ${h}; #i += 1) {
				let child_ctx = ${this.vars.get_each_context}(#ctx, ${this.vars.each_block_value}, #i);
				let key = ${u}(child_ctx);
				${d}.set(key, ${l}[#i] = ${c}(key, child_ctx));
			}
		`),e.chunks.create.push(_t`
			for (let #i = 0; #i < ${p}; #i += 1) {
				${l}[#i].c();
			}
		`),n&&this.renderer.options.hydratable&&e.chunks.claim.push(_t`
				for (let #i = 0; #i < ${p}; #i += 1) {
					${l}[#i].l(${n});
				}
			`),e.chunks.mount.push(_t`
			for (let #i = 0; #i < ${p}; #i += 1) {
				${l}[#i].m(${o}, ${i});
			}
		`);const f=this.block.has_update_method,m=this.node.has_animation?this.block.has_outros?"@fix_and_outro_and_destroy_block":"@fix_and_destroy_block":this.block.has_outros?"@outro_and_destroy_block":"@destroy_block";e.chunks.update.push(_t`
			const ${this.vars.each_block_value} = ${r};

			${this.block.has_outros&&_t`@group_outros();`}
			${this.node.has_animation&&_t`for (let #i = 0; #i < ${p}; #i += 1) ${l}[#i].r();`}
			${this.renderer.options.dev&&_t`@validate_each_keys(#ctx, ${this.vars.each_block_value}, ${this.vars.get_each_context}, ${u});`}
			${l} = @update_keyed_each(${l}, #dirty, ${u}, ${f?1:0}, #ctx, ${this.vars.each_block_value}, ${d}, ${a}, ${m}, ${c}, ${s}, ${this.vars.get_each_context});
			${this.node.has_animation&&_t`for (let #i = 0; #i < ${p}; #i += 1) ${l}[#i].a();`}
			${this.block.has_outros&&_t`@check_outros();`}
		`),this.block.has_outros&&e.chunks.outro.push(_t`
				for (let #i = 0; #i < ${p}; #i += 1) {
					@transition_out(${l}[#i]);
				}
			`),e.chunks.destroy.push(_t`
			for (let #i = 0; #i < ${p}; #i += 1) {
				${l}[#i].d(${t?null:"detaching"});
			}
		`)}render_unkeyed({block:e,parent_nodes:t,snippet:n,initial_anchor_node:r,initial_mount_node:i,update_anchor_node:o,update_mount_node:s}){const{create_each_block:a,iterations:c,fixed_length:l,data_length:h,view_length:p}=this.vars;e.chunks.init.push(_t`
			let ${c} = [];

			for (let #i = 0; #i < ${h}; #i += 1) {
				${c}[#i] = ${a}(${this.vars.get_each_context}(#ctx, ${this.vars.each_block_value}, #i));
			}
		`),e.chunks.create.push(_t`
			for (let #i = 0; #i < ${p}; #i += 1) {
				${c}[#i].c();
			}
		`),t&&this.renderer.options.hydratable&&e.chunks.claim.push(_t`
				for (let #i = 0; #i < ${p}; #i += 1) {
					${c}[#i].l(${t});
				}
			`),e.chunks.mount.push(_t`
			for (let #i = 0; #i < ${p}; #i += 1) {
				${c}[#i].m(${i}, ${r});
			}
		`);const u=new Set(this.block.dependencies);if(this.node.expression.dynamic_dependencies().forEach(e=>{u.add(e)}),u.size){const t=!(!this.block.has_intro_method&&!this.block.has_outro_method),r=this.block.has_update_method?_t`
					if (${c}[#i]) {
						${c}[#i].p(child_ctx, #dirty);
						${t&&_t`@transition_in(${this.vars.iterations}[#i], 1);`}
					} else {
						${c}[#i] = ${a}(child_ctx);
						${c}[#i].c();
						${t&&_t`@transition_in(${this.vars.iterations}[#i], 1);`}
						${c}[#i].m(${s}, ${o});
					}
				`:t?_t`
						if (${c}[#i]) {
							@transition_in(${this.vars.iterations}[#i], 1);
						} else {
							${c}[#i] = ${a}(child_ctx);
							${c}[#i].c();
							@transition_in(${this.vars.iterations}[#i], 1);
							${c}[#i].m(${s}, ${o});
						}
					`:_t`
						if (!${c}[#i]) {
							${c}[#i] = ${a}(child_ctx);
							${c}[#i].c();
							${c}[#i].m(${s}, ${o});
						}
					`,i=this.block.has_update_method?0:"#old_length";let d;if(this.block.has_outros){const t=e.get_unique_name("out");e.chunks.init.push(_t`
					const ${t} = i => @transition_out(${c}[i], 1, 1, () => {
						${c}[i] = null;
					});
				`),d=_t`
					@group_outros();
					for (#i = ${h}; #i < ${p}; #i += 1) {
						${t}(#i);
					}
					@check_outros();
				`}else d=_t`
					for (${this.block.has_update_method?null:St`#i = ${h}`}; #i < ${this.block.has_update_method?p:"#old_length"}; #i += 1) {
						${c}[#i].d(1);
					}
					${!l&&_t`${p} = ${h};`}
				`;const f=_t`
				${!this.block.has_update_method&&_t`const #old_length = ${this.vars.each_block_value}.length;`}
				${this.vars.each_block_value} = ${n};

				let #i;
				for (#i = ${i}; #i < ${h}; #i += 1) {
					const child_ctx = ${this.vars.get_each_context}(#ctx, ${this.vars.each_block_value}, #i);

					${r}
				}

				${d}
			`;e.chunks.update.push(_t`
				if (${e.renderer.dirty(Array.from(u))}) {
					${f}
				}
			`)}this.block.has_outros&&e.chunks.outro.push(_t`
				${c} = ${c}.filter(@_Boolean);
				for (let #i = 0; #i < ${p}; #i += 1) {
					@transition_out(${c}[#i]);
				}
			`),e.chunks.destroy.push(_t`@destroy_each(${c}, detaching);`)}},Element:class extends rl{constructor(e,t,n,r,i,o){if(super(e,t,n,r),this.var={type:"Identifier",name:r.name.replace(/[^a-zA-Z0-9_$]/g,"_")},this.void=kc(r.name),this.class_dependencies=[],this.node.children.length&&this.node.lets.forEach(t=>{Ke(t.value||t.name).forEach(t=>{e.add_to_context(t,!0)})}),this.attributes=this.node.attributes.map(e=>{if("slot"===e.name){let n=this.parent;for(;n&&"InlineComponent"!==n.node.type&&("Element"!==n.node.type||!/-/.test(n.node.name));)n=n.parent;if(n&&"InlineComponent"===n.node.type){const i=e.get_static_value();if(!n.slots.has(i)){const e=t.child({comment:il(r,this.renderer.component),name:this.renderer.component.get_unique_name(`create_${_c(i)}_slot`),type:"slot"}),{scope:o,lets:s}=this.node,a=new Set(s.map(e=>e.name.name));n.node.lets.forEach(e=>{a.has(e.name.name)||s.push(e)}),n.slots.set(i,Ll(e,o,s)),this.renderer.blocks.push(e)}this.slot_block=n.slots.get(i).block,t=this.slot_block}}return"style"===e.name?new Nl(this,t,e):new El(this,t,e)}),this.bindings=this.node.bindings.map(e=>new Rl(t,e,this)),this.event_handlers=this.node.handlers.map(e=>new cl(e,this)),(r.intro||r.outro)&&(r.intro&&t.add_intro(r.intro.is_local),r.outro&&t.add_outro(r.outro.is_local)),r.animation&&t.add_animation(),[r.animation,r.outro,...r.actions,...r.classes].forEach(e=>{e&&e.expression&&t.add_dependencies(e.expression.dependencies)}),r.handlers.forEach(e=>{e.expression&&t.add_dependencies(e.expression.dependencies)}),this.parent&&(r.actions.length>0||r.animation||r.bindings.length>0||r.classes.length>0||r.intro||r.outro||r.handlers.length>0||"option"===this.node.name||e.options.dev)&&(this.parent.cannot_use_innerhtml(),this.parent.not_static_content()),this.fragment=new ih(e,t,r.children,this,i,o),this.slot_block){t.parent.add_dependencies(t.dependencies);const e=t.parent.wrappers.indexOf(this);t.parent.wrappers.splice(e,1),t.wrappers.push(this)}}render(e,t,n){const{renderer:r}=this;if("noscript"===this.node.name)return;this.slot_block&&(e=this.slot_block);const i=this.var,o=n&&e.get_unique_name(`${this.var.name}_nodes`),s=St`@children(${"template"===this.node.name?St`${i}.content`:i})`;e.add_variable(i);const a=this.get_render_statement(e);e.chunks.create.push(_t`${i} = ${a};`),r.options.hydratable&&(n?(e.chunks.claim.push(_t`
					${i} = ${this.get_claim_statement(n)};
				`),!this.void&&this.node.children.length>0&&e.chunks.claim.push(_t`
						var ${o} = ${s};
					`)):e.chunks.claim.push(_t`${i} = ${a};`)),t?(e.chunks.mount.push(_t`@append(${t}, ${i});`),tl(t)&&e.chunks.destroy.push(_t`@detach(${i});`)):(e.chunks.mount.push(_t`@insert(#target, ${i}, anchor);`),e.chunks.destroy.push(_t`if (detaching) @detach(${i});`));const c=this.can_use_textcontent();if(!this.node.namespace&&(this.can_use_innerhtml||c)&&this.fragment.nodes.length>0)if(1===this.fragment.nodes.length&&"Text"===this.fragment.nodes[0].node.type)e.chunks.create.push(_t`${i}.textContent = ${dl(this.fragment.nodes[0].data)};`);else{const t={quasi:{type:"TemplateElement",value:{raw:""}}},n={type:"TemplateLiteral",expressions:[],quasis:[]},r=!this.can_use_innerhtml&&c;!function e(t,n,r,i,o){t.forEach(t=>{if("Text"===t.node.type){t.use_space()&&(i.quasi.value.raw+=" ");const e=t.node.parent,n=e&&("script"===e.name||"style"===e.name||o);i.quasi.value.raw+=(n?t.node.data:ml(t.node.data)).replace(/\\/g,"\\\\").replace(/`/g,"\\`").replace(/\$/g,"\\$")}else"MustacheTag"===t.node.type||"RawMustacheTag"===t.node.type?(r.quasis.push(i.quasi),r.expressions.push(t.node.expression.manipulate(n)),i.quasi={type:"TemplateElement",value:{raw:""}}):"noscript"===t.node.name||(i.quasi.value.raw+=`<${t.node.name}`,t.attributes.forEach(e=>{i.quasi.value.raw+=` ${yl(e.node.name)}="`,e.node.chunks.forEach(e=>{"Text"===e.type?i.quasi.value.raw+=ml(e.data):(r.quasis.push(i.quasi),r.expressions.push(e.manipulate(n)),i.quasi={type:"TemplateElement",value:{raw:""}})}),i.quasi.value.raw+='"'}),i.quasi.value.raw+=">",t.void||(e(t.fragment.nodes,n,r,i),i.quasi.value.raw+=`</${t.node.name}>`))})}(this.fragment.nodes,e,n,t,r),n.quasis.push(t.quasi),e.chunks.create.push(_t`${i}.${this.can_use_innerhtml?"innerHTML":"textContent"} = ${n};`)}else this.fragment.nodes.forEach(t=>{t.render(e,"template"===this.node.name?St`${i}.content`:i,o)});if((this.bindings.some(e=>e.handler.uses_context)||this.node.handlers.some(e=>e.uses_context)||this.node.actions.some(e=>e.uses_context))&&(e.maintain_context=!0),this.add_attributes(e),this.add_directives_in_order(e),this.add_transitions(e),this.add_animation(e),this.add_classes(e),this.add_manual_style_scoping(e),o&&this.renderer.options.hydratable&&!this.void&&e.chunks.claim.push(_t`${this.node.children.length>0?o:s}.forEach(@detach);`),r.options.dev){const t=r.locate(this.node.start);e.chunks.hydrate.push(_t`@add_location(${this.var}, ${r.file_var}, ${t.line-1}, ${t.column}, ${this.node.start});`)}}can_use_textcontent(){return this.is_static_content&&this.fragment.nodes.every(e=>"Text"===e.node.type||"MustacheTag"===e.node.type)}get_render_statement(e){const{name:t,namespace:n}=this.node;if("http://www.w3.org/2000/svg"===n)return St`@svg_element("${t}")`;if(n)return St`@_document.createElementNS("${n}", "${t}")`;const r=this.attributes.find(e=>"is"===e.node.name);return r?St`@element_is("${t}", ${r.render_chunks(e).reduce((e,t)=>St`${e} + ${t}`)});`:St`@element("${t}")`}get_claim_statement(e){const t=this.node.attributes.filter(e=>"Attribute"===e.type).map(e=>$t`${e.name}: true`);return St`@claim_element(${e}, "${this.node.namespace?this.node.name:this.node.name.toUpperCase()}", { ${t} }, ${this.node.namespace===Cl.svg?1:null})`}add_directives_in_order(e){const t=Wl.map(e=>({events:e.event_names,bindings:this.bindings.filter(e=>"this"!==e.node.name).filter(t=>e.filter(this.node,t.node.name))})).filter(e=>e.bindings.length),n=this.bindings.find(e=>"this"===e.node.name);function r(e){return e instanceof cl?e.node.start:e instanceof Rl?e.node.start:e instanceof Ul?e.start:e.bindings[0].node.start}[...t,...this.event_handlers,n,...this.node.actions].filter(Boolean).sort((e,t)=>r(e)-r(t)).forEach(t=>{t instanceof cl?hl(e,this.var,t):t instanceof Rl?this.add_this_binding(e,t):t instanceof Ul?Il(e,this.var,t):this.add_bindings(e,t)})}add_bindings(e,t){const{renderer:n}=this;if(0===t.bindings.length)return;n.component.has_reactive_assignments=!0;const r=t.bindings.some(e=>e.needs_lock)?e.get_unique_name(`${this.var.name}_updating`):null;r&&e.add_variable(r,St`false`),[t].forEach(t=>{const i=n.component.get_unique_name(`${this.var.name}_${t.events.join("_")}_handler`);n.add_to_context(i.name);const o=t.bindings.some(e=>e.needs_lock),s=new Set,a=new Set;let c;t.bindings.forEach(t=>{pl(s,t.get_dependencies()),pl(a,t.node.expression.contextual_dependencies),pl(a,t.handler.contextual_dependencies),t.render(e,r)}),"timeupdate"===t.events[0]&&(c=e.get_unique_name(`${this.var.name}_animationframe`),e.add_variable(c));const l=a.size>0||o||c;let h=n.reference(i);if(l){const t=Array.from(a).map(e=>n.reference(e));c?e.chunks.init.push(_t`
						function ${i}() {
							@_cancelAnimationFrame(${c});
							if (!${this.var}.paused) {
								${c} = @raf(${i});
								${o&&_t`${r} = true;`}
							}
							${h}.call(${this.var}, ${t});
						}
					`):e.chunks.init.push(_t`
						function ${i}() {
							${o&&_t`${r} = true;`}
							${h}.call(${this.var}, ${t});
						}
					`),h=i}const p=Array.from(a).map(e=>({type:"Identifier",name:e}));this.renderer.component.partly_hoisted.push(_t`
				function ${i}(${p}) {
					${t.bindings.map(e=>e.handler.mutation)}
					${Array.from(s).filter(e=>"$"!==e[0]).filter(e=>!a.has(e)).map(e=>_t`${this.renderer.invalidate(e)};`)}
				}
			`),t.events.forEach(t=>{if("elementresize"===t){const t=e.get_unique_name(`${this.var.name}_resize_listener`);e.add_variable(t),e.chunks.mount.push(_t`${t} = @add_resize_listener(${this.var}, ${h}.bind(${this.var}));`),e.chunks.destroy.push(_t`${t}.cancel();`)}else e.event_listeners.push(St`@listen(${this.var}, "${t}", ${h})`)});const u=t.bindings.map(e=>St`${e.snippet} === void 0`).reduce((e,t)=>St`${e} || ${t}`);if("select"===this.node.name||t.bindings.find(e=>"indeterminate"===e.node.name||"textContent"===e.node.name||"innerHTML"===e.node.name||e.is_readonly_media_attribute())){const t=l?i:St`() => ${h}.call(${this.var})`;e.chunks.hydrate.push(_t`if (${u}) @add_render_callback(${t});`)}"elementresize"===t.events[0]&&e.chunks.hydrate.push(_t`@add_render_callback(() => ${h}.call(${this.var}));`)}),r&&e.chunks.update.push(_t`${r} = false;`)}add_this_binding(e,t){const{renderer:n}=this;n.component.has_reactive_assignments=!0;const r=Bl(n.component,e,t.node,this.var);e.chunks.mount.push(r)}add_attributes(e){this.attributes.forEach(e=>{if("class"===e.node.name){const t=e.node.get_dependencies();this.class_dependencies.push(...t)}}),this.node.attributes.some(e=>e.is_spread)?this.add_spread_attributes(e):this.attributes.forEach(t=>{t.render(e)})}add_spread_attributes(e){const t=e.get_unique_name(`${this.var.name}_levels`),n=e.get_unique_name(`${this.var.name}_data`),r=[],i=[];this.attributes.forEach(t=>{const n=t.node.dependencies.size>0?e.renderer.dirty(Array.from(t.node.dependencies)):null;if(t.node.is_spread){const o=t.node.expression.manipulate(e);r.push(o),i.push(n?St`${n} && ${o}`:o)}else{const o=t.get_metadata(),s=St`{ ${o&&o.property_name||yl(t.node.name)}: ${t.get_value(e)} }`;r.push(s),i.push(n?St`${n} && ${s}`:s)}}),e.chunks.init.push(_t`
			let ${t} = [${r}];

			let ${n} = {};
			for (let #i = 0; #i < ${t}.length; #i += 1) {
				${n} = @assign(${n}, ${t}[#i]);
			}
		`);const o=this.node.namespace===Cl.svg?St`@set_svg_attributes`:St`@set_attributes`;e.chunks.hydrate.push(_t`${o}(${this.var}, ${n});`),e.chunks.update.push(_t`
			${o}(${this.var}, @get_spread_update(${t}, [
				${i}
			]));
		`)}add_transitions(e){const{intro:t,outro:n}=this.node;if(t||n)if(t===n){const n=e.get_unique_name(`${this.var.name}_transition`),r=t.expression?t.expression.manipulate(e):St`{}`;e.add_variable(n);const i=this.renderer.reference(t.name),o=_t`
				@add_render_callback(() => {
					if (!${n}) ${n} = @create_bidirectional_transition(${this.var}, ${i}, ${r}, true);
					${n}.run(1);
				});
			`,s=_t`
				if (!${n}) ${n} = @create_bidirectional_transition(${this.var}, ${i}, ${r}, false);
				${n}.run(0);
			`;t.is_local?(e.chunks.intro.push(_t`
					if (#local) {
						${o}
					}
				`),e.chunks.outro.push(_t`
					if (#local) {
						${s}
					}
				`)):(e.chunks.intro.push(o),e.chunks.outro.push(s)),e.chunks.destroy.push(_t`if (detaching && ${n}) ${n}.end();`)}else{const r=t&&e.get_unique_name(`${this.var.name}_intro`),i=n&&e.get_unique_name(`${this.var.name}_outro`);if(t){e.add_variable(r);const o=t.expression?t.expression.manipulate(e):St`{}`,s=this.renderer.reference(t.name);let a;n?(a=_t`
						@add_render_callback(() => {
							if (${i}) ${i}.end(1);
							if (!${r}) ${r} = @create_in_transition(${this.var}, ${s}, ${o});
							${r}.start();
						});
					`,e.chunks.outro.push(_t`if (${r}) ${r}.invalidate();`)):a=_t`
						if (!${r}) {
							@add_render_callback(() => {
								${r} = @create_in_transition(${this.var}, ${s}, ${o});
								${r}.start();
							});
						}
					`,t.is_local&&(a=_t`
						if (#local) {
							${a}
						}
					`),e.chunks.intro.push(a)}if(n){e.add_variable(i);const r=n.expression?n.expression.manipulate(e):St`{}`,o=this.renderer.reference(n.name);t||e.chunks.intro.push(_t`
						if (${i}) ${i}.end(1);
					`);let s=_t`
					${i} = @create_out_transition(${this.var}, ${o}, ${r});
				`;n.is_local&&(s=_t`
						if (#local) {
							${s}
						}
					`),e.chunks.outro.push(s),e.chunks.destroy.push(_t`if (detaching && ${i}) ${i}.end();`)}}}add_animation(e){if(!this.node.animation)return;const{outro:t}=this.node,n=e.get_unique_name("rect"),r=e.get_unique_name("stop_animation");e.add_variable(n),e.add_variable(r,St`@noop`),e.chunks.measure.push(_t`
			${n} = ${this.var}.getBoundingClientRect();
		`),e.chunks.fix.push(_t`
			@fix_position(${this.var});
			${r}();
			${t&&_t`@add_transform(${this.var}, ${n});`}
		`);const i=this.node.animation.expression?this.node.animation.expression.manipulate(e):St`{}`,o=this.renderer.reference(this.node.animation.name);e.chunks.animate.push(_t`
			${r}();
			${r} = @create_animation(${this.var}, ${n}, ${o}, ${i});
		`)}add_classes(e){const t=this.node.attributes.some(e=>e.is_spread);this.node.classes.forEach(n=>{const{expression:r,name:i}=n;let o,s;r?(o=r.manipulate(e),s=r.dependencies):(o=i,s=new Set([i]));const a=_t`@toggle_class(${this.var}, "${i}", ${o});`;if(e.chunks.hydrate.push(a),t)e.chunks.update.push(a);else if(s&&s.size>0||this.class_dependencies.length){const t=this.class_dependencies.concat(...s),n=e.renderer.dirty(t);e.chunks.update.push(_t`
					if (${n}) {
						${a}
					}`)}})}add_manual_style_scoping(e){if(this.node.needs_manual_style_scoping){const t=_t`@toggle_class(${this.var}, "${this.node.component.stylesheet.id}", true);`;e.chunks.hydrate.push(t),e.chunks.update.push(t)}}},Head:class extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r),this.can_use_innerhtml=!1,this.fragment=new ih(e,t,r.children,this,i,o)}render(e,t,n){let r;this.renderer.options.hydratable&&this.fragment.nodes.length&&(r=e.get_unique_name("head_nodes"),e.chunks.claim.push(_t`const ${r} = @query_selector_all('[data-svelte="${this.node.id}"]', @_document.head);`)),this.fragment.render(e,St`@_document.head`,r),r&&this.renderer.options.hydratable&&e.chunks.claim.push(_t`${r}.forEach(@detach);`)}},IfBlock:class extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r),this.needs_update=!1,this.var={type:"Identifier",name:"if_block"},this.cannot_use_innerhtml(),this.not_static_content(),this.branches=[];const s=[];let a=!1,c=!1,l=!1;const h=n=>{const r=new Hl(e,t,this,n,i,o);if(this.branches.push(r),s.push(r.block),t.add_dependencies(n.expression.dependencies),r.block.dependencies.size>0&&(a=!0,t.add_dependencies(r.block.dependencies)),r.dependencies&&r.dependencies.length>0&&(this.needs_update=!0),r.block.has_intros&&(c=!0),r.block.has_outros&&(l=!0),function(e){return e&&1===e.children.length&&"IfBlock"===e.children[0].type}(n.else))h(n.else.children[0]);else if(n.else){const r=new Hl(e,t,this,n.else,i,o);this.branches.push(r),s.push(r.block),r.block.dependencies.size>0&&(a=!0,t.add_dependencies(r.block.dependencies)),r.block.has_intros&&(c=!0),r.block.has_outros&&(l=!0)}};h(this.node),s.forEach(e=>{e.has_update_method=a,e.has_intro_method=c,e.has_outro_method=l}),e.blocks.push(...s)}render(e,t,n){const r=this.var,i=this.next?!this.next.is_dom_node():!t||!this.parent.is_dom_node(),o=i?e.get_unique_name(`${this.var.name}_anchor`):this.next&&this.next.var||"null",s=!this.branches[this.branches.length-1].condition,a=s?null:r,c=this.branches[0].block.has_update_method,l=this.branches[0].block.has_intro_method,h=this.branches[0].block.has_outro_method,p={name:r,anchor:o,if_exists_condition:a,has_else:s,has_transitions:l||h},u=t&&!tl(t)?null:"detaching";this.node.else?(this.branches.forEach(t=>{t.snippet&&e.add_variable(t.condition)}),h?(this.render_compound_with_outros(e,t,n,c,p,u),e.chunks.outro.push(_t`@transition_out(${r});`)):this.render_compound(e,t,n,c,p,u)):(this.render_simple(e,t,n,c,p,u),h&&e.chunks.outro.push(_t`@transition_out(${r});`)),a?e.chunks.create.push(_t`if (${a}) ${r}.c();`):e.chunks.create.push(_t`${r}.c();`),n&&this.renderer.options.hydratable&&(a?e.chunks.claim.push(_t`if (${a}) ${r}.l(${n});`):e.chunks.claim.push(_t`${r}.l(${n});`)),(l||h)&&e.chunks.intro.push(_t`@transition_in(${r});`),i&&e.add_element(o,St`@empty()`,n&&St`@empty()`,t),this.branches.forEach(e=>{e.fragment.render(e.block,null,St`#nodes`)})}render_compound(e,t,n,r,{name:i,anchor:o,has_else:s,if_exists_condition:a,has_transitions:c},l){const h=this.renderer.component.get_unique_name("select_block_type"),p=e.get_unique_name("current_block_type"),u=s?St`${p}(#ctx)`:St`${p} && ${p}(#ctx)`;this.needs_update?e.chunks.init.push(_t`
				function ${h}(#ctx, #dirty) {
					${this.branches.map(({dependencies:e,condition:t,snippet:n,block:r})=>t?_t`
					${n&&(e.length>0?_t`if (${t} == null || ${r.renderer.dirty(e)}) ${t} = !!${n}`:_t`if (${t} == null) ${t} = !!${n}`)}
					if (${t}) return ${r.name};`:_t`return ${r.name};`)}
				}
			`):e.chunks.init.push(_t`
				function ${h}(#ctx, #dirty) {
					${this.branches.map(({condition:e,snippet:t,block:n})=>e?_t`if (${t||e}) return ${n.name};`:_t`return ${n.name};`)}
				}
			`),e.chunks.init.push(_t`
			let ${p} = ${h}(#ctx, -1);
			let ${i} = ${u};
		`);const d=t||"#target",f=t?"null":"anchor";if(a?e.chunks.mount.push(_t`if (${a}) ${i}.m(${d}, ${f});`):e.chunks.mount.push(_t`${i}.m(${d}, ${f});`),this.needs_update){const t=_t`
				${a?_t`if (${a}) ${i}.d(1)`:_t`${i}.d(1)`};
				${i} = ${u};
				if (${i}) {
					${i}.c();
					${c&&_t`@transition_in(${i}, 1);`}
					${i}.m(${this.get_update_mount_node(o)}, ${o});
				}
			`;r?e.chunks.update.push(_t`
					if (${p} === (${p} = ${h}(#ctx, #dirty)) && ${i}) {
						${i}.p(#ctx, #dirty);
					} else {
						${t}
					}
				`):e.chunks.update.push(_t`
					if (${p} !== (${p} = ${h}(#ctx, #dirty))) {
						${t}
					}
				`)}else r&&e.chunks.update.push(_t`${i}.p(#ctx, #dirty);`);a?e.chunks.destroy.push(_t`
				if (${a}) {
					${i}.d(${l});
				}
			`):e.chunks.destroy.push(_t`
				${i}.d(${l});
			`)}render_compound_with_outros(e,t,n,r,{name:i,anchor:o,has_else:s,has_transitions:a},c){const l=this.renderer.component.get_unique_name("select_block_type"),h=e.get_unique_name("current_block_type_index"),p=e.get_unique_name("previous_block_index"),u=e.get_unique_name("if_block_creators"),d=e.get_unique_name("if_blocks"),f=s?e=>e:e=>_t`if (~${h}) { ${e} }`;e.add_variable(h),e.add_variable(i),e.chunks.init.push(_t`
			const ${u} = [
				${this.branches.map(e=>e.block.name)}
			];

			const ${d} = [];

			${this.needs_update?_t`
					function ${l}(#ctx, #dirty) {
						${this.branches.map(({dependencies:t,condition:n,snippet:r},i)=>n?_t`
						${r&&(t.length>0?_t`if (${e.renderer.dirty(t)}) ${n} = !!${r}`:_t`if (${n} == -1) ${n} = !!${r}`)}
						if (${n}) return ${i};`:_t`return ${i};`)}
						${!s&&_t`return -1;`}
					}
				`:_t`
					function ${l}(#ctx, #dirty) {
						${this.branches.map(({condition:e,snippet:t},n)=>e?_t`if (${t||e}) return ${n};`:_t`return ${n};`)}
						${!s&&_t`return -1;`}
					}
				`}
		`),s?e.chunks.init.push(_t`
				${h} = ${l}(#ctx, -1);
				${i} = ${d}[${h}] = ${u}[${h}](#ctx);
			`):e.chunks.init.push(_t`
				if (~(${h} = ${l}(#ctx, -1))) {
					${i} = ${d}[${h}] = ${u}[${h}](#ctx);
				}
			`);const m=t||"#target",g=t?"null":"anchor";if(e.chunks.mount.push(f(_t`${d}[${h}].m(${m}, ${g});`)),this.needs_update){const t=this.get_update_mount_node(o),n=_t`
				@group_outros();
				@transition_out(${d}[${p}], 1, 1, () => {
					${d}[${p}] = null;
				});
				@check_outros();
			`,c=_t`
				${i} = ${d}[${h}];
				if (!${i}) {
					${i} = ${d}[${h}] = ${u}[${h}](#ctx);
					${i}.c();
				}
				${a&&_t`@transition_in(${i}, 1);`}
				${i}.m(${t}, ${o});
			`,m=s?_t`
					${n}

					${c}
				`:_t`
					if (${i}) {
						${n}
					}

					if (~${h}) {
						${c}
					} else {
						${i} = null;
					}
				`;r?e.chunks.update.push(_t`
					let ${p} = ${h};
					${h} = ${l}(#ctx, #dirty);
					if (${h} === ${p}) {
						${f(_t`${d}[${h}].p(#ctx, #dirty);`)}
					} else {
						${m}
					}
				`):e.chunks.update.push(_t`
					let ${p} = ${h};
					${h} = ${l}(#ctx, #dirty);
					if (${h} !== ${p}) {
						${m}
					}
				`)}else r&&e.chunks.update.push(_t`${i}.p(#ctx, #dirty);`);e.chunks.destroy.push(f(_t`${d}[${h}].d(${c});`))}render_simple(e,t,n,r,{name:i,anchor:o,if_exists_condition:s,has_transitions:a},c){const l=this.branches[0];l.snippet&&e.add_variable(l.condition,l.snippet),e.chunks.init.push(_t`
			let ${i} = ${l.condition} && ${l.block.name}(#ctx);
		`);const h=t||"#target",p=t?"null":"anchor";if(e.chunks.mount.push(_t`if (${i}) ${i}.m(${h}, ${p});`),l.dependencies.length>0){const t=this.get_update_mount_node(o),n=r?_t`
					if (${i}) {
						${i}.p(#ctx, #dirty);
						${a&&_t`@transition_in(${i}, 1);`}
					} else {
						${i} = ${l.block.name}(#ctx);
						${i}.c();
						${a&&_t`@transition_in(${i}, 1);`}
						${i}.m(${t}, ${o});
					}
				`:_t`
					if (!${i}) {
						${i} = ${l.block.name}(#ctx);
						${i}.c();
						${a&&_t`@transition_in(${i}, 1);`}
						${i}.m(${t}, ${o});
					} else {
						${a&&_t`@transition_in(${i}, 1);`}
					}
				`;l.snippet&&e.chunks.update.push(_t`if (${e.renderer.dirty(l.dependencies)}) ${l.condition} = ${l.snippet}`),l.block.has_outro_method?e.chunks.update.push(_t`
					if (${l.condition}) {
						${n}
					} else if (${i}) {
						@group_outros();
						@transition_out(${i}, 1, 1, () => {
							${i} = null;
						});
						@check_outros();
					}
				`):e.chunks.update.push(_t`
					if (${l.condition}) {
						${n}
					} else if (${i}) {
						${i}.d(1);
						${i} = null;
					}
				`)}else r&&e.chunks.update.push(_t`
				if (${l.condition}) ${i}.p(#ctx, #dirty);
			`);s?e.chunks.destroy.push(_t`
				if (${s}) ${i}.d(${c});
			`):e.chunks.destroy.push(_t`
				${i}.d(${c});
			`)}},InlineComponent:class extends rl{constructor(e,t,n,r,i,o){if(super(e,t,n,r),this.slots=new Map,this.cannot_use_innerhtml(),this.not_static_content(),this.node.expression&&t.add_dependencies(this.node.expression.dependencies),this.node.attributes.forEach(e=>{t.add_dependencies(e.dependencies)}),this.node.bindings.forEach(e=>{if(e.is_contextual){const{name:t}=Ol(e.expression.node);this.node.scope.get_owner(t).has_binding=!0}t.add_dependencies(e.expression.dependencies)}),this.node.handlers.forEach(e=>{e.expression&&t.add_dependencies(e.expression.dependencies)}),this.var={type:"Identifier",name:("svelte:self"===this.node.name?e.component.name.name:"svelte:component"===this.node.name?"switch_instance":_c(this.node.name)).toLowerCase()},this.node.children.length){this.node.lets.forEach(t=>{Ke(t.value||t.name).forEach(t=>{e.add_to_context(t,!0)})});const n=t.child({comment:il(r,e.component),name:e.component.get_unique_name("create_default_slot"),type:"slot"});this.renderer.blocks.push(n),this.slots.set("default",Ll(n,this.node.scope,this.node.lets)),this.fragment=new ih(e,n,r.children,this,i,o);const s=new Set;n.dependencies.forEach(e=>{this.node.scope.is_let(e)||s.add(e)}),t.add_dependencies(s)}t.add_outro()}render(e,t,n){const{renderer:r}=this,{component:i}=r,o=this.var,s=St`{}`,a=[],c=[];let l;const h=e.get_unique_name(`${o.name}_changes`),p=!!this.node.attributes.find(e=>e.is_spread),u=this.slots.size>0?[$t`$$slots: {
					${Array.from(this.slots).map(([e,t])=>$t`${e}: [${t.block.name}, ${t.get_context||null}, ${t.get_changes||null}]`)}
				}`,$t`$$scope: {
					ctx: #ctx
				}`]:[],d=p?St`{ ${u} }`:St`{
				${this.node.attributes.map(t=>$t`${t.name}: ${t.get_value(e)}`)},
				${u}
			}`;if((this.node.attributes.length||this.node.bindings.length||u.length)&&(p||0!==this.node.bindings.length?(l=e.get_unique_name(`${o.name}_props`),s.properties.push($t`props: ${l}`)):s.properties.push($t`props: ${d}`)),this.fragment){this.renderer.add_to_context("$$scope",!0);const e=this.slots.get("default");this.fragment.nodes.forEach(t=>{t.render(e.block,null,St`#nodes`)})}i.compile_options.dev&&s.properties.push($t`$$inline: true`);const f=new Set(this.fragment?["$$scope"]:[]);this.slots.forEach(e=>{e.block.dependencies.forEach(t=>{const n=e.scope.is_let(t),i=r.component.var_lookup.get(t);(n||zl(i))&&f.add(t)})});const m=this.node.attributes.filter(e=>e.get_dependencies().length>0);if(!p&&(m.length>0||this.node.bindings.length>0||f.size>0)&&c.push(_t`const ${h} = {};`),this.node.attributes.length)if(p){const t=e.get_unique_name(`${this.var.name}_spread_levels`),n=[],i=[],o=new Set;if(this.node.attributes.forEach(e=>{pl(o,e.dependencies)}),this.node.attributes.forEach((s,a)=>{const{name:c,dependencies:l}=s,h=l.size>0&&l.size!==o.size?r.dirty(Array.from(l)):null;if(s.is_spread){const t=s.expression.manipulate(e);n.push(t);let r=t;"ObjectExpression"!==s.expression.node.type&&(r=St`@get_spread_object(${t})`),i.push(h?St`${h} && ${r}`:r)}else{const r=St`{ ${c}: ${s.get_value(e)} }`;n.push(r),i.push(h?St`${h} && ${r}`:St`${t}[${a}]`)}}),e.chunks.init.push(_t`
					const ${t} = [
						${n}
					];
				`),a.push(_t`
					for (let #i = 0; #i < ${t}.length; #i += 1) {
						${l} = @assign(${l}, ${t}[#i]);
					}
				`),o.size){const e=r.dirty(Array.from(o));c.push(_t`
						const ${h} = ${e} ? @get_spread_update(${t}, [
							${i}
						]) : {}
					`)}else c.push(_t`
						const ${h} = {};
					`)}else m.forEach(t=>{const n=t.get_dependencies();if(n.length>0){const i=r.dirty(n);c.push(_t`
							if (${i}) ${h}.${t.name} = ${t.get_value(e)};
						`)}});f.size>0&&c.push(_t`
				if (${r.dirty(Array.from(f))}) {
					${h}.$$scope = { dirty: #dirty, ctx: #ctx };
				}`);const g=this.node.bindings.map(t=>{if(i.has_reactive_assignments=!0,"this"===t.name)return Bl(i,e,t,this.var);const n=i.get_unique_name(`${this.var.name}_${t.name}_binding`);r.add_to_context(n.name);const o=r.reference(n),s=e.get_unique_name(`updating_${t.name}`);e.add_variable(s);const p=t.expression.manipulate(e);a.push(_t`
				if (${p} !== void 0) {
					${l}.${t.name} = ${p};
				}`),c.push(_t`
				if (!${s} && ${r.dirty(Array.from(t.expression.dependencies))}) {
					${s} = true;
					${h}.${t.name} = ${p};
					@add_flush_callback(() => ${s} = false);
				}
			`);const u=Array.from(t.expression.contextual_dependencies),d=Array.from(t.expression.dependencies);let f=t.raw_expression;if(t.is_contextual&&"Identifier"===t.expression.node.type){const{name:n}=t.expression.node,{object:r,property:i,snippet:o}=e.bindings.get(n);f=o,u.push(r.name,i.name)}const m=e.get_unique_name("value"),g=[m];if(u.length>0){const t=[];u.forEach(e=>{g.push({type:"Identifier",name:e}),r.add_to_context(e,!0),t.push(r.reference(e))}),e.chunks.init.push(_t`
					function ${n}(${m}) {
						${o}.call(null, ${m}, ${t});
					}
				`),e.maintain_context=!0}else e.chunks.init.push(_t`
					function ${n}(${m}) {
						${o}.call(null, ${m});
					}
				`);const v=_t`
				function ${n}(${g}) {
					${f} = ${m};
					${r.invalidate(d[0])};
				}
			`;return i.partly_hoisted.push(v),_t`@binding_callbacks.push(() => @bind(${this.var}, '${t.name}', ${n}));`}),v=this.node.handlers.map(t=>{let n=new cl(t,this).get_snippet(e);return t.modifiers.has("once")&&(n=St`@once(${n})`),_t`${o}.$on("${t.name}", ${n});`});if("svelte:component"===this.node.name){const r=e.get_unique_name("switch_value"),i=e.get_unique_name("switch_props"),p=this.node.expression.manipulate(e);e.chunks.init.push(_t`
				var ${r} = ${p};

				function ${i}(#ctx) {
					${(this.node.attributes.length>0||this.node.bindings.length>0)&&_t`
					${l&&_t`let ${l} = ${d};`}`}
					${a}
					return ${s};
				}

				if (${r}) {
					var ${o} = new ${r}(${i}(#ctx));

					${g}
					${v}
				}
			`),e.chunks.create.push(_t`if (${o}) @create_component(${o}.$$.fragment);`),n&&this.renderer.options.hydratable&&e.chunks.claim.push(_t`if (${o}) @claim_component(${o}.$$.fragment, ${n});`),e.chunks.mount.push(_t`
				if (${o}) {
					@mount_component(${o}, ${t||"#target"}, ${t?"null":"anchor"});
				}
			`);const u=this.get_or_create_anchor(e,t,n),f=this.get_update_mount_node(u);c.length&&e.chunks.update.push(_t`
					${c}
				`),e.chunks.update.push(_t`
				if (${r} !== (${r} = ${p})) {
					if (${o}) {
						@group_outros();
						const old_component = ${o};
						@transition_out(old_component.$$.fragment, 1, 0, () => {
							@destroy_component(old_component, 1);
						});
						@check_outros();
					}

					if (${r}) {
						${o} = new ${r}(${i}(#ctx));

						${g}
						${v}

						@create_component(${o}.$$.fragment);
						@transition_in(${o}.$$.fragment, 1);
						@mount_component(${o}, ${f}, ${u});
					} else {
						${o} = null;
					}
				} else if (${r}) {
					${c.length&&_t`${o}.$set(${h});`}
				}
			`),e.chunks.intro.push(_t`
				if (${o}) @transition_in(${o}.$$.fragment, #local);
			`),e.chunks.outro.push(_t`if (${o}) @transition_out(${o}.$$.fragment, #local);`),e.chunks.destroy.push(_t`if (${o}) @destroy_component(${o}, ${t?null:"detaching"});`)}else{const r="svelte:self"===this.node.name?i.name:this.renderer.reference(this.node.name);e.chunks.init.push(_t`
				${(this.node.attributes.length>0||this.node.bindings.length>0)&&_t`
				${l&&_t`let ${l} = ${d};`}`}
				${a}
				const ${o} = new ${r}(${s});

				${g}
				${v}
			`),e.chunks.create.push(_t`@create_component(${o}.$$.fragment);`),n&&this.renderer.options.hydratable&&e.chunks.claim.push(_t`@claim_component(${o}.$$.fragment, ${n});`),e.chunks.mount.push(_t`@mount_component(${o}, ${t||"#target"}, ${t?"null":"anchor"});`),e.chunks.intro.push(_t`
				@transition_in(${o}.$$.fragment, #local);
			`),c.length&&e.chunks.update.push(_t`
					${c}
					${o}.$set(${h});
				`),e.chunks.destroy.push(_t`
				@destroy_component(${o}, ${t?null:"detaching"});
			`),e.chunks.outro.push(_t`@transition_out(${o}.$$.fragment, #local);`)}}},MustacheTag:class extends Kl{constructor(e,t,n,r){super(e,t,n,r),this.var={type:"Identifier",name:"t"}}render(e,t,n){const{init:r}=this.rename_this_method(e,e=>St`@set_data(${this.var}, ${e});`);e.add_element(this.var,St`@text(${r})`,n&&St`@claim_text(${n}, ${r})`,t)}},Options:null,RawMustacheTag:class extends Kl{constructor(e,t,n,r){super(e,t,n,r),this.var={type:"Identifier",name:"raw"},this.cannot_use_innerhtml(),this.not_static_content()}render(e,t,n){const r=tl(t);if(r||!t||this.prev||this.next){const n=r||this.next&&!this.next.is_dom_node(),i=e.get_unique_name("html_tag"),o=n&&e.get_unique_name("html_anchor");e.add_variable(i);const{init:s}=this.rename_this_method(e,e=>St`${i}.p(${e});`),a=r?"null":n?o:this.next?this.next.var:"null";e.chunks.hydrate.push(_t`${i} = new @HtmlTag(${s}, ${a});`),e.chunks.mount.push(_t`${i}.m(${t||"#target"}, ${t?null:"anchor"});`),n&&e.add_element(o,St`@empty()`,St`@empty()`,t),t&&!r||e.chunks.destroy.push(_t`if (detaching) ${i}.d();`)}else{const n=e=>_t`${t}.innerHTML = ${e};`[0],{init:r}=this.rename_this_method(e,e=>n(e));e.chunks.mount.push(n(r))}}},Slot:class extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r),this.var={type:"Identifier",name:"slot"},this.dependencies=new Set(["$$scope"]),this.cannot_use_innerhtml(),this.not_static_content(),this.fragment=new ih(e,t,r.children,n,i,o),this.node.values.forEach(e=>{pl(this.dependencies,e.dependencies)}),t.add_dependencies(this.dependencies),t.add_intro(),t.add_outro()}render(e,t,n){const{renderer:r}=this,{slot_name:i}=this.node;let o,s;if(this.node.values.size>0){o=r.component.get_unique_name(`get_${_c(i)}_slot_changes`),s=r.component.get_unique_name(`get_${_c(i)}_slot_context`);const t=St`{}`,n=new Set;this.node.values.forEach(e=>{e.chunks.forEach(e=>{e.dependencies&&(pl(n,e.contextual_dependencies),e.dependencies.forEach(e=>{const t=r.component.var_lookup.get(e);t&&!t.hoistable&&n.add(e)}))});const i=Array.from(e.dependencies).filter(e=>!!this.node.scope.is_let(e)||zl(r.component.var_lookup.get(e)));i.length>0&&t.properties.push($t`${e.name}: ${r.dirty(i)}`)}),r.blocks.push(_t`
				const ${o} = #dirty => ${t};
				const ${s} = #ctx => ${Jl(this.node.values,e)};
			`)}else o="null",s="null";const a=e.get_unique_name(`${_c(i)}_slot`),c=e.get_unique_name(`${_c(i)}_slot_template`);e.chunks.init.push(_t`
			const ${c} = ${r.reference("$$slots")}.${i};
			const ${a} = @create_slot(${c}, #ctx, ${r.reference("$$scope")}, ${s});
		`);const{create:l,claim:h,hydrate:p,mount:u,update:d,destroy:f}=e.chunks;e.chunks.create=[],e.chunks.claim=[],e.chunks.hydrate=[],e.chunks.mount=[],e.chunks.update=[],e.chunks.destroy=[];const m=e.event_listeners;e.event_listeners=[],this.fragment.render(e,t,n),e.render_listeners(`_${a.name}`),e.event_listeners=m,e.chunks.create.length&&l.push(_t`if (!${a}) { ${e.chunks.create} }`),e.chunks.claim.length&&h.push(_t`if (!${a}) { ${e.chunks.claim} }`),e.chunks.hydrate.length&&p.push(_t`if (!${a}) { ${e.chunks.hydrate} }`),e.chunks.mount.length&&u.push(_t`if (!${a}) { ${e.chunks.mount} }`),e.chunks.update.length&&d.push(_t`if (!${a}) { ${e.chunks.update} }`),e.chunks.destroy.length&&f.push(_t`if (!${a}) { ${e.chunks.destroy} }`),e.chunks.create=l,e.chunks.claim=h,e.chunks.hydrate=p,e.chunks.mount=u,e.chunks.update=d,e.chunks.destroy=f,e.chunks.create.push(_t`if (${a}) ${a}.c();`),r.options.hydratable&&e.chunks.claim.push(_t`if (${a}) ${a}.l(${n});`),e.chunks.mount.push(_t`
			if (${a}) {
				${a}.m(${t||"#target"}, ${t?"null":"anchor"});
			}
		`),e.chunks.intro.push(_t`@transition_in(${a}, #local);`),e.chunks.outro.push(_t`@transition_out(${a}, #local);`);const g=Array.from(this.dependencies).filter(e=>"$$scope"===e||(!!this.node.scope.is_let(e)||zl(r.component.var_lookup.get(e))));e.chunks.update.push(_t`
			if (${a} && ${a}.p && ${r.dirty(g)}) {
				${a}.p(
					@get_slot_context(${c}, #ctx, ${r.reference("$$scope")}, ${s}),
					@get_slot_changes(${c}, ${r.reference("$$scope")}, #dirty, ${o})
				);
			}
		`),e.chunks.destroy.push(_t`if (${a}) ${a}.d(detaching);`)}},Text:Gl,Title:class extends rl{constructor(e,t,n,r,i,o){super(e,t,n,r)}render(e,t,n){if(this.node.children.find(e=>"Text"!==e.type)){let t;const n=new Set;if(1===this.node.children.length){const{expression:r}=this.node.children[0];t=r.manipulate(e),pl(n,r.dependencies)}else t=this.node.children.map(t=>"Text"===t.type?dl(t.data):(t.expression.dependencies.forEach(e=>{n.add(e)}),t.expression.manipulate(e))).reduce((e,t)=>St`${e} + ${t}`),"Text"!==this.node.children[0].type&&(t=St`"" + ${t}`);const r=this.node.should_cache&&e.get_unique_name("title_value");this.node.should_cache&&e.add_variable(r);const i=this.node.should_cache?St`${r} = ${t}`:t;e.chunks.init.push(_t`@_document.title = ${i};`);const o=_t`@_document.title = ${this.node.should_cache?r:t};`;if(n.size){const i=Array.from(n);let s=e.renderer.dirty(i);e.has_outros&&(s=St`!#current || ${s}`),this.node.should_cache&&(s=St`${s} && (${r} !== (${r} = ${t}))`),e.chunks.update.push(_t`
					if (${s}) {
						${o}
					}`)}}else{const t=this.node.children.length>0?dl(this.node.children[0].data):St`""`;e.chunks.hydrate.push(_t`@_document.title = ${t};`)}}},Window:eh};function nh(e,t){t.next=e,e&&(e.prev=t)}function rh(e,t){return t.node.find_nearest(/EachBlock/)===e.find_nearest(/EachBlock/)||"EachBlock"===t.node.prev.type}class ih{constructor(e,t,n,r,i,o){let s,a;this.nodes=[];let c=n.length;for(;c--;){const l=n[c];if(!l.type)throw new Error("missing type");if(!(l.type in th))throw new Error(`TODO implement ${l.type}`);if("Window"!==l.type)if("Text"===l.type){let{data:n}=l;if(0===this.nodes.length&&(o?"Text"===o.node.type&&/^\s/.test(o.node.data)&&rh(l,o):!l.has_ancestor("EachBlock"))&&(n=jc(n),!n))continue;if(s&&"Text"===s.node.type){s.data=n+s.data;continue}const i=new Gl(e,t,r,l,n);if(i.skip)continue;this.nodes.unshift(i),nh(s,s=i)}else{const n=th[l.type];if(!n)continue;const a=new n(e,t,r,l,i,s||o);this.nodes.unshift(a),nh(s,s=a)}else a=new eh(e,t,r,l)}if(i){const e=this.nodes[0];e&&"Text"===e.node.type&&(e.data=qc(e.data),e.data||(e.var=null,this.nodes.shift(),this.nodes[0]&&(this.nodes[0].prev=null)))}a&&(this.nodes.unshift(a),nh(s,a))}render(e,t,n){for(let r=0;r<this.nodes.length;r+=1)this.nodes[r].render(e,t,n)}}class oh{constructor(e,t){this.context=[],this.context_lookup=new Map,this.blocks=[],this.readonly=new Set,this.meta_bindings=[],this.binding_groups=[],this.component=e,this.options=t,this.locate=e.locate,this.file_var=t.dev&&this.component.get_unique_name("file"),e.vars.filter(e=>!e.hoistable||e.export_name&&!e.module).forEach(e=>this.add_to_context(e.name)),e.vars.filter(e=>e.subscribable).forEach(e=>this.add_to_context(`$${e.name}`)),e.var_lookup.has("$$props")&&this.add_to_context("$$props"),e.slots.size>0&&(this.add_to_context("$$scope"),this.add_to_context("$$slots")),this.binding_groups.length>0&&this.add_to_context("$$binding_groups"),this.block=new nl({renderer:this,name:null,type:"component",key:null,bindings:new Map,dependencies:new Set}),this.block.has_update_method=!0,this.fragment=new ih(this,this.block,e.fragment.children,null,!0,null),this.blocks.forEach(e=>{e instanceof nl&&e.assign_variable_names()}),this.block.assign_variable_names(),this.fragment.render(this.block,null,St`#nodes`),this.context_overflow=this.context.length>31,this.context.forEach(e=>{const{variable:t}=e;t&&(e.priority+=2,(t.mutated||t.reassigned)&&(e.priority+=4),t.export_name&&(e.priority+=8),t.referenced&&(e.priority+=16)),e.is_contextual||(e.priority+=1)}),this.context.sort((e,t)=>t.priority-e.priority||e.index.value-t.index.value),this.context.forEach((e,t)=>e.index.value=t)}add_to_context(e,t=!1){if(!this.context_lookup.has(e)){const t={name:e,index:{type:"Literal",value:this.context.length},is_contextual:!1,is_non_contextual:!1,variable:null,priority:0};this.context_lookup.set(e,t),this.context.push(t)}const n=this.context_lookup.get(e);if(t)n.is_contextual=!0;else{n.is_non_contextual=!0;const t=this.component.var_lookup.get(e);n.variable=t}return n}invalidate(e,t){const n=this.component.var_lookup.get(e),r=this.context_lookup.get(e);if(n&&n.subscribable&&(n.reassigned||n.export_name))return St`${`$$subscribe_${e}`}($$invalidate(${r.index}, ${t||e}))`;if("$"===e[0]&&"$"!==e[1])return St`${e.slice(1)}.set(${t||e})`;if(n&&!n.referenced&&!n.is_reactive_dependency&&!n.export_name&&!e.startsWith("$$"))return t||e;if(t)return St`$$invalidate(${r.index}, ${t})`;const i=new Set([e]);i.forEach(e=>{this.component.reactive_declarations.filter(t=>t.assignees.has(e)).forEach(e=>{e.dependencies.forEach(e=>{i.add(e)})})});const o=Array.from(i).filter(e=>this.context_lookup.has(e));return o.length?o.map(e=>St`$$invalidate(${this.context_lookup.get(e).index}, ${e})`).reduce((e,t)=>St`${e}, ${t}}`):null}dirty(e,t=!1){const n=this,r=t?St`$$self.$$.dirty`:St`#dirty`;return{type:"ParenthesizedExpression",get expression(){const t=(()=>{const t=[];return e.forEach(e=>{const r=n.context_lookup.get(e);if(!r)return;if(-1===r.index.value)throw new Error("unset index");const i=r.index.value,o=i/31|0,s=1<<i%31;t[o]||(t[o]={n:0,names:[]}),t[o].n|=s,t[o].names.push(e)}),t})();return t.length?n.context_overflow?t.map((e,t)=>({b:e,i:t})).filter(({b:e})=>e).map(({b:e,i:t})=>St`${r}[${t}] & /*${e.names.join(", ")}*/ ${e.n}`).reduce((e,t)=>St`${e} | ${t}`):St`${r} & /*${e.join(", ")}*/ ${t[0].n}`:St`${r} & /*${e.join(", ")}*/ 0`}}}reference(e){"string"==typeof e&&(e={type:"Identifier",name:e});const{name:t,nodes:n}=Dl(e),r=this.context_lookup.get(t);if(this.component.var_lookup.get(t)&&this.component.add_reference(t),void 0!==r){const e=St`/*${r.name}*/ #ctx[${r.index}]`;return n[0].loc&&(e.object.loc=n[0].loc),n[0]=e,n.reduce((e,t)=>St`${e}.${t}`)}return e}}function sh(e,t){for(let n=0;n<e.length;n+=1){const r=e[n];Array.isArray(r)?sh(r,t):t.push(r)}return t}function ah(e){return 2===e.chunks.length&&e.chunks[1].synthetic?St`@escape(@null_to_empty(${e.chunks[0].node})) + "${e.chunks[1].data}"`:ch(e)}function ch(e){return 0===e.chunks.length?St`""`:e.chunks.map(e=>"Text"===e.type?dl(e.data.replace(/"/g,"&quot;")):St`@escape(${e.node})`).reduce((e,t)=>St`${e} + ${t}`)}function lh(e){return 0===e.length?null:{type:"ObjectPattern",properties:e.map(e=>({type:"Property",kind:"init",method:!1,shorthand:!1,computed:!1,key:e.name,value:e.value||e.name}))}}const hh=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function ph(e){return e.is_true?St`true`:0===e.chunks.length?St`''`:e.chunks.map(e=>"Text"===e.type?dl(e.data):e.node).reduce((e,t)=>St`${e} + ${t}`)}function uh(){}const dh={AwaitBlock:function(e,t,n){t.push(),t.render(e.pending.children,n);const r=t.pop();t.push(),t.render(e.then.children,n);const i=t.pop();t.add_expression(St`
		(function(__value) {
			if (@is_promise(__value)) return ${r};
			return (function(${e.value}) { return ${i}; }(__value));
		}(${e.expression.node}))
	`)},Body:uh,Comment:function(e,t,n){},DebugTag:function(e,t,n){if(!n.dev)return;const r=n.filename||null,{line:i,column:o}=n.locate(e.start+1),s=St`{
		${e.expressions.map(e=>$t`${e.node.name}`)}
	}`;t.add_expression(St`@debug(${r?St`"${r}"`:St`null`}, ${i-1}, ${o}, ${s})`)},EachBlock:function(e,t,n){const r=[e.context_node];e.index&&r.push({type:"Identifier",name:e.index}),t.push(),t.render(e.children,n);const i=t.pop(),o=St`@each(${e.expression.node}, (${r}) => ${i})`;if(e.else){t.push(),t.render(e.else.children,n);const r=t.pop();t.add_expression(St`${e.expression.node}.length ? ${o} : ${r}`)}else t.add_expression(o)},Element:function(e,t,n){let r;const i="textarea"!==e.name&&"input"!==e.name&&e.attributes.some(e=>"contenteditable"===e.name),o=e.get_static_attribute_value("slot"),s=e.find_nearest(/InlineComponent/);o&&s&&t.push(),t.add_string(`<${e.name}`);const a=e.classes.map(e=>{const{expression:t,name:n}=e;return St`${t?t.node:St`#ctx.${n}`} ? "${n}" : ""`});e.needs_manual_style_scoping&&a.push(St`"${e.component.stylesheet.id}"`);const c=a.length>0&&a.reduce((e,t)=>St`${e} + ' ' + ${t}`);if(e.attributes.some(e=>e.is_spread)){const n=[];e.attributes.forEach(t=>{if(t.is_spread)n.push(t.expression.node);else{const i=t.name.toLowerCase();"value"===i&&"textarea"===e.name.toLowerCase()?r=ch(t):t.is_true?n.push(St`{ ${t.name}: true }`):hh.has(i)&&1===t.chunks.length&&"Text"!==t.chunks[0].type?n.push(St`{ ${t.name}: ${t.chunks[0].node} || null }`):n.push(St`{ ${t.name}: ${ch(t)} }`)}}),t.add_expression(St`@spread([${n}], ${c});`)}else{let n=!!c;e.attributes.forEach(i=>{const o=i.name.toLowerCase();if("value"===o&&"textarea"===e.name.toLowerCase())r=ch(i);else if(i.is_true)t.add_string(` ${i.name}`);else if(hh.has(o)&&1===i.chunks.length&&"Text"!==i.chunks[0].type)t.add_string(" "),t.add_expression(St`${i.chunks[0].node} ? "${i.name}" : ""`);else if("class"===o&&c)n=!1,t.add_string(` ${i.name}="`),t.add_expression(St`[${ah(i)}, ${c}].join(' ').trim()`),t.add_string('"');else if(1===i.chunks.length&&"Text"!==i.chunks[0].type){const e=i.chunks[0].node;t.add_expression(St`@add_attribute("${i.name}", ${e}, ${hh.has(o)?1:0})`)}else t.add_string(` ${i.name}="`),t.add_expression(("class"===o?ah:ch)(i)),t.add_string('"')}),n&&t.add_expression(St`@add_classes([${c}].join(' ').trim())`)}if(e.bindings.forEach(n=>{const{name:o,expression:s}=n;if(!n.is_readonly)if("group"===o);else if(!i||"textContent"!==o&&"innerHTML"!==o)if("value"===n.name&&"textarea"===e.name){const e=s.node;r=St`${e} || ""`}else{const e=s.node;t.add_expression(St`@add_attribute("${o}", ${e}, 1)`)}else r=s.node}),n.hydratable&&n.head_id&&t.add_string(` data-svelte="${n.head_id}"`),t.add_string(">"),void 0!==r){if(i){t.push(),t.render(e.children,n);const i=t.pop();t.add_expression(St`($$value => $$value === void 0 ? ${i} : $$value)(${r})`)}else t.add_expression(r);kc(e.name)||t.add_string(`</${e.name}>`)}else if(o&&s){t.render(e.children,n),kc(e.name)||t.add_string(`</${e.name}>`);const r=e.lets,i=new Set(r.map(e=>e.name.name));s.lets.forEach(e=>{i.has(e.name.name)||r.push(e)}),n.slot_scopes.set(o,{input:lh(e.lets),output:t.pop()})}else t.render(e.children,n),kc(e.name)||t.add_string(`</${e.name}>`)},Head:function(e,t,n){const r=Object.assign({},n,{head_id:e.id});t.push(),t.render(e.children,r);const i=t.pop();t.add_expression(St`($$result.head += ${i}, "")`)},IfBlock:function(e,t,n){const r=e.expression.node;t.push(),t.render(e.children,n);const i=t.pop();t.push(),e.else&&t.render(e.else.children,n);const o=t.pop();t.add_expression(St`${r} ? ${i} : ${o}`)},InlineComponent:function(e,t,n){const r=[],i=[];let o;e.bindings.forEach(e=>{t.has_bindings=!0;const n=e.expression.node;r.push($t`${e.name}: ${n}`),i.push($t`${e.name}: $$value => { ${n} = $$value; $$settled = false }`)}),o=e.attributes.find(e=>e.is_spread)?St`@_Object.assign(${e.attributes.map(e=>e.is_spread?e.expression.node:St`{ ${e.name}: ${ph(e)} }`).concat(r.map(e=>St`{ ${e} }`))})`:St`{
			${e.attributes.map(e=>$t`${e.name}: ${ph(e)}`)},
			${r}
		}`;const s=St`{
		${i}
	}`,a="svelte:self"===e.name?t.name:"svelte:component"===e.name?St`(${e.expression.node}) || @missing_component`:e.name.split(".").reduce((e,t)=>St`${e}.${t}`),c=[];if(e.children.length){const r=new Map;t.push(),t.render(e.children,Object.assign({},n,{slot_scopes:r})),r.set("default",{input:lh(e.lets),output:t.pop()}),r.forEach(({input:e,output:t},n)=>{c.push($t`${n}: (${e}) => ${t}`)})}const l=St`{
		${c}
	}`;t.add_expression(St`@validate_component(${a}, "${e.name}").$$render($$result, ${o}, ${s}, ${l})`)},MustacheTag:function(e,t,n){const r=e.expression.node;t.add_expression(e.parent&&"Element"===e.parent.type&&"style"===e.parent.name?r:St`@escape(${r})`)},Options:uh,RawMustacheTag:function(e,t,n){t.add_expression(e.expression.node)},Slot:function(e,t,n){const r=Jl(e.values);t.push(),t.render(e.children,n);const i=t.pop();t.add_expression(St`
		$$slots.${e.slot_name}
			? $$slots.${e.slot_name}(${r})
			: ${i}
	`)},Text:function(e,t,n){let r=e.data;(!e.parent||"Element"!==e.parent.type||"script"!==e.parent.name&&"style"!==e.parent.name)&&(r=ml(r)),t.add_string(r)},Title:function(e,t,n){t.push(),t.add_string("<title>"),t.render(e.children,n),t.add_string("</title>");const r=t.pop();t.add_expression(St`($$result.title = ${r}, "")`)},Window:uh};class fh{constructor({name:e}){this.has_bindings=!1,this.stack=[],this.targets=[],this.name=e,this.push()}add_string(e){this.current.value+=function(e){return e.replace(/(\${|`|\\)/g,"\\$1")}(e)}add_expression(e){this.literal.quasis.push({type:"TemplateElement",value:{raw:this.current.value,cooked:null},tail:!1}),this.literal.expressions.push(e),this.current.value=""}push(){const e=this.current={value:""},t=this.literal={type:"TemplateLiteral",expressions:[],quasis:[]};this.stack.push({current:e,literal:t})}pop(){this.literal.quasis.push({type:"TemplateElement",value:{raw:this.current.value,cooked:null},tail:!0});const e=this.stack.pop(),t=this.stack[this.stack.length-1];return t&&(this.literal=t.literal,this.current=t.current),e.literal}render(e,t){e.forEach(e=>{const n=dh[e.type];if(!n)throw new Error(`No handler for '${e.type}' nodes`);n(e,this,t)})}}const mh={esm:yh,cjs:bh};function gh(e,t){return"svelte"===e||e.startsWith("svelte/")?e.replace("svelte",t):e}function vh(e,t){return e.length>0&&{type:"VariableDeclaration",kind:"const",declarations:[{type:"VariableDeclarator",id:{type:"ObjectPattern",properties:e.map(e=>({type:"Property",method:!1,shorthand:!1,computed:!1,key:{type:"Identifier",name:e.name},value:e.alias,kind:"init"}))},init:t.find(({name:e})=>"globals"===e).alias}]}}function yh(e,t,n,r,i,o,s,a,c){const l={type:"ImportDeclaration",specifiers:o.map(e=>({type:"ImportSpecifier",local:e.alias,imported:{type:"Identifier",name:e.name}})),source:{type:"Literal",value:i}},h=vh(s,o);a.forEach(e=>{e.source.value=gh(e.source.value,r)});const p=c.length>0&&{type:"ExportNamedDeclaration",specifiers:c.map(e=>({type:"Specifier",local:{type:"Identifier",name:e.name},exported:{type:"Identifier",name:e.as}}))};e.body=_t`
		/* ${n} */

		${l}
		${h}
		${a}

		${e.body}

		export default ${t};
		${p}
	`}function bh(e,t,n,r,i,o,s,a,c){const l={type:"VariableDeclaration",kind:"const",declarations:[{type:"VariableDeclarator",id:{type:"ObjectPattern",properties:o.map(e=>({type:"Property",method:!1,shorthand:!1,computed:!1,key:{type:"Identifier",name:e.name},value:e.alias,kind:"init"}))},init:St`require("${i}")`}]},h=vh(s,o),p=a.map(e=>{const t=St`require("${gh(e.source.value,r)}")`;return 0===e.specifiers.length?_t`${t};`:{type:"VariableDeclaration",kind:"const",declarations:[{type:"VariableDeclarator",id:"ImportNamespaceSpecifier"===e.specifiers[0].type?{type:"Identifier",name:e.specifiers[0].local.name}:{type:"ObjectPattern",properties:e.specifiers.map(e=>({type:"Property",method:!1,shorthand:!1,computed:!1,key:"ImportSpecifier"===e.type?e.imported:{type:"Identifier",name:"default"},value:e.local,kind:"init"}))},init:t}]}}),u=c.map(e=>_t`exports.${{type:"Identifier",name:e.as}} = ${{type:"Identifier",name:e.name}};`);e.body=_t`
		/* ${n} */

		"use strict";
		${l}
		${h}
		${p}

		${e.body}

		exports.default = ${t};
		${u}
	`}var wh=function(e,t,n){this.start=e,this.end=t,this.original=n,this.intro="",this.outro="",this.content=n,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})};wh.prototype.appendLeft=function(e){this.outro+=e},wh.prototype.appendRight=function(e){this.intro=this.intro+e},wh.prototype.clone=function(){var e=new wh(this.start,this.end,this.original);return e.intro=this.intro,e.outro=this.outro,e.content=this.content,e.storeName=this.storeName,e.edited=this.edited,e},wh.prototype.contains=function(e){return this.start<e&&e<this.end},wh.prototype.eachNext=function(e){for(var t=this;t;)e(t),t=t.next},wh.prototype.eachPrevious=function(e){for(var t=this;t;)e(t),t=t.previous},wh.prototype.edit=function(e,t,n){return this.content=e,n||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this},wh.prototype.prependLeft=function(e){this.outro=e+this.outro},wh.prototype.prependRight=function(e){this.intro=e+this.intro},wh.prototype.split=function(e){var t=e-this.start,n=this.original.slice(0,t),r=this.original.slice(t);this.original=n;var i=new wh(e,this.end,r);return i.outro=this.outro,this.outro="",this.end=e,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i},wh.prototype.toString=function(){return this.intro+this.content+this.outro},wh.prototype.trimEnd=function(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;var t=this.content.replace(e,"");return t.length?(t!==this.content&&this.split(this.start+t.length).edit("",void 0,!0),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(e,""),!!this.intro.length||void 0)},wh.prototype.trimStart=function(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;var t=this.content.replace(e,"");return t.length?(t!==this.content&&(this.split(this.end-t.length),this.edit("",void 0,!0)),!0):(this.edit("",void 0,!0),this.outro=this.outro.replace(e,""),!!this.outro.length||void 0)};var xh=function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};"undefined"!=typeof window&&"function"==typeof window.btoa?xh=function(e){return window.btoa(unescape(encodeURIComponent(e)))}:"function"==typeof n&&(xh=function(e){return n.from(e,"utf-8").toString("base64")});var kh=function(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=Ge(e.mappings)};function _h(e){var t=e.split("\n"),n=t.filter((function(e){return/^\t+/.test(e)})),r=t.filter((function(e){return/^ {2,}/.test(e)}));if(0===n.length&&0===r.length)return null;if(n.length>=r.length)return"\t";var i=r.reduce((function(e,t){var n=/^ +/.exec(t)[0].length;return Math.min(n,e)}),1/0);return new Array(i+1).join(" ")}function Sh(e,t){var n=e.split(/[/\\]/),r=t.split(/[/\\]/);for(n.pop();n[0]===r[0];)n.shift(),r.shift();if(n.length)for(var i=n.length;i--;)n[i]="..";return n.concat(r).join("/")}kh.prototype.toString=function(){return JSON.stringify(this)},kh.prototype.toUrl=function(){return"data:application/json;charset=utf-8;base64,"+xh(this.toString())};var $h=Object.prototype.toString;function Ch(e){for(var t=e.split("\n"),n=[],r=0,i=0;r<t.length;r++)n.push(i),i+=t[r].length+1;return function(e){for(var t=0,r=n.length;t<r;){var i=t+r>>1;e<n[i]?r=i:t=i+1}var o=t-1;return{line:o,column:e-n[o]}}}var Eh=function(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null};Eh.prototype.addEdit=function(e,t,n,r){if(t.length){var i=[this.generatedCodeColumn,e,n.line,n.column];r>=0&&i.push(r),this.rawSegments.push(i)}else this.pending&&this.rawSegments.push(this.pending);this.advance(t),this.pending=null},Eh.prototype.addUneditedChunk=function(e,t,n,r,i){for(var o=t.start,s=!0;o<t.end;)(this.hires||s||i[o])&&this.rawSegments.push([this.generatedCodeColumn,e,r.line,r.column]),"\n"===n[o]?(r.line+=1,r.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0):(r.column+=1,this.generatedCodeColumn+=1),o+=1,s=!1;this.pending=[this.generatedCodeColumn,e,r.line,r.column]},Eh.prototype.advance=function(e){if(e){var t=e.split("\n");if(t.length>1){for(var n=0;n<t.length-1;n++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}};var Th="\n",Ah={insertLeft:!1,insertRight:!1,storeName:!1},Nh=function(e,t){void 0===t&&(t={});var n=new wh(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:n},lastChunk:{writable:!0,value:n},lastSearchedChunk:{writable:!0,value:n},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:{}},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:_h(e)}}),this.byStart[0]=n,this.byEnd[e.length]=n};Nh.prototype.addSourcemapLocation=function(e){this.sourcemapLocations[e]=!0},Nh.prototype.append=function(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.outro+=e,this},Nh.prototype.appendLeft=function(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byEnd[e];return n?n.appendLeft(t):this.intro+=t,this},Nh.prototype.appendRight=function(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byStart[e];return n?n.appendRight(t):this.outro+=t,this},Nh.prototype.clone=function(){for(var e=new Nh(this.original,{filename:this.filename}),t=this.firstChunk,n=e.firstChunk=e.lastSearchedChunk=t.clone();t;){e.byStart[n.start]=n,e.byEnd[n.end]=n;var r=t.next,i=r&&r.clone();i&&(n.next=i,i.previous=n,n=i),t=r}return e.lastChunk=n,this.indentExclusionRanges&&(e.indentExclusionRanges=this.indentExclusionRanges.slice()),Object.keys(this.sourcemapLocations).forEach((function(t){e.sourcemapLocations[t]=!0})),e},Nh.prototype.generateDecodedMap=function(e){var t=this;e=e||{};var n=Object.keys(this.storedNames),r=new Eh(e.hires),i=Ch(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext((function(e){var o=i(e.start);e.intro.length&&r.advance(e.intro),e.edited?r.addEdit(0,e.content,o,e.storeName?n.indexOf(e.original):-1):r.addUneditedChunk(0,e,t.original,o,t.sourcemapLocations),e.outro.length&&r.advance(e.outro)})),{file:e.file?e.file.split(/[/\\]/).pop():null,sources:[e.source?Sh(e.file||"",e.source):null],sourcesContent:e.includeContent?[this.original]:[null],names:n,mappings:r.raw}},Nh.prototype.generateMap=function(e){return new kh(this.generateDecodedMap(e))},Nh.prototype.getIndentString=function(){return null===this.indentStr?"\t":this.indentStr},Nh.prototype.indent=function(e,t){var n,r=/^[^\r\n]/gm;if(n=e,"[object Object]"===$h.call(n)&&(t=e,e=void 0),""===(e=void 0!==e?e:this.indentStr||"\t"))return this;var i={};(t=t||{}).exclude&&("number"==typeof t.exclude[0]?[t.exclude]:t.exclude).forEach((function(e){for(var t=e[0];t<e[1];t+=1)i[t]=!0}));var o=!1!==t.indentStart,s=function(t){return o?""+e+t:(o=!0,t)};this.intro=this.intro.replace(r,s);for(var a=0,c=this.firstChunk;c;){var l=c.end;if(c.edited)i[a]||(c.content=c.content.replace(r,s),c.content.length&&(o="\n"===c.content[c.content.length-1]));else for(a=c.start;a<l;){if(!i[a]){var h=this.original[a];"\n"===h?o=!0:"\r"!==h&&o&&(o=!1,a===c.start?c.prependRight(e):(this._splitChunk(c,a),(c=c.next).prependRight(e)))}a+=1}a=c.end,c=c.next}return this.outro=this.outro.replace(r,s),this},Nh.prototype.insert=function(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},Nh.prototype.insertLeft=function(e,t){return Ah.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Ah.insertLeft=!0),this.appendLeft(e,t)},Nh.prototype.insertRight=function(e,t){return Ah.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Ah.insertRight=!0),this.prependRight(e,t)},Nh.prototype.move=function(e,t,n){if(n>=e&&n<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(n);var r=this.byStart[e],i=this.byEnd[t],o=r.previous,s=i.next,a=this.byStart[n];if(!a&&i===this.lastChunk)return this;var c=a?a.previous:this.lastChunk;return o&&(o.next=s),s&&(s.previous=o),c&&(c.next=r),a&&(a.previous=i),r.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=r.previous,this.lastChunk.next=null),r.previous=c,i.next=a||null,c||(this.firstChunk=r),a||(this.lastChunk=i),this},Nh.prototype.overwrite=function(e,t,n,r){if("string"!=typeof n)throw new TypeError("replacement content must be a string");for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range  use appendLeft or prependRight instead");this._split(e),this._split(t),!0===r&&(Ah.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Ah.storeName=!0),r={storeName:!0});var i=void 0!==r&&r.storeName,o=void 0!==r&&r.contentOnly;if(i){var s=this.original.slice(e,t);this.storedNames[s]=!0}var a=this.byStart[e],c=this.byEnd[t];if(a){if(t>a.end&&a.next!==this.byStart[a.end])throw new Error("Cannot overwrite across a split point");if(a.edit(n,i,o),a!==c){for(var l=a.next;l!==c;)l.edit("",!1),l=l.next;l.edit("",!1)}}else{var h=new wh(e,t,"").edit(n,i);c.next=h,h.previous=c}return this},Nh.prototype.prepend=function(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this},Nh.prototype.prependLeft=function(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byEnd[e];return n?n.prependLeft(t):this.intro=t+this.intro,this},Nh.prototype.prependRight=function(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byStart[e];return n?n.prependRight(t):this.outro=t+this.outro,this},Nh.prototype.remove=function(e,t){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);for(var n=this.byStart[e];n;)n.intro="",n.outro="",n.edit(""),n=t>n.end?this.byStart[n.end]:null;return this},Nh.prototype.lastChar=function(){if(this.outro.length)return this.outro[this.outro.length-1];var e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:""},Nh.prototype.lastLine=function(){var e=this.outro.lastIndexOf(Th);if(-1!==e)return this.outro.substr(e+1);var t=this.outro,n=this.lastChunk;do{if(n.outro.length>0){if(-1!==(e=n.outro.lastIndexOf(Th)))return n.outro.substr(e+1)+t;t=n.outro+t}if(n.content.length>0){if(-1!==(e=n.content.lastIndexOf(Th)))return n.content.substr(e+1)+t;t=n.content+t}if(n.intro.length>0){if(-1!==(e=n.intro.lastIndexOf(Th)))return n.intro.substr(e+1)+t;t=n.intro+t}}while(n=n.previous);return-1!==(e=this.intro.lastIndexOf(Th))?this.intro.substr(e+1)+t:this.intro+t},Nh.prototype.slice=function(e,t){for(void 0===e&&(e=0),void 0===t&&(t=this.original.length);e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;for(var n="",r=this.firstChunk;r&&(r.start>e||r.end<=e);){if(r.start<t&&r.end>=t)return n;r=r.next}if(r&&r.edited&&r.start!==e)throw new Error("Cannot use replaced character "+e+" as slice start anchor.");for(var i=r;r;){!r.intro||i===r&&r.start!==e||(n+=r.intro);var o=r.start<t&&r.end>=t;if(o&&r.edited&&r.end!==t)throw new Error("Cannot use replaced character "+t+" as slice end anchor.");var s=i===r?e-r.start:0,a=o?r.content.length+t-r.end:r.content.length;if(n+=r.content.slice(s,a),!r.outro||o&&r.end!==t||(n+=r.outro),o)break;r=r.next}return n},Nh.prototype.snip=function(e,t){var n=this.clone();return n.remove(0,e),n.remove(t,n.original.length),n},Nh.prototype._split=function(e){if(!this.byStart[e]&&!this.byEnd[e])for(var t=this.lastSearchedChunk,n=e>t.end;t;){if(t.contains(e))return this._splitChunk(t,e);t=n?this.byStart[t.end]:this.byEnd[t.start]}},Nh.prototype._splitChunk=function(e,t){if(e.edited&&e.content.length){var n=Ch(this.original)(t);throw new Error("Cannot split a chunk that has already been edited ("+n.line+":"+n.column+'  "'+e.original+'")')}var r=e.split(t);return this.byEnd[t]=e,this.byStart[t]=r,this.byEnd[r.end]=r,e===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=e,!0},Nh.prototype.toString=function(){for(var e=this.intro,t=this.firstChunk;t;)e+=t.toString(),t=t.next;return e+this.outro},Nh.prototype.isEmpty=function(){var e=this.firstChunk;do{if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1}while(e=e.next);return!0},Nh.prototype.length=function(){var e=this.firstChunk,t=0;do{t+=e.intro.length+e.content.length+e.outro.length}while(e=e.next);return t},Nh.prototype.trimLines=function(){return this.trim("[\\r\\n]")},Nh.prototype.trim=function(e){return this.trimStart(e).trimEnd(e)},Nh.prototype.trimEndAborted=function(e){var t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;var n=this.lastChunk;do{var r=n.end,i=n.trimEnd(t);if(n.end!==r&&(this.lastChunk===n&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return!0;n=n.previous}while(n);return!1},Nh.prototype.trimEnd=function(e){return this.trimEndAborted(e),this},Nh.prototype.trimStartAborted=function(e){var t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;var n=this.firstChunk;do{var r=n.end,i=n.trimStart(t);if(n.end!==r&&(n===this.lastChunk&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return!0;n=n.next}while(n);return!1},Nh.prototype.trimStart=function(e){return this.trimStartAborted(e),this};const Mh={};function Oh(e,t){"Literal"===e.type?t.add(e.value):"ConditionalExpression"===e.type?(Oh(e.consequent,t),Oh(e.alternate,t)):t.add(Mh)}var Dh;!function(e){e[e.NotPossible=0]="NotPossible",e[e.Possible=1]="Possible",e[e.UnknownSelectorType=2]="UnknownSelectorType"}(Dh||(Dh={}));class Rh{constructor(e,t){this.node=e,this.stylesheet=t,this.blocks=function(e){let t=new Vh(null);const n=[t];return e.children.forEach(e=>{"WhiteSpace"===e.type||"Combinator"===e.type?(t=new Vh(e),n.push(t)):t.add(e)}),n}(e);let n=this.blocks.length;for(;n>0&&this.blocks[n-1].global;)n-=1;this.local_blocks=this.blocks.slice(0,n),this.used=0===this.local_blocks.length}apply(e,t){const n=[];!function e(t,n,r,i){const o=t.pop();if(!o)return!1;if(!n)return t.every(e=>e.global);switch(Ph(o,n)){case Dh.NotPossible:return!1;case Dh.UnknownSelectorType:return i.push({node:n,block:o}),!0}if(o.combinator){if("WhiteSpace"===o.combinator.type){for(const e of t)if(!e.global){for(const t of r)Ph(e,t)!==Dh.NotPossible&&i.push({node:t,block:e});if(i.length)return i.push({node:n,block:o}),!0}return!!t.every(e=>e.global)&&(i.push({node:n,block:o}),!0)}return">"===o.combinator.name?!!e(t,r.pop(),r,i)&&(i.push({node:n,block:o}),!0):(i.push({node:n,block:o}),!0)}return i.push({node:n,block:o}),!0}(this.local_blocks.slice(),e,t.slice(),n),n.length>0&&(n.forEach(({node:e,block:t})=>{this.stylesheet.nodes_with_css_class.add(e),t.should_encapsulate=!0}),this.used=!0)}minify(e){let t=null;this.blocks.forEach((n,r)=>{r>0&&n.start-t>1&&e.overwrite(t,n.start,n.combinator.name||" "),t=n.end})}transform(e,t,n){const r=n-this.blocks.filter(e=>e.should_encapsulate).length;t=t.repeat(r+1),this.blocks.forEach(n=>{if(n.global){const t=n.selectors[0],r=t.children[0],i=t.children[t.children.length-1];e.remove(t.start,r.start).remove(i.end,t.end)}n.should_encapsulate&&function(n){let r=n.selectors.length;for(;r--;){const i=n.selectors[r];if("PseudoElementSelector"!==i.type&&"PseudoClassSelector"!==i.type){"TypeSelector"===i.type&&"*"===i.name?e.overwrite(i.start,i.end,t):e.appendLeft(i.end,t);break}"root"!==i.name&&0===r&&e.prependRight(i.start,t)}}(n)})}validate(e){this.blocks.forEach(t=>{let n=t.selectors.length;for(;n-- >1;){const r=t.selectors[n];"PseudoClassSelector"===r.type&&"global"===r.name&&e.error(r,{code:"css-invalid-global",message:":global(...) must be the first element in a compound selector"})}});let t=0,n=this.blocks.length;for(;t<n&&this.blocks[t].global;t+=1);for(;n>t&&this.blocks[n-1].global;n-=1);for(let r=t;r<n;r+=1)this.blocks[r].global&&e.error(this.blocks[r].selectors[0],{code:"css-invalid-global",message:":global(...) can be at the start or end of a selector sequence, but not in the middle"})}get_amount_class_specificity_increased(){let e=0;for(const t of this.blocks)t.should_encapsulate&&e++;return e}}function Ph(e,t){let n=e.selectors.length;for(;n--;){const r=e.selectors[n],i="string"==typeof r.name&&r.name.replace(/\\(.)/g,"$1");if("PseudoClassSelector"!==r.type&&"PseudoElementSelector"!==r.type){if("PseudoClassSelector"===r.type&&"global"===i)return Dh.NotPossible;if("ClassSelector"===r.type){if(!Lh(t,"class",i,"~=",!1)&&!t.classes.some(e=>e.name===i))return Dh.NotPossible}else if("IdSelector"===r.type){if(!Lh(t,"id",i,"=",!1))return Dh.NotPossible}else if("AttributeSelector"===r.type){if(!Lh(t,r.name.name,r.value&&Bh(r.value),r.matcher,r.flags))return Dh.NotPossible}else{if("TypeSelector"!==r.type)return Dh.UnknownSelectorType;if(t.name.toLowerCase()!==i.toLowerCase()&&"*"!==i)return Dh.NotPossible}}}return Dh.Possible}function Ih(e,t,n,r){switch(n&&(t=t.toLowerCase(),r=r.toLowerCase()),e){case"=":return r===t;case"~=":return r.split(/\s/).includes(t);case"|=":return`${r}-`.startsWith(`${t}-`);case"^=":return r.startsWith(t);case"$=":return r.endsWith(t);case"*=":return r.includes(t);default:throw new Error("this shouldn't happen")}}function Lh(e,t,n,r,i){if(e.attributes.find(e=>"Spread"===e.type))return!0;if(e.bindings.some(e=>e.name===t))return!0;const o=e.attributes.find(e=>e.name===t);if(!o)return!1;if(o.is_true)return null===r;if(!n)return!0;if(1===o.chunks.length){const e=o.chunks[0];if(!e)return!1;if("Text"===e.type)return Ih(r,n,i,e.data)}const s=new Set;let a=[];for(const e of o.chunks){const t=new Set;if("Text"===e.type?t.add(e.data):Oh(e.node,t),t.has(Mh))return!0;if(a.length>0){const e=[],n=[];if(t.forEach(t=>{/^\s/.test(t)?e.push(t):n.push(t)}),n.length>0){e.length>0&&a.forEach(e=>s.add(e));const t=[];a.forEach(e=>{n.forEach(n=>{t.push(e+n)})}),a=t,e.forEach(e=>{/\s$/.test(e)?s.add(e):a.push(e)});continue}a.forEach(e=>s.add(e)),a=[]}if(t.forEach(e=>{/\s$/.test(e)?s.add(e):a.push(e)}),a.length<t.size&&a.push(" "),a.length>20)return!0}if(a.forEach(e=>s.add(e)),s.has(Mh))return!0;for(const e of s)if(Ih(r,n,i,e))return!0;return!1}function Bh(e){if("Identifier"===e.type)return e.name;const t=e.value;return t[0]===t[t.length-1]&&"'"===t[0]||'"'===t[0]?t.slice(1,t.length-1):t}class Vh{constructor(e){this.combinator=e,this.global=!1,this.selectors=[],this.start=null,this.end=null,this.should_encapsulate=!1}add(e){0===this.selectors.length&&(this.start=e.start,this.global="PseudoClassSelector"===e.type&&"global"===e.name),this.selectors.push(e),this.end=e.end}}function Fh(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return(t>>>0).toString(36)}function zh(e){return e.replace(/^-((webkit)|(moz)|(o)|(ms))-/,"")}const qh=e=>"keyframes"===zh(e.name);function jh(e,t,n){let r=t;return n.forEach((t,n)=>{const i=n>0?";":"";t.node.start-r>i.length&&e.overwrite(r,t.node.start,i),t.minify(e),r=t.node.end}),r}class Uh{constructor(e,t,n){this.node=e,this.parent=n,this.selectors=e.selector.children.map(e=>new Rh(e,t)),this.declarations=e.block.children.map(e=>new Wh(e))}apply(e,t){this.selectors.forEach(n=>n.apply(e,t))}is_used(e){return!(!this.parent||"Atrule"!==this.parent.node.type||!qh(this.parent.node))||(0===this.declarations.length?e:this.selectors.some(e=>e.used))}minify(e,t){let n=this.node.start,r=!1;this.selectors.forEach(t=>{if(t.used){const i=r?",":"";t.node.start-n>i.length&&e.overwrite(n,t.node.start,i),t.minify(e),n=t.node.end,r=!0}}),e.remove(n,this.node.block.start),n=this.node.block.start+1,n=jh(e,n,this.declarations),e.remove(n,this.node.block.end-1)}transform(e,t,n,r){if(this.parent&&"Atrule"===this.parent.node.type&&qh(this.parent.node))return!0;const i=`.${t}`;this.selectors.forEach(t=>t.transform(e,i,r)),this.declarations.forEach(t=>t.transform(e,n))}validate(e){this.selectors.forEach(t=>{t.validate(e)})}warn_on_unused_selector(e){this.selectors.forEach(t=>{t.used||e(t)})}get_max_amount_class_specificity_increased(){return Math.max(...this.selectors.map(e=>e.get_amount_class_specificity_increased()))}}class Wh{constructor(e){this.node=e}transform(e,t){const n=this.node.property&&zh(this.node.property.toLowerCase());"animation"!==n&&"animation-name"!==n||this.node.value.children.forEach(n=>{if("Identifier"===n.type){const r=n.name;t.has(r)&&e.overwrite(n.start,n.end,t.get(r))}})}minify(e){if(!this.node.property)return;const t=this.node.start+this.node.property.length;let n=(this.node.value.children?this.node.value.children[0]:this.node.value).start;for(;/\s/.test(e.original[n]);)n+=1;n-t>1&&e.overwrite(t,n,":")}}class Hh{constructor(e){this.node=e,this.children=[],this.declarations=[]}apply(e,t){"media"===this.node.name||"supports"===this.node.name?this.children.forEach(n=>{n.apply(e,t)}):qh(this.node)&&this.children.forEach(e=>{e.selectors.forEach(e=>{e.used=!0})})}is_used(e){return!0}minify(e,t){if("media"===this.node.name){const t=e.original[this.node.expression.start];let n=this.node.start+("("===t?6:7);this.node.expression.start>n&&e.remove(n,this.node.expression.start),this.node.expression.children.forEach(e=>{n=e.end}),e.remove(n,this.node.block.start)}else if("supports"===this.node.name){let t=this.node.start+9;this.node.expression.start-t>1&&e.overwrite(t,this.node.expression.start," "),this.node.expression.children.forEach(e=>{t=e.end}),e.remove(t,this.node.block.start)}else{let t=this.node.start+this.node.name.length+1;this.node.expression&&(this.node.expression.start-t>1&&e.overwrite(t,this.node.expression.start," "),t=this.node.expression.end),this.node.block&&this.node.block.start-t>0&&e.remove(t,this.node.block.start)}if(this.node.block){let n=this.node.block.start+1;this.declarations.length&&(n=jh(e,n,this.declarations),this.children.length&&n++),this.children.forEach(r=>{r.is_used(t)&&(e.remove(n,r.node.start),r.minify(e,t),n=r.node.end)}),e.remove(n,this.node.block.end-1)}}transform(e,t,n,r){qh(this.node)&&this.node.expression.children.forEach(({type:t,name:r,start:i,end:o})=>{"Identifier"===t&&(r.startsWith("-global-")?(e.remove(i,i+8),this.children.forEach(e=>{e.selectors.forEach(e=>{e.used=!0})})):e.overwrite(i,o,n.get(r)))}),this.children.forEach(i=>{i.transform(e,t,n,r)})}validate(e){this.children.forEach(t=>{t.validate(e)})}warn_on_unused_selector(e){"media"===this.node.name&&this.children.forEach(t=>{t.warn_on_unused_selector(e)})}get_max_amount_class_specificity_increased(){return Math.max(...this.children.map(e=>e.get_max_amount_class_specificity_increased()))}}class Kh{constructor(e,t,n,r){if(this.children=[],this.keyframes=new Map,this.nodes_with_css_class=new Set,this.source=e,this.ast=t,this.filename=n,this.dev=r,t.css&&t.css.children.length){this.id=`svelte-${Fh(t.css.content.styles)}`,this.has_styles=!0;const e=[];let n=0,r=null;Le(t.css,{enter:t=>{if("Atrule"===t.type){const i=new Hh(t);if(e.push(i),r?r.children.push(i):n<=1&&this.children.push(i),qh(t))t.expression.children.forEach(e=>{"Identifier"!==e.type||e.name.startsWith("-global-")||this.keyframes.set(e.name,`${this.id}-${e.name}`)});else if((({block:e})=>e&&e.children&&e.children.find(e=>"Declaration"===e.type))(t)){const e=t.block.children.filter(e=>"Declaration"===e.type).map(e=>new Wh(e));i.declarations.push(...e)}r=i}if("Rule"===t.type){const e=new Uh(t,this,r);r?r.children.push(e):n<=1&&this.children.push(e)}n+=1},leave:t=>{"Atrule"===t.type&&(e.pop(),r=e[e.length-1]),n-=1}})}else this.has_styles=!1}apply(e){if(!this.has_styles)return;const t=[];let n=e;for(;n=n.parent;)"Element"===n.type&&t.unshift(n);for(let n=0;n<this.children.length;n+=1)this.children[n].apply(e,t)}reify(){this.nodes_with_css_class.forEach(e=>{e.add_css_class()})}render(e,t){if(!this.has_styles)return{code:null,map:null};const n=new Nh(this.source);if(Le(this.ast.css,{enter:e=>{n.addSourcemapLocation(e.start),n.addSourcemapLocation(e.end)}}),t){const e=Math.max(...this.children.map(e=>e.get_max_amount_class_specificity_increased()));this.children.forEach(t=>{t.transform(n,this.id,this.keyframes,e)})}let r=0;return this.children.forEach(e=>{e.is_used(this.dev)&&(n.remove(r,e.node.start),e.minify(n,this.dev),r=e.node.end)}),n.remove(r,this.source.length),{code:n.toString(),map:n.generateMap({includeContent:!0,source:this.filename,file:e})}}validate(e){this.children.forEach(t=>{t.validate(e)})}warn_on_unused_selectors(e){this.children.forEach(t=>{t.warn_on_unused_selector(t=>{e.warn(t.node,{code:"css-unused-selector",message:"Unused CSS selector"})})})}}const Jh=void 0!==e&&e.env.TEST;class Yh extends Vl{constructor(e,t,n,r){super(e,t,n,r)}warn_if_empty_block(){if(!this.children||this.children.length>1)return;const e=this.children[0];e&&("Text"!==e.type||/[^ \r\n\f\v\t]/.test(e.data))||this.component.warn(this,{code:"empty-block",message:"Empty block"})}}class Gh extends Yh{constructor(e,t,n,r){super(e,t,n,r),this.children=zp(e,t,n,r.children),r.skip||this.warn_if_empty_block()}}class Xh extends Yh{constructor(e,t,n,r){super(e,t,n,r),this.scope=n.child(),this.scope.add(t.value,t.expression.dependencies,this),this.children=zp(e,t,this.scope,r.children),r.skip||this.warn_if_empty_block()}}class Qh extends Yh{constructor(e,t,n,r){super(e,t,n,r),this.scope=n.child(),this.scope.add(t.error,t.expression.dependencies,this),this.children=zp(e,t,this.scope,r.children),r.skip||this.warn_if_empty_block()}}class Zh extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.expression=new jl(e,this,n,r.expression),this.value=r.value,this.error=r.error,this.pending=new Gh(e,this,n,r.pending),this.then=new Xh(e,this,n,r.then),this.catch=new Qh(e,this,n,r.catch)}}class ep extends Vl{constructor(e,t,n,r){if(super(e,t,n,r),this.uses_context=!1,this.can_make_passive=!1,this.name=r.name,this.modifiers=new Set(r.modifiers),r.expression){if(this.expression=new jl(e,this,n,r.expression),this.uses_context=this.expression.uses_context,/FunctionExpression/.test(r.expression.type)&&0===r.expression.params.length)this.can_make_passive=!0;else if("Identifier"===r.expression.type){let t=e.node_for_declaration.get(r.expression.name);if(t){if("VariableDeclaration"===t.type){const e=t.declarations.find(e=>e.id.name===r.expression.name);t=e&&e.init}!t||"FunctionExpression"!==t.type&&"FunctionDeclaration"!==t.type&&"ArrowFunctionExpression"!==t.type||0!==t.params.length||(this.can_make_passive=!0)}}}else this.handler_name=e.get_unique_name(`${_c(this.name)}_handler`)}get reassigned(){if(!this.expression)return!1;const e=this.expression.node;return"Identifier"===e.type?this.component.node_for_declaration.get(e.name)&&this.component.var_lookup.get(e.name).reassigned:!/FunctionExpression/.test(e.type)&&this.expression.dynamic_dependencies().length>0}}class tp extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.handlers=[],r.attributes.forEach(t=>{"EventHandler"===t.type&&this.handlers.push(new ep(e,this,n,t))})}}const np=/^\s*svelte-ignore\s+([\s\S]+)\s*$/m;class rp extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.data=r.data;const i=np.exec(this.data);this.ignores=i?i[1].split(/[^\S]/).map(e=>e.trim()).filter(Boolean):[]}}class ip extends Yh{constructor(e,t,n,r){super(e,t,n,r),this.children=zp(e,this,n,r.children),this.warn_if_empty_block()}}class op extends Yh{constructor(e,t,n,r){if(super(e,t,n,r),this.has_binding=!1,this.expression=new jl(e,this,n,r.expression),this.context=r.context.name||"each",this.context_node=r.context,this.index=r.index,this.scope=n.child(),this.contexts=[],function e(t,n,r){if(n)if("Identifier"===n.type||"RestIdentifier"===n.type)t.push({key:n,modifier:r});else if("ArrayPattern"===n.type)n.elements.forEach((n,i)=>{n&&"RestIdentifier"===n.type?e(t,n,e=>St`${r(e)}.slice(${i})`):e(t,n,e=>St`${r(e)}[${i}]`)});else if("ObjectPattern"===n.type){const i=[];n.properties.forEach((o,s)=>{if("rest"===o.kind){const a={type:"RestElement",argument:o.key};n.properties[s]=a,e(t,o.value,e=>St`@object_without_properties(${r(e)}, [${i}])`)}else i.push(St`"${o.key.name}"`),e(t,o.value,e=>St`${r(e)}.${o.key.name}`)})}}(this.contexts,r.context,e=>e),this.contexts.forEach(e=>{this.scope.add(e.key.name,this.expression.dependencies,this)}),this.index){const e=r.key?this.expression.dependencies:new Set([]);this.scope.add(this.index,e,this)}if(this.key=r.key?new jl(e,this,this.scope,r.key):null,this.has_animation=!1,this.children=zp(e,this,this.scope,r.children),this.has_animation&&1!==this.children.length){const t=this.children.find(e=>!!e.animation);e.error(t.animation,{code:"invalid-animation",message:"An element that use the animate directive must be the sole child of a keyed each block"})}this.warn_if_empty_block(),this.else=r.else?new ip(e,this,this.scope,r.else):null}}class sp extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.scope=n,"Spread"===r.type?(this.name=null,this.is_spread=!0,this.is_true=!1,this.expression=new jl(e,this,n,r.expression),this.dependencies=this.expression.dependencies,this.chunks=null,this.is_static=!1):(this.name=r.name,this.is_true=!0===r.value,this.is_static=!0,this.dependencies=new Set,this.chunks=this.is_true?[]:r.value.map(t=>{if("Text"===t.type)return t;this.is_static=!1;const r=new jl(e,this,n,t.expression);return pl(this.dependencies,r.dependencies),r}))}get_dependencies(){if(this.is_spread)return this.expression.dynamic_dependencies();const e=new Set;return this.chunks.forEach(t=>{"Expression"===t.type&&pl(e,t.dynamic_dependencies())}),Array.from(e)}get_value(e){if(this.is_true)return St`true`;if(0===this.chunks.length)return St`""`;if(1===this.chunks.length)return"Text"===this.chunks[0].type?dl(this.chunks[0].data):this.chunks[0].manipulate(e);let t=this.chunks.map(t=>"Text"===t.type?dl(t.data):t.manipulate(e)).reduce((e,t)=>St`${e} + ${t}`);return"Text"!==this.chunks[0].type&&(t=St`"" + ${t}`),t}get_static_value(){return this.is_spread||this.dependencies.size>0?null:!!this.is_true||(this.chunks[0]?this.chunks[0].data:"")}should_cache(){return!this.is_static&&(1!==this.chunks.length||"Identifier"!==this.chunks[0].node.type||this.scope.names.has(this.chunks[0].node.name))}}const ap=new Set(["duration","buffered","seekable","played","seeking","ended","videoHeight","videoWidth"]);class cp extends Vl{constructor(e,t,n,r){super(e,t,n,r),"Identifier"!==r.expression.type&&"MemberExpression"!==r.expression.type&&e.error(r,{code:"invalid-directive-value",message:"Can only bind to an identifier (e.g. `foo`) or a member expression (e.g. `foo.bar` or `foo[baz]`)"}),this.name=r.name,this.expression=new jl(e,this,n,r.expression),this.raw_expression=JSON.parse(JSON.stringify(r.expression));const{name:i}=Ol(this.expression.node);if(this.is_contextual=n.names.has(i),n.is_let(i))e.error(this,{code:"invalid-binding",message:"Cannot bind to a variable declared with the let: directive"});else if(this.is_contextual)n.is_await(i)&&e.error(this,{code:"invalid-binding",message:"Cannot bind to a variable declared with {#await ... then} or {:catch} blocks"}),n.dependencies_for_name.get(i).forEach(t=>{const n=e.var_lookup.get(t);n&&(n["MemberExpression"===this.expression.node.type?"mutated":"reassigned"]=!0)});else{const t=e.var_lookup.get(i);t&&!t.global||e.error(this.expression.node,{code:"binding-undeclared",message:`${i} is not declared`}),t["MemberExpression"===this.expression.node.type?"mutated":"reassigned"]=!0}const o=t.get_static_attribute_value("type");this.is_readonly=Nt.test(this.name)||t.is_media_node&&t.is_media_node()&&ap.has(this.name)||"input"===t.name&&"file"===o}is_readonly_media_attribute(){return ap.has(this.name)}}class lp extends Vl{constructor(e,t,n,r){if(super(e,t,n,r),e.warn_if_undefined(r.name,r,n),this.name=r.name,e.add_reference(r.name.split(".")[0]),this.directive=r.intro&&r.outro?"transition":r.intro?"in":"out",this.is_local=r.modifiers.includes("local"),r.intro&&t.intro||r.outro&&t.outro){const n=t.intro||t.outro,i=this.directive===n.directive?`An element can only have one '${this.directive}' directive`:`An element cannot have both ${hp(n)} directive and ${hp(this)} directive`;e.error(r,{code:"duplicate-transition",message:i})}this.expression=r.expression?new jl(e,this,n,r.expression,!0):null}}function hp(e){return"transition"===e.directive?"a 'transition'":`an '${e.directive}'`}class pp extends Vl{constructor(e,t,n,r){super(e,t,n,r),e.warn_if_undefined(r.name,r,n),this.name=r.name,e.add_reference(r.name.split(".")[0]),t.animation&&e.error(this,{code:"duplicate-animation",message:"An element can only have one 'animate' directive"});const i=t.parent;i&&"EachBlock"===i.type&&i.key||e.error(this,{code:"invalid-animation",message:"An element that use the animate directive must be the immediate child of a keyed each block"}),i.has_animation=!0,this.expression=r.expression?new jl(e,this,n,r.expression,!0):null}}class up extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.name=r.name,this.expression=r.expression?new jl(e,this,n,r.expression):null}}class dp extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.data=r.data,this.synthetic=r.synthetic||!1}}const fp=new Set(["Identifier","ObjectExpression","ArrayExpression","Property"]);class mp extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.names=[],this.name={type:"Identifier",name:r.name};const{names:i}=this;r.expression?(this.value=r.expression,Le(r.expression,{enter(t){fp.has(t.type)||e.error(t,{code:"invalid-let",message:"let directive value must be an identifier or an object/array pattern"}),"Identifier"===t.type&&i.push(t.name),"ArrayExpression"===t.type&&(t.type="ArrayPattern"),"ObjectExpression"===t.type&&(t.type="ObjectPattern")}})):i.push(this.name.name)}}const gp=/^(?:altGlyph|altGlyphDef|altGlyphItem|animate|animateColor|animateMotion|animateTransform|circle|clipPath|color-profile|cursor|defs|desc|discard|ellipse|feBlend|feColorMatrix|feComponentTransfer|feComposite|feConvolveMatrix|feDiffuseLighting|feDisplacementMap|feDistantLight|feDropShadow|feFlood|feFuncA|feFuncB|feFuncG|feFuncR|feGaussianBlur|feImage|feMerge|feMergeNode|feMorphology|feOffset|fePointLight|feSpecularLighting|feSpotLight|feTile|feTurbulence|filter|font|font-face|font-face-format|font-face-name|font-face-src|font-face-uri|foreignObject|g|glyph|glyphRef|hatch|hatchpath|hkern|image|line|linearGradient|marker|mask|mesh|meshgradient|meshpatch|meshrow|metadata|missing-glyph|mpath|path|pattern|polygon|polyline|radialGradient|rect|set|solidcolor|stop|svg|switch|symbol|text|textPath|tref|tspan|unknown|use|view|vkern)$/,vp="activedescendant atomic autocomplete busy checked colindex controls current describedby details disabled dropeffect errormessage expanded flowto grabbed haspopup hidden invalid keyshortcuts label labelledby level live modal multiline multiselectable orientation owns placeholder posinset pressed readonly relevant required roledescription rowindex selected setsize sort valuemax valuemin valuenow valuetext".split(" "),yp=new Set(vp),bp="alert alertdialog application article banner button cell checkbox columnheader combobox command complementary composite contentinfo definition dialog directory document feed figure form grid gridcell group heading img input landmark link list listbox listitem log main marquee math menu menubar menuitem menuitemcheckbox menuitemradio navigation none note option presentation progressbar radio radiogroup range region roletype row rowgroup rowheader scrollbar search searchbox section sectionhead select separator slider spinbutton status structure switch tab table tablist tabpanel term textbox timer toolbar tooltip tree treegrid treeitem widget window".split(" "),wp=new Set(bp),xp={a:["href"],area:["alt","aria-label","aria-labelledby"],html:["lang"],iframe:["title"],img:["alt"],object:["title","aria-label","aria-labelledby"]},kp=new Set(["blink","marquee"]),_p=new Set(["a","h1","h2","h3","h4","h5","h6"]),Sp=new Set(["meta","html","script","style"]),$p=new Set(["preventDefault","stopPropagation","capture","once","passive","self"]),Cp=new Set(["wheel","touchstart","touchmove","touchend","touchcancel"]);class Ep extends Vl{constructor(e,t,n,r){if(super(e,t,n,r),this.attributes=[],this.actions=[],this.bindings=[],this.classes=[],this.handlers=[],this.lets=[],this.intro=null,this.outro=null,this.animation=null,this.name=r.name,this.namespace=function(e,t,n){const r=e.find_nearest(/^Element/);return r?gp.test(t.name.toLowerCase())?Cl.svg:"foreignobject"===r.name.toLowerCase()?null:r.namespace:n||(gp.test(t.name)?Cl.svg:null)}(t,this,e.namespace),"textarea"===this.name&&r.children.length>0){const t=r.attributes.find(e=>"value"===e.name);t&&e.error(t,{code:"textarea-duplicate-value",message:"A <textarea> can have either a value attribute or (equivalently) child content, but not both"}),r.attributes.push({type:"Attribute",name:"value",value:r.children}),r.children=[]}"option"===this.name&&(r.attributes.find(e=>"value"===e.name)||r.attributes.push({type:"Attribute",name:"value",value:r.children,synthetic:!0})),r.attributes.some(e=>"Let"===e.type)&&(n=n.child());const i=["Binding"];r.attributes.sort((e,t)=>i.indexOf(e.type)-i.indexOf(t.type)),r.attributes.forEach(t=>{switch(t.type){case"Action":this.actions.push(new Ul(e,this,n,t));break;case"Attribute":case"Spread":"xmlns"===t.name&&(this.namespace=t.value[0].data),this.attributes.push(new sp(e,this,n,t));break;case"Binding":this.bindings.push(new cp(e,this,n,t));break;case"Class":this.classes.push(new up(e,this,n,t));break;case"EventHandler":this.handlers.push(new ep(e,this,n,t));break;case"Let":{const r=new mp(e,this,n,t);this.lets.push(r);const i=new Set([r.name.name]);r.names.forEach(e=>{n.add(e,i,this)});break}case"Transition":{const r=new lp(e,this,n,t);t.intro&&(this.intro=r),t.outro&&(this.outro=r);break}case"Animation":this.animation=new pp(e,this,n,t);break;default:throw new Error(`Not implemented: ${t.type}`)}}),this.scope=n,this.children=zp(e,this,this.scope,r.children),this.validate(),e.stylesheet.apply(this)}validate(){if(kp.has(this.name)&&this.component.warn(this,{code:"a11y-distracting-elements",message:`A11y: Avoid <${this.name}> elements`}),"figcaption"===this.name){let{parent:e}=this,t=!1;for(;e;){if("figure"===e.name){t=!0;break}if("Element"===e.type)break;e=e.parent}t||this.component.warn(this,{code:"a11y-structure",message:"A11y: <figcaption> must be an immediate child of <figure>"})}if("figure"===this.name){const e=this.children.filter(e=>"Comment"!==e.type&&("Text"!==e.type||/\S/.test(e.data))),t=e.findIndex(e=>"figcaption"===e.name);-1!==t&&0!==t&&t!==e.length-1&&this.component.warn(e[t],{code:"a11y-structure",message:"A11y: <figcaption> must be first or last child of <figure>"})}this.validate_attributes(),this.validate_bindings(),this.validate_content(),this.validate_event_handlers()}validate_attributes(){const{component:e}=this,t=new Map;if(this.attributes.forEach(n=>{if(n.is_spread)return;const r=n.name.toLowerCase();if(r.startsWith("aria-")){Sp.has(this.name)&&e.warn(n,{code:"a11y-aria-attributes",message:`A11y: <${this.name}> should not have aria-* attributes`});const t=r.slice(5);if(!yp.has(t)){const r=Sc(t,vp);let i=`A11y: Unknown aria attribute 'aria-${t}'`;r&&(i+=` (did you mean '${r}'?)`),e.warn(n,{code:"a11y-unknown-aria-attribute",message:i})}"aria-hidden"===r&&/^h[1-6]$/.test(this.name)&&e.warn(n,{code:"a11y-hidden",message:`A11y: <${this.name}> element should not be hidden`})}if("role"===r){Sp.has(this.name)&&e.warn(n,{code:"a11y-misplaced-role",message:`A11y: <${this.name}> should not have role attribute`});const t=n.get_static_value();if(t&&!wp.has(t)){const r=Sc(t,bp);let i=`A11y: Unknown role '${t}'`;r&&(i+=` (did you mean '${r}'?)`),e.warn(n,{code:"a11y-unknown-role",message:i})}}if("accesskey"===r&&e.warn(n,{code:"a11y-accesskey",message:"A11y: Avoid using accesskey"}),"autofocus"===r&&e.warn(n,{code:"a11y-autofocus",message:"A11y: Avoid using autofocus"}),"scope"===r&&"th"!==this.name&&e.warn(n,{code:"a11y-misplaced-scope",message:"A11y: The scope attribute should only be used with <th> elements"}),"tabindex"===r){const t=n.get_static_value();!isNaN(t)&&+t>0&&e.warn(n,{code:"a11y-positive-tabindex",message:"A11y: avoid tabindex values above zero"})}if("slot"===r){n.is_static||e.error(n,{code:"invalid-slot-attribute",message:"slot attribute cannot have a dynamic value"}),e.slot_outlets.has(r)&&(e.error(n,{code:"duplicate-slot-attribute",message:`Duplicate '${r}' slot`}),e.slot_outlets.add(r));let t=this.parent;do{if("InlineComponent"===t.type)break;if("Element"===t.type&&/-/.test(t.name))break;if("IfBlock"===t.type||"EachBlock"===t.type){const r=`Cannot place slotted elements inside an ${"IfBlock"===t.type?"if":"each"}-block`;e.error(n,{code:"invalid-slotted-content",message:r})}}while(t=t.parent);t||e.error(n,{code:"invalid-slotted-content",message:"Element with a slot='...' attribute must be a descendant of a component or custom element"})}"is"===r&&e.warn(n,{code:"avoid-is",message:"The 'is' attribute is not supported cross-browser and should be avoided"}),t.set(n.name,n)}),"a"===this.name){const n=t.get("href")||t.get("xlink:href");if(n){const t=n.get_static_value();""!==t&&"#"!==t||e.warn(n,{code:"a11y-invalid-attribute",message:`A11y: '${t}' is not a valid ${n.name} attribute`})}else e.warn(this,{code:"a11y-missing-attribute",message:"A11y: <a> element should have an href attribute"})}else{const e=xp[this.name];if(e&&(e.some(e=>t.has(e))||Tp(this,e)),"input"===this.name){const e=t.get("type");if(e&&"image"===e.get_static_value()){const e=["alt","aria-label","aria-labelledby"];e.some(e=>t.has(e))||Tp(this,e,'input type="image"')}}}}validate_bindings(){const{component:e}=this,t=()=>{const t=this.attributes.find(e=>"type"===e.name);if(!t)return null;t.is_static||e.error(t,{code:"invalid-type",message:"'type' attribute cannot be dynamic if input uses two-way binding"});const n=t.get_static_value();return!0===n&&e.error(t,{code:"missing-type",message:"'type' attribute must be specified"}),n};this.bindings.forEach(n=>{const{name:r}=n;if("value"===r)if("input"!==this.name&&"textarea"!==this.name&&"select"!==this.name&&e.error(n,{code:"invalid-binding",message:`'value' is not a valid binding on <${this.name}> elements`}),"select"===this.name){const t=this.attributes.find(e=>"multiple"===e.name);t&&!t.is_static&&e.error(t,{code:"dynamic-multiple-attribute",message:"'multiple' attribute cannot be dynamic if select uses two-way binding"})}else t();else if("checked"===r||"indeterminate"===r){"input"!==this.name&&e.error(n,{code:"invalid-binding",message:`'${r}' is not a valid binding on <${this.name}> elements`});const i=t();if("checkbox"!==i){let t=`'${r}' binding can only be used with <input type="checkbox">`;"radio"===i&&(t+="  for <input type=\"radio\">, use 'group' binding"),e.error(n,{code:"invalid-binding",message:t})}}else if("group"===r){"input"!==this.name&&e.error(n,{code:"invalid-binding",message:`'group' is not a valid binding on <${this.name}> elements`});const r=t();"checkbox"!==r&&"radio"!==r&&e.error(n,{code:"invalid-binding",message:'\'group\' binding can only be used with <input type="checkbox"> or <input type="radio">'})}else if("files"===r)"input"!==this.name&&e.error(n,{code:"invalid-binding",message:`'files' is not a valid binding on <${this.name}> elements`}),"file"!==t()&&e.error(n,{code:"invalid-binding",message:"'files' binding can only be used with <input type=\"file\">"});else if("open"===r)"details"!==this.name&&e.error(n,{code:"invalid-binding",message:`'${r}' binding can only be used with <details>`});else if("currentTime"===r||"duration"===r||"paused"===r||"buffered"===r||"seekable"===r||"played"===r||"volume"===r||"playbackRate"===r||"seeking"===r||"ended"===r)"audio"!==this.name&&"video"!==this.name&&e.error(n,{code:"invalid-binding",message:`'${r}' binding can only be used with <audio> or <video>`});else if("videoHeight"===r||"videoWidth"===r)"video"!==this.name&&e.error(n,{code:"invalid-binding",message:`'${r}' binding can only be used with <video>`});else if(Nt.test(r))"svg"!==this.name||"offsetWidth"!==r&&"offsetHeight"!==r?gp.test(this.name)?e.error(n,{code:"invalid-binding",message:`'${n.name}' is not a valid binding on SVG elements`}):kc(this.name)&&e.error(n,{code:"invalid-binding",message:`'${n.name}' is not a valid binding on void elements like <${this.name}>. Use a wrapper element instead`}):e.error(n,{code:"invalid-binding",message:`'${n.name}' is not a valid binding on <svg>. Use '${r.replace("offset","client")}' instead`});else if("textContent"===r||"innerHTML"===r){const t=this.attributes.find(e=>"contenteditable"===e.name);t?t&&!t.is_static&&e.error(t,{code:"dynamic-contenteditable-attribute",message:"'contenteditable' attribute cannot be dynamic if element uses two-way binding"}):e.error(n,{code:"missing-contenteditable-attribute",message:"'contenteditable' attribute is required for textContent and innerHTML two-way bindings"})}else"this"!==r&&e.error(n,{code:"invalid-binding",message:`'${n.name}' is not a valid binding`})})}validate_content(){_p.has(this.name)&&0===this.children.length&&this.component.warn(this,{code:"a11y-missing-content",message:`A11y: <${this.name}> element should have child content`})}validate_event_handlers(){const{component:e}=this;this.handlers.forEach(t=>{t.modifiers.has("passive")&&t.modifiers.has("preventDefault")&&e.error(t,{code:"invalid-event-modifier",message:"The 'passive' and 'preventDefault' modifiers cannot be used together"}),t.modifiers.forEach(n=>{$p.has(n)||e.error(t,{code:"invalid-event-modifier",message:`Valid event modifiers are ${Nc(Array.from($p))}`}),"passive"===n&&(Cp.has(t.name)?t.can_make_passive&&e.warn(t,{code:"redundant-event-modifier",message:"Touch event handlers that don't use the 'event' object are passive by default"}):e.warn(t,{code:"redundant-event-modifier",message:"The passive modifier only works with wheel and touch events"})),!e.compile_options.legacy||"once"!==n&&"passive"!==n||e.error(t,{code:"invalid-event-modifier",message:`The '${n}' modifier cannot be used in legacy mode`})}),Cp.has(t.name)&&t.can_make_passive&&!t.modifiers.has("preventDefault")&&t.modifiers.add("passive")})}is_media_node(){return"audio"===this.name||"video"===this.name}add_css_class(){if(this.attributes.some(e=>e.is_spread))return void(this.needs_manual_style_scoping=!0);const{id:e}=this.component.stylesheet,t=this.attributes.find(e=>"class"===e.name);t&&!t.is_true?1===t.chunks.length&&"Text"===t.chunks[0].type?t.chunks[0].data+=` ${e}`:t.chunks.push(new dp(this.component,this,this.scope,{type:"Text",data:` ${e}`,synthetic:!0})):this.attributes.push(new sp(this.component,this,this.scope,{type:"Attribute",name:"class",value:[{type:"Text",data:e,synthetic:!0}]}))}}function Tp(e,t,n=e.name){const r=/^[aeiou]/.test(t[0])?"an":"a",i=t.length>1?t.slice(0,-1).join(", ")+` or ${t[t.length-1]}`:t[0];e.component.warn(e,{code:"a11y-missing-attribute",message:`A11y: <${n}> element should have ${r} ${i} attribute`})}class Ap extends Vl{constructor(e,t,n,r){super(e,t,n,r),r.attributes.length&&e.error(r.attributes[0],{code:"invalid-attribute",message:"<svelte:head> should not have any attributes or directives"}),this.children=zp(e,t,n,r.children.filter(e=>"Text"!==e.type||/\S/.test(e.data))),this.children.length>0&&(this.id=`svelte-${Fh(this.component.source.slice(this.start,this.end))}`)}}class Np extends Yh{constructor(e,t,n,r){super(e,t,n,r),this.expression=new jl(e,this,n,r.expression),this.children=zp(e,this,n,r.children),this.else=r.else?new ip(e,this,n,r.else):null,this.warn_if_empty_block()}}class Mp extends Vl{constructor(e,t,n,r){if(super(e,t,n,r),this.attributes=[],this.bindings=[],this.handlers=[],this.lets=[],"svelte:component"!==r.name&&"svelte:self"!==r.name){const t=r.name.split(".")[0];e.warn_if_undefined(t,r,n),e.add_reference(t)}this.name=r.name,this.expression="svelte:component"===this.name?new jl(e,this,n,r.expression):null,r.attributes.forEach(t=>{switch(t.type){case"Action":e.error(t,{code:"invalid-action",message:"Actions can only be applied to DOM elements, not components"});case"Attribute":"slot"===t.name&&e.error(t,{code:"invalid-prop",message:"'slot' is reserved for future use in named slots"});case"Spread":this.attributes.push(new sp(e,this,n,t));break;case"Binding":this.bindings.push(new cp(e,this,n,t));break;case"Class":e.error(t,{code:"invalid-class",message:"Classes can only be applied to DOM elements, not components"});case"EventHandler":this.handlers.push(new ep(e,this,n,t));break;case"Let":this.lets.push(new mp(e,this,n,t));break;case"Transition":e.error(t,{code:"invalid-transition",message:"Transitions can only be applied to DOM elements, not components"});default:throw new Error(`Not implemented: ${t.type}`)}}),this.lets.length>0?(this.scope=n.child(),this.lets.forEach(e=>{const t=new Set([e.name.name]);e.names.forEach(e=>{this.scope.add(e,t,this)})})):this.scope=n,this.handlers.forEach(t=>{t.modifiers.forEach(n=>{"once"!==n&&e.error(t,{code:"invalid-event-modifier",message:"Event modifiers other than 'once' can only be used on DOM elements"})})}),this.children=zp(e,this,this.scope,r.children)}}class Op extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.expression=new jl(e,this,n,r.expression),this.should_cache="Identifier"!==r.expression.type||this.expression.dependencies.size&&n.names.has(r.expression.name)}}class Dp extends Op{}class Rp extends Vl{}class Pp extends Op{}class Ip extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.expressions=r.identifiers.map(r=>new jl(e,t,n,r))}}class Lp extends Ep{constructor(e,t,n,r){super(e,t,n,r),this.values=new Map,r.attributes.forEach(t=>{"Attribute"!==t.type&&e.error(t,{code:"invalid-slot-directive",message:"<slot> cannot have directives"}),"name"===t.name&&(1===t.value.length&&"Text"===t.value[0].type||e.error(t,{code:"dynamic-slot-name",message:"<slot> name cannot be dynamic"}),this.slot_name=t.value[0].data,"default"===this.slot_name&&e.error(t,{code:"invalid-slot-name",message:"default is a reserved word  it cannot be used as a slot name"})),this.values.set(t.name,new sp(e,this,n,t))}),this.slot_name||(this.slot_name="default"),"default"===this.slot_name?e.slots.forEach(e=>{this.values.forEach((t,n)=>{e.values.has(n)||e.values.set(n,t)})}):e.slots.has("default")&&e.slots.get("default").values.forEach((e,t)=>{this.values.has(t)||this.values.set(t,e)}),e.slots.set(this.slot_name,this)}}class Bp extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.children=zp(e,t,n,r.children),r.attributes.length>0&&e.error(r.attributes[0],{code:"illegal-attribute",message:"<title> cannot have attributes"}),r.children.forEach(t=>{"Text"!==t.type&&"MustacheTag"!==t.type&&e.error(t,{code:"illegal-structure",message:"<title> can only contain text and {tags}"})}),this.should_cache=1!==r.children.length||"Identifier"!==r.children[0].type||n.names.has(r.children[0].name)}}const Vp=["innerWidth","innerHeight","outerWidth","outerHeight","scrollX","scrollY","online"];class Fp extends Vl{constructor(e,t,n,r){super(e,t,n,r),this.handlers=[],this.bindings=[],this.actions=[],r.attributes.forEach(t=>{if("EventHandler"===t.type)this.handlers.push(new ep(e,this,n,t));else if("Binding"===t.type){if("Identifier"!==t.expression.type){const{parts:n}=Dl(t.expression);e.error(t.expression,{code:"invalid-binding",message:`Bindings on <svelte:window> must be to top-level properties, e.g. '${n[n.length-1]}' rather than '${n.join(".")}'`})}if(!~Vp.indexOf(t.name)){const n="width"===t.name?"innerWidth":"height"===t.name?"innerHeight":Sc(t.name,Vp),r=`'${t.name}' is not a valid binding on <svelte:window>`;n?e.error(t,{code:"invalid-binding",message:`${r} (did you mean '${n}'?)`}):e.error(t,{code:"invalid-binding",message:`${r}  valid bindings are ${Nc(Vp)}`})}this.bindings.push(new cp(e,this,n,t))}else"Action"===t.type&&this.actions.push(new Ul(e,this,n,t))})}}function zp(e,t,n,r){let i=null,o=[];return r.map(r=>{const s=function(e){switch(e){case"AwaitBlock":return Zh;case"Body":return tp;case"Comment":return rp;case"EachBlock":return op;case"Element":return Ep;case"Head":return Ap;case"IfBlock":return Np;case"InlineComponent":return Mp;case"MustacheTag":return Dp;case"Options":return Rp;case"RawMustacheTag":return Pp;case"DebugTag":return Ip;case"Slot":return Lp;case"Text":return dp;case"Title":return Bp;case"Window":return Fp;default:throw new Error(`Not implemented: ${e}`)}}(r.type),a="Text"!==r.type&&"Comment"!==r.type&&o.length;a&&e.push_ignores(o);const c=new s(e,t,n,r);return a&&(e.pop_ignores(),o=[]),"Comment"===c.type&&c.ignores.length&&o.push(...c.ignores),i&&(i.next=c),c.prev=i,i=c,c})}class qp{constructor(e){this.owners=new Map,this.parent=e,this.names=new Set(e?e.names:[]),this.dependencies_for_name=new Map(e?e.dependencies_for_name:[])}add(e,t,n){return this.names.add(e),this.dependencies_for_name.set(e,t),this.owners.set(e,n),this}child(){return new qp(this)}is_top_level(e){return!this.parent||!this.names.has(e)&&this.parent.is_top_level(e)}get_owner(e){return this.owners.get(e)||this.parent&&this.parent.get_owner(e)}is_let(e){const t=this.get_owner(e);return t&&("Element"===t.type||"InlineComponent"===t.type)}is_await(e){const t=this.get_owner(e);return t&&("ThenBlock"===t.type||"CatchBlock"===t.type)}}class jp extends Vl{constructor(e,t){const n=new qp;super(e,null,n,t),this.scope=n,this.children=zp(e,this,n,t.children)}}var Up=new Set(["HtmlTag","SvelteComponent","SvelteComponentDev","SvelteElement","action_destroyer","add_attribute","add_classes","add_flush_callback","add_location","add_render_callback","add_resize_listener","add_transform","afterUpdate","append","append_dev","assign","attr","attr_dev","beforeUpdate","bind","binding_callbacks","blank_object","bubble","check_outros","children","claim_component","claim_element","claim_space","claim_text","clear_loops","component_subscribe","createEventDispatcher","create_animation","create_bidirectional_transition","create_component","create_in_transition","create_out_transition","create_slot","create_ssr_component","current_component","custom_event","dataset_dev","debug","destroy_block","destroy_component","destroy_each","detach","detach_after_dev","detach_before_dev","detach_between_dev","detach_dev","dirty_components","dispatch_dev","each","element","element_is","empty","escape","escaped","exclude_internal_props","fix_and_destroy_block","fix_and_outro_and_destroy_block","fix_position","flush","getContext","get_binding_group_value","get_current_component","get_slot_changes","get_slot_context","get_spread_object","get_spread_update","get_store_value","globals","group_outros","handle_promise","has_prop","identity","init","insert","insert_dev","intros","invalid_attribute_name_character","is_client","is_function","is_promise","listen","listen_dev","loop","loop_guard","missing_component","mount_component","noop","not_equal","now","null_to_empty","object_without_properties","onDestroy","onMount","once","outro_and_destroy_block","prevent_default","prop_dev","query_selector_all","raf","run","run_all","safe_not_equal","schedule_update","select_multiple_value","select_option","select_options","select_value","self","setContext","set_attributes","set_current_component","set_custom_element_data","set_data","set_data_dev","set_input_type","set_input_value","set_now","set_raf","set_store_value","set_style","set_svg_attributes","space","spread","stop_propagation","subscribe","svg_element","text","tick","time_ranges_to_array","to_number","toggle_class","transition_in","transition_out","update_keyed_each","validate_component","validate_each_keys","validate_store","xlink_attr"]);function Wp(e){const t=e.reduce((e,t)=>{const[n,r]=t;return e.has(n)||e.set(n,[]),e.has(r)||e.set(r,[]),e.get(n).push(r),e},new Map),n=new Set,r=new Set,i=[];return t.forEach((e,o)=>{n.has(o)||function e(o){n.add(o),r.add(o),t.get(o).forEach(t=>{n.has(t)?r.has(t)&&i.push([...r,t]):e(t)}),r.delete(o)}(o)}),i[0]}class Hp{constructor(t,n,r,i,o,s){if(this.ignore_stack=[],this.vars=[],this.var_lookup=new Map,this.imports=[],this.hoistable_nodes=new Set,this.node_for_declaration=new Map,this.partly_hoisted=[],this.fully_hoisted=[],this.reactive_declarations=[],this.reactive_declaration_nodes=new Set,this.has_reactive_assignments=!1,this.injected_reactive_declaration_vars=new Set,this.helpers=new Map,this.globals=new Map,this.indirect_dependencies=new Map,this.aliases=new Map,this.used_names=new Set,this.globally_used_names=new Set,this.slots=new Map,this.slot_outlets=new Set,this.name={type:"Identifier",name:r},this.stats=o,this.warnings=s,this.ast=t,this.source=n,this.compile_options=i,this.original_ast={html:t.html,css:t.css,instance:t.instance&&JSON.parse(JSON.stringify(t.instance)),module:t.module},this.file=i.filename&&(void 0!==e?i.filename.replace(e.cwd(),"").replace(/^[/\\]/,""):i.filename),this.locate=Kc(this.source,{offsetLine:1}),this.stylesheet=new Kh(n,t,i.filename,i.dev),this.stylesheet.validate(this),this.component_options=function(e,t){const n={immutable:e.compile_options.immutable||!1,accessors:"accessors"in e.compile_options?e.compile_options.accessors:!!e.compile_options.customElement,preserveWhitespace:!!e.compile_options.preserveWhitespace},r=t.find(e=>"svelte:options"===e.name);function i(t,n,r){const{value:i}=t,o=i[0];return!o||(i.length>1&&e.error(t,{code:n,message:r}),"Text"===o.type?o.data:("Literal"!==o.expression.type&&e.error(t,{code:n,message:r}),o.expression.value))}return r&&r.attributes.forEach(t=>{if("Attribute"===t.type){const{name:r}=t;switch(r){case"tag":{const r="invalid-tag-attribute",o="'tag' must be a string literal",s=i(t,r,o);"string"!=typeof s&&null!==s&&e.error(t,{code:r,message:o}),s&&!/^[a-zA-Z][a-zA-Z0-9]*-[a-zA-Z0-9-]+$/.test(s)&&e.error(t,{code:"invalid-tag-property",message:"tag name must be two or more words joined by the '-' character"}),s&&!e.compile_options.customElement&&e.warn(t,{code:"missing-custom-element-compile-options",message:"The 'tag' option is used when generating a custom element. Did you forget the 'customElement: true' compile option?"}),n.tag=s;break}case"namespace":{const r="invalid-namespace-attribute",o="The 'namespace' attribute must be a string literal representing a valid namespace",s=i(t,r,o);if("string"!=typeof s&&e.error(t,{code:r,message:o}),-1===$l.indexOf(s)){const n=Sc(s,$l);n?e.error(t,{code:"invalid-namespace-property",message:`Invalid namespace '${s}' (did you mean '${n}'?)`}):e.error(t,{code:"invalid-namespace-property",message:`Invalid namespace '${s}'`})}n.namespace=s;break}case"accessors":case"immutable":case"preserveWhitespace":{const o=`invalid-${r}-value`,s=`${r} attribute must be true or false`,a=i(t,o,s);"boolean"!=typeof a&&e.error(t,{code:o,message:s}),n[r]=a;break}default:e.error(t,{code:"invalid-options-attribute",message:"<svelte:options> unknown attribute"})}}else e.error(t,{code:"invalid-options-attribute",message:"<svelte:options> can only have static 'tag', 'namespace', 'accessors', 'immutable' and 'preserveWhitespace' attributes"})}),n}(this,this.ast.html.children),this.namespace=Cl[this.component_options.namespace]||this.component_options.namespace,i.customElement){if(void 0===this.component_options.tag&&void 0===i.tag){const e=t.html.children.find(e=>"svelte:options"===e.name)||{start:0,end:0};this.warn(e,{code:"custom-element-no-tag",message:"No custom element 'tag' option was specified. To automatically register a custom element, specify a name with a hyphen in it, e.g. <svelte:options tag=\"my-thing\"/>. To hide this warning, use <svelte:options tag={null}/>"})}this.tag=this.component_options.tag||i.tag}else this.tag=this.name.name;this.walk_module_js(),this.walk_instance_js_pre_template(),this.fragment=new jp(this,t.html),this.name=this.get_unique_name(r),this.walk_instance_js_post_template(),i.customElement||this.stylesheet.reify(),this.stylesheet.warn_on_unused_selectors(this)}add_var(e){this.vars.push(e),this.var_lookup.set(e.name,e)}add_reference(e){const t=this.var_lookup.get(e);if(t)t.referenced=!0;else if("$$props"===e)this.add_var({name:e,injected:!0,referenced:!0});else if("$"===e[0]){this.add_var({name:e,injected:!0,referenced:!0,mutated:!0,writable:!0});const t=e.slice(1),n=this.var_lookup.get(t);n&&(n.referenced=!0,n.subscribable=!0)}else this.used_names.add(e)}alias(e){return this.aliases.has(e)||this.aliases.set(e,this.get_unique_name(e)),this.aliases.get(e)}global(e){const t=this.alias(e);return this.globals.set(e,t),t}generate(e){let t=null,n=null;if(e){const{compile_options:r,name:i}=this,{format:o="esm"}=r,s=`${this.file?`${this.file} `:""}generated by Svelte v3.18.1`,a={type:"Program",body:e.js};Le(a,{enter:(e,t,n)=>{if("Identifier"===e.type)if("@"===e.name[0])if("_"===e.name[1]){const t=this.global(e.name.slice(2));e.name=t.name}else{let t=e.name.slice(1);r.dev&&(Up.has(`${t}_dev`)?t+="_dev":Up.has(`${t}Dev`)&&(t+="Dev"));const n=this.alias(t);this.helpers.set(t,n),e.name=n.name}else if("#"!==e.name[0]&&!function(e){let t=0;for(;t<e.length;){const n=yc(e,t);if(!(0===t?g:v)(n,!0))return!1;t+=n<=65535?1:2}return!0}(e.name)){const r={type:"Literal",value:e.name};"Property"===t.type&&"key"===n?t.key=r:"MemberExpression"===t.type&&"property"===n&&(t.property=r,t.computed=!0)}}});const c=Array.from(this.globals,([e,t])=>e!==t.name&&{name:e,alias:t}).filter(Boolean);c.length&&this.helpers.set("globals",this.alias("globals"));const l=Array.from(this.helpers,([e,t])=>({name:e,alias:t}));!function(e,t,n,r,i="svelte",o,s,a,c){const l=`${i}/internal`;if(o.sort((e,t)=>e.name<t.name?-1:1),s.sort((e,t)=>e.name<t.name?-1:1),"esm"===t)return yh(e,n,r,i,l,o,s,a,c);if("cjs"===t)return bh(e,n,r,i,l,o,s,a,c);throw new Error(`options.format is invalid (must be ${Nc(Object.keys(mh))})`)}(a,o,i,s,r.sveltePath,l,c,this.imports,this.vars.filter(e=>e.module&&e.export_name).map(e=>({name:e.name,as:e.export_name}))),n=r.customElement?{code:null,map:null}:e.css,t=function e(t,n={}){if(Array.isArray(t))return e({type:"Program",body:t},n);const{getName:r=(e=>e)}=n;let{map:i,scope:o}=We(t);const s=tt(t,{indent:"",getName:r,scope:o,scope_map:i,deconflicted:new WeakMap,comments:[]});let a="",c=[],l=[],h=0;for(let e=0;e<s.length;e+=1){const t=s[e];a+=t.content,t.loc&&l.push([h,0,t.loc.start.line-1,t.loc.start.column]);for(let e=0;e<t.content.length;e+=1)"\n"===t.content[e]?(c.push(l),l=[],h=0):h+=1;t.loc&&l.push([h,0,t.loc.end.line-1,t.loc.end.column])}c.push(l);const p={version:3,names:[],sources:[n.sourceMapSource||null],sourcesContent:[n.sourceMapContent||null],mappings:Ge(c)};return Object.defineProperties(p,{toString:{enumerable:!1,value:function(){return JSON.stringify(this)}},toUrl:{enumerable:!1,value:function(){return"data:application/json;charset=utf-8;base64,"+ft(this.toString())}}}),{code:a,map:p}}(a,{sourceMapSource:r.filename}),t.map.sources=[r.filename?Kp(r.outputFilename||"",r.filename):null],t.map.sourcesContent=[this.source]}return{js:t,css:n,ast:this.original_ast,warnings:this.warnings,vars:this.vars.filter(e=>!e.global&&!e.internal).map(e=>({name:e.name,export_name:e.export_name||null,injected:e.injected||!1,module:e.module||!1,mutated:e.mutated||!1,reassigned:e.reassigned||!1,referenced:e.referenced||!1,writable:e.writable||!1,referenced_from_script:e.referenced_from_script||!1})),stats:this.stats.render()}}get_unique_name(e,t){Jh&&(e=`${e}$`);let n=e;for(let r=1;wc.has(n)||this.var_lookup.has(n)||this.used_names.has(n)||this.globally_used_names.has(n)||t&&t.has(n);n=`${e}_${r++}`);return this.used_names.add(n),{type:"Identifier",name:n}}get_unique_name_maker(){const e=new Set;function t(t){e.add(t)}return wc.forEach(t),Up.forEach(t),this.var_lookup.forEach((e,n)=>t(n)),t=>{Jh&&(t=`${t}$`);let n=t;for(let r=1;this.used_names.has(n)||e.has(n);n=`${t}_${r++}`);return e.add(n),this.globally_used_names.add(n),{type:"Identifier",name:n}}}error(e,t){Qc(t.message,{name:"ValidationError",code:t.code,source:this.source,start:e.start,end:e.end,filename:this.compile_options.filename})}warn(e,t){if(this.ignores&&this.ignores.has(t.code))return;const n=this.locate(e.start),r=this.locate(e.end),i=Gc(this.source,n.line-1,n.column);this.warnings.push({code:t.code,message:t.message,frame:i,start:n,end:r,pos:e.start,filename:this.compile_options.filename,toString:()=>`${t.message} (${n.line}:${n.column})\n${i}`})}extract_imports(e){this.imports.push(e)}extract_exports(e){if("ExportDefaultDeclaration"===e.type&&this.error(e,{code:"default-export",message:"A component cannot have a default export"}),"ExportNamedDeclaration"===e.type){if(e.source&&this.error(e,{code:"not-implemented",message:"A component currently cannot have an export ... from"}),e.declaration){if("VariableDeclaration"===e.declaration.type)e.declaration.declarations.forEach(e=>{Ke(e.id).forEach(t=>{const n=this.var_lookup.get(t);n.export_name=t,n.writable&&!(n.referenced||n.referenced_from_script||n.subscribable)&&this.warn(e,{code:"unused-export-let",message:`${this.name.name} has unused export property '${t}'. If it is for external reference only, please consider using \`export const ${t}\``})})});else{const{name:t}=e.declaration.id;this.var_lookup.get(t).export_name=t}return e.declaration}return e.specifiers.forEach(e=>{const t=this.var_lookup.get(e.local.name);t&&(t.export_name=e.exported.name,t.writable&&!(t.referenced||t.referenced_from_script||t.subscribable)&&this.warn(e,{code:"unused-export-let",message:`${this.name.name} has unused export property '${e.exported.name}'. If it is for external reference only, please consider using \`export const ${e.exported.name}\``}))}),null}}extract_javascript(e){return e?e.content.body.filter(e=>!(!e||this.hoistable_nodes.has(e)||this.reactive_declaration_nodes.has(e)||"ImportDeclaration"===e.type||"ExportDeclaration"===e.type&&e.specifiers.length>0)):null}walk_module_js(){const e=this,t=this.ast.module;if(!t)return;Le(t.content,{enter(t){"LabeledStatement"===t.type&&"$"===t.label.name&&e.warn(t,{code:"module-script-reactive-declaration",message:"$: has no effect in a module script"})}});const{scope:n,globals:r}=Fl(t.content);this.module_scope=n,n.declarations.forEach((e,t)=>{"$"===t[0]&&this.error(e,{code:"illegal-declaration",message:"The $ prefix is reserved, and cannot be used for variable and import names"});const n="VariableDeclaration"===e.type&&("var"===e.kind||"let"===e.kind);this.add_var({name:t,module:!0,hoistable:!0,writable:n})}),r.forEach((e,t)=>{"$"===t[0]?this.error(e,{code:"illegal-subscription",message:'Cannot reference store value inside <script context="module">'}):this.add_var({name:t,global:!0,hoistable:!0})});const{body:i}=t.content;let o=i.length;for(;--o>=0;){const e=i[o];if("ImportDeclaration"===e.type&&(this.extract_imports(e),i.splice(o,1)),/^Export/.test(e.type)){const t=this.extract_exports(e);t?i[o]=t:i.splice(o,1)}}}walk_instance_js_pre_template(){const e=this.ast.instance;if(!e)return;e.content.body.forEach(e=>{if("LabeledStatement"!==e.type)return;if("ExpressionStatement"!==e.body.type)return;const{expression:t}=e.body;"AssignmentExpression"===t.type&&"MemberExpression"!==t.left.type&&Ke(t.left).forEach(e=>{this.var_lookup.has(e)||"$"===e[0]||this.injected_reactive_declaration_vars.add(e)})});const{scope:t,map:n,globals:r}=Fl(e.content);this.instance_scope=t,this.instance_scope_map=n,t.declarations.forEach((e,n)=>{"$"===n[0]&&this.error(e,{code:"illegal-declaration",message:"The $ prefix is reserved, and cannot be used for variable and import names"});const r="VariableDeclaration"===e.type&&("var"===e.kind||"let"===e.kind);this.add_var({name:n,initialised:t.initialised_declarations.has(n),hoistable:/^Import/.test(e.type),writable:r}),this.node_for_declaration.set(n,e)}),r.forEach((e,t)=>{if(!this.var_lookup.has(t))if(this.injected_reactive_declaration_vars.has(t))this.add_var({name:t,injected:!0,writable:!0,reassigned:!0,initialised:!0});else if("$$props"===t)this.add_var({name:t,injected:!0});else if("$"===t[0]){"$"!==t&&"$"!==t[1]||this.error(e,{code:"illegal-global",message:`${t} is an illegal variable name`}),this.add_var({name:t,injected:!0,mutated:!0,writable:!0}),this.add_reference(t.slice(1));const n=this.var_lookup.get(t.slice(1));n&&(n.subscribable=!0,n.referenced_from_script=!0)}else this.add_var({name:t,global:!0,hoistable:!0})}),this.track_references_and_mutations()}walk_instance_js_post_template(){this.ast.instance&&(this.post_template_walk(),this.hoist_instance_declarations(),this.extract_reactive_declarations())}post_template_walk(){const e=this.ast.instance;if(!e)return;const t=this,{content:n}=e,{instance_scope:r,instance_scope_map:i}=this;let o=r;const s=[],a=(e,t,n)=>{s.unshift([e,t,n])};let c=!1;Le(n,{enter(e,n,r,s){if(i.has(e)&&(o=i.get(e)),"ImportDeclaration"===e.type)return t.extract_imports(e),a(n,r,s),this.skip();if(/^Export/.test(e.type)){const i=t.extract_exports(e);return i?this.replace(i):a(n,r,s),this.skip()}t.warn_on_undefined_store_value_references(e,n,o)},leave(e){if(t.compile_options.dev&&t.compile_options.loopGuardTimeout>0){const n=t.loop_protect(e,o,t.compile_options.loopGuardTimeout);n&&(this.replace(n),c=!0)}i.has(e)&&(o=o.parent)}});for(const[e,t,n]of s)e&&(null!==n?e[t].splice(n,1):delete e[t]);if(c){const{scope:t,map:n}=Fl(e.content);this.instance_scope=t,this.instance_scope_map=n}}track_references_and_mutations(){const e=this.ast.instance;if(!e)return;const t=this,{content:n}=e,{instance_scope:r,instance_scope_map:i}=this;let o=r;Le(n,{enter(e,n){if(i.has(e)&&(o=i.get(e)),"AssignmentExpression"===e.type||"UpdateExpression"===e.type){const n="AssignmentExpression"===e.type?e.left:e.argument,i=Ke(n),s="MemberExpression"===n.type;i.forEach(e=>{o.find_owner(e)===r&&(t.var_lookup.get(e)[s?"mutated":"reassigned"]=!0)})}if(function(e,t){if(!Ue(e,t))return!1;if(!t)return!0;switch(t.type){case"VariableDeclarator":return e!==t.id;case"FunctionDeclaration":case"ImportSpecifier":case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ExportSpecifier":return!1;default:return!0}}(e,n)){const n=Ol(e);o.find_owner(n.name)===r&&(t.var_lookup.get(n.name).referenced_from_script=!0)}},leave(e){i.has(e)&&(o=o.parent)}})}warn_on_undefined_store_value_references(e,t,n){if("LabeledStatement"===e.type&&"$"===e.label.name&&"Program"!==t.type&&this.warn(e,{code:"non-top-level-reactive-declaration",message:"$: has no effect outside of the top-level"}),Ue(e,t)){const t=Ol(e),{name:r}=t;"$"!==r[0]||n.has(r)||this.warn_if_undefined(r,t,null)}}loop_protect(e,t,n){if("WhileStatement"===e.type||"ForStatement"===e.type||"DoWhileStatement"===e.type){const r=this.get_unique_name("guard",t);this.used_names.add(r.name);const i=_t`const ${r} = @loop_guard(${n})`,o=_t`${r}();`;return"BlockStatement"!==e.body.type&&(e.body={type:"BlockStatement",body:[e.body]}),e.body.body.push(o[0]),{type:"BlockStatement",body:[i[0],e]}}return null}rewrite_props(e){if(!this.ast.instance)return;const t=this,{instance_scope:n,instance_scope_map:r}=this;let i=n;Le(this.ast.instance.content,{enter(o,s,a,c){if(/Function/.test(o.type))return this.skip();r.has(o)&&(i=r.get(o)),"VariableDeclaration"===o.type&&("var"!==o.kind&&i!==n||o.declarations.forEach(n=>{if("Identifier"!==n.id.type){const r=[];return Ke(n.id).forEach(i=>{const o=t.var_lookup.get(i);o.export_name&&t.error(n,{code:"destructured-prop",message:"Cannot declare props in destructured declaration"}),o.subscribable&&r.push(e(o))}),void(r.length&&s[a].splice(c+1,0,...r))}const{name:r}=n.id,i=t.var_lookup.get(r);if(i.export_name&&i.writable){const t=i.subscribable?e(i):null;s[a].splice(c+1,0,t),n.id={type:"ObjectPattern",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:i.export_name},value:n.init?{type:"AssignmentPattern",left:n.id,right:n.init}:n.id}]},n.init=St`$$props`}else if(i.subscribable){const t=e(i);s[a].splice(c+1,0,...t)}}))},leave(e,t,n,o){r.has(e)&&(i=i.parent),"ExportNamedDeclaration"===e.type&&e.declaration&&(t.body[o]=e.declaration)}})}hoist_instance_declarations(){const{hoistable_nodes:e,var_lookup:t,injected_reactive_declaration_vars:n}=this,r=new Map,{body:i}=this.ast.instance.content;for(let t=0;t<i.length;t+=1){const n=i[t];"VariableDeclaration"===n.type&&n.declarations.every(e=>{if(!e.init)return!1;if("Literal"!==e.init.type)return!1;if("const"!==n.kind&&this.compile_options.dev)return!1;const{name:t}=e.id,r=this.var_lookup.get(t);return!(r.reassigned||r.export_name||this.var_lookup.get(t).reassigned||this.vars.find(e=>e.name===t&&e.module))})&&(n.declarations.forEach(e=>{this.var_lookup.get(e.id.name).hoistable=!0}),e.add(n),i.splice(t--,1),this.fully_hoisted.push(n)),"ExportNamedDeclaration"===n.type&&n.declaration&&"FunctionDeclaration"===n.declaration.type&&r.set(n.declaration.id.name,n),"FunctionDeclaration"===n.type&&r.set(n.id.name,n)}const o=new Set,s=new Set,a=e=>{"ExportNamedDeclaration"===e.type&&(e=e.declaration);const i=this.instance_scope;let c=this.instance_scope;const l=this.instance_scope_map;let h=!0;return s.add(e),Le(e,{enter(o,p){if(!h)return this.skip();if(l.has(o)&&(c=l.get(o)),Ue(o,p)){const{name:l}=Dl(o),p=c.find_owner(l);if(n.has(l))h=!1;else if("$"!==l[0]||p){if(p===i){const n=t.get(l);if((n.reassigned||n.mutated)&&(h=!1),l===e.id.name)return;if(n.hoistable)return;if(r.has(l)){const e=r.get(l);s.has(e)?h=!1:"ExportNamedDeclaration"===e.type&&s.has(e.declaration)?h=!1:a(e)||(h=!1)}else h=!1}}else h=!1;this.skip()}},leave(e){l.has(e)&&(c=c.parent)}}),o.add(e),s.delete(e),h};for(const[t,n]of r)if(a(n)){this.var_lookup.get(t).hoistable=!0,e.add(n);const r=i.indexOf(n);i.splice(r,1),this.fully_hoisted.push(n)}}extract_reactive_declarations(){const e=this,t=[];this.ast.instance.content.body.forEach(n=>{if("LabeledStatement"===n.type&&"$"===n.label.name){this.reactive_declaration_nodes.add(n);const r=new Set,i=new Set,o=new Set;let s=this.instance_scope;const a=this.instance_scope_map;Le(n.body,{enter(t,n){if(a.has(t)&&(s=a.get(t)),"AssignmentExpression"===t.type){const e=Ol(t.left);Je(e).forEach(e=>{i.add(e),r.add(e.name)}),"="!==t.operator&&o.add(e.name)}else if("UpdateExpression"===t.type){const e=Ol(t.argument);r.add(e.name)}else if(Ue(t,n)){const n=Ol(t);if(!i.has(n)){const{name:t}=n,r=s.find_owner(t),i=e.var_lookup.get(t);i&&(i.is_reactive_dependency=!0);const a=i&&(i.writable||i.mutated);r&&r!==e.instance_scope||"$"!==t[0]&&!a||o.add(t)}this.skip()}},leave(e){a.has(e)&&(s=s.parent)}});const{expression:c}=n.body,l=c&&c.left;t.push({assignees:r,dependencies:o,node:n,declaration:l})}});const n=new Map;let r;t.forEach(e=>{e.assignees.forEach(t=>{n.has(t)||n.set(t,[]),n.get(t).push(e)})});const i=Wp(t.reduce((e,t)=>(t.assignees.forEach(n=>{t.dependencies.forEach(r=>{t.assignees.has(r)||e.push([n,r])})}),e),[]));if(i&&i.length){const e=n.get(i[0])[0];this.error(e.node,{code:"cyclical-reactive-declaration",message:`Cyclical dependency detected: ${i.join("  ")}`})}const o=e=>{-1===this.reactive_declarations.indexOf(e)&&(r.add(e),e.dependencies.forEach(t=>{if(e.assignees.has(t))return;const r=n.get(t);r&&r.forEach(e=>{o(e)})}),this.reactive_declarations.push(e))};t.forEach(e=>{r=new Set,o(e)})}warn_if_undefined(e,t,n){if("$"===e[0]){if(("$"===e||"$"===e[1]&&"$$props"!==e)&&this.error(t,{code:"illegal-global",message:`${e} is an illegal variable name`}),this.has_reactive_assignments=!0,"$$props"===e)return;e=e.slice(1)}if(this.var_lookup.has(e)&&!this.var_lookup.get(e).global)return;if(n&&n.names.has(e))return;if(bc.has(e)&&"InlineComponent"!==t.type)return;let r=`'${e}' is not defined`;this.ast.instance||(r+=`. Consider adding a <script> block with 'export let ${e}' to declare a prop`),this.warn(t,{code:"missing-declaration",message:r})}push_ignores(e){this.ignores=new Set(this.ignores||[]),pl(this.ignores,e),this.ignore_stack.push(this.ignores)}pop_ignores(){this.ignore_stack.pop(),this.ignores=this.ignore_stack[this.ignore_stack.length-1]}}function Kp(e,t){const n=e.split(/[/\\]/),r=t.split(/[/\\]/);for(n.pop();n[0]===r[0];)n.shift(),r.shift();if(n.length){let e=n.length;for(;e--;)n[e]=".."}return n.concat(r).join("/")}const Jp=["format","name","filename","generate","outputFilename","cssOutputFilename","sveltePath","dev","accessors","immutable","hydratable","legacy","customElement","tag","css","loopGuardTimeout","preserveComments","preserveWhitespace"];function Yp(e){const t={};return e.split(/\s+/).filter(Boolean).forEach(e=>{const n=e.indexOf("=");-1===n?t[e]=!0:t[e.slice(0,n)]="'\"".includes(e[n+1])?e.slice(n+2,-1):e.slice(n+1)}),t}async function Gp(e,t,n){const r=[];e.replace(t,(...e)=>(r.push(n(...e).then(t=>({offset:e[e.length-2],length:e[0].length,replacement:t}))),""));let i="",o=0;for(const{offset:t,length:n,replacement:s}of await Promise.all(r))i+=e.slice(o,t)+s,o=t+n;return i+=e.slice(o),i}t.VERSION="3.18.1",t.compile=function(e,t={}){t=function(e,t){for(const n in t)e[n]=t[n];return e}({generate:"dom",dev:!1},t);const n=new i,r=[];!function(e,t){const{name:n,filename:r,loopGuardTimeout:i,dev:o}=e;if(Object.keys(e).forEach(e=>{if(!Jp.includes(e)){const t=Sc(e,Jp);let n=`Unrecognized option '${e}'`;throw t&&(n+=` (did you mean '${t}'?)`),new Error(n)}}),n&&!/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(n))throw new Error(`options.name must be a valid identifier (got '${n}')`);if(n&&/^[a-z]/.test(n)){const e="options.name should be capitalised";t.push({code:"options-lowercase-name",message:e,filename:r,toString:()=>e})}if(i&&!o){const e="options.loopGuardTimeout is for options.dev = true only";t.push({code:"options-loop-guard-timeout",message:e,filename:r,toString:()=>e})}}(t,r),n.start("parse");const o=el(e,t);n.stop("parse"),n.start("create component");const s=new Hp(o,e,t.name||function(e){if(!e)return null;const t=e.split(/[/\\]/).map(encodeURI);if(t.length>1){const e=t[t.length-1].match(/^index(\.\w+)/);e&&(t.pop(),t[t.length-1]+=e[1])}const n=t.pop().replace(/%/g,"u").replace(/\.[^.]+$/,"").replace(/[^a-zA-Z_$0-9]+/g,"_").replace(/^_/,"").replace(/_$/,"").replace(/^(\d)/,"_$1");if(!n)throw new Error(`Could not derive component name from file ${e}`);return n[0].toUpperCase()+n.slice(1)}(t.filename)||"Component",t,n,r);n.stop("create component");const a=!1===t.generate?null:"ssr"===t.generate?function(e,t){const n=new fh({name:e.name}),{name:r}=e;n.render(function(e){let t=0;for(;t<e.length;t+=1){const n=e[t];if("Text"!==n.type)break;if(n.data=n.data.replace(/^\s+/,""),n.data)break}let n=e.length;for(;n>t;n-=1){const t=e[n-1];if("Text"!==t.type)break;if(t.data=t.data.replace(/\s+$/,""),t.data)break}return e.slice(t,n)}(e.fragment.children),Object.assign({locate:e.locate},t));const i=n.pop(),o=t.customElement?{code:null,map:null}:e.stylesheet.render(t.filename,!0),s=e.vars.filter(e=>"$"===e.name[0]&&"$"!==e.name[1]),a=s.map(({name:t})=>{const n=t.slice(1),r=e.var_lookup.get(n);if(r&&r.hoistable)return null;const i=_t`${t} = @get_store_value(${n});`;return e.compile_options.dev?_t`@validate_store(${n}, '${n}'); ${i}`:i}).filter(Boolean);e.rewrite_props(({name:t})=>{let n=_t`${`$${t}`} = @get_store_value(${t})`;return e.compile_options.dev&&(n=_t`@validate_store(${t}, '${t}'); ${n}`),n});const c=e.extract_javascript(e.ast.instance),l=c?e.vars.filter(e=>!e.module&&e.export_name).map(e=>_t`if ($$props.${e.export_name} === void 0 && $$bindings.${e.export_name} && ${e.name} !== void 0) $$bindings.${e.export_name}(${e.name});`):[],h=e.reactive_declarations.map(t=>{const n=t.node.body;let r=_t`${n}`;if(t.declaration){const i=Ke(t.declaration),o=i.filter(t=>"$"!==t[0]&&e.var_lookup.get(t).injected),s=o.filter(e=>t.dependencies.has(e));if(o.length){const e=s.length>0||i.length>o.length,{left:t,right:a}=n.expression;r=e?_t`
						${o.map(e=>_t`let ${e};`)}
						${r}`:_t`
						let ${t} = ${a}`}}else r=_t`$: { ${r} }`;return r}),p=n.has_bindings?_t`
			let $$settled;
			let $$rendered;

			do {
				$$settled = true;

				${a}

				${h}

				$$rendered = ${i};
			} while (!$$settled);

			return $$rendered;
		`:_t`
			${a}

			${h}

			return ${i};`,u=[...s.map(({name:t})=>{const n=t.slice(1),r=e.var_lookup.get(n);return r&&r.hoistable?_t`let ${t} = @get_store_value(${n});`:_t`let ${t};`}),c,...l,o.code&&_t`$$result.css.add(#css);`,p].filter(Boolean);return{js:_t`
		${o.code?_t`
		const #css = {
			code: "${o.code}",
			map: ${o.map?dl(o.map.toString()):"null"}
		};`:null}

		${e.extract_javascript(e.ast.module)}

		${e.fully_hoisted}

		const ${r} = @create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
			${u}
		});
	`,css:o}}(s,t):function(e,t){const{name:n}=e,r=new oh(e,t),{block:i}=r;i.has_outro_method=!0,t.customElement&&i.chunks.create.push(_t`this.c = @noop;`);const o=[];if(r.file_var){const t=e.file?St`"${e.file}"`:St`undefined`;o.push(_t`const ${r.file_var} = ${t};`)}const s=e.stylesheet.render(t.filename,!t.customElement),a=e.stylesheet.has_styles&&t.dev?`${s.code}\n/*# sourceMappingURL=${s.map.toUrl()} */`:s.code,c=e.get_unique_name("add_css"),l=!t.customElement&&!!a&&!1!==t.css;l&&o.push(_t`
			function ${c}() {
				var style = @element("style");
				style.id = "${e.stylesheet.id}-style";
				style.textContent = "${a}";
				@append(@_document.head, style);
			}
		`);const h=r.blocks.slice().reverse();o.push(...h.map(e=>e.render?e.render():e)),t.dev&&!t.hydratable&&i.chunks.claim.push(_t`throw new @_Error("options.hydrate only works if the component was compiled with the \`hydratable: true\` option");`);const p=e.var_lookup.has("$$props"),u=p?"$$new_props":"$$props",d=e.vars.filter(e=>!e.module&&e.export_name),f=d.filter(e=>e.writable),m=p||f.length>0||e.slots.size>0?St`
			${u} => {
				${p&&r.invalidate("$$props",St`$$props = @assign(@assign({}, $$props), @exclude_internal_props($$new_props))`)}
				${f.map(e=>_t`if ('${e.export_name}' in ${u}) ${r.invalidate(e.name,St`${e.name} = ${u}.${e.export_name}`)};`)}
				${e.slots.size>0&&_t`if ('$$scope' in ${u}) ${r.invalidate("$$scope",St`$$scope = ${u}.$$scope`)};`}
			}
		`:null,g=[],v=e.component_options.immutable?St`@not_equal`:St`@safe_not_equal`;let y,b,w;if(d.forEach(t=>{const n=e.var_lookup.get(t.name);!n.writable||e.component_options.accessors?g.push({type:"MethodDefinition",kind:"get",key:{type:"Identifier",name:t.export_name},value:St`function() {
					return ${t.hoistable?t.name:St`this.$$.ctx[${r.context_lookup.get(t.name).index}]`}
				}`}):e.compile_options.dev&&g.push({type:"MethodDefinition",kind:"get",key:{type:"Identifier",name:t.export_name},value:St`function() {
					throw new @_Error("<${e.tag}>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
				}`}),e.component_options.accessors?n.writable&&!r.readonly.has(t.name)?g.push({type:"MethodDefinition",kind:"set",key:{type:"Identifier",name:t.export_name},value:St`function(${t.name}) {
						this.$set({ ${t.export_name}: ${t.name} });
						@flush();
					}`}):e.compile_options.dev&&g.push({type:"MethodDefinition",kind:"set",key:{type:"Identifier",name:t.export_name},value:St`function(value) {
						throw new @_Error("<${e.tag}>: Cannot set read-only property '${t.export_name}'");
					}`}):e.compile_options.dev&&g.push({type:"MethodDefinition",kind:"set",key:{type:"Identifier",name:t.export_name},value:St`function(value) {
					throw new @_Error("<${e.tag}>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
				}`})}),e.compile_options.dev){const n=d.filter(e=>e.writable&&!e.initialised);n.length&&(y=_t`
				const { ctx: #ctx } = this.$$;
				const props = ${t.customElement?St`this.attributes`:St`options.props || {}`};
				${n.map(t=>_t`
				if (${r.reference(t.name)} === undefined && !('${t.export_name}' in props)) {
					@_console.warn("<${e.tag}> was created without expected prop '${t.export_name}'");
				}`)}
			`),w=p||f.length>0?St`
			() => {
				return { ${e.vars.filter(e=>e.writable).map(e=>$t`${e.name}`)} };
			}
		`:St`
			() => {
				return {};
			}
		`;const i=e.vars.filter(e=>!e.module&&e.writable);b=p||i.length>0?St`
			${u} => {
				${p&&r.invalidate("$$props",St`$$props = @assign(@assign({}, $$props), $$new_props)`)}
				${i.map(e=>_t`
					if ('${e.name}' in $$props) ${r.invalidate(e.name,St`${e.name} = ${u}.${e.name}`)};
				`)}
			}
		`:St`
			${u} => {}
		`}if(e.ast.instance){let t=e.instance_scope;const n=e.instance_scope_map;let i=null;Le(e.ast.instance.content,{enter(e){n.has(e)?(t=n.get(e),i||t.block||(i=e)):i||"LabeledStatement"!==e.type||"$"!==e.label.name||(i=e)},leave(e){if(n.has(e)&&(t=t.parent),i===e&&(i=null),"AssignmentExpression"===e.type||"UpdateExpression"===e.type){const n="AssignmentExpression"===e.type?e.left:e.argument,o=new Set(Ke(n));this.replace(ql(r,t,e,o,null===i))}}}),e.rewrite_props(({name:t,reassigned:n,export_name:i})=>{const o=`$${t}`,s=r.context_lookup.get(`$${t}`).index,a=n||i?_t`${`$$subscribe_${t}`}()`:_t`@component_subscribe($$self, ${t}, #value => $$invalidate(${s}, ${o} = #value))`;return e.compile_options.dev?_t`@validate_store(${t}, '${t}'); ${a}`:a})}const x=[St`$$self`];(d.length>0||e.has_reactive_assignments||e.slots.size>0)&&x.push(St`$$props`,St`$$invalidate`);const k=i.has_content();k&&o.push(_t`
			function create_fragment(#ctx) {
				${i.get_contents()}
			}
		`),o.push(_t`
		${e.extract_javascript(e.ast.module)}

		${e.fully_hoisted}
	`);const _=d.filter(t=>!e.var_lookup.get(t.name).hoistable&&"$"!==t.name[0]),S=e.vars.filter(e=>"$"===e.name[0]&&"$"!==e.name[1]),$=e.extract_javascript(e.ast.instance);let C=r.context.length;for(;C--;){const e=r.context[C];if(e.variable){if(e.variable.referenced||e.variable.export_name)break}else if(e.is_non_contextual)break}const E=r.context.slice(0,C+1),T=$&&$.length>0||_.length>0||p||e.partly_hoisted.length>0||E.length>0||e.reactive_declarations.length>0,A=T?e.alias("instance"):{type:"Literal",value:null},N=S.filter(t=>{const n=e.var_lookup.get(t.name.slice(1));return!n||n.hoistable}).map(({name:t})=>_t`
			${e.compile_options.dev&&_t`@validate_store(${t.slice(1)}, '${t.slice(1)}');`}
			@component_subscribe($$self, ${t.slice(1)}, $$value => $$invalidate(${r.context_lookup.get(t).index}, ${t} = $$value));
		`),M=S.filter(t=>{const n=e.var_lookup.get(t.name.slice(1));return n&&(n.reassigned||n.export_name)}).map(({name:e})=>_t`$$self.$$.on_destroy.push(() => ${`$$unsubscribe_${e.slice(1)}`}());`);if(T){const t=[],n=[];e.reactive_declarations.forEach(i=>{const o=Array.from(i.dependencies),s=!!o.find(e=>"$$props"===e),a=o.filter(t=>{const n=e.var_lookup.get(t);return n&&(n.export_name||n.mutated||n.reassigned)}),c=!s&&a.length>0&&r.dirty(a,!0);let l=i.node;c&&(l=_t`if (${c}) { ${l} }`[0]),c||s?t.push(l):n.push(l)});const i=Array.from(e.injected_reactive_declaration_vars).filter(t=>{const n=e.var_lookup.get(t);return n.injected&&"$"!==n.name[0]}),s=S.map(t=>{const n=t.name,i=n.slice(1),o=e.var_lookup.get(i);if(o&&(o.reassigned||o.export_name)){const e=`$$unsubscribe_${i}`;return _t`let ${n}, ${e} = @noop, ${`$$subscribe_${i}`} = () => (${e}(), ${e} = @subscribe(${i}, $$value => $$invalidate(${r.context_lookup.get(n).index}, ${n} = $$value)), ${i})`}return _t`let ${n};`});let a;e.compile_options.dev&&!e.var_lookup.has("$$props")&&f.length&&(a=_t`
				const writable_props = [${f.map(e=>St`'${e.export_name}'`)}];
				@_Object.keys($$props).forEach(key => {
					if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$') @_console.warn(\`<${e.tag}> was created with unknown prop '\${key}'\`);
				});
			`);const c={type:"ArrayExpression",elements:E.map(e=>({type:"Identifier",name:e.name}))};o.push(_t`
			function ${A}(${x}) {
				${s}

				${N}

				${M}

				${$}

				${a}

				${e.slots.size?_t`let { $$slots = {}, $$scope } = $$props;`:null}

				${r.binding_groups.length>0&&_t`const $$binding_groups = [${r.binding_groups.map(e=>St`[]`)}];`}

				${e.partly_hoisted}

				${m&&_t`$$self.$set = ${m};`}

				${w&&St`$$self.$capture_state = ${w};`}

				${b&&St`$$self.$inject_state = ${b};`}

				${i.map(e=>_t`let ${e};`)}

				${t.length>0&&_t`
				$$self.$$.update = () => {
					${t}
				};
				`}

				${n}

				${p&&_t`$$props = @exclude_internal_props($$props);`}

				return ${c};
			}
		`)}const O=St`{
		${d.filter(e=>e.export_name&&!e.module).map(e=>$t`${e.export_name}: ${r.context_lookup.get(e.name).index}`)}
	}`;let D;if(r.context_overflow){D=St`[]`;for(let e=0;e<r.context.length;e+=31)D.elements.push(St`-1`)}if(t.customElement){const r=_t`
			class ${n} extends @SvelteElement {
				constructor(options) {
					super();

					${s.code&&_t`this.shadowRoot.innerHTML = \`<style>${s.code.replace(/\\/g,"\\\\")}${t.dev?`\n/*# sourceMappingURL=${s.map.toUrl()} */`:""}</style>\`;`}

					@init(this, { target: this.shadowRoot }, ${A}, ${k?"create_fragment":"null"}, ${v}, ${O}, ${D});

					${y}

					if (options) {
						if (options.target) {
							@insert(options.target, this, options.anchor);
						}

						${(d.length>0||p)&&_t`
						if (options.props) {
							this.$set(options.props);
							@flush();
						}`}
					}
				}
			}
		`[0];d.length>0&&r.body.body.push({type:"MethodDefinition",kind:"get",static:!0,computed:!1,key:{type:"Identifier",name:"observedAttributes"},value:St`function() {
					return [${d.map(e=>St`"${e.export_name}"`)}];
				}`}),r.body.body.push(...g),o.push(r),null!=e.tag&&o.push(_t`
				@_customElements.define("${e.tag}", ${n});
			`)}else{const r=_t`
			class ${n} extends ${{type:"Identifier",name:t.dev?"@SvelteComponentDev":"@SvelteComponent"}} {
				constructor(options) {
					super(${t.dev&&"options"});
					${l&&_t`if (!@_document.getElementById("${e.stylesheet.id}-style")) ${c}();`}
					@init(this, options, ${A}, ${k?"create_fragment":"null"}, ${v}, ${O}, ${D});
					${t.dev&&_t`@dispatch_dev("SvelteRegisterComponent", { component: this, tagName: "${n.name}", options, id: create_fragment.name });`}

					${y}
				}
			}
		`[0];r.body.body.push(...g),o.push(r)}return{js:sh(o,[]),css:s}}(s,t);return s.generate(a)},t.parse=el,t.preprocess=async function(e,t,n){const r=n&&n.filename||t.filename,i=[],o=Array.isArray(t)?t:[t],s=o.map(e=>e.markup).filter(Boolean),a=o.map(e=>e.script).filter(Boolean),c=o.map(e=>e.style).filter(Boolean);for(const t of s){const n=await t({content:e,filename:r});n&&n.dependencies&&i.push(...n.dependencies),e=n?n.code:e}for(const t of a)e=await Gp(e,/<!--[^]*?-->|<script(\s[^]*?)?>([^]*?)<\/script>/gi,async(e,n="",o)=>{if(!n&&!o)return e;n=n||"";const s=await t({content:o,attributes:Yp(n),filename:r});return s&&s.dependencies&&i.push(...s.dependencies),s?`<script${n}>${s.code}<\/script>`:e});for(const t of c)e=await Gp(e,/<!--[^]*?-->|<style(\s[^]*?)?>([^]*?)<\/style>/gi,async(e,n="",o)=>{if(!n&&!o)return e;const s=await t({content:o,attributes:Yp(n),filename:r});return s&&s.dependencies&&i.push(...s.dependencies),s?`<style${n}>${s.code}</style>`:e});return{code:e,dependencies:[...new Set(i)],toString:()=>e}},t.walk=Le,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(19),n(20).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c}));var r=n(29);
/*!
    * tiptap-utils v1.8.2
    * (c) 2019 Scrumpy UG (limited liability)
    * @license MIT
    */
function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var n=e.selection,r=n.from,o=n.to,s=[];e.doc.nodesBetween(r,o,(function(e){s=[].concat(i(s),i(e.marks))}));var a=s.find((function(e){return e.type.name===t.name}));return a?a.attrs:{}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!t)return!1;var n=e.parent.childAfter(e.parentOffset);if(!n.node)return!1;var r=n.node.marks.find((function(e){return e.type===t}));if(!r)return!1;for(var i=e.index(),o=e.start()+n.offset,s=i+1,a=o+n.node.nodeSize;i>0&&r.isInSet(e.parent.child(i-1).marks);)i-=1,o-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&r.isInSet(e.parent.child(s).marks);)a+=e.parent.child(s).nodeSize,s+=1;return{from:o,to:a}}function a(e){var t=e.types,n=e.node;return Array.isArray(t)&&t.includes(n.type)||n.type===t}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e){return e.type===t},o=Object(r.findSelectedNodeOfType)(t)(e.selection)||Object(r.findParentNode)(i)(e.selection);return Object.keys(n).length&&o?o.node.hasMarkup(t,n):!!o}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(13),i=n(12),o=n(9);function s(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function a(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function c(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function l(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function h(e,t){var n=e.selection,s=n.$from,a=n.$to;if(e.selection instanceof o.NodeSelection&&e.selection.node.isBlock)return!(!s.parentOffset||!Object(r.c)(e.doc,s.pos))&&(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(t){var c=a.parentOffset==a.parent.content.size,l=e.tr;e.selection instanceof o.TextSelection&&l.deleteSelection();var h=0==s.depth?null:s.node(-1).contentMatchAt(s.indexAfter(-1)).defaultType,p=c&&h?[{type:h}]:null,u=Object(r.c)(l.doc,l.mapping.map(s.pos),1,p);p||u||!Object(r.c)(l.doc,l.mapping.map(s.pos),1,h&&[{type:h}])||(p=[{type:h}],u=!0),u&&(l.split(l.mapping.map(s.pos),1,p),c||s.parentOffset||s.parent.type==h||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),i.Fragment.from(h.create(),s.parent))||l.setNodeMarkup(l.mapping.map(s.before()),h)),t(l.scrollIntoView())}return!0}function p(e,t,n){var s,a,c=t.nodeBefore,l=t.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(function(e,t,n){var i=t.nodeBefore,o=t.nodeAfter,s=t.index();return!!(i&&o&&i.type.compatibleContent(o.type))&&(!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(s,s+1)||!o.isTextblock&&!Object(r.b)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&a.matchType(s[0]||l.type).validEnd){if(n){for(var h=t.pos+l.nodeSize,p=i.Fragment.empty,u=s.length-1;u>=0;u--)p=i.Fragment.from(s[u].create(null,p));p=i.Fragment.from(c.copy(p));var d=e.tr.step(new r.a(t.pos-1,h,t.pos,h,new i.Slice(p,1,0),s.length,!0)),f=h+2*s.length;Object(r.b)(d.doc,f)&&d.join(f),n(d.scrollIntoView())}return!0}var m=o.Selection.findFrom(t,1),g=m&&m.$from.blockRange(m.$to),v=g&&Object(r.g)(g);return null!=v&&v>=t.depth&&(n&&n(e.tr.lift(g,v).scrollIntoView()),!0)}function u(e,t){return function(n,r){var i=n.selection,o=i.from,s=i.to,a=!1;return n.doc.nodesBetween(o,s,(function(r,i){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var o=n.doc.resolve(i),s=o.index();a=o.parent.canReplaceWith(s,s+1,e)}})),!!a&&(r&&r(n.tr.setBlockType(o,s,e,t).scrollIntoView()),!0)}}function d(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}var f=d(s,(function(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",e):i.parentOffset>0))return!1;var s=c(i);if(!s){var l=i.blockRange(),h=l&&Object(r.g)(l);return null!=h&&(t&&t(e.tr.lift(l,h).scrollIntoView()),!0)}var u=s.nodeBefore;if(!u.type.spec.isolating&&p(e,s,t))return!0;if(0==i.parent.content.size&&(a(u,"end")||o.NodeSelection.isSelectable(u))){if(t){var d=e.tr.deleteRange(i.before(),i.after());d.setSelection(a(u,"end")?o.Selection.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):o.NodeSelection.create(d.doc,s.pos-u.nodeSize)),t(d.scrollIntoView())}return!0}return!(!u.isAtom||s.depth!=i.depth-1)&&(t&&t(e.tr.delete(s.pos-u.nodeSize,s.pos).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var i=c(r),s=i&&i.nodeBefore;return!(!s||!o.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(o.NodeSelection.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)})),m=d(s,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var i=l(r);if(!i)return!1;var s=i.nodeAfter;if(p(e,i,t))return!0;if(0==r.parent.content.size&&(a(s,"start")||o.NodeSelection.isSelectable(s))){if(t){var c=e.tr.deleteRange(r.before(),r.after());c.setSelection(a(s,"start")?o.Selection.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):o.NodeSelection.create(c.doc,c.mapping.map(i.pos))),t(c.scrollIntoView())}return!0}return!(!s.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var i=l(r),s=i&&i.nodeAfter;return!(!s||!o.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(o.NodeSelection.create(e.doc,i.pos)).scrollIntoView()),!0)})),g={Enter:d((function(e,t){var n=e.selection,r=n.$head,i=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(i))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),(function(e,t){var n=e.selection,r=n.$from,i=n.$to;if(r.parent.inlineContent||i.parent.inlineContent)return!1;var s=r.parent.contentMatchAt(i.indexAfter()).defaultType;if(!s||!s.isTextblock)return!1;if(t){var a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=e.tr.insert(a,s.createAndFill());c.setSelection(o.TextSelection.create(c.doc,a+1)),t(c.scrollIntoView())}return!0}),(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if(Object(r.c)(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var o=n.blockRange(),s=o&&Object(r.g)(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}),h),"Mod-Enter":function(e,t){var n=e.selection,r=n.$head,i=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(i))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=s.contentMatchAt(a).defaultType;if(!s.canReplaceWith(a,a,c))return!1;if(t){var l=r.after(),h=e.tr.replaceWith(l,l,c.createAndFill());h.setSelection(o.Selection.near(h.doc.resolve(l),1)),t(h.scrollIntoView())}return!0},Backspace:f,"Mod-Backspace":f,Delete:m,"Mod-Delete":m,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new o.AllSelection(e.doc))),!0}},v={"Ctrl-h":g.Backspace,"Alt-Backspace":g["Mod-Backspace"],"Ctrl-d":g.Delete,"Ctrl-Alt-Backspace":g["Mod-Delete"],"Alt-Delete":g["Mod-Delete"],"Alt-d":g["Mod-Delete"]};for(var y in g)v[y]=g[y];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();n(14),n(18),n(37);n.d(t,"a",(function(){return u}))},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),h=0,p=a>0?s-4:s;for(n=0;n<p;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[h++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function h(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,h=-7,p=n?i-1:0,u=n?-1:1,d=e[t+p];for(p+=u,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+e[t+p],p+=u,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+e[t+p],p+=u,h-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,l=8*o-i-1,h=(1<<l)-1,p=h>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+p>=1?u/c:u*Math.pow(2,1-p))*c>=2&&(s++,c/=2),s+p>=h?(a=0,s=h):s+p>=1?(a=(t*c-1)*Math.pow(2,i),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[n+d]=255&s,d+=f,s/=256,l-=8);e[n+d-f]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=n(60),i=n(61);function o(){}o.prototype=r;var s=new o;e.exports=s,s.highlight=function(e,t,n){var r=(n||{}).prefix;null==r&&(r="hljs-");return y(m(e,t,!0,r))},s.highlightAuto=d,s.registerLanguage=function(e,t){var n=t(s);n.rawDefinition=t.bind(null,s),p[e]=n,h.push(e),n.aliases&&f(e,n.aliases)},s.listLanguages=function(){return h.concat()},s.registerAlias=f,s.getLanguage=b;var a=r.inherit,c={}.hasOwnProperty,l=["of","and","for","in","not","or","if","then"],h=[],p={},u={};function d(e,t){var n,r,o,s,a=t||{},c=a.subset||h,l=a.prefix,p=c.length,u=-1;if(null==l&&(l="hljs-"),"string"!=typeof e)throw i("Expected `string` for value, got `%s`",e);for(r=y({}),n=y({});++u<p;)b(s=c[u])&&((o=y(m(s,e,!1,l))).language=s,o.relevance>r.relevance&&(r=o),o.relevance>n.relevance&&(r=n,n=o));return r.language&&(n.secondBest=r),n}function f(e,t){var n,r,i,o,s=e;for(n in t&&((s={})[e]=t),s)for(i=(r="string"==typeof(r=s[n])?[r]:r).length,o=-1;++o<i;)u[r[o]]=n}function m(e,t,n,r,o){var s,a,l,h,u,f,y,w,x={},k={},_=[],S="",$=0;if("string"!=typeof e)throw i("Expected `string` for name, got `%s`",e);if("string"!=typeof t)throw i("Expected `string` for value, got `%s`",t);if(s=b(e),l=a=o||s,h=w=[],!s)throw i("Unknown language: `%s` is not registered",e);!function(e){function t(i,o){i.compiled||(i.compiled=!0,i.keywords=i.keywords||i.beginKeywords,i.keywords&&(i.keywords=function(e,t){var n,r={};if("string"==typeof e)i("keyword",e);else for(n in e)i(n,e[n]);return r;function i(e,n){!function(e,t){var n,i=t.length,o=-1;for(;++o<i;)n=t[o].split("|"),r[n[0]]=[e,Number(n[1])||g(n[0])?0:1]}(e,(t?n.toLowerCase():n).split(" "))}}(i.keywords,e.case_insensitive)),i.lexemesRe=n(i.lexemes||/\w+/,!0),o&&(i.beginKeywords&&(i.begin="\\b("+i.beginKeywords.split(" ").join("|")+")\\b"),i.begin||(i.begin=/\B|\b/),i.beginRe=n(i.begin),i.endSameAsBegin&&(i.end=i.begin),i.end||i.endsWithParent||(i.end=/\B|\b/),i.end&&(i.endRe=n(i.end)),i.terminator_end=r(i.end)||"",i.endsWithParent&&o.terminator_end&&(i.terminator_end+=(i.end?"|":"")+o.terminator_end)),i.illegal&&(i.illegalRe=n(i.illegal)),void 0===i.relevance&&(i.relevance=1),i.contains=function(e,n){var r,i=[],o=e.length,s=-1;for(;++s<o;)r=e[s],i=i.concat(v("self"===r?n:r));o=i.length,s=-1;for(;++s<o;)t(i[s],n);return i}(i.contains||[],i),i.starts&&t(i.starts,o),i.terminators=function(e){var t,i,o,s={},a=[],c=1,l=e.contains,h=l.length,p=-1,u=[];for(;++p<h;)f(o=l[p],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);e.terminator_end&&f("end",e.terminator_end);e.illegal&&f("illegal",e.illegal);h=a.length,p=-1;for(;++p<h;)u[p]=a[p][1];return t=n(function(e,t){var n,i,o,s,a=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9]\d*)|\\./,c=0,l="",h=e.length,p=-1;for(;++p<h;){for(n=e[p],o=r(n),i=c+=1,0!==p&&(l+=t),l+="(";o.length>0;){if(null===(s=a.exec(o))){l+=o;break}l+=o.slice(0,s.index),o=o.slice(s.index+s[0].length),"\\"===s[0][0]&&s[1]?l+="\\"+String(Number(s[1])+i):(l+=s[0],"("===s[0]&&c++)}l+=")"}return l}(u,"|"),!0),i={lastIndex:0,exec:d};function d(n){var r,o,c,l;if(0===a.length)return null;if(t.lastIndex=i.lastIndex,!(l=t.exec(n)))return null;for(r=l.length,o=-1;++o<r;)if(void 0!==l[o]&&void 0!==s[o]){c=s[o];break}return"string"==typeof c?(l.type=c,l.extra=[e.illegal,e.terminator_end]):(l.type="begin",l.rule=c),l}function f(e,t){s[c]=e,a.push([e,t]),c+=new RegExp(t.toString()+"|").exec("").length}}(i))}function n(t,n){return new RegExp(r(t),"m"+(e.case_insensitive?"i":"")+(n?"g":""))}function r(e){return e&&e.source||e}t(e)}(s);try{for(a.terminators.lastIndex=0,u=0,y=a.terminators.exec(t);y;)f=T(t.slice(u,y.index),y),u=y.index+f,a.terminators.lastIndex=u,y=a.terminators.exec(t);for(T(t.slice(u)),l=a;l.parent;)l.className&&I(),l=l.parent;return{relevance:$,value:h,illegal:!1,language:e,top:a}}catch(e){if(-1===e.message.indexOf("Illegal"))throw e;return{relevance:0,illegal:!0,value:O(t,[])}}function C(e){var t=e[0],n=e.rule;return n&&n.endSameAsBegin&&(n.endRe=function(e){return new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}(t)),n.skip?S+=t:(n.excludeBegin&&(S+=t),M(N(),h),n.returnBegin||n.excludeBegin||(S=t)),A(n),n.returnBegin?0:t.length}function E(e){var n=e[0],r=t.slice(e.index),i=function e(t,n){if(function(e,t){var n=e&&e.exec(t);return n&&0===n.index}(t.endRe,n)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return e(t.parent,n)}(a,r);if(i){var o=a;o.skip?S+=n:(o.returnEnd||o.excludeEnd||(S+=n),M(N(),h),o.excludeEnd&&(S=n));do{a.className&&I(),a.skip||a.subLanguage||($+=a.relevance),a=a.parent}while(a!==i.parent);return i.starts&&(i.endSameAsBegin&&(i.starts.endRe=i.endRe),A(i.starts)),o.returnEnd?0:n.length}}function T(e,r){var o,s=r&&r[0];if(S+=e,void 0===s)return M(N(),h),0;if("begin"===x.type&&"end"===r.type&&x.index===r.index&&""===s)return S+=t.slice(r.index,r.index+1),1;if(x=r,"begin"===r.type)return C(r);if("end"===r.type&&void 0!==(o=E(r)))return o;if("illegal"===r.type&&!n)throw i('Illegal lexeme "%s" for mode "%s"',s,a.className||"<unnamed>");return S+=s,s.length}function A(e){var t;e.className&&(t=R(e.className,[])),t&&(h.push(t),_.push(h),h=t.children),a=Object.create(e,{parent:{value:a}})}function N(){var e=a.subLanguage?function(){var e,t="string"==typeof a.subLanguage;if(t&&!p[a.subLanguage])return O(S,[]);e=t?m(a.subLanguage,S,!0,r,k[a.subLanguage]):d(S,{subset:0===a.subLanguage.length?void 0:a.subLanguage,prefix:r});if(!e.language)return[D(S)];a.relevance>0&&($+=e.relevance);t&&(k[a.subLanguage]=e.top);return[R(e.language,e.value,!0)]}():function(){var e,t,n,r,i=[];if(!a.keywords)return O(S,i);e=0,a.lexemesRe.lastIndex=0,t=a.lexemesRe.exec(S);for(;t;)O(S.slice(e,t.index),i),(r=P(a,t))?($+=r[1],n=R(r[0],[]),i.push(n),O(t[0],n.children)):O(t[0],i),e=a.lexemesRe.lastIndex,t=a.lexemesRe.exec(S);return O(S.slice(e),i),i}();return S="",e}function M(e,t){for(var n,r=e.length,i=-1;++i<r;)"text"===(n=e[i]).type?O(n.value,t):t.push(n)}function O(e,t){var n;return e&&((n=t[t.length-1])&&"text"===n.type?n.value+=e:t.push(D(e))),t}function D(e){return{type:"text",value:e}}function R(e,t,n){return{type:"element",tagName:"span",properties:{className:[(n?"":r)+e]},children:t}}function P(e,t){var n=t[0];return s.case_insensitive&&(n=n.toLowerCase()),c.call(e.keywords,n)&&e.keywords[n]}function I(){h=_.pop()||w}}function g(e){return-1!==l.indexOf(e.toLowerCase())}function v(e){var t,n,r,i;if(e.variants&&!e.cached_variants){for(t=(r=e.variants).length,n=-1,i=[];++n<t;)i[n]=a(e,{variants:null},r[n]);e.cached_variants=i}return e.cached_variants?e.cached_variants:function e(t){return!!t&&(t.endsWithParent||e(t.starts))}(e)?[a(e,{starts:e.starts?a(e.starts):null})]:[e]}function y(e){return{relevance:e.relevance||0,language:e.language||null,value:e.value||[]}}function b(e){return e=e.toLowerCase(),p[e]||p[u[e]]}},function(e,t,n){var r,i,o;i=function(e){var t=[],n=Object.keys,r={},i={},o=/^(no-?highlight|plain|text)$/i,s=/\blang(?:uage)?-([\w-]+)\b/i,a=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,c={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},l="of and for in not or if then".split(" ");function h(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(e){return e.nodeName.toLowerCase()}function u(e){return o.test(e)}function d(e){var t,n={},r=Array.prototype.slice.call(arguments,1);for(t in e)n[t]=e[t];return r.forEach((function(e){for(t in e)n[t]=e[t]})),n}function f(e){var t=[];return function e(n,r){for(var i=n.firstChild;i;i=i.nextSibling)3===i.nodeType?r+=i.nodeValue.length:1===i.nodeType&&(t.push({event:"start",offset:r,node:i}),r=e(i,r),p(i).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:i}));return r}(e,0),t}function m(e){return e.variants&&!e.cached_variants&&(e.cached_variants=e.variants.map((function(t){return d(e,{variants:null},t)}))),e.cached_variants?e.cached_variants:function e(t){return!!t&&(t.endsWithParent||e(t.starts))}(e)?[d(e,{starts:e.starts?d(e.starts):null})]:[e]}function g(e,t){return t?Number(t):(n=e,-1!=l.indexOf(n.toLowerCase())?0:1);var n}function v(e){function t(e){return e&&e.source||e}function r(n,r){return new RegExp(t(n),"m"+(e.case_insensitive?"i":"")+(r?"g":""))}function i(e){var n,i,o={},s=[],a={},c=1;function l(e,t){o[c]=e,s.push([e,t]),c+=function(e){return new RegExp(e.toString()+"|").exec("").length-1}(t)+1}for(var h=0;h<e.contains.length;h++)l(i=e.contains[h],i.beginKeywords?"\\.?(?:"+i.begin+")\\.?":i.begin);e.terminator_end&&l("end",e.terminator_end),e.illegal&&l("illegal",e.illegal);var p=s.map((function(e){return e[1]}));return n=r(function(e,n){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,i=0,o="",s=0;s<e.length;s++){var a=i+=1,c=t(e[s]);for(s>0&&(o+=n),o+="(";c.length>0;){var l=r.exec(c);if(null==l){o+=c;break}o+=c.substring(0,l.index),c=c.substring(l.index+l[0].length),"\\"==l[0][0]&&l[1]?o+="\\"+String(Number(l[1])+a):(o+=l[0],"("==l[0]&&i++)}o+=")"}return o}(p,"|"),!0),a.lastIndex=0,a.exec=function(t){var r;if(0===s.length)return null;n.lastIndex=a.lastIndex;var i=n.exec(t);if(!i)return null;for(var c=0;c<i.length;c++)if(null!=i[c]&&null!=o[""+c]){r=o[""+c];break}return"string"==typeof r?(i.type=r,i.extra=[e.illegal,e.terminator_end]):(i.type="begin",i.rule=r),i},a}!function o(s,a){s.compiled||(s.compiled=!0,s.keywords=s.keywords||s.beginKeywords,s.keywords&&(s.keywords=function(e,t){var r={};return"string"==typeof e?i("keyword",e):n(e).forEach((function(t){i(t,e[t])})),r;function i(e,n){t&&(n=n.toLowerCase()),n.split(" ").forEach((function(t){var n=t.split("|");r[n[0]]=[e,g(n[0],n[1])]}))}}(s.keywords,e.case_insensitive)),s.lexemesRe=r(s.lexemes||/\w+/,!0),a&&(s.beginKeywords&&(s.begin="\\b("+s.beginKeywords.split(" ").join("|")+")\\b"),s.begin||(s.begin=/\B|\b/),s.beginRe=r(s.begin),s.endSameAsBegin&&(s.end=s.begin),s.end||s.endsWithParent||(s.end=/\B|\b/),s.end&&(s.endRe=r(s.end)),s.terminator_end=t(s.end)||"",s.endsWithParent&&a.terminator_end&&(s.terminator_end+=(s.end?"|":"")+a.terminator_end)),s.illegal&&(s.illegalRe=r(s.illegal)),null==s.relevance&&(s.relevance=1),s.contains||(s.contains=[]),s.contains=Array.prototype.concat.apply([],s.contains.map((function(e){return m("self"===e?s:e)}))),s.contains.forEach((function(e){o(e,s)})),s.starts&&o(s.starts,a),s.terminators=i(s))}(e)}function y(e,t,n,i){function o(e,t){var n=m.case_insensitive?t[0].toLowerCase():t[0];return e.keywords.hasOwnProperty(n)&&e.keywords[n]}function s(e,t,n,r){if(!n&&""===t)return"";if(!e)return t;var i='<span class="'+(r?"":c.classPrefix);return(i+=e+'">')+t+(n?"":"</span>")}function a(){k+=null!=w.subLanguage?function(){var e="string"==typeof w.subLanguage;if(e&&!r[w.subLanguage])return h(S);var t=e?y(w.subLanguage,S,!0,x[w.subLanguage]):b(S,w.subLanguage.length?w.subLanguage:void 0);return w.relevance>0&&($+=t.relevance),e&&(x[w.subLanguage]=t.top),s(t.language,t.value,!1,!0)}():function(){var e,t,n,r;if(!w.keywords)return h(S);for(r="",t=0,w.lexemesRe.lastIndex=0,n=w.lexemesRe.exec(S);n;)r+=h(S.substring(t,n.index)),(e=o(w,n))?($+=e[1],r+=s(e[0],h(n[0]))):r+=h(n[0]),t=w.lexemesRe.lastIndex,n=w.lexemesRe.exec(S);return r+h(S.substr(t))}(),S=""}function l(e){k+=e.className?s(e.className,"",!0):"",w=Object.create(e,{parent:{value:w}})}function p(e){var t=e[0],n=e.rule;return n&&n.endSameAsBegin&&(n.endRe=function(e){return new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}(t)),n.skip?S+=t:(n.excludeBegin&&(S+=t),a(),n.returnBegin||n.excludeBegin||(S=t)),l(n),n.returnBegin?0:t.length}function u(e){var t=e[0],n=function e(t,n){if(function(e,t){var n=e&&e.exec(t);return n&&0===n.index}(t.endRe,n)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return e(t.parent,n)}(w,t);if(n){var r=w;r.skip?S+=t:(r.returnEnd||r.excludeEnd||(S+=t),a(),r.excludeEnd&&(S=t));do{w.className&&(k+="</span>"),w.skip||w.subLanguage||($+=w.relevance),w=w.parent}while(w!==n.parent);return n.starts&&(n.endSameAsBegin&&(n.starts.endRe=n.endRe),l(n.starts)),r.returnEnd?0:t.length}}var d={};function f(e,r){var i=r&&r[0];if(S+=e,null==i)return a(),0;if("begin"==d.type&&"end"==r.type&&d.index==r.index&&""===i)return S+=t.slice(r.index,r.index+1),1;if(d=r,"begin"===r.type)return p(r);if("illegal"===r.type&&!n)throw new Error('Illegal lexeme "'+i+'" for mode "'+(w.className||"<unnamed>")+'"');if("end"===r.type){var o=u(r);if(null!=o)return o}return S+=i,i.length}var m=_(e);if(!m)throw new Error('Unknown language: "'+e+'"');v(m);var g,w=i||m,x={},k="";for(g=w;g!==m;g=g.parent)g.className&&(k=s(g.className,"",!0)+k);var S="",$=0;try{for(var C,E,T=0;w.terminators.lastIndex=T,C=w.terminators.exec(t);)E=f(t.substring(T,C.index),C),T=C.index+E;for(f(t.substr(T)),g=w;g.parent;g=g.parent)g.className&&(k+="</span>");return{relevance:$,value:k,illegal:!1,language:e,top:w}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:h(t)};throw e}}function b(e,t){t=t||c.languages||n(r);var i={relevance:0,value:h(e)},o=i;return t.filter(_).filter(S).forEach((function(t){var n=y(t,e,!1);n.language=t,n.relevance>o.relevance&&(o=n),n.relevance>i.relevance&&(o=i,i=n)})),o.language&&(i.second_best=o),i}function w(e){return c.tabReplace||c.useBR?e.replace(a,(function(e,t){return c.useBR&&"\n"===e?"<br>":c.tabReplace?t.replace(/\t/g,c.tabReplace):""})):e}function x(e){var n,r,o,a,l,d=function(e){var t,n,r,i,o=e.className+" ";if(o+=e.parentNode?e.parentNode.className:"",n=s.exec(o))return _(n[1])?n[1]:"no-highlight";for(t=0,r=(o=o.split(/\s+/)).length;t<r;t++)if(u(i=o[t])||_(i))return i}(e);u(d)||(c.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):n=e,l=n.textContent,o=d?y(d,l,!0):b(l),(r=f(n)).length&&((a=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=o.value,o.value=function(e,n,r){var i=0,o="",s=[];function a(){return e.length&&n.length?e[0].offset!==n[0].offset?e[0].offset<n[0].offset?e:n:"start"===n[0].event?e:n:e.length?e:n}function c(e){o+="<"+p(e)+t.map.call(e.attributes,(function(e){return" "+e.nodeName+'="'+h(e.value).replace('"',"&quot;")+'"'})).join("")+">"}function l(e){o+="</"+p(e)+">"}function u(e){("start"===e.event?c:l)(e.node)}for(;e.length||n.length;){var d=a();if(o+=h(r.substring(i,d[0].offset)),i=d[0].offset,d===e){s.reverse().forEach(l);do{u(d.splice(0,1)[0]),d=a()}while(d===e&&d.length&&d[0].offset===i);s.reverse().forEach(c)}else"start"===d[0].event?s.push(d[0].node):s.pop(),u(d.splice(0,1)[0])}return o+h(r.substr(i))}(r,f(a),l)),o.value=w(o.value),e.innerHTML=o.value,e.className=function(e,t,n){var r=t?i[t]:n,o=[e.trim()];return e.match(/\bhljs\b/)||o.push("hljs"),-1===e.indexOf(r)&&o.push(r),o.join(" ").trim()}(e.className,d,o.language),e.result={language:o.language,re:o.relevance},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function k(){if(!k.called){k.called=!0;var e=document.querySelectorAll("pre code");t.forEach.call(e,x)}}function _(e){return e=(e||"").toLowerCase(),r[e]||r[i[e]]}function S(e){var t=_(e);return t&&!t.disableAutodetect}return e.highlight=y,e.highlightAuto=b,e.fixMarkup=w,e.highlightBlock=x,e.configure=function(e){c=d(c,e)},e.initHighlighting=k,e.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",k,!1),addEventListener("load",k,!1)},e.registerLanguage=function(t,n){var o=r[t]=n(e);o.rawDefinition=n.bind(null,e),o.aliases&&o.aliases.forEach((function(e){i[e]=t}))},e.listLanguages=function(){return n(r)},e.getLanguage=_,e.autoDetection=S,e.inherit=d,e.IDENT_RE="[a-zA-Z]\\w*",e.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",e.NUMBER_RE="\\b\\d+(\\.\\d+)?",e.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BINARY_NUMBER_RE="\\b(0b[01]+)",e.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},e.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},e.COMMENT=function(t,n,r){var i=e.inherit({className:"comment",begin:t,end:n,contains:[]},r||{});return i.contains.push(e.PHRASAL_WORDS_MODE),i.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),i},e.C_LINE_COMMENT_MODE=e.COMMENT("//","$"),e.C_BLOCK_COMMENT_MODE=e.COMMENT("/\\*","\\*/"),e.HASH_COMMENT_MODE=e.COMMENT("#","$"),e.NUMBER_MODE={className:"number",begin:e.NUMBER_RE,relevance:0},e.C_NUMBER_MODE={className:"number",begin:e.C_NUMBER_RE,relevance:0},e.BINARY_NUMBER_MODE={className:"number",begin:e.BINARY_NUMBER_RE,relevance:0},e.CSS_NUMBER_MODE={className:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},e.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}]},e.TITLE_MODE={className:"title",begin:e.IDENT_RE,relevance:0},e.UNDERSCORE_TITLE_MODE={className:"title",begin:e.UNDERSCORE_IDENT_RE,relevance:0},e.METHOD_GUARD={begin:"\\.\\s*"+e.UNDERSCORE_IDENT_RE,relevance:0},e},o="object"==typeof window&&window||"object"==typeof self&&self,t.nodeType?o&&(o.hljs=i({}),void 0===(r=function(){return o.hljs}.apply(t,[]))||(e.exports=r)):i(t)},function(e,t,n){"use strict";var r=n(62),i=o(Error);function o(e){return t.displayName=e.displayName||e.name,t;function t(t){return t&&(t=r.apply(null,arguments)),new e(t)}}e.exports=i,i.eval=o(EvalError),i.range=o(RangeError),i.reference=o(ReferenceError),i.syntax=o(SyntaxError),i.type=o(TypeError),i.uri=o(URIError),i.create=o},function(e,t,n){!function(){var t;function n(e){for(var t,n,r,i,o=1,s=[].slice.call(arguments),a=0,c=e.length,l="",h=!1,p=!1,u=function(){return s[o++]},d=function(){for(var n="";/\d/.test(e[a]);)n+=e[a++],t=e[a];return n.length>0?parseInt(n):null};a<c;++a)if(t=e[a],h)switch(h=!1,"."==t?(p=!1,t=e[++a]):"0"==t&&"."==e[a+1]?(p=!0,t=e[a+=2]):p=!0,i=d(),t){case"b":l+=parseInt(u(),10).toString(2);break;case"c":l+="string"==typeof(n=u())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":l+=parseInt(u(),10);break;case"f":r=String(parseFloat(u()).toFixed(i||6)),l+=p?r:r.replace(/^0/,"");break;case"j":l+=JSON.stringify(u());break;case"o":l+="0"+parseInt(u(),10).toString(8);break;case"s":l+=u();break;case"x":l+="0x"+parseInt(u(),10).toString(16);break;case"X":l+="0x"+parseInt(u(),10).toString(16).toUpperCase();break;default:l+=t}else"%"===t?h=!0:l+=t;return l}(t=e.exports=n).format=n,t.vsprintf=function(e,t){return n.apply(null,[e].concat(t))},"undefined"!=typeof console&&"function"==typeof console.log&&(t.printf=function(){console.log(n.apply(null,arguments))})}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return vt})),n.d(t,"b",(function(){return xt}));var r=n(9),i=n(12),o=n(15),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var h=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!h&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var p=!h&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!p,s.chrome_version=p&&+p[1],s.ios=!h&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit=!h&&"WebkitAppearance"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var u=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},d=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},m=function(e,t,n,r){return n&&(v(e,t,n,r,-1)||v(e,t,n,r,1))},g=/^(img|br|input|textarea|hr)$/i;function v(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:y(e))){var o=e.parentNode;if(1!=o.nodeType||b(e)||g.test(e.nodeName)||"false"==e.contentEditable)return!1;t=u(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(i<0?-1:0)],t=i<0?y(e):0}}}function y(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function b(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var w=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function x(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function k(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function _(e,t){return"number"==typeof e?e:e[t]}function S(e,t,n){for(var r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,s=o.defaultView,a=n||e.dom;a;a=d(a))if(1==a.nodeType){var c=a==o.body||1!=a.nodeType,l=c?k(s):a.getBoundingClientRect(),h=0,p=0;if(t.top<l.top+_(r,"top")?p=-(l.top-t.top+_(i,"top")):t.bottom>l.bottom-_(r,"bottom")&&(p=t.bottom-l.bottom+_(i,"bottom")),t.left<l.left+_(r,"left")?h=-(l.left-t.left+_(i,"left")):t.right>l.right-_(r,"right")&&(h=t.right-l.right+_(i,"right")),(h||p)&&(c?s.scrollBy(h,p):(p&&(a.scrollTop+=p),h&&(a.scrollLeft+=h))),c)break}}function $(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=d(e));return t}function C(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var E=null;function T(e,t){for(var n,r,i=2e8,o=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var h=void 0;if(1==c.nodeType)h=c.getClientRects();else{if(3!=c.nodeType)continue;h=f(c).getClientRects()}for(var p=0;p<h.length;p++){var u=h[p];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s),a=Math.min(u.top,a);var d=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(d<i){n=c,i=d,r=d&&3==n.nodeType?{left:u.right<t.left?u.right:u.left,top:t.top}:t,1==c.nodeType&&d&&(o=l+(t.left>=(u.left+u.right)/2?1:0));continue}}!n&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)&&(o=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);var o=M(r,1);if(o.top!=o.bottom&&A(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:e,offset:o}:T(n,r)}function A(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function N(e,t){var n,r,i,o,a=e.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(i=(n=c).offsetNode,o=n.offset)}catch(e){}if(!i&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(t.left,t.top);l&&(i=(r=l).startContainer,o=r.startOffset)}var h,p=a.elementFromPoint(t.left,t.top+1);if(!p||!e.dom.contains(1!=p.nodeType?p.parentNode:p)){var u=e.dom.getBoundingClientRect();if(!A(t,u))return null;if(!(p=function e(t,n,r){var i=t.childNodes.length;if(i&&r.top<r.bottom)for(var o=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),s=o;;){var a=t.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),l=0;l<c.length;l++){var h=c[l];if(A(n,h))return e(a,n,h)}if((s=(s+1)%i)==o)break}return t}(e.dom,t,u)))return null}if(p=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(p,t),i){if(s.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length))<i.childNodes.length){var d,f=i.childNodes[o];"IMG"==f.nodeName&&(d=f.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&o++}i==e.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?h=e.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(h=function(e,t,n,r){for(var i=-1,o=t;o!=e.dom;){var s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n)}(e,i,o,t))}null==h&&(h=function(e,t,n){var r=T(t,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}(e,p,t));var m=e.docView.nearestDesc(p,!0);return{pos:h,inside:m?m.posAtStart-m.border:-1}}function M(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function O(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset;if(3==r.nodeType&&(s.chrome||s.gecko)){var o=M(f(r,i,i),0);if(s.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var a=M(f(r,i-1,i-1),-1);if(Math.abs(a.left-o.left)<1&&a.top==o.top){var c=M(f(r,i,i+1),-1);return D(c,c.left<a.left)}}return o}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,h=!0;if(i<r.childNodes.length){var p=r.childNodes[i];1==p.nodeType&&(l=p.getBoundingClientRect())}if(!l&&i){var u=r.childNodes[i-1];1==u.nodeType&&(l=u.getBoundingClientRect(),h=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(l||r.getBoundingClientRect(),h)}for(var d=-1;d<2;d+=2)if(d<0&&i){var m=void 0,g=3==r.nodeType?f(r,i-1,i):3==(m=r.childNodes[i-1]).nodeType?f(m):1==m.nodeType&&"BR"!=m.nodeName?m:null;if(g){var v=M(g,1);if(v.top<v.bottom)return D(v,!1)}}else if(d>0&&i<y(r)){var b=void 0,w=3==r.nodeType?f(r,i,i+1):3==(b=r.childNodes[i]).nodeType?f(b):1==b.nodeType?b:null;if(w){var x=M(w,-1);if(x.top<x.bottom)return D(x,!0)}}return D(M(3==r.nodeType?f(r):r,0),!1)}function D(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function R(e,t,n){var r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i.focus()}}var P=/[\u0590-\u08ac]/;var I=null,L=null,B=!1;function V(e,t,n){return I==t&&L==n?B:(I=t,L=n,B="up"==n||"down"==n?function(e,t,n){var r=t.selection,i="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return R(e,t,(function(){for(var t=e.docView.domFromPos(i.pos).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var o=O(e,i.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<o.top+1:l.top>o.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=getSelection();return P.test(r.parent.textContent)&&a.modify?R(e,t,(function(){var t=a.getRangeAt(0),i=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||i==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?o:s}(e,t,n))}var F=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},z={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};F.prototype.matchesWidget=function(){return!1},F.prototype.matchesMark=function(){return!1},F.prototype.matchesNode=function(){return!1},F.prototype.matchesHack=function(){return!1},z.beforePosition.get=function(){return!1},F.prototype.parseRule=function(){return null},F.prototype.stopEvent=function(){return!1},z.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},z.border.get=function(){return 0},F.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},F.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},z.posBefore.get=function(){return this.parent.posBeforeChild(this)},z.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},z.posAfter.get=function(){return this.posBefore+this.size},z.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},F.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},F.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(e):i.nodeDOM==e))return i;n=!1}}},F.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},F.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}},F.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}},F.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:u(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],i=t+r.size;if(e<i)return r.domFromPos(e-t-r.border);t=i}},F.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==r&&e<=c){var l=o+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=o;for(var h=s;h>0;h--){var p=this.children[h-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=u(p.dom)+1;break}e-=p.size}-1==r&&(r=0)}if(r>-1&&t<=c){t=c;for(var d=s+1;d<this.children.length;d++){var f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=u(f.dom);break}t+=f.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}},F.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},F.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},F.prototype.setSelection=function(e,t,n,r){for(var i=Math.min(e,t),o=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(i>a&&o<l)return c.setSelection(e-a-c.border,t-a-c.border,n,r);a=l}var h=this.domFromPos(e),p=this.domFromPos(t),u=n.getSelection(),d=document.createRange();if(r||!m(h.node,h.offset,u.anchorNode,u.anchorOffset)||!m(p.node,p.offset,u.focusNode,u.focusOffset)){if(u.extend)d.setEnd(h.node,h.offset),d.collapse(!1);else{if(e>t){var f=h;h=p,p=f}d.setEnd(p.node,p.offset),d.setStart(h.node,h.offset)}u.removeAllRanges(),u.addRange(d),u.extend&&u.extend(p.node,p.offset)}},F.prototype.ignoreMutation=function(e){return!this.contentDOM},z.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},F.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){var s=n+i.border,a=o-i.border;if(e>=s&&t<=a)return this.dirty=e==n||t==o?2:1,void(e!=s||t!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-s,t-s):i.dirty=3);i.dirty=3}n=o}this.dirty=2},F.prototype.markParentsDirty=function(){for(var e=this.parent;e;e=e.parent){e.dirty<2&&(e.dirty=2)}},Object.defineProperties(F.prototype,z);var q=[],j=function(e){function t(t,n,r,i){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,q,s,null),this.widget=n,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,n),t}(F),U=function(e){function t(t,n,r,i){e.call(this,t,q,n,null),this.textDOM=r,this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(F),W=function(e){function t(t,n,r,i){e.call(this,t,[],r,i),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,r,o){var s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var i=t.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=ae(o,n,s,r)),e>0&&(o=ae(o,0,e,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},t}(F),H=function(e){function t(t,n,r,i,o,s,a,c,l){e.call(this,t,n.isLeaf?q:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=i,s&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0}};return t.create=function(e,n,r,o,s,a){var c,l,h=s.nodeViews[n.type.name],p=h&&h(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r),u=p&&p.dom,d=p&&p.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else u||(u=(c=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,d=c.contentDOM);d||n.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),n.type.spec.draggable&&(u.draggable=!0));var f=u;return u=ne(u,r,n),p?l=new G(e,n,r,o,u,d,f,p,s,a+1):n.isText?new J(e,n,r,o,u,f,s):new t(e,n,r,o,u,d,f,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?i.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&re(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,s=r&&e.composing&&this.localCompositionNode(e,t),a=new oe(this,s&&s.node);!function(e,t,n,r){var i=t.locals(e),o=0;if(0==i.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,i,t.forChild(o,a),s),o+=a.nodeSize}return}for(var c=0,l=[],h=null,p=0;;){if(c<i.length&&i[c].to==o){for(var u=i[c++],d=void 0;c<i.length&&i[c].to==o;)(d||(d=[u])).push(i[c++]);if(d){d.sort(se);for(var f=0;f<d.length;f++)n(d[f],p,!!h)}else n(u,p,!!h)}var m=void 0,g=void 0;if(h)g=-1,m=h,h=null;else{if(!(p<e.childCount))break;g=p,m=e.child(p++)}for(var v=0;v<l.length;v++)l[v].to<=o&&l.splice(v--,1);for(;c<i.length&&i[c].from==o;)l.push(i[c++]);var y=o+m.nodeSize;if(m.isText){var b=y;c<i.length&&i[c].from<b&&(b=i[c].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(h=m.cut(b-o),m=m.cut(0,b-o),y=b,g=-1)}r(m,l.length?l.slice():q,t.forChild(o,m),g),o=y}}(this.node,this.innerDeco,(function(t,s,c){t.spec.marks?a.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!c&&a.syncToMarks(s==n.node.childCount?i.Mark.none:n.node.child(s).marks,r,e),a.placeWidget(t,e,o)}),(function(t,n,i,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,n,i,s)||a.updateNextNode(t,n,i,e,s)||a.addNode(t,n,i,e,o),o+=t.nodeSize})),a.syncToMarks(q,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),this.renderChildren())},t.prototype.renderChildren=function(){!function e(t,n){for(var r=t.firstChild,i=0;i<n.length;i++){var o=n[i],s=o.dom;if(s.parentNode==t){for(;s!=r;)r=ie(r);r=r.nextSibling}else t.insertBefore(s,r);if(o instanceof W){var a=r?r.previousSibling:t.lastChild;e(o.contentDOM,o.children),r=a?a.nextSibling:t.firstChild}}for(;r;)r=ie(r)}(this.contentDOM,this.children),s.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,i=n.from,o=n.to;if(!(!(e.state.selection instanceof r.TextSelection)||i<t||o>t+this.node.content.size)){var s=e.root.getSelection(),a=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=y(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=function(e,t,n,r){for(var i="",o=0,s=0;o<e.childCount;o++){var a=e.child(o),c=s+a.nodeSize;if(a.isText){if(i+=a.text,c>=r){for(var l=c-i.length,h=i.lastIndexOf(t);h>-1&&l+h>n;)h=i.lastIndexOf(t,h-1);if(h>-1&&l+h+t.length>=r)return l+h;if(c>r)break}}else i="";s=c}return-1}(this.node.content,c,i-t,o-t);return l<0?null:{node:a,pos:l,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,i=t.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new U(this,o,n,i);e.compositionNodes.push(s),this.children=ae(this.children,r,r+i.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!re(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ee(this.dom,this.nodeDOM,Z(this.outerDeco,this.node,t),Z(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(t.prototype,n),t}(F);function K(e,t,n,r,i){return ne(r,t,e),new H(null,e,t,n,r,r,r,i,0)}var J=function(e){function t(t,n,r,i,o,s,a){e.call(this,t,n,r,i,o,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},t.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var i=this.node.cut(e,n),o=document.createTextNode(i.text);return new t(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)},t}(H),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(F),G=function(e){function t(t,n,r,i,o,s,a,c,l,h){e.call(this,t,n,r,i,o,s,a,l,h),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,r,i){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(t,n);return o&&this.updateInner(t,n,r,i),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,i)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,i)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(H);function X(e){e&&(this.nodeName=e)}X.prototype=Object.create(null);var Q=[new X];function Z(e,t,n){if(0==e.length)return Q;for(var r=n?Q[0]:new X,i=[r],o=0;o<e.length;o++){var s=e[o].type.attrs,a=r;if(s)for(var c in s.nodeName&&i.push(a=new X(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==i.length&&i.push(a=r=new X(t.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return i}function ee(e,t,n,r){if(n==Q&&r==Q)return t;for(var i=t,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&i!=e&&(c=i.parentNode)&&c.tagName.toLowerCase()==s.nodeName?i=c:((c=document.createElement(s.nodeName)).appendChild(i),a=Q[0],i=c)}te(i,a||Q[0],s)}return i}function te(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){for(var o=t.class?t.class.split(" "):q,s=n.class?n.class.split(" "):q,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&e.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=n.style){if(t.style)for(var l,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=h.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function ne(e,t,n){return ee(e,e,Q,Z(t,n,1!=e.nodeType))}function re(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ie(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var oe=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],r=e.childCount,i=t.length-1;r>0&&i>=0;i--){var o=t[i],s=o.node;if(s){if(s!=e.child(r-1))break;n.push(o),--r}}return{nodes:n.reverse(),offset:r}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function se(e,t){return e.type.side-t.type.side}function ae(e,t,n,r,i){for(var o=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,h=a+=c.size;l>=n||h<=t?o.push(c):(l<t&&o.push(c.slice(0,t-l,r)),i&&(o.push(i),i=null),h>n&&o.push(c.slice(n-l,c.size,r)))}return o}function ce(e,t){var n=e.selection,i=n.$anchor,o=n.$head,s=t>0?i.max(o):i.min(o),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,t)}function le(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function he(e,t,n){var i=e.state.selection;if(i instanceof r.TextSelection){if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=ce(e.state,t);return!!(o&&o instanceof r.NodeSelection)&&le(e,o)}var a,c=i.$head,l=c.textOffset?null:t<0?c.nodeBefore:c.nodeAfter;if(!l||l.isText)return!1;var h=t<0?c.pos-l.nodeSize:c.pos;return!!(l.isAtom||(a=e.docView.descAt(h))&&!a.contentDOM)&&(r.NodeSelection.isSelectable(l)?le(e,new r.NodeSelection(t<0?e.state.doc.resolve(c.pos-l.nodeSize):c)):!!s.webkit&&le(e,new r.TextSelection(e.state.doc.resolve(t<0?h:h+l.nodeSize))))}if(i instanceof r.NodeSelection&&i.node.isInline)return le(e,new r.TextSelection(t>0?i.$to:i.$from));var p=ce(e.state,t);return!!p&&le(e,p)}function pe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ue(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function de(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var i,o,a=!1;for(s.gecko&&1==n.nodeType&&r<pe(n)&&ue(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(ue(c))i=n,o=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(me(n))break;for(var l=n.previousSibling;l&&ue(l);)i=n.parentNode,o=u(l),l=l.previousSibling;if(l)r=pe(n=l);else{if((n=n.parentNode)==e.dom)break;r=0}}a?ge(e,t,n,r):i&&ge(e,t,i,o)}}function fe(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var i,o,s=pe(n);;)if(r<s){if(1!=n.nodeType)break;if(!ue(n.childNodes[r]))break;i=n,o=++r}else{if(me(n))break;for(var a=n.nextSibling;a&&ue(a);)i=a.parentNode,o=u(a)+1,a=a.nextSibling;if(a)r=0,s=pe(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}i&&ge(e,t,i,o)}}function me(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ge(e,t,n,r){if(w(t)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection()}function ve(e,t,n){var i=e.state.selection;if(i instanceof r.TextSelection&&!i.empty||n.indexOf("s")>-1)return!1;var o=i.$from,s=i.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=ce(e.state,t);if(a&&a instanceof r.NodeSelection)return le(e,a)}if(!o.parent.inlineContent){var c=r.Selection.findFrom(t<0?o:s,t);return!c||le(e,c)}return!1}function ye(e,t){if(!(e.state.selection instanceof r.TextSelection))return!0;var n=e.state.selection,i=n.$head,o=n.$anchor,s=n.empty;if(!i.sameParent(o))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!i.textOffset&&(t<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){var c=e.state.tr;return t<0?c.delete(i.pos-a.nodeSize,i.pos):c.delete(i.pos,i.pos+a.nodeSize),e.dispatch(c),!0}return!1}function be(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function we(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||s.mac&&72==n&&"c"==r?ye(e,-1)||de(e):46==n||s.mac&&68==n&&"c"==r?ye(e,1)||fe(e):13==n||27==n||(37==n?he(e,-1,r)||de(e):39==n?he(e,1,r)||fe(e):38==n?ve(e,-1,r)||de(e):40==n?function(e){if(s.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;be(e,i,!0),setTimeout((function(){return be(e,i,!1)}),20)}}}(e)||ve(e,1,r)||fe(e):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function xe(e,t){var n=e.state.selection;if(Se(e,n),e.editable?e.hasFocus():Ee(e)&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,u(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var i,o,a=n.anchor,c=n.head;!ke||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(i=_e(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=_e(e,n.to))),e.docView.setSelection(a,c,e.root,t),ke&&(i&&(i.contentEditable="false"),o&&(o.contentEditable="false")),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):a!=c&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}oe.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},oe.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},oe.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},oe.prototype.syncToMarks=function(e,t,n){for(var r=0,i=this.stack.length>>1,o=Math.min(i,e.length);r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=W.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}},oe.prototype.findNodeMatch=function(e,t,n,r){var i=-1,o=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(o&&o.matchesNode(e,t,n))i=s.indexOf(o);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},oe.prototype.updateNextNode=function(e,t,n,r,i){if(this.index==this.top.children.length)return!1;var o=this.top.children[this.index];if(o instanceof H){var s=this.preMatched.indexOf(o);if(s>-1&&s+this.preMatchOffset!=i)return!1;var a=o.dom;if(!(this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))&&!(e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&re(t,o.outerDeco)))&&o.update(e,t,n,r))return o.dom!=a&&(this.changed=!0),this.index++,!0}return!1},oe.prototype.addNode=function(e,t,n,r,i){this.top.children.splice(this.index++,0,H.create(this.top,e,t,n,r,i)),this.changed=!0},oe.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new j(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},oe.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof W;)e=e.children[e.children.length-1];if(!e||!(e instanceof J)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Y(this.top,q,t,null)),this.changed=!0}};var ke=s.safari||s.chrome&&s.chrome_version<63;function _e(e,t){var n=e.docView.domFromPos(t),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,s=i?r.childNodes[i-1]:null;if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return o.contentEditable="true",o;if(s)return s.contentEditable="true",s}}function Se(e,t){if(t instanceof r.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&($e(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else $e(e)}function $e(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ce(e,t,n,i){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||r.TextSelection.between(t,n,i)}function Ee(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Te(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(s.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||s.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Ae(e,t,n,o){if(t<0){var a=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,c=function(e,t){var n,i,o=e.root.getSelection(),s=e.state.doc,a=e.docView.nearestDesc(o.focusNode),c=a&&0==a.size,l=e.docView.posFromDOM(o.focusNode,o.focusOffset),h=s.resolve(l);if(w(o)){for(n=h;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&r.NodeSelection.isSelectable(a.node)&&a.parent){var p=a.posBefore;i=new r.NodeSelection(l==p?h:s.resolve(p))}}else n=s.resolve(e.docView.posFromDOM(o.anchorNode,o.anchorOffset));return i||(i=Ce(e,n,h,"pointer"==t||e.state.selection.head<h.pos&&!c?1:-1)),i}(e,a);if(!e.state.selection.eq(c)){var l=e.state.tr.setSelection(c);"pointer"==a?l.setMeta("pointer",!0):"key"==a&&l.scrollIntoView(),e.dispatch(l)}}else{var h=e.state.doc.resolve(t),p=h.sharedDepth(n);t=h.before(p+1),n=e.state.doc.resolve(n).after(p+1);var u,d,f=e.state.selection,m=function(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,h=r.to,p=e.root.getSelection(),u=null,d=p.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(u=[{node:d,offset:p.anchorOffset}],w(p)||u.push({node:p.focusNode,offset:p.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var f=c;f>a;f--){var m=o.childNodes[f-1],g=m.pmViewDesc;if("BR"==m.nodeType&&!g){c=f;break}if(!g||g.size)break}var v=e.state.doc,y=e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema),b=v.resolve(l),x=null,k=y.parse(o,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Te,context:b});if(u&&null!=u[0].pos){var _=u[0].pos,S=u[1]&&u[1].pos;null==S&&(S=_),x={anchor:_+l,head:S+l}}return{doc:k,sel:x,from:l,to:h}}(e,t,n),g=e.state.doc,v=g.slice(m.from,m.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(u=e.state.selection.to,d="end"):(u=e.state.selection.from,d="start"),e.lastKeyCode=null;var y=function(e,t,n,r,i){var o=e.findDiffStart(t,n);if(null==o)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;if("end"==i){var l=Math.max(0,o-Math.min(a,c));r-=a+l-o}if(a<o&&e.size<t.size){c=(o-=r<=o&&r>=a?o-r:0)+(c-a),a=o}else if(c<o){a=(o-=r<=o&&r>=c?o-r:0)+(a-c),c=o}return{start:o,endA:a,endB:c}}(v.content,m.doc.content,m.from,u,d);if(!y){if(!(o&&f instanceof r.TextSelection&&!f.empty&&f.$head.sameParent(f.$anchor))||e.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var b=Ne(e,e.state.doc,m.sel);b&&!b.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(b))}return}y={start:f.from,endA:f.to,endB:f.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof r.TextSelection&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>m.from&&" "==m.doc.textBetween(y.start-m.from-1,y.start-m.from+1)&&(y.start--,y.endA--,y.endB--);var k,_=m.doc.resolveNoCache(y.start-m.from),S=m.doc.resolveNoCache(y.endB-m.from);if(!(!_.sameParent(S)&&_.pos<m.doc.content.size&&(k=r.Selection.findFrom(m.doc.resolve(_.pos+1),1,!0))&&k.head==S.pos&&e.someProp("handleKeyDown",(function(t){return t(e,x(13,"Enter"))}))))if(e.state.selection.anchor>y.start&&function(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||Me(r,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=e.resolve(Me(o,!0,!0));if(!s.parent.isTextblock||s.pos>n||Me(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(g,y.start,y.endA,_,S)&&e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{var $,C,E,T,A=y.start,N=y.endA;if(_.sameParent(S)&&_.parent.inlineContent)if(_.pos==S.pos)s.ie&&s.ie_version<=11&&0==_.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return xe(e)}),20)),$=e.state.tr.delete(A,N),C=g.resolve(y.start).marksAcross(g.resolve(y.endA));else if(y.endA==y.endB&&(T=g.resolve(y.start))&&(E=function(e,t){for(var n,r,o,s=e.firstChild.marks,a=t.firstChild.marks,c=s,l=a,h=0;h<a.length;h++)c=a[h].removeFromSet(c);for(var p=0;p<s.length;p++)l=s[p].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var u=[],d=0;d<t.childCount;d++)u.push(o(t.child(d)));if(i.Fragment.from(u).eq(e))return{mark:r,type:n}}(_.parent.content.cut(_.parentOffset,S.parentOffset),T.parent.content.cut(T.parentOffset,y.endA-T.start()))))$=e.state.tr,"add"==E.type?$.addMark(A,N,E.mark):$.removeMark(A,N,E.mark);else if(_.parent.child(_.index()).isText&&_.index()==S.index()-(S.textOffset?0:1)){var M=_.parent.textBetween(_.parentOffset,S.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,A,N,M)})))return;$=e.state.tr.insertText(M,A,N)}if($||($=e.state.tr.replace(A,N,m.doc.slice(y.start-m.from,y.endB-m.from))),m.sel){var O=Ne(e,$.doc,m.sel);O&&!(s.chrome&&s.android&&e.composing&&O.empty&&O.head==A||s.ie&&O.empty&&O.head==A)&&$.setSelection(O)}C&&$.ensureMarks(C),e.dispatch($.scrollIntoView())}}}function Ne(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ce(e,t.resolve(n.anchor),t.resolve(n.head))}function Me(e,t,n){for(var r=e.depth,i=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n)for(var o=e.node(r).maybeChild(e.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function Oe(e,t){for(var n=[],r=t.content,o=t.openStart,s=t.openEnd;o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||i.DOMSerializer.fromSchema(e.state.schema),l=Be(),h=l.createElement("div");h.appendChild(c.serializeFragment(r,{document:l}));for(var p,u=h.firstChild;u&&1==u.nodeType&&(p=Ie[u.nodeName.toLowerCase()]);){for(var d=p.length-1;d>=0;d--){for(var f=l.createElement(p[d]);h.firstChild;)f.appendChild(h.firstChild);h.appendChild(f)}u=h.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(n)),{dom:h,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function De(e,t,n,r,o){var s,a,c=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||c||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t)})),c)return new i.Slice(i.Fragment.from(e.state.schema.text(t)),0,0);var h=e.someProp("clipboardTextParser",(function(e){return e(t,o)}));h?a=h:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Be().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(n=i&&Ie[i[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),o=n.length);r.innerHTML=e;for(var s=0;s<o;s++)r=r.firstChild;return r}(n);var p=s&&s.querySelector("[data-pm-slice]"),u=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(s,{preserveWhitespace:!(!l&&!u),context:o})}return a=u?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;o=i.Fragment.from(l.create(n[c+1],o)),s++,a++}return new i.Slice(o,s,a)}(function(e,t,n){t<e.openStart&&(e=new i.Slice(Pe(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new i.Slice(Pe(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(a,+u[1],+u[2]),u[3]):i.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=r.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&o.length&&function e(t,n,r,o,s){if(s<t.length&&s<n.length&&t[s]==n[s]){var a=e(t,n,r,o.lastChild,s+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(s==t.length-1?r.type:t[s+1]))return o.copy(o.content.append(i.Fragment.from(Re(r,t,s+1))))}}(n,o,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(i.Fragment.empty,!0);return t.copy(r.append(o))}(s[s.length-1],o.length));var a=Re(e,n);s.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),s)return{v:i.Fragment.from(s)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Re(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,i.Fragment.from(e));return e}function Pe(e,t,n,r,o,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return o<r-1&&(c=Pe(c,t,n,r,o+1,s)),o>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}var Ie={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Le=null;function Be(){return Le||(Le=document.implementation.createHTMLDocument("title"))}var Ve={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Fe=s.ie&&s.ie_version<=11,ze=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};ze.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},ze.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var qe=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new ze,Fe&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};qe.prototype.flushSoon=function(){var e=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout((function(){e.flushingSoon=!1,e.flush()}),20))},qe.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Ve),Fe&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},qe.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Fe&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},qe.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},qe.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},qe.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},qe.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Ee(e)){var e;if(this.suppressingSelectionUpdates)return xe(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&m(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},qe.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},qe.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})},qe.prototype.flush=function(){if(this.view.docView&&!this.flushingSoon){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Ee(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&!this.view.composing&&(o=!0))}if(s.gecko&&a.length>1){var h=a.filter((function(e){return"BR"==e.nodeName}));if(2==h.length){var p=h[0],u=h[1];p.parentNode&&p.parentNode.parentNode==u.parentNode?u.remove():p.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),function(e){if(je)return;je=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,i,o),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||xe(this.view))}},qe.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var a=e.addedNodes[o],c=a.previousSibling,l=a.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(r=c),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l)}for(var h=r&&r.parentNode==e.target?u(r)+1:0,p=n.localPosFromDOM(e.target,h,-1),d=i&&i.parentNode==e.target?u(i):e.target.childNodes.length,f=0;f<e.addedNodes.length;f++)t.push(e.addedNodes[f]);return{from:p,to:n.localPosFromDOM(e.target,d,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var je=!1;var Ue={},We={};function He(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Ke(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Je(e,t)})}))}function Je(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Ye(e){return{left:e.clientX,top:e.clientY}}function Ge(e,t,n,r,i){if(-1==r)return!1;for(var o=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Xe(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Qe(e,t,n,i,o){return Ge(e,"handleClickOn",t,n,i)||e.someProp("handleClick",(function(n){return n(e,t,i)}))||(o?function(e,t){if(-1==t)return!1;var n,i,o=e.state.selection;o instanceof r.NodeSelection&&(n=o.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(c)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(Xe(e,r.NodeSelection.create(e.state.doc,i),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&r.NodeSelection.isSelectable(i))&&(Xe(e,new r.NodeSelection(n),"pointer"),!0)}(e,n))}function Ze(e,t,n,r){return Ge(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function et(e,t,n,i){return Ge(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",(function(n){return n(e,t,i)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Xe(e,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var i=n.resolve(t),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Xe(e,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;Xe(e,r.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function tt(e){return at(e)}We.keydown=function(e,t){e.shiftKey=16==t.keyCode||t.shiftKey,it(e,t)||(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",(function(n){return n(e,t)}))||we(e,t)?t.preventDefault():He(e,"key"))},We.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},We.keypress=function(e,t){if(!(it(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var i=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,i)}))||e.dispatch(e.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}}};var nt=s.mac?"metaKey":"ctrlKey";Ue.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=tt(e),r=Date.now(),i="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[nt]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(Ye(t));o&&("singleClick"==i?e.mouseDown=new rt(e,o,t,n):("doubleClick"==i?Ze:et)(e,o.pos,o.inside,t)?t.preventDefault():He(e,"pointer"))};var rt=function(e,t,n,i){var o,a,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=i,this.selectNode=n[nt],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);o=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var h=i?null:n.target,p=h?e.docView.nearestDesc(h,!0):null;this.target=p?p.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof r.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),He(e,"pointer")};function it(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}rt.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},rt.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ye(e))),this.allowDefault||!t?He(this.view,"pointer"):Qe(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():!this.flushed&&(!s.chrome||this.view.state.selection instanceof r.TextSelection||t.pos!=this.view.state.selection.from&&t.pos!=this.view.state.selection.to)?He(this.view,"pointer"):(Xe(this.view,r.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault())}},rt.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),He(this.view,"pointer")},Ue.touchdown=function(e){tt(e),He(e,"pointer")},Ue.contextmenu=function(e){return tt(e)};var ot=s.android?5e3:-1;function st(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return at(e)}),t))}function at(e,t){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();return!(!t&&!e.docView.dirty)&&(e.updateState(e.state),!0)}We.compositionstart=We.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),at(e,!0),e.markCursor=null;else if(at(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}e.composing=!0}st(e,ot)},We.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,st(e,20))};var ct=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function lt(e,t,n,r){var o=De(e,t,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",(function(t){return t(e,r,o||i.Slice.empty)}))&&o){var s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(o);e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Ue.copy=We.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var i=ct?null:t.clipboardData,o=Oe(e,n.content()),s=o.dom,a=o.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(e,t){var n=e.dom.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var i=getSelection(),o=n.createRange();o.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout((function(){n.body.removeChild(r),e.focus()}),50)}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},We.paste=function(e,t){var n=ct?null:t.clipboardData,r=n&&n.getData("text/html"),i=n&&n.getData("text/plain");n&&(r||i||n.files.length)?(lt(e,i,r,t),t.preventDefault()):function(e,t){var n=e.dom.ownerDocument,r=e.shiftKey||e.state.selection.$from.parent.type.spec.code,i=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((function(){e.focus(),n.body.removeChild(i),r?lt(e,i.value,null,t):lt(e,i.textContent,i.innerHTML,t)}),50)}(e,t)};var ht=function(e,t){this.slice=e,this.move=t},pt=s.mac?"altKey":"ctrlKey";for(var ut in Ue.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var i=e.state.selection,o=i.empty?null:e.posAtCoords(Ye(t));if(o&&o.pos>=i.from&&o.pos<=(i instanceof r.NodeSelection?i.to-1:i.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),c=Oe(e,a),l=c.dom,h=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(ct?"Text":"text/html",l.innerHTML),ct||t.dataTransfer.setData("text/plain",h),e.dragging=new ht(a,!t[pt])}},Ue.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},We.dragover=We.dragenter=function(e,t){return t.preventDefault()},We.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var i=e.posAtCoords(Ye(t));if(i){var s=e.state.doc.resolve(i.pos);if(s){var a=n&&n.slice||De(e,t.dataTransfer.getData(ct?"Text":"text/plain"),ct?null:t.dataTransfer.getData("text/html"),!1,s);if(a&&(t.preventDefault(),!e.someProp("handleDrop",(function(r){return r(e,t,a,n&&n.move)})))){var c=a?Object(o.f)(e.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);var l=e.state.tr;n&&n.move&&l.deleteSelection();var h=l.mapping.map(c),p=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,u=l.doc;if(p?l.replaceRangeWith(h,h,a.content.firstChild):l.replaceRange(h,h,a),!l.doc.eq(u)){var d=l.doc.resolve(h);p&&r.NodeSelection.isSelectable(a.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(a.content.firstChild)?l.setSelection(new r.NodeSelection(d)):l.setSelection(Ce(e,d,l.doc.resolve(l.mapping.map(c)))),e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},Ue.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0)},Ue.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Ue.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,x(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},We)Ue[ut]=We[ut];function dt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var ft=function(e,t){this.spec=t||wt,this.side=this.spec.side||0,this.toDOM=e};ft.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,this.side<0?-1:1),o=i.pos;return i.deleted?null:new vt(o-n,o-n,this)},ft.prototype.valid=function(){return!0},ft.prototype.eq=function(e){return this==e||e instanceof ft&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&dt(this.spec,e.spec))};var mt=function(e,t){this.spec=t||wt,this.attrs=e};mt.prototype.map=function(e,t,n,r){var i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new vt(i,o,this)},mt.prototype.valid=function(e,t){return t.from<t.to},mt.prototype.eq=function(e){return this==e||e instanceof mt&&dt(this.attrs,e.attrs)&&dt(this.spec,e.spec)},mt.is=function(e){return e.type instanceof mt};var gt=function(e,t){this.spec=t||wt,this.attrs=e};gt.prototype.map=function(e,t,n,r){var i=e.mapResult(t.from+r,1);if(i.deleted)return null;var o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new vt(i.pos-n,o.pos-n,this)},gt.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,i=n.offset;return i==t.from&&i+e.child(r).nodeSize==t.to},gt.prototype.eq=function(e){return this==e||e instanceof gt&&dt(this.attrs,e.attrs)&&dt(this.spec,e.spec)};var vt=function(e,t,n){this.from=e,this.to=t,this.type=n},yt={spec:{configurable:!0}};vt.prototype.copy=function(e,t){return new vt(e,t,this.type)},vt.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},vt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},vt.widget=function(e,t,n){return new vt(e,e,new ft(t,n))},vt.inline=function(e,t,n,r){return new vt(e,t,new mt(n,r))},vt.node=function(e,t,n,r){return new vt(e,t,new gt(n,r))},yt.spec.get=function(){return this.type.spec},Object.defineProperties(vt.prototype,yt);var bt=[],wt={},xt=function(e,t){this.local=e&&e.length?e:bt,this.children=t&&t.length?t:bt};xt.create=function(e,t){return t.length?Et(t,e,0,wt):kt},xt.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},xt.prototype.findInner=function(e,t,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,i)}},xt.prototype.map=function(e,t,n){return this==kt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||wt)},xt.prototype.mapInner=function(e,t,n,r,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+o||(t>=a[s]+o?a[s+1]=-1:(l=r-n-(t-e)+(o-i))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var h=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var u=n.map(a[p]+o),d=u-i;if(d<0||d>=r.content.size){h=!0;continue}var f=n.map(e[p+1]+o,-1)-i,m=r.content.findIndex(d),g=m.index,v=m.offset,y=r.maybeChild(g);if(y&&v==d&&v+y.nodeSize==f){var b=a[p+2].mapInner(n,y,u+1,a[p]+o+1,s);b!=kt?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,h=!0)}else h=!0}if(h){var w=Et(function(e,t,n,r,i,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var c=e.local[o].map(r,i,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[o].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+o+1);return n}(a,e,t||[],n,i,o,s),r,0,s);t=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var k=0,_=0;k<w.children.length;k+=3){for(var S=w.children[k];_<a.length&&a[_]<S;)_+=3;a.splice(_,0,w.children[k],w.children[k+1],w.children[k+2])}}return new xt(t&&t.sort(Tt),a)}(this.children,o,e,t,n,r,i):o?new xt(o.sort(Tt)):kt},xt.prototype.add=function(e,t){return t.length?this==kt?xt.create(e,t):this.addInner(e,t,0):this},xt.prototype.addInner=function(e,t,n){var r,i=this,o=0;e.forEach((function(e,s){var a,c=s+n;if(a=$t(t,e,c)){for(r||(r=i.children.slice());o<r.length&&r[o]<s;)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(e,a,c+1):r.splice(o,0,s,s+e.nodeSize,Et(a,e,c+1,wt)),o+=3}}));var s=St(o?Ct(t):t,-n);return new xt(s.length?this.local.concat(s).sort(Tt):this.local,r||this.children)},xt.prototype.remove=function(e){return 0==e.length||this==kt?this:this.removeInner(e,0)},xt.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,s=n[i]+t,a=n[i+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(o||(o=[])).push(l));if(o){n==this.children&&(n=this.children.slice());var h=n[i+2].removeInner(o,s+1);h!=kt?n[i+2]=h:(n.splice(i,3),i-=3)}}if(r.length)for(var p=0,u=void 0;p<e.length;p++)if(u=e[p])for(var d=0;d<r.length;d++)r[d].type.eq(u.type)&&(r==this.local&&(r=this.local.slice()),r.splice(d--,1));return n==this.children&&r==this.local?this:r.length||n.length?new xt(r,n):kt},xt.prototype.forChild=function(e,t){if(this==kt)return this;if(t.isLeaf)return xt.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(n=this.children[i+2]);break}for(var o=e+1,s=o+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof mt){var l=Math.max(o,c.from)-o,h=Math.min(s,c.to)-o;l<h&&(r||(r=[])).push(c.copy(l,h))}}if(r){var p=new xt(r.sort(Tt));return n?new _t([p,n]):p}return n||kt},xt.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof xt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},xt.prototype.locals=function(e){return At(this.localsInner(e))},xt.prototype.localsInner=function(e){if(this==kt)return bt;if(e.inlineContent||!this.local.some(mt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof mt||t.push(this.local[n]);return t};var kt=new xt;xt.empty=kt,xt.removeOverlap=At;var _t=function(e){this.members=e};function St(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(new vt(i.from+t,i.to+t,i.type))}return n}function $t(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,i=null,o=0,s=void 0;o<e.length;o++)(s=e[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[o]=null);return i}function Ct(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Et(e,t,n,r){var i=[],o=!1;t.forEach((function(t,s){var a=$t(e,t,s+n);if(a){o=!0;var c=Et(a,t,n+s+1,r);c!=kt&&i.push(s,s+t.nodeSize,c)}}));for(var s=St(o?Ct(e):e,-n).sort(Tt),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new xt(s,i):kt}function Tt(e,t){return e.from-t.from||e.to-t.to}function At(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var i=n+1;i<t.length;i++){var o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),Nt(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),Nt(t,i+1,o.copy(r.to,o.to)))}}return t}function Nt(e,t,n){for(;t<e.length&&Tt(n,e[t])>0;)t++;e.splice(t,0,n)}function Mt(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=kt&&t.push(r)})),e.cursorWrapper&&t.push(xt.create(e.state.doc,[e.cursorWrapper.deco])),_t.from(t)}_t.prototype.forChild=function(e,t){if(t.isLeaf)return xt.empty;for(var n=[],r=0;r<this.members.length;r++){var i=this.members[r].forChild(e,t);i!=kt&&(i instanceof _t?n=n.concat(i.members):n.push(i))}return _t.from(n)},_t.prototype.eq=function(e){if(!(e instanceof _t)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},_t.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?At(n?t:t.sort(Tt)):bt},_t.from=function(e){switch(e.length){case 0:return kt;case 1:return e[0];default:return new _t(e)}};var Ot=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=It(this),this.markCursor=null,this.cursorWrapper=null,Pt(this),this.nodeViews=Lt(this),this.docView=K(this.state.doc,Rt(this),Mt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new qe(e,(function(t,n,r){return Ae(e,t,n,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ue[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Je(e,t)||!e.editable&&t.type in We||n(e,t)})};for(var n in Ue)t(n);s.safari&&e.dom.addEventListener("input",(function(){return null})),Ke(e)}(this),this.pluginViews=[],this.updatePluginViews()},Dt={props:{configurable:!0},root:{configurable:!0}};function Rt(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[vt.node(0,e.state.doc.content.size,t)]}function Pt(e){var t=e.state.selection,n=t.$head,r=t.$anchor,i=t.visible;if(e.markCursor){var o=document.createElement("img");o.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:o,deco:vt.widget(n.pos,o,{raw:!0,marks:e.markCursor})}}else if(i||n.pos!=r.pos)e.cursorWrapper=null;else{var s;!e.cursorWrapper||e.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):e.cursorWrapper.deco.pos!=n.pos&&(s=e.cursorWrapper.dom),s&&(e.cursorWrapper={dom:s,deco:vt.widget(n.pos,s,{raw:!0})})}}function It(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Lt(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}Dt.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Ot.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ke(this),this._props=e,this.updateStateInner(e.state,!0)},Ot.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Ot.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Ot.prototype.updateStateInner=function(e,t){var n=this,i=this.state,o=!1;if(this.state=e,t){var a=Lt(this);(function(e,t){var n=0,r=0;for(var i in e){if(e[i]!=t[i])return!0;n++}for(var o in t)r++;return n!=r})(a,this.nodeViews)&&(this.nodeViews=a,o=!0),Ke(this)}this.editable=It(this),Pt(this);var c,l,h,p,u,d,f,g,v,y,b,w=Mt(this),x=Rt(this),k=t?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",_=o||!this.docView.matchesNode(e.doc,x,w),E=_||!e.selection.eq(i.selection),T="preserve"==k&&E&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(o,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=i-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:$(e.dom)}}(this);if(E){this.domObserver.stop();var A=_&&(s.ie||s.chrome)&&!i.selection.empty&&!e.selection.empty&&(p=i.selection,u=e.selection,d=Math.min(p.$anchor.sharedDepth(p.head),u.$anchor.sharedDepth(u.head)),p.$anchor.node(d)!=u.$anchor.node(d));_&&(!o&&this.docView.update(e.doc,x,w,this)||(this.docView.destroy(),this.docView=K(e.doc,x,w,this.dom,this))),A||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(c=this,l=c.docView.domFromPos(c.state.selection.anchor),h=c.root.getSelection(),m(l.node,l.offset,h.anchorNode,h.anchorOffset)))?xe(this,A):(Se(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==k)this.dom.scrollTop=0;else if("to selection"==k){var N=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof r.NodeSelection?S(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),N):S(this,this.coordsAtPos(e.selection.head),N))}else T&&(g=(f=T).refDOM,v=f.refTop,y=f.stack,b=g?g.getBoundingClientRect().top:0,C(y,0==b?0:b-v))},Ot.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Ot.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Ot.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var s=i[o].props[e];if(null!=s&&(n=t?t(s):s))return n}},Ot.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Ot.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(E)return e.focus(E);var t=$(e);e.focus(null==E?{get preventScroll(){return E={preventScroll:!0},!0}}:void 0),E||(E=!1,C(t,0))}(this.dom),xe(this),this.domObserver.start()},Dt.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Ot.prototype.posAtCoords=function(e){return N(this,e)},Ot.prototype.coordsAtPos=function(e){return O(this,e)},Ot.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},Ot.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Ot.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Ot.prototype.endOfTextblock=function(e,t){return V(this,t||this.state,e)},Ot.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Ot.prototype.dispatchEvent=function(e){return function(e,t){Je(e,t)||!Ue[t.type]||!e.editable&&t.type in We||Ue[t.type](e,t)}(this,e)},Ot.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Ot.prototype,Dt)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n(9),i=function(e,t,n){this.step=e,this.inverted=t,this.origin=n};var o=function(e,t){this.version=e,this.unconfirmed=t};var s=new r.PluginKey("collab");function a(e){return void 0===e&&(e={}),e={version:e.version||0,clientID:null==e.clientID?Math.floor(4294967295*Math.random()):e.clientID},new r.Plugin({key:s,state:{init:function(){return new o(e.version,[])},apply:function(e,t){var n=e.getMeta(s);return n||(e.docChanged?new o(t.version,t.unconfirmed.concat(function(e){for(var t=[],n=0;n<e.steps.length;n++)t.push(new i(e.steps[n],e.steps[n].invert(e.docs[n]),e));return t}(e))):t)}},config:e,historyPreserveItems:!0})}function c(e,t,n,a){for(var c=s.getState(e),l=c.version+t.length,h=s.get(e).spec.config.clientID,p=0;p<n.length&&n[p]==h;)++p;var u=c.unconfirmed.slice(p);if(!(t=p?t.slice(p):t).length)return e.tr.setMeta(s,new o(l,u));var d=u.length,f=e.tr;if(d)u=function(e,t,n){for(var r=e.length-1;r>=0;r--)n.step(e[r].inverted);for(var o=0;o<t.length;o++)n.step(t[o]);for(var s=[],a=0,c=e.length;a<e.length;a++){var l=e[a].step.map(n.mapping.slice(c));c--,l&&!n.maybeStep(l).failed&&(n.mapping.setMirror(c,n.steps.length-1),s.push(new i(l,l.invert(n.docs[n.docs.length-1]),e[a].origin)))}return s}(u,t,f);else{for(var m=0;m<t.length;m++)f.step(t[m]);u=[]}var g=new o(l,u);return a&&a.mapSelectionBackward&&e.selection instanceof r.TextSelection&&(f.setSelection(r.TextSelection.between(f.doc.resolve(f.mapping.map(e.selection.anchor,-1)),f.doc.resolve(f.mapping.map(e.selection.head,-1)),-1)),f.updated&=-2),f.setMeta("rebased",d).setMeta("addToHistory",!1).setMeta(s,g)}function l(e){var t=s.getState(e);return 0==t.unconfirmed.length?null:{version:t.version,steps:t.unconfirmed.map((function(e){return e.step})),clientID:s.get(e).spec.config.clientID,get origins(){return this._origins||(this._origins=t.unconfirmed.map((function(e){return e.origin})))}}}function h(e){return s.getState(e).version}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(15),i=n(12),o=n(9);function s(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function a(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function c(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function l(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function h(e,t){var n=e.selection,r=n.$head,i=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(i))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=s.contentMatchAt(a).defaultType;if(!s.canReplaceWith(a,a,c))return!1;if(t){var l=r.after(),h=e.tr.replaceWith(l,l,c.createAndFill());h.setSelection(o.Selection.near(h.doc.resolve(l),1)),t(h.scrollIntoView())}return!0}function p(e,t){var n=e.selection,s=n.$from,a=n.$to;if(e.selection instanceof o.NodeSelection&&e.selection.node.isBlock)return!(!s.parentOffset||!Object(r.e)(e.doc,s.pos))&&(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(t){var c=a.parentOffset==a.parent.content.size,l=e.tr;e.selection instanceof o.TextSelection&&l.deleteSelection();var h=0==s.depth?null:s.node(-1).contentMatchAt(s.indexAfter(-1)).defaultType,p=c&&h?[{type:h}]:null,u=Object(r.e)(l.doc,l.mapping.map(s.pos),1,p);p||u||!Object(r.e)(l.doc,l.mapping.map(s.pos),1,h&&[{type:h}])||(p=[{type:h}],u=!0),u&&(l.split(l.mapping.map(s.pos),1,p),c||s.parentOffset||s.parent.type==h||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),i.Fragment.from(h.create(),s.parent))||l.setNodeMarkup(l.mapping.map(s.before()),h)),t(l.scrollIntoView())}return!0}function u(e,t,n){var s,a,c=t.nodeBefore,l=t.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(function(e,t,n){var i=t.nodeBefore,o=t.nodeAfter,s=t.index();return!!(i&&o&&i.type.compatibleContent(o.type))&&(!i.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(s,s+1)||!o.isTextblock&&!Object(r.d)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&a.matchType(s[0]||l.type).validEnd){if(n){for(var h=t.pos+l.nodeSize,p=i.Fragment.empty,u=s.length-1;u>=0;u--)p=i.Fragment.from(s[u].create(null,p));p=i.Fragment.from(c.copy(p));var d=e.tr.step(new r.b(t.pos-1,h,t.pos,h,new i.Slice(p,1,0),s.length,!0)),f=h+2*s.length;Object(r.d)(d.doc,f)&&d.join(f),n(d.scrollIntoView())}return!0}var m=o.Selection.findFrom(t,1),g=m&&m.$from.blockRange(m.$to),v=g&&Object(r.i)(g);return null!=v&&v>=t.depth&&(n&&n(e.tr.lift(g,v).scrollIntoView()),!0)}function d(e,t){return function(n,r){var i=n.selection,o=i.from,s=i.to,a=!1;return n.doc.nodesBetween(o,s,(function(r,i){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var o=n.doc.resolve(i),s=o.index();a=o.parent.canReplaceWith(s,s+1,e)}})),!!a&&(r&&r(n.tr.setBlockType(o,s,e,t).scrollIntoView()),!0)}}function f(e,t){return function(n,r){var i=n.selection,o=i.empty,s=i.$cursor,a=i.ranges;if(o&&!s||!function(e,t,n){for(var r=function(r){var i=t[r],o=i.$from,s=i.$to,a=0==o.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,s.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)})),a)return{v:!0}},i=0;i<t.length;i++){var o=r(i);if(o)return o.v}return!1}(n.doc,a,e))return!1;if(r)if(s)e.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var c=!1,l=n.tr,h=0;!c&&h<a.length;h++){var p=a[h],u=p.$from,d=p.$to;c=n.doc.rangeHasMark(u.pos,d.pos,e)}for(var f=0;f<a.length;f++){var m=a[f],g=m.$from,v=m.$to;c?l.removeMark(g.pos,v.pos,e):l.addMark(g.pos,v.pos,e.create(t))}r(l.scrollIntoView())}return!0}}function m(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}var g=m(s,(function(e,t,n){var i=e.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",e):i.parentOffset>0))return!1;var s=c(i);if(!s){var l=i.blockRange(),h=l&&Object(r.i)(l);return null!=h&&(t&&t(e.tr.lift(l,h).scrollIntoView()),!0)}var p=s.nodeBefore;if(!p.type.spec.isolating&&u(e,s,t))return!0;if(0==i.parent.content.size&&(a(p,"end")||o.NodeSelection.isSelectable(p))){if(t){var d=e.tr.deleteRange(i.before(),i.after());d.setSelection(a(p,"end")?o.Selection.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):o.NodeSelection.create(d.doc,s.pos-p.nodeSize)),t(d.scrollIntoView())}return!0}return!(!p.isAtom||s.depth!=i.depth-1)&&(t&&t(e.tr.delete(s.pos-p.nodeSize,s.pos).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var i=c(r),s=i&&i.nodeBefore;return!(!s||!o.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(o.NodeSelection.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)})),v=m(s,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var i=l(r);if(!i)return!1;var s=i.nodeAfter;if(u(e,i,t))return!0;if(0==r.parent.content.size&&(a(s,"start")||o.NodeSelection.isSelectable(s))){if(t){var c=e.tr.deleteRange(r.before(),r.after());c.setSelection(a(s,"start")?o.Selection.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):o.NodeSelection.create(c.doc,c.mapping.map(i.pos))),t(c.scrollIntoView())}return!0}return!(!s.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var i=l(r),s=i&&i.nodeAfter;return!(!s||!o.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(o.NodeSelection.create(e.doc,i.pos)).scrollIntoView()),!0)})),y={Enter:m((function(e,t){var n=e.selection,r=n.$head,i=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(i))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),(function(e,t){var n=e.selection,r=n.$from,i=n.$to;if(r.parent.inlineContent||i.parent.inlineContent)return!1;var s=r.parent.contentMatchAt(i.indexAfter()).defaultType;if(!s||!s.isTextblock)return!1;if(t){var a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=e.tr.insert(a,s.createAndFill());c.setSelection(o.TextSelection.create(c.doc,a+1)),t(c.scrollIntoView())}return!0}),(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if(Object(r.e)(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var o=n.blockRange(),s=o&&Object(r.i)(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}),p),"Mod-Enter":h,Backspace:g,"Mod-Backspace":g,Delete:v,"Mod-Delete":v,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new o.AllSelection(e.doc))),!0}},b={"Ctrl-h":y.Backspace,"Alt-Backspace":y["Mod-Backspace"],"Ctrl-d":y.Delete,"Ctrl-Alt-Backspace":y["Mod-Delete"],"Alt-Delete":y["Mod-Delete"],"Alt-d":y["Mod-Delete"]};for(var w in y)b[w]=y[w];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();function x(e,t){return function(n,o){var s=n.selection,a=s.$from,c=s.$to,l=a.blockRange(c),h=!1,p=l;if(!l)return!1;if(l.depth>=2&&a.node(l.depth-1).type.compatibleContent(e)&&0==l.startIndex){if(0==a.index(l.depth-1))return!1;var u=n.doc.resolve(l.start-2);p=new i.NodeRange(u,u,l.depth),l.endIndex<l.parent.childCount&&(l=new i.NodeRange(a,n.doc.resolve(c.end(l.depth)),l.depth)),h=!0}var d=Object(r.g)(p,e,t,l);return!!d&&(o&&o(function(e,t,n,o,s){for(var a=i.Fragment.empty,c=n.length-1;c>=0;c--)a=i.Fragment.from(n[c].type.create(n[c].attrs,a));e.step(new r.b(t.start-(o?2:0),t.end,t.start,t.end,new i.Slice(a,0,0),n.length,!0));for(var l=0,h=0;h<n.length;h++)n[h].type==s&&(l=h+1);for(var p=n.length-l,u=t.start+n.length-(o?2:0),d=t.parent,f=t.startIndex,m=t.endIndex,g=!0;f<m;f++,g=!1)!g&&Object(r.e)(e.doc,u,p)&&(e.split(u,p),u+=2*p),u+=d.child(f).nodeSize;return e}(n.tr,l,d,h,e).scrollIntoView()),!0)}}function k(e){return function(t,n){var o=t.selection,s=o.$from,a=o.$to,c=o.node;if(c&&c.isBlock||s.depth<2||!s.sameParent(a))return!1;var l=s.node(-1);if(l.type!=e)return!1;if(0==s.parent.content.size){if(2==s.depth||s.node(-3).type!=e||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var h=i.Fragment.empty,p=s.index(-1)>0,u=s.depth-(p?1:2);u>=s.depth-3;u--)h=i.Fragment.from(s.node(u).copy(h));h=h.append(i.Fragment.from(e.createAndFill()));var d=t.tr.replace(s.before(p?null:-1),s.after(-3),new i.Slice(h,p?3:2,2));d.setSelection(t.selection.constructor.near(d.doc.resolve(s.pos+(p?3:2)))),n(d.scrollIntoView())}return!0}var f=a.pos==s.end()?l.contentMatchAt(0).defaultType:null,m=t.tr.delete(s.pos,a.pos),g=f&&[null,{type:f}];return!!Object(r.e)(m.doc,s.pos,2,g)&&(n&&n(m.split(s.pos,2,g).scrollIntoView()),!0)}}function _(e){return function(t,n){var o=t.selection,s=o.$from,a=o.$to,c=s.blockRange(a,(function(t){return t.childCount&&t.firstChild.type==e}));return!!c&&(!n||(s.node(c.depth-1).type==e?function(e,t,n,o){var s=e.tr,a=o.end,c=o.$to.end(o.depth);a<c&&(s.step(new r.b(a-1,c,a,c,new i.Slice(i.Fragment.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new i.NodeRange(s.doc.resolve(o.$from.pos),s.doc.resolve(c),o.depth));return t(s.lift(o,Object(r.i)(o)).scrollIntoView()),!0}(t,n,e,c):function(e,t,n){for(var o=e.tr,s=n.parent,a=n.end,c=n.endIndex-1,l=n.startIndex;c>l;c--)a-=s.child(c).nodeSize,o.delete(a-1,a+1);var h=o.doc.resolve(n.start),p=h.nodeAfter,u=0==n.startIndex,d=n.endIndex==s.childCount,f=h.node(-1),m=h.index(-1);if(!f.canReplace(m+(u?0:1),m+1,p.content.append(d?i.Fragment.empty:i.Fragment.from(s))))return!1;var g=h.pos,v=g+p.nodeSize;return o.step(new r.b(g-(u?1:0),v+(d?1:0),g+1,v-1,new i.Slice((u?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))).append(d?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))),u?0:1,d?0:1),u?0:1)),t(o.scrollIntoView()),!0}(t,n,c)))}}function S(e){return function(t,n){var o=t.selection,s=o.$from,a=o.$to,c=s.blockRange(a,(function(t){return t.childCount&&t.firstChild.type==e}));if(!c)return!1;var l=c.startIndex;if(0==l)return!1;var h=c.parent,p=h.child(l-1);if(p.type!=e)return!1;if(n){var u=p.lastChild&&p.lastChild.type==h.type,d=i.Fragment.from(u?e.create():null),f=new i.Slice(i.Fragment.from(e.create(null,i.Fragment.from(h.type.create(null,d)))),u?3:1,0),m=c.start,g=c.end;n(t.tr.step(new r.b(m-(u?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0}}var $=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,i){var o=n;if(t[1]){var s=t[0].lastIndexOf(t[1]);o+=t[0].slice(s+t[1].length);var a=(r+=s)-i;a>0&&(o=t[0].slice(s-a,s)+o,r=i)}return e.tr.insertText(o,r,i)}):t};new $(/--$/,""),new $(/\.\.\.$/,""),new $(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new $(/"$/,""),new $(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new $(/'$/,"");function C(e,t,n,i){return new $(e,(function(e,o,s,a){var c=n instanceof Function?n(o):n,l=e.tr.delete(s,a),h=l.doc.resolve(s).blockRange(),p=h&&Object(r.g)(h,t,c);if(!p)return null;l.wrap(h,p);var u=l.doc.resolve(s-1).nodeBefore;return u&&u.type==t&&Object(r.d)(l.doc,s-1)&&(!i||i(o,u))&&l.join(s-1),l}))}function E(e,t,n){return new $(e,(function(e,r,i,o){var s=e.doc.resolve(i),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(i,o).setBlockType(i,i,t,a):null}))}var T=n(39),A=n(29);
/*!
    * tiptap-commands v1.12.4
    * (c) 2019 Scrumpy UG (limited liability)
    * @license MIT
    */
function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,n){var r=t.selection.$from.pos.pos;return n(t.tr.insertText(e,r)),!0}}function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e,t,n){return new $(e,(function(e,r,i,o){var s=n instanceof Function?n(r):n,a=e.tr,c=r.length-1,l=o,h=i;if(r[c]){var p=i+r[0].indexOf(r[c-1]),u=p+r[c-1].length-1,d=p+r[c-1].lastIndexOf(r[c]),f=d+r[c].length;if(function(e,t,n){var r=[];return n.doc.nodesBetween(e,t,(function(e,t){r=[].concat(M(r),M(e.marks.map((function(n){return{start:t,end:t+e.nodeSize,mark:n}}))))})),r}(i,o,e).filter((function(e){return e.mark.type.excluded.find((function(e){return e.name===t.name}))})).filter((function(e){return e.end>p})).length)return!1;f<u&&a.delete(f,u),d>p&&a.delete(p,d),l=(h=p)+r[c].length}return a.addMark(h,l,t.create(s)),a.removeStoredMark(t),a}))}function D(e,t,n){return new $(e,(function(e,r,i,o){var s=n instanceof Function?n(r):n,a=e.tr;return r[0]&&a.replaceWith(i-1,o,t.create(s)),a}))}function R(e,t,n){return new o.Plugin({props:{transformPasted:function(r){return new i.Slice(function r(o){var s=[];return o.forEach((function(i){if(i.isText){var o,a=i.text,c=0;do{if(o=e.exec(a)){var l=o.index,h=l+o[0].length,p=n instanceof Function?n(o[0]):n;l>0&&s.push(i.cut(c,l)),s.push(i.cut(l,h).mark(t.create(p).addToSet(i.marks))),c=h}}while(o);c<a.length&&s.push(i.cut(c))}else s.push(i.copy(r(i.content)))})),i.Fragment.fromArray(s)}(r.content),r.openStart,r.openEnd)}}})}function P(e,t,n){return new o.Plugin({props:{transformPasted:function(r){return new i.Slice(function r(o){var s=[];return o.forEach((function(i){if(i.isText){for(var o,a=i.text,c=0,l=!!i.marks.filter((function(e){return"link"===e.type.name}))[0];!l&&null!==(o=e.exec(a));)if(o[1]){var h=o.index,p=h+o[0].length,u=h+o[0].indexOf(o[1]),d=u+o[1].length,f=n instanceof Function?n(o):n;h>0&&s.push(i.cut(c,h)),s.push(i.cut(u,d).mark(t.create(f).addToSet(i.marks))),c=p}c<a.length&&s.push(i.cut(c))}else s.push(i.copy(r(i.content)))})),i.Fragment.fromArray(s)}(r.content),r.openStart,r.openEnd)}}})}function I(e){return function(t,n){var r=t.tr,i=t.selection,o=i.from,s=i.to,a=i.$from;if(i.empty){var c=Object(T.b)(a,e);o=c.from,s=c.to}return r.removeMark(o,s,e),n(r)}}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,i){var o=r.selection,s=o.$from,a=o.$to,c=s.index(),l=e?e.from:s.pos,h=e?e.to:a.pos;return!!s.parent.canReplaceWith(c,c,t)&&(i&&i(r.tr.replaceWith(l,h,t.create(n))),!0)}}function B(e){return function(t,n){var r=t.selection,o=r.$from,s=r.$to,a=r.node;if(a&&a.isBlock||o.depth<2||!o.sameParent(s))return!1;var c=o.node(-1);if(c.type!=e)return!1;if(0==o.parent.content.size){if(2==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var l=i.Fragment.empty,h=o.index(-1)>0,p=o.depth-(h?1:2);p>=o.depth-3;p--)l=i.Fragment.from(o.node(p).copy(l));l=l.append(i.Fragment.from(e.createAndFill()));var u=t.tr.replace(o.before(h?null:-1),o.after(-3),new i.Slice(l,h?3:2,2));u.setSelection(t.selection.constructor.near(u.doc.resolve(o.pos+(h?3:2)))),n(u.scrollIntoView())}return!0}var d=s.pos==o.end()?c.contentMatchAt(o.indexAfter(-1)).defaultType:null,f=t.tr.delete(o.pos,s.pos),m=d&&[{type:e},{type:d}];return m||(m=[{type:e},null]),!!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,c=n-2;a>o;a--,c--){var l=i.node(a),h=i.index(a);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(h,l.childCount),u=r&&r[c]||l;if(u!=l&&(p=p.replaceChild(0,u.type.create(u.attrs))),!l.canReplace(h+1,l.childCount))return!1}var d=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(d,d,f?f.type:i.node(o+1).type)}(f.doc,o.pos,2,m)&&(n&&n(f.split(o.pos,2,m).scrollIntoView()),!0)}}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,i,o){return Object(T.d)(r,e,n)?d(t)(r,i,o):d(e,n)(r,i,o)}}function F(e,t){return e.type===t.nodes.bullet_list||e.type===t.nodes.ordered_list||e.type===t.nodes.todo_list}function z(e,t){return function(n,r,i){var o=n.schema,s=n.selection,a=s.$from,c=s.$to,l=a.blockRange(c);if(!l)return!1;var h=Object(A.findParentNode)((function(e){return F(e,o)}))(s);if(l.depth>=1&&h&&l.depth-h.depth<=1){if(h.node.type===e)return _(t)(n,r,i);if(F(h.node,o)&&e.validContent(h.node.content)){var p=n.tr;return p.setNodeMarkup(h.pos,e),r&&r(p),!1}}return x(e)(n,r,i)}}function q(e){return function(t,n,i){var o,s;return Object(T.d)(t,e)?function(e,t){var n=e.selection,i=n.$from,o=n.$to,s=i.blockRange(o),a=s&&Object(r.i)(s);return null!=a&&(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}(t,n):(o=e,function(e,t){var n=e.selection,i=n.$from,a=n.$to,c=i.blockRange(a),l=c&&Object(r.g)(c,o,s);return!!l&&(t&&t(e.tr.wrap(c,l).scrollIntoView()),!0)})(t,n,i)}}function j(e,t){return function(n,r){var i=n.tr,o=n.selection,s=n.doc,a=o.from,c=o.to,l=o.$from;if(o.empty){var h=Object(T.b)(l,e);a=h.from,c=h.to}return s.rangeHasMark(a,c,e)&&i.removeMark(a,c,e),i.addMark(a,c,e.create(t)),r(i)}}n.d(t,"c",(function(){return N})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return P})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return R})),n.d(t,"i",(function(){return I})),n.d(t,"j",(function(){return L})),n.d(t,"n",(function(){return B})),n.d(t,"p",(function(){return V})),n.d(t,"q",(function(){return z})),n.d(t,"s",(function(){return q})),n.d(t,"t",(function(){return j})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"k",(function(){return d})),n.d(t,"r",(function(){return f})),n.d(t,"d",(function(){return _})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return k})),n.d(t,"o",(function(){return E})),n.d(t,"u",(function(){return C}))},function(e,t,n){"use strict";var r=function(){};r.prototype.append=function(e){return e.length?(e=r.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},r.prototype.prepend=function(e){return e.length?r.from(e).append(this):this},r.prototype.appendInner=function(e){return new o(this,e)},r.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?r.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},r.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},r.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},r.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},r.from=function(e){return e instanceof r?e:e&&e.length?new i(e):r.empty};var i=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(r);r.empty=new i([]);var o=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(r),s=r,a=n(15),c=n(9);n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return $})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return S}));var l=function(e,t){this.items=e,this.eventCount=t};l.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,i,o=this.items.length;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(r=this.remapping(o,this.items.length),i=r.maps.length);var s,a,c=e.tr,p=[],u=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(o,t+1),i=r.maps.length),i--,void u.push(e);if(r){u.push(new h(e.map));var d,f=e.step.map(r.slice(i));f&&c.maybeStep(f).doc&&(d=c.mapping.maps[c.mapping.maps.length-1],p.push(new h(d,null,null,p.length+u.length))),i--,d&&r.appendMap(d,i)}else c.maybeStep(e.step);return e.selection?(s=r?e.selection.map(r.slice(i)):e.selection,a=new l(n.items.slice(0,o).append(u.reverse().concat(p)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:c,selection:s}},l.prototype.addTransform=function(e,t,n,r){for(var i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<e.steps.length;c++){var p,d=e.steps[c].invert(e.docs[c]),f=new h(e.mapping.maps[c],d,t);(p=a&&a.merge(f))&&(f=p,c?i.pop():s=s.slice(0,s.length-1)),i.push(f),t&&(o++,t=null),r||(a=f)}var m,g,v,y=o-n.depth;return y>u&&(g=y,(m=s).forEach((function(e,t){if(e.selection&&0==g--)return v=t,!1})),s=m.slice(v),o-=y),new l(s.append(i),o)},l.prototype.remapping=function(e,t){var n=new a.a;return this.items.forEach((function(t,r){var i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,i)}),e,t),n},l.prototype.addMaps=function(e){return 0==this.eventCount?this:new l(this.items.append(e.map((function(e){return new h(e)}))),this.eventCount)},l.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),r);var a=t;this.items.forEach((function(t){var r=i.getMirror(--a);if(null!=r){o=Math.min(o,r);var c=i.maps[r];if(t.step){var l=e.steps[r].invert(e.docs[r]),p=t.selection&&t.selection.map(i.slice(a+1,r));p&&s++,n.push(new h(c,l,p))}else n.push(new h(c))}}),r);for(var c=[],p=t;p<o;p++)c.push(new h(i.maps[p]));var u=this.items.slice(0,r).append(c).append(n),d=new l(u,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d},l.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},l.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach((function(o,s){if(s>=e)r.push(o),o.selection&&i++;else if(o.step){var a=o.step.map(t.slice(n)),c=a&&a.getMap();if(n--,c&&t.appendMap(c,n),a){var l=o.selection&&o.selection.map(t.slice(n));l&&i++;var p,u=new h(c.invert(),a,l),d=r.length-1;(p=r.length&&r[d].merge(u))?r[d]=p:r.push(u)}}else o.map&&n--}),this.items.length,0),new l(s.from(r.reverse()),i)},l.empty=new l(s.empty,0);var h=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};h.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new h(t.getMap().invert(),t,this.selection)}};var p=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},u=20;function d(e){var t=[];return e.forEach((function(e,n,r,i){return t.push(r,i)})),t}function f(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function m(e,t,n,r){var i=y(t),o=b.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,i);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),l=new p(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(b,{redo:r,historyState:l}).scrollIntoView())}}var g=!1,v=null;function y(e){var t=e.plugins;if(v!=t){g=!1,v=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){g=!0;break}}return g}var b=new c.PluginKey("history"),w=new c.PluginKey("closeHistory");function x(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new c.Plugin({key:b,state:{init:function(){return new p(l.empty,l.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var i,o=n.getMeta(b);if(o)return o.historyState;n.getMeta(w)&&(e=new p(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(b))return s.getMeta(b).redo?new p(e.done.addTransform(n,null,r,y(t)),e.undone,d(n.mapping.maps[n.steps.length-1]),e.prevTime):new p(e.done,e.undone.addTransform(n,null,r,y(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new p(e.done.rebased(n,i),e.undone.rebased(n,i),f(e.prevRanges,n.mapping),e.prevTime):new p(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),f(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}(n,e.prevRanges)),c=s?f(e.prevRanges,n.mapping):d(n.mapping.maps[n.steps.length-1]);return new p(e.done.addTransform(n,a?t.selection.getBookmark():null,r,y(t)),l.empty,c,n.time)}(n,r,t,e)}},config:e})}function k(e,t){var n=b.getState(e);return!(!n||0==n.done.eventCount)&&(t&&m(n,e,t,!1),!0)}function _(e,t){var n=b.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&m(n,e,t,!0),!0)}function S(e){var t=b.getState(e);return t?t.done.eventCount:0}function $(e){var t=b.getState(e);return t?t.undone.eventCount:0}}]]);