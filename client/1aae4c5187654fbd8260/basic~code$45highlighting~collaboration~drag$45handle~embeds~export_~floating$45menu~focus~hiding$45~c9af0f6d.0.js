(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return H})),n.d(e,"c",(function(){return L})),n.d(e,"d",(function(){return ft})),n.d(e,"e",(function(){return G})),n.d(e,"f",(function(){return it})),n.d(e,"g",(function(){return T})),n.d(e,"h",(function(){return D})),n.d(e,"i",(function(){return $}));var o=n(9);n.d(e,"j",(function(){return o.Plugin})),n.d(e,"k",(function(){return o.PluginKey}));var r=n(27),i=n(12),s=n(34),c=n(35),u=n(25),a=n(36),l=n(14),d=n(18),f=(n(38),n(55)),p=n(0),h=n(1);
/*!
    * tiptap-svelte v0.0.1
    * (c) 2020 Scrumpy UG (limited liability)
    * @license MIT
    */
function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()})).replace(/\s+/g,"")}var S=function(){function t(e,n){var o=n.editor,r=n.extension,i=n.parent,s=n.node,c=n.view,u=n.decorations,a=n.getPos;v(this,t),this.component=e,this.editor=o,this.extension=r,this.parent=i,this.node=s,this.view=c,this.decorations=u,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.dom.getElementsByClassName("content-xx")[0]}return g(t,[{key:"createDOM",value:function(){var t=this,e=this.component,n={editor:this.editor,node:this.node,view:this.view,getPos:function(){return t.getPos()},decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:function(e){return t.updateAttrs(e)}};"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection);var o=document.createElement("div");return o.id=Math.floor(1e5*Math.random()+1),this.vm=new e({target:o,props:n}),o}},{key:"update",value:function(t,e){return t.type===this.node.type&&(t===this.node&&this.decorations===e||(this.node=t,this.decorations=e,this.updateComponentProps({node:t,decorations:e}),!0))}},{key:"updateComponentProps",value:function(t){var e=this;this.vm.$set&&Object.entries(t).forEach((function(t){var n=E(t,2),o=n[0],r=n[1],i={};i[o]=r,e.vm.$set(i)}))}},{key:"updateAttrs",value:function(t){if(this.view.editable){var e=this.view.state,n=this.node.type,o=this.getPos(),r=k({},this.node.attrs,{},t),i=this.isMark?e.tr.removeMark(o.from,o.to,n).addMark(o.from,o.to,n.create(r)):e.tr.setNodeMarkup(o,null,r);this.view.dispatch(i)}}},{key:"ignoreMutation",value:function(t){return!this.contentDOM||!this.contentDOM.contains(t.target)}},{key:"stopEvent",value:function(t){var e=this;if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(t);var n=!!this.extension.schema.draggable;if(n&&"mousedown"===t.type){var o=t.target.closest&&t.target.closest("[data-drag-handle]");o&&(this.dom===o||this.dom.contains(o))&&(this.captureEvents=!1,document.addEventListener("dragend",(function(){e.captureEvents=!0}),{once:!0}))}var r="copy"===t.type,i="paste"===t.type,s="cut"===t.type,c=t.type.startsWith("drag")||"drop"===t.type;return!(n&&c||r||i||s)&&this.captureEvents}},{key:"selectNode",value:function(){this.updateComponentProps({selected:!0})}},{key:"deselectNode",value:function(){this.updateComponentProps({selected:!1})}},{key:"getMarkPos",value:function(){var t=this.view.posAtDOM(this.dom),e=this.view.state.doc.resolve(t);return Object(d.b)(e,this.node.type)}},{key:"destroy",value:function(){}}]),t}(),C=function(){function t(){v(this,t)}return g(t,[{key:"on",value:function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];this._callbacks=this._callbacks||{};var i=this._callbacks[t];return i&&i.forEach((function(t){return t.apply(e,o)})),this}},{key:"off",value:function(t,e){if(arguments.length){var n=this._callbacks?this._callbacks[t]:null;n&&(e?this._callbacks[t]=n.filter((function(t){return t!==e})):delete this._callbacks[t])}else this._callbacks={};return this}}]),t}(),T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t),this.options=k({},this.defaultOptions,{},e)}return g(t,[{key:"init",value:function(){return null}},{key:"bindEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.editor=t}},{key:"inputRules",value:function(){return[]}},{key:"pasteRules",value:function(){return[]}},{key:"keys",value:function(){return{}}},{key:"name",get:function(){return null}},{key:"type",get:function(){return"extension"}},{key:"update",get:function(){return function(){}}},{key:"defaultOptions",get:function(){return{}}},{key:"plugins",get:function(){return[]}}]),t}(),_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;v(this,t),e.forEach((function(t){t.bindEditor(n),t.init()})),this.extensions=e}return g(t,[{key:"keymaps",value:function(t){var e=t.schema,n=this.extensions.filter((function(t){return["extension"].includes(t.type)})).filter((function(t){return t.keys})).map((function(t){return t.keys({schema:e})})),o=this.extensions.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.keys})).map((function(t){return t.keys({type:e["".concat(t.type,"s")][t.name],schema:e})}));return[].concat(M(n),M(o)).map((function(t){return Object(u.b)(t)}))}},{key:"inputRules",value:function(t){var e=t.schema,n=t.excludedExtensions;if(!(n instanceof Array)&&n)return[];var o=n instanceof Array?this.extensions.filter((function(t){return!n.includes(t.name)})):this.extensions,r=o.filter((function(t){return["extension"].includes(t.type)})).filter((function(t){return t.inputRules})).map((function(t){return t.inputRules({schema:e})})),i=o.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.inputRules})).map((function(t){return t.inputRules({type:e["".concat(t.type,"s")][t.name],schema:e})}));return[].concat(M(r),M(i)).reduce((function(t,e){return[].concat(M(t),M(e))}),[])}},{key:"pasteRules",value:function(t){var e=t.schema,n=t.excludedExtensions;if(!(n instanceof Array)&&n)return[];var o=n instanceof Array?this.extensions.filter((function(t){return!n.includes(t.name)})):this.extensions,r=o.filter((function(t){return["extension"].includes(t.type)})).filter((function(t){return t.pasteRules})).map((function(t){return t.pasteRules({schema:e})})),i=o.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.pasteRules})).map((function(t){return t.pasteRules({type:e["".concat(t.type,"s")][t.name],schema:e})}));return[].concat(M(r),M(i)).reduce((function(t,e){return[].concat(M(t),M(e))}),[])}},{key:"commands",value:function(t){var e=t.schema,n=t.view;return this.extensions.filter((function(t){return t.commands})).reduce((function(t,o){var r=o.name,i=o.type,s={},c=o.commands(k({schema:e},["node","mark"].includes(i)?{type:e["".concat(i,"s")][r]}:{})),u=function(t,e){return!!n.editable&&(n.focus(),t(e)(n.state,n.dispatch,n))},a=function(t,e){Array.isArray(e)?s[t]=function(t){return e.forEach((function(e){return u(e,t)}))}:"function"==typeof e&&(s[t]=function(t){return u(e,t)})};return"object"===m(c)?Object.entries(c).forEach((function(t){var e=E(t,2),n=e[0],o=e[1];a(n,o)})):a(r,c),k({},t,{},s)}),{})}},{key:"nodes",get:function(){return this.extensions.filter((function(t){return"node"===t.type})).reduce((function(t,e){return k({},t,b({},e.name,e.schema))}),{})}},{key:"options",get:function(){var t=this.view;return this.extensions.reduce((function(e,n){return k({},e,b({},n.name,new Proxy(n.options,{set:function(e,o,r){var i=e[o]!==r;return Object.assign(e,b({},o,r)),i&&n.update(t),!0}})))}),{})}},{key:"marks",get:function(){return this.extensions.filter((function(t){return"mark"===t.type})).reduce((function(t,e){return k({},t,b({},e.name,e.schema))}),{})}},{key:"plugins",get:function(){return this.extensions.filter((function(t){return t.plugins})).reduce((function(t,e){var n=e.plugins;return[].concat(M(t),M(n))}),[])}}]),t}(),D=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,e),A(this,j(e).call(this,t))}return w(e,t),g(e,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"mark"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),e}(T);function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(parseInt(t,10),e),n)}var $=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,e),A(this,j(e).call(this,t))}return w(e,t),g(e,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"node"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),e}(T),I=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"doc"}},{key:"schema",get:function(){return{content:"block+"}}}]),e}($),N=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type;return function(){return Object(f.a)(e)}}},{key:"name",get:function(){return"paragraph"}},{key:"schema",get:function(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}}}}]),e}($),B=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"text"}},{key:"schema",get:function(){return{group:"inline"}}}]),e}($),H=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,e),(t=A(this,j(e).call(this))).defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},parseOptions:{},injectCSS:!0,onInit:function(){},onTransaction:function(){},onUpdate:function(){},onFocus:function(){},onBlur:function(){},onPaste:function(){},onDrop:function(){}},t.events=["init","transaction","update","focus","blur","paste","drop"],t.init(n),t}return w(e,t),g(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setOptions(k({},this.defaultOptions,{},e)),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS,null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((function(e){t.on(e,t.options[P("on ".concat(e))]||function(){})})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}},{key:"setOptions",value:function(t){this.options=k({},this.options,{},t),this.view&&this.state&&this.view.updateState(this.state)}},{key:"createExtensions",value:function(){return new _([].concat(M(this.builtInExtensions),M(this.options.extensions)),this)}},{key:"createPlugins",value:function(){return this.extensions.plugins}},{key:"createKeymaps",value:function(){return this.extensions.keymaps({schema:this.schema})}},{key:"createInputRules",value:function(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}},{key:"createPasteRules",value:function(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}},{key:"createCommands",value:function(){return this.extensions.commands({schema:this.schema,view:this.view})}},{key:"createNodes",value:function(){return this.extensions.nodes}},{key:"createMarks",value:function(){return this.extensions.marks}},{key:"createSchema",value:function(){return new i.Schema({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}},{key:"createState",value:function(){var t=this;return o.EditorState.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[].concat(M(this.plugins),[Object(l.b)({rules:this.inputRules})],M(this.pasteRules),M(this.keymaps),[Object(u.b)({Backspace:l.c}),Object(u.b)(a.a),Object(s.a)(this.options.dropCursor),Object(c.a)(),new o.Plugin({key:new o.PluginKey("editable"),props:{editable:function(){return t.options.editable}}}),new o.Plugin({props:{attributes:{tabindex:0},handleDOMEvents:{focus:function(e,n){t.focused=!0,t.emit("focus",{event:n,state:e.state,view:e});var o=t.state.tr.setMeta("focused",!0);t.view.dispatch(o)},blur:function(e,n){t.focused=!1,t.emit("blur",{event:n,state:e.state,view:e});var o=t.state.tr.setMeta("focused",!1);t.view.dispatch(o)}}}}),new o.Plugin({props:this.options.editorProps})])})}},{key:"createDocument",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.parseOptions;if(null===t)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"===m(t))try{return this.schema.nodeFromJSON(t)}catch(e){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",e),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof t){var n=document.createElement("div");return n.innerHTML=t.trim(),i.DOMParser.fromSchema(this.schema).parse(n,e)}return!1}},{key:"createView",value:function(){var t=this;return new r.c(this.element,{state:this.createState(),handlePaste:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.emit.apply(t,["paste"].concat(n))},handleDrop:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.emit.apply(t,["drop"].concat(n))},dispatchTransaction:this.dispatchTransaction.bind(this)})}},{key:"setParentComponent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&this.view.setProps({nodeViews:this.initNodeViews({parent:t,extensions:[].concat(M(this.builtInExtensions),M(this.options.extensions))})})}},{key:"initNodeViews",value:function(t){var e=this,n=t.parent;return t.extensions.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.view})).reduce((function(t,o){return k({},t,b({},o.name,(function(t,r,i,s){var c=o.view;return new S(c,{editor:e,extension:o,parent:n,node:t,view:r,getPos:i,decorations:s})})))}),{})}},{key:"dispatchTransaction",value:function(t){var e=this.state.apply(t);this.view.updateState(e),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emitUpdate(t)}},{key:"emitUpdate",value:function(t){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t})}},{key:"resolveSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.selection&&null===t)return this.selection;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){var e=this.state.doc;return{from:e.content.size,to:e.content.size}}return{from:t,to:t}}},{key:"focus",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!(this.view.focused&&null===e||!1===e)){var n=this.resolveSelection(e),o=n.from,r=n.to;this.setSelection(o,r),setTimeout((function(){return t.view.focus()}),10)}}},{key:"setSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.state,r=n.doc,i=n.tr,s=R(t,0,r.content.size),c=R(e,0,r.content.size),u=o.TextSelection.create(r,s,c),a=i.setSelection(u);this.view.dispatch(a)}},{key:"blur",value:function(){this.view.dom.blur()}},{key:"getSchemaJSON",value:function(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}},{key:"getHTML",value:function(){var t=document.createElement("div"),e=i.DOMSerializer.fromSchema(this.schema).serializeFragment(this.state.doc.content);return t.appendChild(e),t.innerHTML}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"setContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.state,i=r.doc,s=r.tr,c=this.createDocument(t,n),u=o.TextSelection.create(i,0,i.content.size),a=s.setSelection(u).replaceSelectionWith(c,!1).setMeta("preventUpdate",!e);this.view.dispatch(a)}},{key:"clearContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setContent(this.options.emptyDocument,t)}},{key:"setActiveNodesAndMarks",value:function(){var t=this;this.activeMarks=Object.entries(this.schema.marks).reduce((function(e,n){var o=E(n,2),r=o[0],i=o[1];return k({},e,b({},r,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.c)(t.state,i,e)})))}),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce((function(e,n){var o=E(n,2),r=o[0],i=o[1];return k({},e,b({},r,Object(d.a)(t.state,i)))}),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce((function(e,n){var o=E(n,2),r=o[0],i=o[1];return k({},e,b({},r,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.d)(t.state,i,e)})))}),{})}},{key:"getMarkAttrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.activeMarkAttrs[t]}},{key:"registerPlugin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){var e=this.state.reconfigure({plugins:this.state.plugins.concat([t])});this.view.updateState(e)}}},{key:"unregisterPlugin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&this.view.docView){var e=this.state.reconfigure({plugins:this.state.plugins.filter((function(e){return!e.key.startsWith("".concat(t,"$"))}))});this.view.updateState(e)}}},{key:"destroy",value:function(){this.view&&this.view.destroy()}},{key:"builtInExtensions",get:function(){return this.options.useBuiltInExtensions?[new I,new B,new N]:[]}},{key:"state",get:function(){return this.view?this.view.state:null}},{key:"isActive",get:function(){return Object.entries(k({},this.activeMarks,{},this.activeNodes)).reduce((function(t,e){var n=E(e,2),o=n[0],r=n[1];return k({},t,b({},o,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(t)})))}),{})}}]),e}(C);function z(t){let e,n;const o={c:function(){e=Object(p.y)("div"),this.h()},l:function(t){e=Object(p.n)(t,"DIV",{class:!0}),Object(p.l)(e).forEach(p.w),this.h()},h:function(){Object(p.h)(e,"class",n=t[1].class),Object(p.c)(e,"packages/tiptap-svelte/src/Components/EditorContent.svelte",76,0,1451)},m:function(n,o){Object(p.K)(n,e,o),t[3](e)},p:function(t,[o]){2&o&&n!==(n=t[1].class)&&Object(p.h)(e,"class",n)},i:p.P,o:p.P,d:function(n){n&&Object(p.w)(e),t[3](null)}};return Object(p.x)("SvelteRegisterBlock",{block:o,id:z.name,type:"component",source:"",ctx:t}),o}function V(t,e,n){let o,{editor:r}=e;return Object(h.d)(async()=>{r&&r.element&&(await Object(h.f)(),o.appendChild(r.element.firstChild),r.setParentComponent(o))}),Object(h.c)(()=>{n(2,r.element=o,r)}),t.$set=t=>{n(1,e=Object(p.f)(Object(p.f)({},e),Object(p.A)(t))),"editor"in t&&n(2,r=t.editor)},t.$capture_state=()=>({editor:r,el:o}),t.$inject_state=t=>{n(1,e=Object(p.f)(Object(p.f)({},e),t)),"editor"in e&&n(2,r=t.editor),"el"in e&&n(0,o=t.el)},e=Object(p.A)(e),[o,e,r,function(t){p.i[t?"unshift":"push"](()=>{n(0,o=t)})}]}class L extends p.b{constructor(t){super(t),Object(p.I)(this,t,V,z,p.W,{editor:2}),Object(p.x)("SvelteRegisterComponent",{component:this,tagName:"EditorContent",options:t,id:z.name});const{ctx:e}=this.$$,n=t.props||{};void 0!==e[2]||"editor"in n||console.warn("<EditorContent> was created without expected prop 'editor'")}get editor(){throw new Error("<EditorContent>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editor(t){throw new Error("<EditorContent>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var q=function(){function t(e){var n=this,o=e.options;v(this,t),this.options=o,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("blur",(function(){n.preventHide?n.preventHide=!1:n.options.editor.emit("menubar:focusUpdate",!1)}))}return g(t,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler)}}]),t}();const U=t=>({focused:4&t,focus:1&t,commands:1&t,isActive:1&t,getMarkAttrs:1&t}),W=t=>({focused:t[2],focus:t[0].focus,commands:t[0].commands,isActive:t[0].isActive,getMarkAttrs:t[0].getMarkAttrs.bind(t[0])});function K(t){let e,n,o;const r=t[5].default,i=Object(p.s)(r,t,t[4],W),s={c:function(){e=Object(p.y)("div"),i&&i.c(),this.h()},l:function(t){e=Object(p.n)(t,"DIV",{class:!0});var n=Object(p.l)(e);i&&i.l(n),n.forEach(p.w),this.h()},h:function(){Object(p.h)(e,"class",n=t[3].class),Object(p.c)(e,"packages/tiptap-svelte/src/Components/EditorMenuBar.svelte",34,2,557)},m:function(n,r){Object(p.K)(n,e,r),i&&i.m(e,null),t[6](e),o=!0},p:function(t,s){i&&i.p&&21&s&&i.p(Object(p.D)(r,t,t[4],W),Object(p.C)(r,t[4],s,U)),(!o||8&s&&n!==(n=t[3].class))&&Object(p.h)(e,"class",n)},i:function(t){o||(Object(p.ib)(i,t),o=!0)},o:function(t){Object(p.jb)(i,t),o=!1},d:function(n){n&&Object(p.w)(e),i&&i.d(n),t[6](null)}};return Object(p.x)("SvelteRegisterBlock",{block:s,id:K.name,type:"if",source:"(34:0) {#if editor}",ctx:t}),s}function F(t){let e,n,o=t[0]&&K(t);const r={c:function(){o&&o.c(),e=Object(p.z)()},l:function(t){o&&o.l(t),e=Object(p.z)()},m:function(t,r){o&&o.m(t,r),Object(p.K)(t,e,r),n=!0},p:function(t,[n]){t[0]?o?(o.p(t,n),Object(p.ib)(o,1)):(o=K(t),o.c(),Object(p.ib)(o,1),o.m(e.parentNode,e)):o&&(Object(p.H)(),Object(p.jb)(o,1,1,()=>{o=null}),Object(p.k)())},i:function(t){n||(Object(p.ib)(o),n=!0)},o:function(t){Object(p.jb)(o),n=!1},d:function(t){o&&o.d(t),t&&Object(p.w)(e)}};return Object(p.x)("SvelteRegisterBlock",{block:r,id:F.name,type:"component",source:"",ctx:t}),r}function J(t,e,n){let r,{editor:i}=e,s=!1;Object(h.d)(async()=>{var t;i&&(await Object(h.f)(),i.registerPlugin((t={editor:i,element:r},new o.Plugin({key:new o.PluginKey("menu_bar"),view:function(e){return new q({editorView:e,options:t})}}))),n(2,s=i.focused),i.on("focus",()=>{n(2,s=!0)}),i.on("menubar:focusUpdate",t=>{n(2,s=t)}))});let{$$slots:c={},$$scope:u}=e;return t.$set=t=>{n(3,e=Object(p.f)(Object(p.f)({},e),Object(p.A)(t))),"editor"in t&&n(0,i=t.editor),"$$scope"in t&&n(4,u=t.$$scope)},t.$capture_state=()=>({editor:i,el:r,focused:s}),t.$inject_state=t=>{n(3,e=Object(p.f)(Object(p.f)({},e),t)),"editor"in e&&n(0,i=t.editor),"el"in e&&n(1,r=t.el),"focused"in e&&n(2,s=t.focused)},e=Object(p.A)(e),[i,r,s,e,u,c,function(t){p.i[t?"unshift":"push"](()=>{n(1,r=t)})}]}class G extends p.b{constructor(t){super(t),Object(p.I)(this,t,J,F,p.W,{editor:0}),Object(p.x)("SvelteRegisterComponent",{component:this,tagName:"EditorMenuBar",options:t,id:F.name});const{ctx:e}=this.$$,n=t.props||{};void 0!==e[0]||"editor"in n||console.warn("<EditorMenuBar> was created without expected prop 'editor'")}get editor(){throw new Error("<EditorMenuBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editor(t){throw new Error("<EditorMenuBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Z(t,e,n){var o=document.createRange();return o.setEnd(t,null==n?t.nodeValue.length:n),o.setStart(t,e||0),o}function X(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function Y(t,e){var n,o,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.docView.domFromPos(e),s=i.node,c=i.offset;if(3===s.nodeType)r&&c<s.nodeValue.length?(o=X(Z(s,c-1,c),-1),n="right"):c<s.nodeValue.length&&(o=X(Z(s,c,c+1),-1),n="left");else if(s.firstChild){if(c<s.childNodes.length){var u=s.childNodes[c];o=X(3===u.nodeType?Z(u):u,-1),n="left"}if((!o||o.top===o.bottom)&&c){var a=s.childNodes[c-1];o=X(3===a.nodeType?Z(a):a,1),n="right"}}else o=s.getBoundingClientRect(),n="left";var l=o[n];return{top:o.top,bottom:o.bottom,left:l,right:l}}var Q=function(){function t(e){var n=this,o=e.options,r=e.editorView;v(this,t),this.options=k({},{element:null,keepInBounds:!0,onUpdate:function(){return!1}},{},o),this.editorView=r,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("focus",(function(t){var e=t.view;n.update(e)})),this.options.editor.on("blur",(function(t){var e=t.event;n.preventHide?n.preventHide=!1:n.hide(e)}))}return g(t,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"update",value:function(t,e){var n=t.state;if(!(t.composing||e&&e.doc.eq(n.doc)&&e.selection.eq(n.selection)))if(n.selection.empty)this.hide();else{var o=n.selection,r=o.from,i=o.to,s=Y(t,r),c=Y(t,i,!0),u=this.options.element.offsetParent;if(u){var a=u.getBoundingClientRect(),l=this.options.element.getBoundingClientRect(),d=(s.left+c.left)/2-a.left;this.left=Math.round(this.options.keepInBounds?Math.min(a.width-l.width/2,Math.max(d,l.width/2)):d),this.bottom=Math.round(a.bottom-s.top),this.top=Math.round(c.bottom-a.top),this.isActive=!0,this.sendUpdate()}else this.hide()}}},{key:"sendUpdate",value:function(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}},{key:"hide",value:function(t){t&&t.relatedTarget&&this.options.element.parentNode.contains(t.relatedTarget)||(this.isActive=!1,this.sendUpdate())}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler)}}]),t}();const tt=t=>({focused:1&t,focus:1&t,commands:1&t,isActive:1&t,getMarkAttrs:1&t,menu:4&t}),et=t=>({focused:t[0].view.focused,focus:t[0].focus,commands:t[0].commands,isActive:t[0].isActive,getMarkAttrs:t[0].getMarkAttrs.bind(t[0]),menu:t[2]});function nt(t){let e,n,o;const r=t[7].default,i=Object(p.s)(r,t,t[6],et),s={c:function(){e=Object(p.y)("div"),i&&i.c(),this.h()},l:function(t){e=Object(p.n)(t,"DIV",{class:!0});var n=Object(p.l)(e);i&&i.l(n),n.forEach(p.w),this.h()},h:function(){Object(p.h)(e,"class",n=t[3].class),Object(p.c)(e,"packages/tiptap-svelte/src/Components/EditorMenuBubble.svelte",44,2,991)},m:function(n,r){Object(p.K)(n,e,r),i&&i.m(e,null),t[8](e),o=!0},p:function(t,s){i&&i.p&&69&s&&i.p(Object(p.D)(r,t,t[6],et),Object(p.C)(r,t[6],s,tt)),(!o||8&s&&n!==(n=t[3].class))&&Object(p.h)(e,"class",n)},i:function(t){o||(Object(p.ib)(i,t),o=!0)},o:function(t){Object(p.jb)(i,t),o=!1},d:function(n){n&&Object(p.w)(e),i&&i.d(n),t[8](null)}};return Object(p.x)("SvelteRegisterBlock",{block:s,id:nt.name,type:"if",source:"(44:0) {#if editor}",ctx:t}),s}function ot(t){let e,n,o=t[0]&&nt(t);const r={c:function(){o&&o.c(),e=Object(p.z)()},l:function(t){o&&o.l(t),e=Object(p.z)()},m:function(t,r){o&&o.m(t,r),Object(p.K)(t,e,r),n=!0},p:function(t,[n]){t[0]?o?(o.p(t,n),Object(p.ib)(o,1)):(o=nt(t),o.c(),Object(p.ib)(o,1),o.m(e.parentNode,e)):o&&(Object(p.H)(),Object(p.jb)(o,1,1,()=>{o=null}),Object(p.k)())},i:function(t){n||(Object(p.ib)(o),n=!0)},o:function(t){Object(p.jb)(o),n=!1},d:function(t){o&&o.d(t),t&&Object(p.w)(e)}};return Object(p.x)("SvelteRegisterBlock",{block:r,id:ot.name,type:"component",source:"",ctx:t}),r}function rt(t,e,n){let{editor:r}=e;let i,s={isActive:!1,left:0,bottom:0};const c=Object(h.a)();Object(h.d)(async()=>{var t;r&&(await Object(h.f)(),r.registerPlugin((t={editor:r,element:i,keepInBounds:!0,onUpdate:t=>{t.isActive&&!1===s.isActive?c("show",t):t.isActive||!0!==s.isActive||c("hide",t),n(2,s=t)}},new o.Plugin({key:new o.PluginKey("menu_bubble"),view:function(e){return new Q({editorView:e,options:t})}}))))}),Object(h.c)(()=>{r.unregisterPlugin("menu_bubble")});let{$$slots:u={},$$scope:a}=e;return t.$set=t=>{n(3,e=Object(p.f)(Object(p.f)({},e),Object(p.A)(t))),"editor"in t&&n(0,r=t.editor),"$$scope"in t&&n(6,a=t.$$scope)},t.$capture_state=()=>({editor:r,el:i,menu:s}),t.$inject_state=t=>{n(3,e=Object(p.f)(Object(p.f)({},e),t)),"editor"in e&&n(0,r=t.editor),"el"in e&&n(1,i=t.el),"menu"in e&&n(2,s=t.menu)},e=Object(p.A)(e),[r,i,s,e,!0,c,a,u,function(t){p.i[t?"unshift":"push"](()=>{n(1,i=t)})}]}class it extends p.b{constructor(t){super(t),Object(p.I)(this,t,rt,ot,p.W,{editor:0,keepInBounds:4}),Object(p.x)("SvelteRegisterComponent",{component:this,tagName:"EditorMenuBubble",options:t,id:ot.name});const{ctx:e}=this.$$,n=t.props||{};void 0!==e[0]||"editor"in n||console.warn("<EditorMenuBubble> was created without expected prop 'editor'")}get editor(){throw new Error("<EditorMenuBubble>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editor(t){throw new Error("<EditorMenuBubble>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get keepInBounds(){return this.$$.ctx[4]}set keepInBounds(t){throw new Error("<EditorMenuBubble>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var st=function(){function t(e){var n=this,o=e.options,r=e.editorView;v(this,t),this.options=k({},{resizeObserver:!0,element:null,onUpdate:function(){return!1}},{},o),this.preventHide=!1,this.editorView=r,this.isActive=!1,this.top=0,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("focus",(function(t){var e=t.view;n.update(e)})),this.options.editor.on("blur",(function(t){var e=t.event;n.preventHide?n.preventHide=!1:n.hide(e)})),this.options.resizeObserver&&window.ResizeObserver&&(this.resizeObserver=new ResizeObserver((function(){n.isActive&&n.update(n.editorView)})),this.resizeObserver.observe(this.editorView.dom))}return g(t,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"update",value:function(t,e){var n=t.state;if(!(e&&e.doc.eq(n.doc)&&e.selection.eq(n.selection)))if(n.selection.empty){var o=t.domAtPos(n.selection.anchor);if("<br>"===o.node.innerHTML&&"P"===o.node.tagName&&o.node.parentNode===t.dom){var r=this.options.element.offsetParent;if(r){var i=r.getBoundingClientRect(),s=t.coordsAtPos(n.selection.anchor).top-i.top;this.isActive=!0,this.top=s,this.sendUpdate()}else this.hide()}else this.hide()}else this.hide()}},{key:"sendUpdate",value:function(){this.options.onUpdate({isActive:this.isActive,top:this.top})}},{key:"hide",value:function(t){t&&t.relatedTarget&&this.options.element.parentNode.contains(t.relatedTarget)||(this.isActive=!1,this.sendUpdate())}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.resizeObserver&&this.resizeObserver.unobserve(this.editorView.dom)}}]),t}();const ct=t=>({focused:1&t,focus:1&t,commands:1&t,isActive:1&t,getMarkAttrs:1&t,menu:4&t}),ut=t=>({focused:t[0].view.focused,focus:t[0].focus,commands:t[0].commands,isActive:t[0].isActive,getMarkAttrs:t[0].getMarkAttrs.bind(t[0]),menu:t[2]});function at(t){let e,n,o;const r=t[6].default,i=Object(p.s)(r,t,t[5],ut),s={c:function(){e=Object(p.y)("div"),i&&i.c(),this.h()},l:function(t){e=Object(p.n)(t,"DIV",{class:!0});var n=Object(p.l)(e);i&&i.l(n),n.forEach(p.w),this.h()},h:function(){Object(p.h)(e,"class",n=t[3].class),Object(p.c)(e,"packages/tiptap-svelte/src/Components/EditorFloatingMenu.svelte",42,2,939)},m:function(n,r){Object(p.K)(n,e,r),i&&i.m(e,null),t[7](e),o=!0},p:function(t,s){i&&i.p&&37&s&&i.p(Object(p.D)(r,t,t[5],ut),Object(p.C)(r,t[5],s,ct)),(!o||8&s&&n!==(n=t[3].class))&&Object(p.h)(e,"class",n)},i:function(t){o||(Object(p.ib)(i,t),o=!0)},o:function(t){Object(p.jb)(i,t),o=!1},d:function(n){n&&Object(p.w)(e),i&&i.d(n),t[7](null)}};return Object(p.x)("SvelteRegisterBlock",{block:s,id:at.name,type:"if",source:"(42:0) {#if editor}",ctx:t}),s}function lt(t){let e,n,o=t[0]&&at(t);const r={c:function(){o&&o.c(),e=Object(p.z)()},l:function(t){o&&o.l(t),e=Object(p.z)()},m:function(t,r){o&&o.m(t,r),Object(p.K)(t,e,r),n=!0},p:function(t,[n]){t[0]?o?(o.p(t,n),Object(p.ib)(o,1)):(o=at(t),o.c(),Object(p.ib)(o,1),o.m(e.parentNode,e)):o&&(Object(p.H)(),Object(p.jb)(o,1,1,()=>{o=null}),Object(p.k)())},i:function(t){n||(Object(p.ib)(o),n=!0)},o:function(t){Object(p.jb)(o),n=!1},d:function(t){o&&o.d(t),t&&Object(p.w)(e)}};return Object(p.x)("SvelteRegisterBlock",{block:r,id:lt.name,type:"component",source:"",ctx:t}),r}function dt(t,e,n){let r,{editor:i}=e,s={isActive:!1,left:0,bottom:0};const c=Object(h.a)();Object(h.d)(async()=>{var t;i&&(await Object(h.f)(),i.registerPlugin((t={editor:i,element:r,onUpdate:t=>{t.isActive&&!1===s.isActive?c("show",t):t.isActive||!0!==s.isActive||c("hide",t),n(2,s=t)}},new o.Plugin({key:new o.PluginKey("floating_menu"),view:function(e){return new st({editorView:e,options:t})}}))))}),Object(h.c)(()=>{i.unregisterPlugin("floating_menu")});let{$$slots:u={},$$scope:a}=e;return t.$set=t=>{n(3,e=Object(p.f)(Object(p.f)({},e),Object(p.A)(t))),"editor"in t&&n(0,i=t.editor),"$$scope"in t&&n(5,a=t.$$scope)},t.$capture_state=()=>({editor:i,el:r,menu:s}),t.$inject_state=t=>{n(3,e=Object(p.f)(Object(p.f)({},e),t)),"editor"in e&&n(0,i=t.editor),"el"in e&&n(1,r=t.el),"menu"in e&&n(2,s=t.menu)},e=Object(p.A)(e),[i,r,s,e,c,a,u,function(t){p.i[t?"unshift":"push"](()=>{n(1,r=t)})}]}class ft extends p.b{constructor(t){super(t),Object(p.I)(this,t,dt,lt,p.W,{editor:0}),Object(p.x)("SvelteRegisterComponent",{component:this,tagName:"EditorFloatingMenu",options:t,id:lt.name});const{ctx:e}=this.$$,n=t.props||{};void 0!==e[0]||"editor"in n||console.warn("<EditorFloatingMenu> was created without expected prop 'editor'")}get editor(){throw new Error("<EditorFloatingMenu>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editor(t){throw new Error("<EditorFloatingMenu>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}},11:function(t,e,n){"use strict";n.d(e,"a",(function(){return P})),n.d(e,"b",(function(){return Q})),n.d(e,"c",(function(){return S})),n.d(e,"d",(function(){return tt})),n.d(e,"e",(function(){return C})),n.d(e,"f",(function(){return _})),n.d(e,"g",(function(){return it})),n.d(e,"h",(function(){return st})),n.d(e,"i",(function(){return D})),n.d(e,"j",(function(){return R})),n.d(e,"k",(function(){return ct})),n.d(e,"l",(function(){return $})),n.d(e,"m",(function(){return N})),n.d(e,"n",(function(){return et})),n.d(e,"o",(function(){return nt})),n.d(e,"p",(function(){return B})),n.d(e,"q",(function(){return z})),n.d(e,"r",(function(){return V})),n.d(e,"s",(function(){return ut})),n.d(e,"t",(function(){return at})),n.d(e,"u",(function(){return ot})),n.d(e,"v",(function(){return q})),n.d(e,"w",(function(){return W})),n.d(e,"x",(function(){return U})),n.d(e,"y",(function(){return K})),n.d(e,"z",(function(){return X})),n.d(e,"A",(function(){return Y})),n.d(e,"B",(function(){return lt})),n.d(e,"C",(function(){return rt}));var o=n(10),r=n(95),i=n(59),s=n.n(i),c=n(63),u=n(29),a=n(9),l=n(33),d=n(0),f=n(39),p=n(15),h=n(64),m=n(96);
/*!
    * tiptap-svelte-extensions v0.0.1
    * (c) 2020 Scrumpy UG (limited liability)
    * @license MIT
    */
function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var P=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(r.s)(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Ctrl->":Object(r.s)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.u)(/^\s*>\s$/,e)]}},{key:"name",get:function(){return"blockquote"}},{key:"schema",get:function(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}}}}]),e}(o.i),S=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(r.q)(e,n.nodes.list_item)}}},{key:"keys",value:function(t){var e=t.type,n=t.schema;return{"Shift-Ctrl-8":Object(r.q)(e,n.nodes.list_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.u)(/^\s*([-+*])\s$/,e)]}},{key:"name",get:function(){return"bullet_list"}},{key:"schema",get:function(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}}}}]),e}(o.i),C=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(r.p)(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Shift-Ctrl-\\":Object(r.k)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.o)(/^```$/,e)]}},{key:"name",get:function(){return"code_block"}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}}}}]),e}(o.i);function T(t){var e=t.doc,n=t.name,o=[],r=Object(u.findBlockNodes)(e).filter((function(t){return t.node.type.name===n}));return r.forEach((function(t){var e=t.pos+1;(function t(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?t(n):n)}),[])})(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map((function(e){var o=[].concat(M(n),M(e.properties?e.properties.className:[]));return e.children?t(e.children,o):{text:e.value,classes:o}}))}(s.a.highlightAuto(t.node.textContent).value)).map((function(t){var n=e,o=n+t.text.length;return e=o,k({},t,{from:n,to:o})})).forEach((function(t){var e=c.a.inline(t.from,t.to,{class:t.classes.join(" ")});o.push(e)}))})),c.b.create(e,o)}var _=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),t=A(this,j(e).call(this,n));try{Object.entries(t.options.languages).forEach((function(t){var e=E(t,2),n=e[0],o=e[1];s.a.registerLanguage(n,o)}))}catch(t){throw new Error("Invalid syntax highlight definitions: define at least one highlight.js language mapping")}return t}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(r.p)(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Shift-Ctrl-\\":Object(r.k)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.o)(/^```$/,e)]}},{key:"name",get:function(){return"code_block"}},{key:"defaultOptions",get:function(){return{languages:{}}}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}}}},{key:"plugins",get:function(){return[(t={name:this.name},e=t.name,new o.j({name:new o.k("highlight"),state:{init:function(t,n){return T({doc:n.doc,name:e})},apply:function(t,n,o,r){var i=r.selection.$head.parent.type.name,s=o.selection.$head.parent.type.name;return t.docChanged&&[i,s].includes(e)?T({doc:t.doc,name:e}):n.map(t.mapping,t.doc)}},props:{decorations:function(t){return this.getState(t)}}}))];var t,e}}]),e}(o.i),D=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type,n=Object(r.a)(r.b,(function(t,n){return n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0}));return{"Mod-Enter":n,"Shift-Enter":n}}},{key:"name",get:function(){return"hard_break"}},{key:"schema",get:function(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}}}]),e}(o.i),R=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(t){return Object(r.p)(e,n.nodes.paragraph,t)}}},{key:"keys",value:function(t){var e=t.type;return this.options.levels.reduce((function(t,n){return k({},t,{},b({},"Shift-Ctrl-".concat(n),Object(r.k)(e,{level:n})))}),{})}},{key:"inputRules",value:function(t){var e=t.type;return this.options.levels.map((function(t){return Object(r.o)(new RegExp("^(#{1,".concat(t,"})\\s$")),e,(function(){return{level:t}}))}))}},{key:"name",get:function(){return"heading"}},{key:"defaultOptions",get:function(){return{levels:[1,2,3,4,5,6]}}},{key:"schema",get:function(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(t){return{tag:"h".concat(t),attrs:{level:t}}})),toDOM:function(t){return["h".concat(t.attrs.level),0]}}}}]),e}(o.i),$=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type;return function(){return function(t,n){return n(t.tr.replaceSelectionWith(e.create()))}}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.g)(/^(?:---|___\s|\*\*\*\s)$/,e)]}},{key:"name",get:function(){return"horizontal_rule"}},{key:"schema",get:function(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}}}]),e}(o.i),I=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,N=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,o){var r=n.selection,i=r.$cursor?r.$cursor.pos:r.$to.pos,s=e.create(t);o(n.tr.insert(i,s))}}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.g)(I,e,(function(t){var e=E(t,4),n=e[1];return{src:e[2],alt:n,title:e[3]}}))]}},{key:"name",get:function(){return"image"}},{key:"schema",get:function(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}}}},{key:"plugins",get:function(){return[new o.j({props:{handleDOMEvents:{drop:function(t,e){if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){var n=Array.from(e.dataTransfer.files).filter((function(t){return/image/i.test(t.type)}));if(0!==n.length){e.preventDefault();var o=t.state.schema,r=t.posAtCoords({left:e.clientX,top:e.clientY});n.forEach((function(e){var n=new FileReader;n.onload=function(e){var n=o.nodes.image.create({src:e.target.result}),i=t.state.tr.insert(r.pos,n);t.dispatch(i)},n.readAsDataURL(e)}))}}}}}})]}}]),e}(o.i),B=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type;return{Enter:Object(r.m)(e),Tab:Object(r.l)(e),"Shift-Tab":Object(r.d)(e)}}},{key:"name",get:function(){return"list_item"}},{key:"schema",get:function(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}}}}]),e}(o.i);function H(t){var e=t.matcher,n=void 0===e?{char:"@",allowSpaces:!1,startOfLine:!1}:e,o=t.appendText,i=void 0===o?null:o,s=t.suggestionClass,u=void 0===s?"suggestion":s,l=t.command,d=void 0===l?function(){return!1}:l,f=t.items,p=void 0===f?[]:f,h=t.onEnter,m=void 0===h?function(){return!1}:h,v=t.onChange,y=void 0===v?function(){return!1}:v,g=t.onExit,b=void 0===g?function(){return!1}:g,O=t.onKeyDown,w=void 0===O?function(){return!1}:O,j=t.onFilter,x=void 0===j?function(t,e){return e?t.filter((function(t){return JSON.stringify(t).toLowerCase().includes(e.toLowerCase())})):t}:j;return new a.Plugin({key:new a.PluginKey("suggestions"),view:function(){var t=this;return{update:function(e,n){var o=t.key.getState(n),s=t.key.getState(e.state),c=o.active&&s.active&&o.range.from!==s.range.from,u=!o.active&&s.active,a=o.active&&!s.active,l=u||c,f=!u&&!a&&o.query!==s.query&&!c,h=a||c;if(l||f||h){var v=h?o:s,g=document.querySelector('[data-decoration-id="'.concat(v.decorationId,'"]')),O=g?{getBoundingClientRect:function(){return g.getBoundingClientRect()},clientWidth:g.clientWidth,clientHeight:g.clientHeight}:null,k={view:e,range:v.range,query:v.query,text:v.text,decorationNode:g,virtualNode:O,items:x(Array.isArray(p)?p:p(),v.query),command:function(t){var n=t.range,o=t.attrs;d({range:n,attrs:o,schema:e.state.schema})(e.state,e.dispatch,e),i&&Object(r.c)(i)(e.state,e.dispatch,e)}};h&&b(k),f&&y(k),l&&m(k)}}}},state:{init:function(){return{active:!1,range:{},query:null,text:null}},apply:function(t,e){var o,r,i,s,c,u,a,l=t.selection,d=k({},e);if(l.from===l.to){(l.from<e.range.from||l.from>e.range.to)&&(d.active=!1);var f=l.$from,p=(r=(o=n).char,i=void 0===r?"@":r,s=o.allowSpaces,c=void 0!==s&&s,u=o.startOfLine,a=void 0!==u&&u,function(t){if(t.depth<=0)return!1;for(var e,n="\\".concat(i),o=new RegExp("\\s".concat(n,"$")),r=a?"^":"",s=c?new RegExp("".concat(r).concat(n,".*?(?=\\s").concat(n,"|$)"),"gm"):new RegExp("".concat(r,"(?:^)?").concat(n,"[^\\s").concat(n,"]*"),"gm"),u=t.before(),l=t.end(),d=t.doc.textBetween(u,l,"\0","\0"),f=s.exec(d);null!==f;){var p=f.input.slice(Math.max(0,f.index-1),f.index);if(/^[\s\0]?$/.test(p)){var h=f.index+t.start(),m=h+f[0].length;c&&o.test(d.slice(m-1,m+1))&&(f[0]+=" ",m+=1),h<t.pos&&m>=t.pos&&(e={range:{from:h,to:m},query:f[0].slice(i.length),text:f[0]})}f=s.exec(d)}return e})(f),h=(Math.random()+1).toString(36).substr(2,5);p?(d.active=!0,d.decorationId=e.decorationId?e.decorationId:h,d.range=p.range,d.query=p.query,d.text=p.text):d.active=!1}else d.active=!1;return d.active||(d.decorationId=null,d.range={},d.query=null,d.text=null),d}},props:{handleKeyDown:function(t,e){var n=this.getState(t.state),o=n.active,r=n.range;return!!o&&w({view:t,event:e,range:r})},decorations:function(t){var e=this.getState(t),n=e.active,o=e.range,r=e.decorationId;return n?c.b.create(t.doc,[c.a.inline(o.from,o.to,{nodeName:"span",class:u,"data-decoration-id":r})]):null}}})}var z=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=this,n=t.schema;return function(t){return Object(r.j)(null,n.nodes[e.name],t)}}},{key:"name",get:function(){return"mention"}},{key:"defaultOptions",get:function(){return{matcher:{char:"@",allowSpaces:!1,startOfLine:!1},mentionClass:"mention",suggestionClass:"mention-suggestion"}}},{key:"schema",get:function(){var t=this;return{attrs:{id:{},label:{}},group:"inline",inline:!0,selectable:!1,atom:!0,toDOM:function(e){return["span",{class:t.options.mentionClass,"data-mention-id":e.attrs.id},"".concat(t.options.matcher.char).concat(e.attrs.label)]},parseDOM:[{tag:"span[data-mention-id]",getAttrs:function(e){return{id:e.getAttribute("data-mention-id"),label:e.innerText.split(t.options.matcher.char).join("")}}}]}}},{key:"plugins",get:function(){var t=this;return[H({command:function(e){var n=e.range,o=e.attrs,i=e.schema;return Object(r.j)(n,i.nodes[t.name],o)},appendText:" ",matcher:this.options.matcher,items:this.options.items,onEnter:this.options.onEnter,onChange:this.options.onChange,onExit:this.options.onExit,onKeyDown:this.options.onKeyDown,onFilter:this.options.onFilter,suggestionClass:this.options.suggestionClass})]}}]),e}(o.i),V=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(r.q)(e,n.nodes.list_item)}}},{key:"keys",value:function(t){var e=t.type,n=t.schema;return{"Shift-Ctrl-9":Object(r.q)(e,n.nodes.list_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.u)(/^(\d+)\.\s$/,e,(function(t){return{order:+t[1]}}),(function(t,e){return e.childCount+e.attrs.order===+t[1]}))]}},{key:"name",get:function(){return"ordered_list"}},{key:"schema",get:function(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM:function(t){return 1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}}}]),e}(o.i),L=Object(l.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function(t){return t.style.backgroundColor||null},setDOMAttr:function(t,e){if(t){var n={style:"".concat(e.style||"","background-color: ").concat(t,";")};Object.assign(e,n)}}}}}),q=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.schema;return{createTable:function(t){var n=t.rowsCount,o=t.colsCount,r=t.withHeaderRow;return function(t,i){var s=t.tr.selection.anchor+1,c=Object(u.createTable)(e,n,o,r),l=t.tr.replaceSelectionWith(c).scrollIntoView(),d=l.doc.resolve(s);l.setSelection(a.TextSelection.near(d)),i(l)}},addColumnBefore:function(){return l.addColumnBefore},addColumnAfter:function(){return l.addColumnAfter},deleteColumn:function(){return l.deleteColumn},addRowBefore:function(){return l.addRowBefore},addRowAfter:function(){return l.addRowAfter},deleteRow:function(){return l.deleteRow},deleteTable:function(){return l.deleteTable},toggleCellMerge:function(){return function(t,e){Object(l.mergeCells)(t,e)||Object(l.splitCell)(t,e)}},mergeCells:function(){return l.mergeCells},splitCell:function(){return l.splitCell},toggleHeaderColumn:function(){return l.toggleHeaderColumn},toggleHeaderRow:function(){return l.toggleHeaderRow},toggleHeaderCell:function(){return l.toggleHeaderCell},setCellAttr:function(){return l.setCellAttr},fixTables:function(){return l.fixTables}}}},{key:"keys",value:function(){return{Tab:Object(l.goToNextCell)(1),"Shift-Tab":Object(l.goToNextCell)(-1)}}},{key:"name",get:function(){return"table"}},{key:"defaultOptions",get:function(){return{resizable:!1}}},{key:"schema",get:function(){return L.table}},{key:"plugins",get:function(){return[].concat(M(this.options.resizable?[Object(l.columnResizing)()]:[]),[Object(l.tableEditing)()])}}]),e}(o.i),U=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"table_header"}},{key:"schema",get:function(){return L.table_header}}]),e}(o.i),W=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"table_cell"}},{key:"schema",get:function(){return L.table_cell}}]),e}(o.i),K=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"table_row"}},{key:"schema",get:function(){return L.table_row}}]),e}(o.i);const F="packages/tiptap-svelte-extensions/src/nodes/TodoItem.svelte";function J(t){let e,n,o,r,i,s,c,u;const a={c:function(){e=Object(d.y)("li"),n=Object(d.y)("span"),o=Object(d.bb)(),r=Object(d.y)("div"),this.h()},l:function(t){e=Object(d.n)(t,"LI",{"data-type":!0,"data-done":!0,"data-drag-handle":!0});var i=Object(d.l)(e);n=Object(d.n)(i,"SPAN",{class:!0,contenteditable:!0}),Object(d.l)(n).forEach(d.w),o=Object(d.o)(i),r=Object(d.n)(i,"DIV",{class:!0,contenteditable:!0}),Object(d.l)(r).forEach(d.w),i.forEach(d.w),this.h()},h:function(){Object(d.h)(n,"class","todo-checkbox"),Object(d.h)(n,"contenteditable","false"),Object(d.c)(n,F,24,2,582),Object(d.h)(r,"class","todo-content content-xx"),Object(d.h)(r,"contenteditable",i=t[2].editable),Object(d.c)(r,F,25,2,659),Object(d.h)(e,"data-type",s=t[1].type.name),Object(d.h)(e,"data-done",c=t[1].attrs.done),Object(d.h)(e,"data-drag-handle",""),Object(d.c)(e,F,23,0,503)},m:function(i,s){Object(d.K)(i,e,s),Object(d.e)(e,n),Object(d.e)(e,o),Object(d.e)(e,r),t[10](r),u=Object(d.N)(n,"click",t[3],!1,!1,!1)},p:function(t,[n]){4&n&&i!==(i=t[2].editable)&&Object(d.h)(r,"contenteditable",i),2&n&&s!==(s=t[1].type.name)&&Object(d.h)(e,"data-type",s),2&n&&c!==(c=t[1].attrs.done)&&Object(d.h)(e,"data-done",c)},i:d.P,o:d.P,d:function(n){n&&Object(d.w)(e),t[10](null),u()}};return Object(d.x)("SvelteRegisterBlock",{block:a,id:J.name,type:"component",source:"",ctx:t}),a}function G(t,e,n){let{node:o}=e,{updateAttrs:r}=e,{view:i}=e,{editor:s}=e,{getPos:c}=e,{decorations:u}=e,{selected:a}=e,{options:l}=e,{content:f}=e;const p=["node","updateAttrs","view","editor","getPos","decorations","selected","options","content"];return Object.keys(e).forEach(t=>{~p.indexOf(t)||"$$"===t.slice(0,2)||console.warn(`<TodoItem> was created with unknown prop '${t}'`)}),t.$set=t=>{"node"in t&&n(1,o=t.node),"updateAttrs"in t&&n(4,r=t.updateAttrs),"view"in t&&n(2,i=t.view),"editor"in t&&n(5,s=t.editor),"getPos"in t&&n(6,c=t.getPos),"decorations"in t&&n(7,u=t.decorations),"selected"in t&&n(8,a=t.selected),"options"in t&&n(9,l=t.options),"content"in t&&n(0,f=t.content)},t.$capture_state=()=>({node:o,updateAttrs:r,view:i,editor:s,getPos:c,decorations:u,selected:a,options:l,content:f}),t.$inject_state=t=>{"node"in t&&n(1,o=t.node),"updateAttrs"in t&&n(4,r=t.updateAttrs),"view"in t&&n(2,i=t.view),"editor"in t&&n(5,s=t.editor),"getPos"in t&&n(6,c=t.getPos),"decorations"in t&&n(7,u=t.decorations),"selected"in t&&n(8,a=t.selected),"options"in t&&n(9,l=t.options),"content"in t&&n(0,f=t.content)},[f,o,i,function(){r({done:!o.attrs.done})},r,s,c,u,a,l,function(t){d.i[t?"unshift":"push"](()=>{n(0,f=t)})}]}class Z extends d.b{constructor(t){super(t),Object(d.I)(this,t,G,J,d.W,{node:1,updateAttrs:4,view:2,editor:5,getPos:6,decorations:7,selected:8,options:9,content:0}),Object(d.x)("SvelteRegisterComponent",{component:this,tagName:"TodoItem",options:t,id:J.name});const{ctx:e}=this.$$,n=t.props||{};void 0!==e[1]||"node"in n||console.warn("<TodoItem> was created without expected prop 'node'"),void 0!==e[4]||"updateAttrs"in n||console.warn("<TodoItem> was created without expected prop 'updateAttrs'"),void 0!==e[2]||"view"in n||console.warn("<TodoItem> was created without expected prop 'view'"),void 0!==e[5]||"editor"in n||console.warn("<TodoItem> was created without expected prop 'editor'"),void 0!==e[6]||"getPos"in n||console.warn("<TodoItem> was created without expected prop 'getPos'"),void 0!==e[7]||"decorations"in n||console.warn("<TodoItem> was created without expected prop 'decorations'"),void 0!==e[8]||"selected"in n||console.warn("<TodoItem> was created without expected prop 'selected'"),void 0!==e[9]||"options"in n||console.warn("<TodoItem> was created without expected prop 'options'"),void 0!==e[0]||"content"in n||console.warn("<TodoItem> was created without expected prop 'content'")}get node(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set node(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get updateAttrs(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set updateAttrs(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get view(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set view(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editor(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editor(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get getPos(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set getPos(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get decorations(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set decorations(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selected(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selected(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get options(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set options(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get content(){throw new Error("<TodoItem>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set content(t){throw new Error("<TodoItem>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var X=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type;return{Enter:Object(r.n)(e),Tab:this.options.nested?Object(r.l)(e):function(){},"Shift-Tab":Object(r.d)(e)}}},{key:"name",get:function(){return"todo_item"}},{key:"defaultOptions",get:function(){return{nested:!1}}},{key:"view",get:function(){return Z}},{key:"schema",get:function(){var t=this;return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:function(e){var n=e.attrs.done;return["li",{"data-type":t.name,"data-done":n.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:function(t){return{done:"true"===t.getAttribute("data-done")}}}]}}}]),e}(o.i),Y=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(r.q)(e,n.nodes.todo_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.u)(/^\s*(\[ \])\s$/,e)]}},{key:"name",get:function(){return"todo_list"}},{key:"schema",get:function(){var t=this;return{group:"block",content:"todo_item+",toDOM:function(){return["ul",{"data-type":t.name},0]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}}]),e}(o.i),Q=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-b":Object(r.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(r.r)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.e)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(r.f)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}},{key:"name",get:function(){return"bold"}},{key:"schema",get:function(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}}}}]),e}(o.h),tt=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-`":Object(r.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(r.r)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.e)(/(?:`)([^`]+)(?:`)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(r.f)(/(?:`)([^`]+)(?:`)/g,e)]}},{key:"name",get:function(){return"code"}},{key:"schema",get:function(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}}}}]),e}(o.h),et=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-i":Object(r.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(r.r)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.e)(/(?:^|[^_])(_([^_]+)_)$/,e),Object(r.e)(/(?:^|[^*])(\*([^*]+)\*)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(r.f)(/_([^_]+)_/g,e),Object(r.f)(/\*([^*]+)\*/g,e)]}},{key:"name",get:function(){return"italic"}},{key:"schema",get:function(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}}}}]),e}(o.h),nt=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return t.href?Object(r.t)(e,t):Object(r.i)(e)}}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(r.h)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,e,(function(t){return{href:t}}))]}},{key:"name",get:function(){return"link"}},{key:"defaultOptions",get:function(){return{openOnClick:!0}}},{key:"schema",get:function(){return{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href")}}}],toDOM:function(t){return["a",k({},t.attrs,{rel:"noopener noreferrer nofollow"}),0]}}}},{key:"plugins",get:function(){return this.options.openOnClick?[new o.j({props:{handleClick:function(t,e,n){var o=t.state.schema,r=Object(f.a)(t.state,o.marks.link);r.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(r.href))}}})]:[]}}]),e}(o.h),ot=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-d":Object(r.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(r.r)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(r.e)(/~([^~]+)~$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(r.f)(/~([^~]+)~/g,e)]}},{key:"name",get:function(){return"strike"}},{key:"schema",get:function(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(t){return"line-through"===t}}],toDOM:function(){return["s",0]}}}}]),e}(o.h),rt=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-u":Object(r.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(r.r)(e)}}},{key:"name",get:function(){return"underline"}},{key:"schema",get:function(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function(t){return"underline"===t}}],toDOM:function(){return["u",0]}}}}]),e}(o.h),it=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"init",value:function(){var t=this;this.getSendableSteps=this.debounce((function(e){var n=Object(h.d)(e);n&&t.options.onSendable({editor:t.editor,sendable:{version:n.version,steps:n.steps.map((function(t){return t.toJSON()})),clientID:n.clientID}})}),this.options.debounce),this.editor.on("transaction",(function(e){var n=e.state;t.getSendableSteps(n)}))}},{key:"debounce",value:function(t,e){var n;return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}}},{key:"name",get:function(){return"collaboration"}},{key:"defaultOptions",get:function(){var t=this;return{version:0,clientID:Math.floor(4294967295*Math.random()),debounce:250,onSendable:function(){},update:function(e){var n=e.steps,o=e.version,r=t.editor,i=r.state,s=r.view,c=r.schema;Object(h.b)(i)>o||s.dispatch(Object(h.c)(i,n.map((function(t){return p.c.fromJSON(c,t.step)})),n.map((function(t){return t.clientID}))))}}}},{key:"plugins",get:function(){return[Object(h.a)({version:this.options.version,clientID:this.options.clientID})]}}]),e}(o.g),st=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"focus"}},{key:"defaultOptions",get:function(){return{className:"has-focus",nested:!1}}},{key:"plugins",get:function(){var t=this;return[new o.j({props:{decorations:function(e){var n=e.doc,o=e.plugins,r=e.selection,i=o.find((function(t){return t.key.startsWith("editable$")})).props.editable()&&t.options.className,s=t.editor.focused,u=r.anchor,a=[];return!(!i||!s)&&(n.descendants((function(e,n){if(u>=n&&u<=n+e.nodeSize&&!e.isText){var o=c.a.node(n,n+e.nodeSize,{class:t.options.className});a.push(o)}return t.options.nested})),c.b.create(n,a))}}})]}}]),e}(o.g),ct=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"keys",value:function(){return{"Mod-z":m.d,"Mod-y":m.b,"Shift-Mod-z":m.b}}},{key:"commands",value:function(){return{undo:function(){return m.d},redo:function(){return m.b},undoDepth:function(){return m.e},redoDepth:function(){return m.c}}}},{key:"name",get:function(){return"history"}},{key:"defaultOptions",get:function(){return{depth:"",newGroupDelay:""}}},{key:"plugins",get:function(){return[Object(m.a)({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}}]),e}(o.g),ut=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"placeholder"}},{key:"defaultOptions",get:function(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",emptyNodeText:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0}}},{key:"update",get:function(){return function(t){t.updateState(t.state)}}},{key:"plugins",get:function(){var t=this;return[new o.j({props:{decorations:function(e){var n=e.doc,o=e.plugins,r=e.selection,i=o.find((function(t){return t.key.startsWith("editable$")})).props.editable()||!t.options.showOnlyWhenEditable,s=r.anchor,u=[],a=0===n.textContent.length;return!!i&&(n.descendants((function(e,n){var o=s>=n&&s<=n+e.nodeSize,r=0===e.content.size;if((o||!t.options.showOnlyCurrent)&&r){var i=[t.options.emptyNodeClass];a&&i.push(t.options.emptyEditorClass);var l=c.a.node(n,n+e.nodeSize,{class:i.join(" "),"data-empty-text":"function"==typeof t.options.emptyNodeText?t.options.emptyNodeText(e):t.options.emptyNodeText});u.push(l)}return!1})),c.b.create(n,u))}}})]}}]),e}(o.g),at=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v(this,e),(t=A(this,j(e).call(this,n))).results=[],t.searchTerm=null,t._updating=!1,t}return w(e,t),g(e,[{key:"commands",value:function(){var t=this;return{find:function(e){return t.find(e)},replace:function(e){return t.replace(e)},replaceAll:function(e){return t.replaceAll(e)},clearSearch:function(){return t.clear()}}}},{key:"_search",value:function(t){var e=this;this.results=[];var n=[],o=0;this.searchTerm&&(t.descendants((function(t,e){t.isText?n[o]?n[o]={text:n[o].text+t.text,pos:n[o].pos}:n[o]={text:t.text,pos:e}:o+=1})),n.forEach((function(t){for(var n,o=t.text,r=t.pos,i=e.findRegExp;(n=i.exec(o))&&""!==n[0];)e.results.push({from:r+n.index,to:r+n.index+n[0].length})})))}},{key:"replace",value:function(t){var e=this;return function(n,o){if(e.results[0]){var r=e.results[0],i=r.from,s=r.to;o(n.tr.insertText(t,i,s)),e.editor.commands.find(e.searchTerm)}}}},{key:"rebaseNextResult",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e+1;if(!this.results[o])return null;var r=this.results[e],i=r.from,s=r.to,c=s-i-t.length+n,u=this.results[o],a=u.from,l=u.to;return this.results[o]={to:l-c,from:a-c},c}},{key:"replaceAll",value:function(t){var e=this;return function(n,o){var r,i=n.tr;e.results.length&&(e.results.forEach((function(n,o){var s=n.from,c=n.to;i.insertText(t,s,c),r=e.rebaseNextResult(t,o,r)})),o(i),e.editor.commands.find(e.searchTerm))}}},{key:"find",value:function(t){var e=this;return function(n,o){e.searchTerm=e.options.disableRegex?t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"):t,e.updateView(n,o)}}},{key:"clear",value:function(){var t=this;return function(e,n){t.searchTerm=null,t.updateView(e,n)}}},{key:"updateView",value:function(t,e){var n=t.tr;this._updating=!0,e(n),this._updating=!1}},{key:"createDeco",value:function(t){return this._search(t),this.decorations?c.b.create(t,this.decorations):[]}},{key:"name",get:function(){return"search"}},{key:"defaultOptions",get:function(){return{autoSelectNext:!0,findClass:"find",searching:!1,caseSensitive:!1,disableRegex:!0,alwaysSearch:!1}}},{key:"findRegExp",get:function(){return RegExp(this.searchTerm,this.options.caseSensitive?"gu":"gui")}},{key:"decorations",get:function(){var t=this;return this.results.map((function(e){return c.a.inline(e.from,e.to,{class:t.options.findClass})}))}},{key:"plugins",get:function(){var t=this;return[new o.j({state:{init:function(){return c.b.empty},apply:function(e,n){return t._updating||t.options.searching||e.docChanged&&t.options.alwaysSearch?t.createDeco(e.doc):e.docChanged?n.map(e.mapping,e.doc):n}},props:{decorations:function(t){return this.getState(t)}}})]}}]),e}(o.g),lt=function(t){function e(){return v(this,e),A(this,j(e).apply(this,arguments))}return w(e,t),g(e,[{key:"name",get:function(){return"trailing_node"}},{key:"defaultOptions",get:function(){return{node:"paragraph",notAfter:["paragraph"]}}},{key:"plugins",get:function(){var t=this,e=new o.k(this.name),n=Object.entries(this.editor.schema.nodes).map((function(t){return E(t,2)[1]})).filter((function(e){return t.options.notAfter.includes(e.name)}));return[new o.j({key:e,view:function(){return{update:function(n){var o=n.state;if(e.getState(o)){var r=o.doc,i=o.schema,s=o.tr,c=i.nodes[t.options.node],u=s.insert(r.content.size,c.create());n.dispatch(u)}}}},state:{init:function(t,e){var o=e.tr.doc.lastChild;return!Object(f.c)({node:o,types:n})},apply:function(t,e){if(!t.docChanged)return e;var o=t.doc.lastChild;return!Object(f.c)({node:o,types:n})}}})]}}]),e}(o.g)}}]);